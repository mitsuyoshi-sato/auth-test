"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55";
exports.ids = ["vendor-chunks/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55"];
exports.modules = {

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/errors/index.js":
/*!***************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/errors/index.js ***!
  \***************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AccessTokenError: () => (/* binding */ AccessTokenError),\n/* harmony export */   AccessTokenErrorCode: () => (/* binding */ AccessTokenErrorCode),\n/* harmony export */   AccessTokenForConnectionError: () => (/* binding */ AccessTokenForConnectionError),\n/* harmony export */   AccessTokenForConnectionErrorCode: () => (/* binding */ AccessTokenForConnectionErrorCode),\n/* harmony export */   AuthorizationCodeGrantError: () => (/* binding */ AuthorizationCodeGrantError),\n/* harmony export */   AuthorizationCodeGrantRequestError: () => (/* binding */ AuthorizationCodeGrantRequestError),\n/* harmony export */   AuthorizationError: () => (/* binding */ AuthorizationError),\n/* harmony export */   BackchannelAuthenticationError: () => (/* binding */ BackchannelAuthenticationError),\n/* harmony export */   BackchannelAuthenticationNotSupportedError: () => (/* binding */ BackchannelAuthenticationNotSupportedError),\n/* harmony export */   BackchannelLogoutError: () => (/* binding */ BackchannelLogoutError),\n/* harmony export */   ConnectAccountError: () => (/* binding */ ConnectAccountError),\n/* harmony export */   ConnectAccountErrorCodes: () => (/* binding */ ConnectAccountErrorCodes),\n/* harmony export */   DPoPError: () => (/* binding */ DPoPError),\n/* harmony export */   DPoPErrorCode: () => (/* binding */ DPoPErrorCode),\n/* harmony export */   DiscoveryError: () => (/* binding */ DiscoveryError),\n/* harmony export */   InvalidConfigurationError: () => (/* binding */ InvalidConfigurationError),\n/* harmony export */   InvalidStateError: () => (/* binding */ InvalidStateError),\n/* harmony export */   MissingStateError: () => (/* binding */ MissingStateError),\n/* harmony export */   MyAccountApiError: () => (/* binding */ MyAccountApiError),\n/* harmony export */   OAuth2Error: () => (/* binding */ OAuth2Error),\n/* harmony export */   SdkError: () => (/* binding */ SdkError)\n/* harmony export */ });\nclass SdkError extends Error {\n}\n/**\n * Errors that come from Auth0 in the `redirect_uri` callback may contain reflected user input via the OpenID Connect `error` and `error_description` query parameter.\n * You should **not** render the error `message`, or `error` and `error_description` properties without properly escaping them first.\n */\nclass OAuth2Error extends SdkError {\n    constructor({ code, message }) {\n        super(message ??\n            \"An error occurred while interacting with the authorization server.\");\n        this.name = \"OAuth2Error\";\n        this.code = code;\n    }\n}\nclass DiscoveryError extends SdkError {\n    constructor(message) {\n        super(message ?? \"Discovery failed for the OpenID Connect configuration.\");\n        this.code = \"discovery_error\";\n        this.name = \"DiscoveryError\";\n    }\n}\nclass MissingStateError extends SdkError {\n    constructor(message) {\n        super(message ?? \"The state parameter is missing.\");\n        this.code = \"missing_state\";\n        this.name = \"MissingStateError\";\n    }\n}\nclass InvalidStateError extends SdkError {\n    constructor(message) {\n        super(message ?? \"The state parameter is invalid.\");\n        this.code = \"invalid_state\";\n        this.name = \"InvalidStateError\";\n    }\n}\nclass InvalidConfigurationError extends SdkError {\n    constructor(message) {\n        super(message ?? \"The configuration is invalid.\");\n        this.code = \"invalid_configuration\";\n        this.name = \"InvalidConfigurationError\";\n    }\n}\nclass AuthorizationError extends SdkError {\n    constructor({ cause, message }) {\n        super(message ?? \"An error occurred during the authorization flow.\");\n        this.code = \"authorization_error\";\n        this.cause = cause;\n        this.name = \"AuthorizationError\";\n    }\n}\nclass AuthorizationCodeGrantRequestError extends SdkError {\n    constructor(message) {\n        super(message ??\n            \"An error occurred while preparing or performing the authorization code grant request.\");\n        this.code = \"authorization_code_grant_request_error\";\n        this.name = \"AuthorizationCodeGrantRequestError\";\n    }\n}\nclass AuthorizationCodeGrantError extends SdkError {\n    constructor({ cause, message }) {\n        super(message ??\n            \"An error occurred while trying to exchange the authorization code.\");\n        this.code = \"authorization_code_grant_error\";\n        this.cause = cause;\n        this.name = \"AuthorizationCodeGrantError\";\n    }\n}\nclass BackchannelLogoutError extends SdkError {\n    constructor(message) {\n        super(message ??\n            \"An error occurred while completing the backchannel logout request.\");\n        this.code = \"backchannel_logout_error\";\n        this.name = \"BackchannelLogoutError\";\n    }\n}\nclass BackchannelAuthenticationNotSupportedError extends SdkError {\n    constructor() {\n        super(\"The authorization server does not support backchannel authentication. Learn how to enable it here: https://auth0.com/docs/get-started/applications/configure-client-initiated-backchannel-authentication\");\n        this.code = \"backchannel_authentication_not_supported_error\";\n        this.name = \"BackchannelAuthenticationNotSupportedError\";\n    }\n}\nclass BackchannelAuthenticationError extends SdkError {\n    constructor({ cause }) {\n        super(\"There was an error when trying to use Client-Initiated Backchannel Authentication.\");\n        this.code = \"backchannel_authentication_error\";\n        this.cause = cause;\n        this.name = \"BackchannelAuthenticationError\";\n    }\n}\nvar AccessTokenErrorCode;\n(function (AccessTokenErrorCode) {\n    AccessTokenErrorCode[\"MISSING_SESSION\"] = \"missing_session\";\n    AccessTokenErrorCode[\"MISSING_REFRESH_TOKEN\"] = \"missing_refresh_token\";\n    AccessTokenErrorCode[\"FAILED_TO_REFRESH_TOKEN\"] = \"failed_to_refresh_token\";\n})(AccessTokenErrorCode || (AccessTokenErrorCode = {}));\nclass AccessTokenError extends SdkError {\n    constructor(code, message, cause) {\n        super(message);\n        this.name = \"AccessTokenError\";\n        this.code = code;\n        this.cause = cause;\n    }\n}\n/**\n * Enum representing error codes related to access tokens for connections.\n */\nvar AccessTokenForConnectionErrorCode;\n(function (AccessTokenForConnectionErrorCode) {\n    /**\n     * The session is missing.\n     */\n    AccessTokenForConnectionErrorCode[\"MISSING_SESSION\"] = \"missing_session\";\n    /**\n     * The refresh token is missing.\n     */\n    AccessTokenForConnectionErrorCode[\"MISSING_REFRESH_TOKEN\"] = \"missing_refresh_token\";\n    /**\n     * Failed to exchange the refresh token.\n     */\n    AccessTokenForConnectionErrorCode[\"FAILED_TO_EXCHANGE\"] = \"failed_to_exchange_refresh_token\";\n})(AccessTokenForConnectionErrorCode || (AccessTokenForConnectionErrorCode = {}));\n/**\n * Error class representing an access token for connection error.\n * Extends the `SdkError` class.\n */\nclass AccessTokenForConnectionError extends SdkError {\n    /**\n     * Constructs a new `AccessTokenForConnectionError` instance.\n     *\n     * @param code - The error code.\n     * @param message - The error message.\n     * @param cause - The OAuth2 cause of the error.\n     */\n    constructor(code, message, cause) {\n        super(message);\n        this.name = \"AccessTokenForConnectionError\";\n        this.code = code;\n        this.cause = cause;\n    }\n}\n/**\n * Error codes for DPoP-related errors.\n *\n * These error codes categorize different types of failures that can occur\n * during DPoP (Demonstrating Proof-of-Possession) operations.\n */\nvar DPoPErrorCode;\n(function (DPoPErrorCode) {\n    /**\n     * Failed to calculate dpop_jkt (JWK thumbprint) parameter.\n     * This occurs when the SDK cannot generate the required thumbprint\n     * from the provided public key for the authorization request.\n     */\n    DPoPErrorCode[\"DPOP_JKT_CALCULATION_FAILED\"] = \"dpop_jkt_calculation_failed\";\n    /**\n     * Failed to export DPoP public key to JWK format.\n     * This occurs when the SDK cannot convert the CryptoKey to the\n     * JSON Web Key format required for DPoP proofs.\n     */\n    DPoPErrorCode[\"DPOP_KEY_EXPORT_FAILED\"] = \"dpop_key_export_failed\";\n    /**\n     * DPoP configuration is invalid or incomplete.\n     * This occurs when the provided DPoP configuration contains\n     * invalid values or missing required components.\n     */\n    DPoPErrorCode[\"DPOP_CONFIGURATION_ERROR\"] = \"dpop_configuration_error\";\n})(DPoPErrorCode || (DPoPErrorCode = {}));\n/**\n * Represents an error that occurred during DPoP (Demonstrating Proof-of-Possession) operations.\n *\n * DPoP is an OAuth 2.0 extension that provides application-level proof-of-possession security\n * by binding access tokens to cryptographic key pairs. This error is thrown when DPoP-related\n * operations fail, such as key pair operations, proof generation, or configuration issues.\n *\n * Common scenarios that trigger DPoPError:\n * - Invalid or incompatible key pairs (wrong algorithm, corrupted keys)\n * - JWK thumbprint calculation failures\n * - Public key export failures to JWK format\n * - Invalid DPoP configuration parameters\n *\n * @example Handling DPoP errors\n * ```typescript\n * try {\n *   const auth0 = new Auth0Client({\n *     useDPoP: true,\n *     dpopKeyPair: invalidKeyPair\n *   });\n * } catch (error) {\n *   if (error instanceof DPoPError) {\n *     console.error(`DPoP Error [${error.code}]:`, error.message);\n *\n *     switch (error.code) {\n *       case DPoPErrorCode.DPOP_KEY_EXPORT_FAILED:\n *         console.error(\"Key export failed. Check key format and algorithm.\");\n *         break;\n *       case DPoPErrorCode.DPOP_JKT_CALCULATION_FAILED:\n *         console.error(\"JWK thumbprint calculation failed. Verify key validity.\");\n *         break;\n *       case DPoPErrorCode.DPOP_CONFIGURATION_ERROR:\n *         console.error(\"Invalid DPoP configuration. Check options and environment variables.\");\n *         break;\n *     }\n *\n *     if (error.cause) {\n *       console.error(\"Underlying cause:\", error.cause);\n *     }\n *   }\n * }\n * ```\n *\n * @example Creating a DPoP error\n * ```typescript\n * throw new DPoPError(\n *   DPoPErrorCode.DPOP_JKT_CALCULATION_FAILED,\n *   \"Failed to calculate dpop_jkt parameter from public key\",\n *   originalError\n * );\n * ```\n *\n * @see {@link https://datatracker.ietf.org/doc/html/rfc9449 | RFC 9449: OAuth 2.0 Demonstrating Proof-of-Possession at the Application Layer (DPoP)}\n */\nclass DPoPError extends SdkError {\n    /**\n     * Constructs a new `DPoPError` instance.\n     *\n     * @param code - The DPoP error code indicating the specific type of failure\n     * @param message - A descriptive error message explaining what went wrong\n     * @param cause - The underlying error that caused this DPoP error (optional)\n     *\n     * @example\n     * ```typescript\n     * const dpopError = new DPoPError(\n     *   DPoPErrorCode.DPOP_KEY_EXPORT_FAILED,\n     *   \"Unable to export public key to JWK format\",\n     *   keyExportError\n     * );\n     * ```\n     */\n    constructor(code, message, cause) {\n        super(message);\n        this.name = \"DPoPError\";\n        this.code = code;\n        this.cause = cause;\n    }\n}\n/**\n * Error class representing a connect account request error.\n */\nclass MyAccountApiError extends SdkError {\n    constructor({ type, title, detail, status, validationErrors }) {\n        super(`${title}: ${detail}`);\n        this.name = \"MyAccountApiError\";\n        this.code = \"my_account_api_error\";\n        this.type = type;\n        this.title = title;\n        this.detail = detail;\n        this.status = status;\n        this.validationErrors = validationErrors;\n    }\n}\n/**\n * Enum representing error codes related to the connect account flow.\n */\nvar ConnectAccountErrorCodes;\n(function (ConnectAccountErrorCodes) {\n    /**\n     * The session is missing.\n     */\n    ConnectAccountErrorCodes[\"MISSING_SESSION\"] = \"missing_session\";\n    /**\n     * Failed to initiate the connect account flow.\n     */\n    ConnectAccountErrorCodes[\"FAILED_TO_INITIATE\"] = \"failed_to_initiate\";\n    /**\n     * Failed to complete the connect account flow.\n     */\n    ConnectAccountErrorCodes[\"FAILED_TO_COMPLETE\"] = \"failed_to_complete\";\n})(ConnectAccountErrorCodes || (ConnectAccountErrorCodes = {}));\n/**\n * Error class representing a connect account error.\n */\nclass ConnectAccountError extends SdkError {\n    constructor({ code, message, cause }) {\n        super(message);\n        this.name = \"ConnectAccountError\";\n        this.code = code;\n        this.cause = cause;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L2Vycm9ycy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGtCQUFrQixlQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxrQkFBa0IsZ0JBQWdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGtCQUFrQixnQkFBZ0I7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9EQUFvRDtBQUM5QztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsOEVBQThFO0FBQy9FO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0NBQXNDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBLG9DQUFvQyxXQUFXO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGtCQUFrQiwrQ0FBK0M7QUFDakUsaUJBQWlCLE1BQU0sSUFBSSxPQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDREQUE0RDtBQUM3RDtBQUNBO0FBQ0E7QUFDTztBQUNQLGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWl0c3V5b3NoaS9EZXNrdG9wL2F1dGgtdGVzdC9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgwK25leHRqcy1hdXRoMEA0LjExLjBfbmV4dEAxNi4wLjBfQGJhYmVsK2NvcmVANy4yOC41X3JlYWN0LWRvbUAxOS4yLjBfcmVhY3RAMTkuMi4wX2I4OWZkNzYxZTJiMTAzODU5YTI5MWFlOWFjMDQ1ZDU1L25vZGVfbW9kdWxlcy9AYXV0aDAvbmV4dGpzLWF1dGgwL2Rpc3QvZXJyb3JzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBTZGtFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogRXJyb3JzIHRoYXQgY29tZSBmcm9tIEF1dGgwIGluIHRoZSBgcmVkaXJlY3RfdXJpYCBjYWxsYmFjayBtYXkgY29udGFpbiByZWZsZWN0ZWQgdXNlciBpbnB1dCB2aWEgdGhlIE9wZW5JRCBDb25uZWN0IGBlcnJvcmAgYW5kIGBlcnJvcl9kZXNjcmlwdGlvbmAgcXVlcnkgcGFyYW1ldGVyLlxuICogWW91IHNob3VsZCAqKm5vdCoqIHJlbmRlciB0aGUgZXJyb3IgYG1lc3NhZ2VgLCBvciBgZXJyb3JgIGFuZCBgZXJyb3JfZGVzY3JpcHRpb25gIHByb3BlcnRpZXMgd2l0aG91dCBwcm9wZXJseSBlc2NhcGluZyB0aGVtIGZpcnN0LlxuICovXG5leHBvcnQgY2xhc3MgT0F1dGgyRXJyb3IgZXh0ZW5kcyBTZGtFcnJvciB7XG4gICAgY29uc3RydWN0b3IoeyBjb2RlLCBtZXNzYWdlIH0pIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSA/P1xuICAgICAgICAgICAgXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBpbnRlcmFjdGluZyB3aXRoIHRoZSBhdXRob3JpemF0aW9uIHNlcnZlci5cIik7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiT0F1dGgyRXJyb3JcIjtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgRGlzY292ZXJ5RXJyb3IgZXh0ZW5kcyBTZGtFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlID8/IFwiRGlzY292ZXJ5IGZhaWxlZCBmb3IgdGhlIE9wZW5JRCBDb25uZWN0IGNvbmZpZ3VyYXRpb24uXCIpO1xuICAgICAgICB0aGlzLmNvZGUgPSBcImRpc2NvdmVyeV9lcnJvclwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkRpc2NvdmVyeUVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1pc3NpbmdTdGF0ZUVycm9yIGV4dGVuZHMgU2RrRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSA/PyBcIlRoZSBzdGF0ZSBwYXJhbWV0ZXIgaXMgbWlzc2luZy5cIik7XG4gICAgICAgIHRoaXMuY29kZSA9IFwibWlzc2luZ19zdGF0ZVwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIk1pc3NpbmdTdGF0ZUVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEludmFsaWRTdGF0ZUVycm9yIGV4dGVuZHMgU2RrRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSA/PyBcIlRoZSBzdGF0ZSBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gICAgICAgIHRoaXMuY29kZSA9IFwiaW52YWxpZF9zdGF0ZVwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkludmFsaWRTdGF0ZUVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEludmFsaWRDb25maWd1cmF0aW9uRXJyb3IgZXh0ZW5kcyBTZGtFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlID8/IFwiVGhlIGNvbmZpZ3VyYXRpb24gaXMgaW52YWxpZC5cIik7XG4gICAgICAgIHRoaXMuY29kZSA9IFwiaW52YWxpZF9jb25maWd1cmF0aW9uXCI7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiSW52YWxpZENvbmZpZ3VyYXRpb25FcnJvclwiO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBBdXRob3JpemF0aW9uRXJyb3IgZXh0ZW5kcyBTZGtFcnJvciB7XG4gICAgY29uc3RydWN0b3IoeyBjYXVzZSwgbWVzc2FnZSB9KSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgPz8gXCJBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgdGhlIGF1dGhvcml6YXRpb24gZmxvdy5cIik7XG4gICAgICAgIHRoaXMuY29kZSA9IFwiYXV0aG9yaXphdGlvbl9lcnJvclwiO1xuICAgICAgICB0aGlzLmNhdXNlID0gY2F1c2U7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiQXV0aG9yaXphdGlvbkVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1dGhvcml6YXRpb25Db2RlR3JhbnRSZXF1ZXN0RXJyb3IgZXh0ZW5kcyBTZGtFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlID8/XG4gICAgICAgICAgICBcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHByZXBhcmluZyBvciBwZXJmb3JtaW5nIHRoZSBhdXRob3JpemF0aW9uIGNvZGUgZ3JhbnQgcmVxdWVzdC5cIik7XG4gICAgICAgIHRoaXMuY29kZSA9IFwiYXV0aG9yaXphdGlvbl9jb2RlX2dyYW50X3JlcXVlc3RfZXJyb3JcIjtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJBdXRob3JpemF0aW9uQ29kZUdyYW50UmVxdWVzdEVycm9yXCI7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEF1dGhvcml6YXRpb25Db2RlR3JhbnRFcnJvciBleHRlbmRzIFNka0Vycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGNhdXNlLCBtZXNzYWdlIH0pIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSA/P1xuICAgICAgICAgICAgXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gZXhjaGFuZ2UgdGhlIGF1dGhvcml6YXRpb24gY29kZS5cIik7XG4gICAgICAgIHRoaXMuY29kZSA9IFwiYXV0aG9yaXphdGlvbl9jb2RlX2dyYW50X2Vycm9yXCI7XG4gICAgICAgIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJBdXRob3JpemF0aW9uQ29kZUdyYW50RXJyb3JcIjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFja2NoYW5uZWxMb2dvdXRFcnJvciBleHRlbmRzIFNka0Vycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UgPz9cbiAgICAgICAgICAgIFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY29tcGxldGluZyB0aGUgYmFja2NoYW5uZWwgbG9nb3V0IHJlcXVlc3QuXCIpO1xuICAgICAgICB0aGlzLmNvZGUgPSBcImJhY2tjaGFubmVsX2xvZ291dF9lcnJvclwiO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkJhY2tjaGFubmVsTG9nb3V0RXJyb3JcIjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFja2NoYW5uZWxBdXRoZW50aWNhdGlvbk5vdFN1cHBvcnRlZEVycm9yIGV4dGVuZHMgU2RrRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihcIlRoZSBhdXRob3JpemF0aW9uIHNlcnZlciBkb2VzIG5vdCBzdXBwb3J0IGJhY2tjaGFubmVsIGF1dGhlbnRpY2F0aW9uLiBMZWFybiBob3cgdG8gZW5hYmxlIGl0IGhlcmU6IGh0dHBzOi8vYXV0aDAuY29tL2RvY3MvZ2V0LXN0YXJ0ZWQvYXBwbGljYXRpb25zL2NvbmZpZ3VyZS1jbGllbnQtaW5pdGlhdGVkLWJhY2tjaGFubmVsLWF1dGhlbnRpY2F0aW9uXCIpO1xuICAgICAgICB0aGlzLmNvZGUgPSBcImJhY2tjaGFubmVsX2F1dGhlbnRpY2F0aW9uX25vdF9zdXBwb3J0ZWRfZXJyb3JcIjtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJCYWNrY2hhbm5lbEF1dGhlbnRpY2F0aW9uTm90U3VwcG9ydGVkRXJyb3JcIjtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQmFja2NoYW5uZWxBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgU2RrRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHsgY2F1c2UgfSkge1xuICAgICAgICBzdXBlcihcIlRoZXJlIHdhcyBhbiBlcnJvciB3aGVuIHRyeWluZyB0byB1c2UgQ2xpZW50LUluaXRpYXRlZCBCYWNrY2hhbm5lbCBBdXRoZW50aWNhdGlvbi5cIik7XG4gICAgICAgIHRoaXMuY29kZSA9IFwiYmFja2NoYW5uZWxfYXV0aGVudGljYXRpb25fZXJyb3JcIjtcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkJhY2tjaGFubmVsQXV0aGVudGljYXRpb25FcnJvclwiO1xuICAgIH1cbn1cbmV4cG9ydCB2YXIgQWNjZXNzVG9rZW5FcnJvckNvZGU7XG4oZnVuY3Rpb24gKEFjY2Vzc1Rva2VuRXJyb3JDb2RlKSB7XG4gICAgQWNjZXNzVG9rZW5FcnJvckNvZGVbXCJNSVNTSU5HX1NFU1NJT05cIl0gPSBcIm1pc3Npbmdfc2Vzc2lvblwiO1xuICAgIEFjY2Vzc1Rva2VuRXJyb3JDb2RlW1wiTUlTU0lOR19SRUZSRVNIX1RPS0VOXCJdID0gXCJtaXNzaW5nX3JlZnJlc2hfdG9rZW5cIjtcbiAgICBBY2Nlc3NUb2tlbkVycm9yQ29kZVtcIkZBSUxFRF9UT19SRUZSRVNIX1RPS0VOXCJdID0gXCJmYWlsZWRfdG9fcmVmcmVzaF90b2tlblwiO1xufSkoQWNjZXNzVG9rZW5FcnJvckNvZGUgfHwgKEFjY2Vzc1Rva2VuRXJyb3JDb2RlID0ge30pKTtcbmV4cG9ydCBjbGFzcyBBY2Nlc3NUb2tlbkVycm9yIGV4dGVuZHMgU2RrRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvZGUsIG1lc3NhZ2UsIGNhdXNlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkFjY2Vzc1Rva2VuRXJyb3JcIjtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICAgIH1cbn1cbi8qKlxuICogRW51bSByZXByZXNlbnRpbmcgZXJyb3IgY29kZXMgcmVsYXRlZCB0byBhY2Nlc3MgdG9rZW5zIGZvciBjb25uZWN0aW9ucy5cbiAqL1xuZXhwb3J0IHZhciBBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb25FcnJvckNvZGU7XG4oZnVuY3Rpb24gKEFjY2Vzc1Rva2VuRm9yQ29ubmVjdGlvbkVycm9yQ29kZSkge1xuICAgIC8qKlxuICAgICAqIFRoZSBzZXNzaW9uIGlzIG1pc3NpbmcuXG4gICAgICovXG4gICAgQWNjZXNzVG9rZW5Gb3JDb25uZWN0aW9uRXJyb3JDb2RlW1wiTUlTU0lOR19TRVNTSU9OXCJdID0gXCJtaXNzaW5nX3Nlc3Npb25cIjtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVmcmVzaCB0b2tlbiBpcyBtaXNzaW5nLlxuICAgICAqL1xuICAgIEFjY2Vzc1Rva2VuRm9yQ29ubmVjdGlvbkVycm9yQ29kZVtcIk1JU1NJTkdfUkVGUkVTSF9UT0tFTlwiXSA9IFwibWlzc2luZ19yZWZyZXNoX3Rva2VuXCI7XG4gICAgLyoqXG4gICAgICogRmFpbGVkIHRvIGV4Y2hhbmdlIHRoZSByZWZyZXNoIHRva2VuLlxuICAgICAqL1xuICAgIEFjY2Vzc1Rva2VuRm9yQ29ubmVjdGlvbkVycm9yQ29kZVtcIkZBSUxFRF9UT19FWENIQU5HRVwiXSA9IFwiZmFpbGVkX3RvX2V4Y2hhbmdlX3JlZnJlc2hfdG9rZW5cIjtcbn0pKEFjY2Vzc1Rva2VuRm9yQ29ubmVjdGlvbkVycm9yQ29kZSB8fCAoQWNjZXNzVG9rZW5Gb3JDb25uZWN0aW9uRXJyb3JDb2RlID0ge30pKTtcbi8qKlxuICogRXJyb3IgY2xhc3MgcmVwcmVzZW50aW5nIGFuIGFjY2VzcyB0b2tlbiBmb3IgY29ubmVjdGlvbiBlcnJvci5cbiAqIEV4dGVuZHMgdGhlIGBTZGtFcnJvcmAgY2xhc3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb25FcnJvciBleHRlbmRzIFNka0Vycm9yIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgbmV3IGBBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb25FcnJvcmAgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29kZSAtIFRoZSBlcnJvciBjb2RlLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIGVycm9yIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIGNhdXNlIC0gVGhlIE9BdXRoMiBjYXVzZSBvZiB0aGUgZXJyb3IuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29kZSwgbWVzc2FnZSwgY2F1c2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiQWNjZXNzVG9rZW5Gb3JDb25uZWN0aW9uRXJyb3JcIjtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgY29kZXMgZm9yIERQb1AtcmVsYXRlZCBlcnJvcnMuXG4gKlxuICogVGhlc2UgZXJyb3IgY29kZXMgY2F0ZWdvcml6ZSBkaWZmZXJlbnQgdHlwZXMgb2YgZmFpbHVyZXMgdGhhdCBjYW4gb2NjdXJcbiAqIGR1cmluZyBEUG9QIChEZW1vbnN0cmF0aW5nIFByb29mLW9mLVBvc3Nlc3Npb24pIG9wZXJhdGlvbnMuXG4gKi9cbmV4cG9ydCB2YXIgRFBvUEVycm9yQ29kZTtcbihmdW5jdGlvbiAoRFBvUEVycm9yQ29kZSkge1xuICAgIC8qKlxuICAgICAqIEZhaWxlZCB0byBjYWxjdWxhdGUgZHBvcF9qa3QgKEpXSyB0aHVtYnByaW50KSBwYXJhbWV0ZXIuXG4gICAgICogVGhpcyBvY2N1cnMgd2hlbiB0aGUgU0RLIGNhbm5vdCBnZW5lcmF0ZSB0aGUgcmVxdWlyZWQgdGh1bWJwcmludFxuICAgICAqIGZyb20gdGhlIHByb3ZpZGVkIHB1YmxpYyBrZXkgZm9yIHRoZSBhdXRob3JpemF0aW9uIHJlcXVlc3QuXG4gICAgICovXG4gICAgRFBvUEVycm9yQ29kZVtcIkRQT1BfSktUX0NBTENVTEFUSU9OX0ZBSUxFRFwiXSA9IFwiZHBvcF9qa3RfY2FsY3VsYXRpb25fZmFpbGVkXCI7XG4gICAgLyoqXG4gICAgICogRmFpbGVkIHRvIGV4cG9ydCBEUG9QIHB1YmxpYyBrZXkgdG8gSldLIGZvcm1hdC5cbiAgICAgKiBUaGlzIG9jY3VycyB3aGVuIHRoZSBTREsgY2Fubm90IGNvbnZlcnQgdGhlIENyeXB0b0tleSB0byB0aGVcbiAgICAgKiBKU09OIFdlYiBLZXkgZm9ybWF0IHJlcXVpcmVkIGZvciBEUG9QIHByb29mcy5cbiAgICAgKi9cbiAgICBEUG9QRXJyb3JDb2RlW1wiRFBPUF9LRVlfRVhQT1JUX0ZBSUxFRFwiXSA9IFwiZHBvcF9rZXlfZXhwb3J0X2ZhaWxlZFwiO1xuICAgIC8qKlxuICAgICAqIERQb1AgY29uZmlndXJhdGlvbiBpcyBpbnZhbGlkIG9yIGluY29tcGxldGUuXG4gICAgICogVGhpcyBvY2N1cnMgd2hlbiB0aGUgcHJvdmlkZWQgRFBvUCBjb25maWd1cmF0aW9uIGNvbnRhaW5zXG4gICAgICogaW52YWxpZCB2YWx1ZXMgb3IgbWlzc2luZyByZXF1aXJlZCBjb21wb25lbnRzLlxuICAgICAqL1xuICAgIERQb1BFcnJvckNvZGVbXCJEUE9QX0NPTkZJR1VSQVRJT05fRVJST1JcIl0gPSBcImRwb3BfY29uZmlndXJhdGlvbl9lcnJvclwiO1xufSkoRFBvUEVycm9yQ29kZSB8fCAoRFBvUEVycm9yQ29kZSA9IHt9KSk7XG4vKipcbiAqIFJlcHJlc2VudHMgYW4gZXJyb3IgdGhhdCBvY2N1cnJlZCBkdXJpbmcgRFBvUCAoRGVtb25zdHJhdGluZyBQcm9vZi1vZi1Qb3NzZXNzaW9uKSBvcGVyYXRpb25zLlxuICpcbiAqIERQb1AgaXMgYW4gT0F1dGggMi4wIGV4dGVuc2lvbiB0aGF0IHByb3ZpZGVzIGFwcGxpY2F0aW9uLWxldmVsIHByb29mLW9mLXBvc3Nlc3Npb24gc2VjdXJpdHlcbiAqIGJ5IGJpbmRpbmcgYWNjZXNzIHRva2VucyB0byBjcnlwdG9ncmFwaGljIGtleSBwYWlycy4gVGhpcyBlcnJvciBpcyB0aHJvd24gd2hlbiBEUG9QLXJlbGF0ZWRcbiAqIG9wZXJhdGlvbnMgZmFpbCwgc3VjaCBhcyBrZXkgcGFpciBvcGVyYXRpb25zLCBwcm9vZiBnZW5lcmF0aW9uLCBvciBjb25maWd1cmF0aW9uIGlzc3Vlcy5cbiAqXG4gKiBDb21tb24gc2NlbmFyaW9zIHRoYXQgdHJpZ2dlciBEUG9QRXJyb3I6XG4gKiAtIEludmFsaWQgb3IgaW5jb21wYXRpYmxlIGtleSBwYWlycyAod3JvbmcgYWxnb3JpdGhtLCBjb3JydXB0ZWQga2V5cylcbiAqIC0gSldLIHRodW1icHJpbnQgY2FsY3VsYXRpb24gZmFpbHVyZXNcbiAqIC0gUHVibGljIGtleSBleHBvcnQgZmFpbHVyZXMgdG8gSldLIGZvcm1hdFxuICogLSBJbnZhbGlkIERQb1AgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzXG4gKlxuICogQGV4YW1wbGUgSGFuZGxpbmcgRFBvUCBlcnJvcnNcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIHRyeSB7XG4gKiAgIGNvbnN0IGF1dGgwID0gbmV3IEF1dGgwQ2xpZW50KHtcbiAqICAgICB1c2VEUG9QOiB0cnVlLFxuICogICAgIGRwb3BLZXlQYWlyOiBpbnZhbGlkS2V5UGFpclxuICogICB9KTtcbiAqIH0gY2F0Y2ggKGVycm9yKSB7XG4gKiAgIGlmIChlcnJvciBpbnN0YW5jZW9mIERQb1BFcnJvcikge1xuICogICAgIGNvbnNvbGUuZXJyb3IoYERQb1AgRXJyb3IgWyR7ZXJyb3IuY29kZX1dOmAsIGVycm9yLm1lc3NhZ2UpO1xuICpcbiAqICAgICBzd2l0Y2ggKGVycm9yLmNvZGUpIHtcbiAqICAgICAgIGNhc2UgRFBvUEVycm9yQ29kZS5EUE9QX0tFWV9FWFBPUlRfRkFJTEVEOlxuICogICAgICAgICBjb25zb2xlLmVycm9yKFwiS2V5IGV4cG9ydCBmYWlsZWQuIENoZWNrIGtleSBmb3JtYXQgYW5kIGFsZ29yaXRobS5cIik7XG4gKiAgICAgICAgIGJyZWFrO1xuICogICAgICAgY2FzZSBEUG9QRXJyb3JDb2RlLkRQT1BfSktUX0NBTENVTEFUSU9OX0ZBSUxFRDpcbiAqICAgICAgICAgY29uc29sZS5lcnJvcihcIkpXSyB0aHVtYnByaW50IGNhbGN1bGF0aW9uIGZhaWxlZC4gVmVyaWZ5IGtleSB2YWxpZGl0eS5cIik7XG4gKiAgICAgICAgIGJyZWFrO1xuICogICAgICAgY2FzZSBEUG9QRXJyb3JDb2RlLkRQT1BfQ09ORklHVVJBVElPTl9FUlJPUjpcbiAqICAgICAgICAgY29uc29sZS5lcnJvcihcIkludmFsaWQgRFBvUCBjb25maWd1cmF0aW9uLiBDaGVjayBvcHRpb25zIGFuZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXCIpO1xuICogICAgICAgICBicmVhaztcbiAqICAgICB9XG4gKlxuICogICAgIGlmIChlcnJvci5jYXVzZSkge1xuICogICAgICAgY29uc29sZS5lcnJvcihcIlVuZGVybHlpbmcgY2F1c2U6XCIsIGVycm9yLmNhdXNlKTtcbiAqICAgICB9XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBleGFtcGxlIENyZWF0aW5nIGEgRFBvUCBlcnJvclxuICogYGBgdHlwZXNjcmlwdFxuICogdGhyb3cgbmV3IERQb1BFcnJvcihcbiAqICAgRFBvUEVycm9yQ29kZS5EUE9QX0pLVF9DQUxDVUxBVElPTl9GQUlMRUQsXG4gKiAgIFwiRmFpbGVkIHRvIGNhbGN1bGF0ZSBkcG9wX2prdCBwYXJhbWV0ZXIgZnJvbSBwdWJsaWMga2V5XCIsXG4gKiAgIG9yaWdpbmFsRXJyb3JcbiAqICk7XG4gKiBgYGBcbiAqXG4gKiBAc2VlIHtAbGluayBodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzk0NDkgfCBSRkMgOTQ0OTogT0F1dGggMi4wIERlbW9uc3RyYXRpbmcgUHJvb2Ytb2YtUG9zc2Vzc2lvbiBhdCB0aGUgQXBwbGljYXRpb24gTGF5ZXIgKERQb1ApfVxuICovXG5leHBvcnQgY2xhc3MgRFBvUEVycm9yIGV4dGVuZHMgU2RrRXJyb3Ige1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBuZXcgYERQb1BFcnJvcmAgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY29kZSAtIFRoZSBEUG9QIGVycm9yIGNvZGUgaW5kaWNhdGluZyB0aGUgc3BlY2lmaWMgdHlwZSBvZiBmYWlsdXJlXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgLSBBIGRlc2NyaXB0aXZlIGVycm9yIG1lc3NhZ2UgZXhwbGFpbmluZyB3aGF0IHdlbnQgd3JvbmdcbiAgICAgKiBAcGFyYW0gY2F1c2UgLSBUaGUgdW5kZXJseWluZyBlcnJvciB0aGF0IGNhdXNlZCB0aGlzIERQb1AgZXJyb3IgKG9wdGlvbmFsKVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogY29uc3QgZHBvcEVycm9yID0gbmV3IERQb1BFcnJvcihcbiAgICAgKiAgIERQb1BFcnJvckNvZGUuRFBPUF9LRVlfRVhQT1JUX0ZBSUxFRCxcbiAgICAgKiAgIFwiVW5hYmxlIHRvIGV4cG9ydCBwdWJsaWMga2V5IHRvIEpXSyBmb3JtYXRcIixcbiAgICAgKiAgIGtleUV4cG9ydEVycm9yXG4gICAgICogKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihjb2RlLCBtZXNzYWdlLCBjYXVzZSkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJEUG9QRXJyb3JcIjtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICAgIH1cbn1cbi8qKlxuICogRXJyb3IgY2xhc3MgcmVwcmVzZW50aW5nIGEgY29ubmVjdCBhY2NvdW50IHJlcXVlc3QgZXJyb3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBNeUFjY291bnRBcGlFcnJvciBleHRlbmRzIFNka0Vycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHR5cGUsIHRpdGxlLCBkZXRhaWwsIHN0YXR1cywgdmFsaWRhdGlvbkVycm9ycyB9KSB7XG4gICAgICAgIHN1cGVyKGAke3RpdGxlfTogJHtkZXRhaWx9YCk7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiTXlBY2NvdW50QXBpRXJyb3JcIjtcbiAgICAgICAgdGhpcy5jb2RlID0gXCJteV9hY2NvdW50X2FwaV9lcnJvclwiO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGV0YWlsID0gZGV0YWlsO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy52YWxpZGF0aW9uRXJyb3JzID0gdmFsaWRhdGlvbkVycm9ycztcbiAgICB9XG59XG4vKipcbiAqIEVudW0gcmVwcmVzZW50aW5nIGVycm9yIGNvZGVzIHJlbGF0ZWQgdG8gdGhlIGNvbm5lY3QgYWNjb3VudCBmbG93LlxuICovXG5leHBvcnQgdmFyIENvbm5lY3RBY2NvdW50RXJyb3JDb2RlcztcbihmdW5jdGlvbiAoQ29ubmVjdEFjY291bnRFcnJvckNvZGVzKSB7XG4gICAgLyoqXG4gICAgICogVGhlIHNlc3Npb24gaXMgbWlzc2luZy5cbiAgICAgKi9cbiAgICBDb25uZWN0QWNjb3VudEVycm9yQ29kZXNbXCJNSVNTSU5HX1NFU1NJT05cIl0gPSBcIm1pc3Npbmdfc2Vzc2lvblwiO1xuICAgIC8qKlxuICAgICAqIEZhaWxlZCB0byBpbml0aWF0ZSB0aGUgY29ubmVjdCBhY2NvdW50IGZsb3cuXG4gICAgICovXG4gICAgQ29ubmVjdEFjY291bnRFcnJvckNvZGVzW1wiRkFJTEVEX1RPX0lOSVRJQVRFXCJdID0gXCJmYWlsZWRfdG9faW5pdGlhdGVcIjtcbiAgICAvKipcbiAgICAgKiBGYWlsZWQgdG8gY29tcGxldGUgdGhlIGNvbm5lY3QgYWNjb3VudCBmbG93LlxuICAgICAqL1xuICAgIENvbm5lY3RBY2NvdW50RXJyb3JDb2Rlc1tcIkZBSUxFRF9UT19DT01QTEVURVwiXSA9IFwiZmFpbGVkX3RvX2NvbXBsZXRlXCI7XG59KShDb25uZWN0QWNjb3VudEVycm9yQ29kZXMgfHwgKENvbm5lY3RBY2NvdW50RXJyb3JDb2RlcyA9IHt9KSk7XG4vKipcbiAqIEVycm9yIGNsYXNzIHJlcHJlc2VudGluZyBhIGNvbm5lY3QgYWNjb3VudCBlcnJvci5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbm5lY3RBY2NvdW50RXJyb3IgZXh0ZW5kcyBTZGtFcnJvciB7XG4gICAgY29uc3RydWN0b3IoeyBjb2RlLCBtZXNzYWdlLCBjYXVzZSB9KSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIkNvbm5lY3RBY2NvdW50RXJyb3JcIjtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/errors/index.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/auth-client.js":
/*!*********************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/auth-client.js ***!
  \*********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthClient: () => (/* binding */ AuthClient)\n/* harmony export */ });\n/* harmony import */ var next_server_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server.js */ \"(rsc)/../../node_modules/.pnpm/next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/api/server.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! jose */ \"(rsc)/../../node_modules/.pnpm/jose@6.1.0/node_modules/jose/dist/webapi/key/export.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! jose */ \"(rsc)/../../node_modules/.pnpm/jose@6.1.0/node_modules/jose/dist/webapi/jwk/thumbprint.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! jose */ \"(rsc)/../../node_modules/.pnpm/jose@6.1.0/node_modules/jose/dist/webapi/jwks/remote.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! jose */ \"(rsc)/../../node_modules/.pnpm/jose@6.1.0/node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! jose */ \"(rsc)/../../node_modules/.pnpm/jose@6.1.0/node_modules/jose/dist/webapi/key/import.js\");\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! oauth4webapi */ \"(rsc)/../../node_modules/.pnpm/oauth4webapi@3.8.2/node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var openid_client__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! openid-client */ \"(rsc)/../../node_modules/.pnpm/openid-client@6.8.1/node_modules/openid-client/build/index.js\");\n/* harmony import */ var _package_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../package.json */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/package.json\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/errors/index.js\");\n/* harmony import */ var _types_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../types/index.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/index.js\");\n/* harmony import */ var _utils_authorization_params_helpers_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/authorization-params-helpers.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/authorization-params-helpers.js\");\n/* harmony import */ var _utils_constants_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/constants.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/constants.js\");\n/* harmony import */ var _utils_dpopUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/dpopUtils.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/dpopUtils.js\");\n/* harmony import */ var _utils_pathUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/pathUtils.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/pathUtils.js\");\n/* harmony import */ var _utils_scope_helpers_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/scope-helpers.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/scope-helpers.js\");\n/* harmony import */ var _utils_session_changes_helpers_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/session-changes-helpers.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/session-changes-helpers.js\");\n/* harmony import */ var _utils_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/token-set-helpers.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/token-set-helpers.js\");\n/* harmony import */ var _utils_url_helpers_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../utils/url-helpers.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/url-helpers.js\");\n/* harmony import */ var _cookies_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./cookies.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/cookies.js\");\n/* harmony import */ var _fetcher_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./fetcher.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/fetcher.js\");\n/* harmony import */ var _user_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./user.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/user.js\");\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _AuthClient_instances, _AuthClient_getTokenSetFromSession;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// params passed to the /authorize endpoint that cannot be overwritten\nconst INTERNAL_AUTHORIZE_PARAMS = [\n    \"client_id\",\n    \"redirect_uri\",\n    \"response_type\",\n    \"code_challenge\",\n    \"code_challenge_method\",\n    \"state\",\n    \"nonce\"\n];\n/**\n * A constant representing the grant type for federated connection access token exchange.\n *\n * This grant type is used in OAuth token exchange scenarios where a federated connection\n * access token is required. It is specific to Auth0's implementation and follows the\n * \"urn:auth0:params:oauth:grant-type:token-exchange:federated-connection-access-token\" format.\n */\nconst GRANT_TYPE_FEDERATED_CONNECTION_ACCESS_TOKEN = \"urn:auth0:params:oauth:grant-type:token-exchange:federated-connection-access-token\";\n/**\n * A constant representing the token type for federated connection access tokens.\n * This is used to specify the type of token being requested from Auth0.\n *\n * @constant\n * @type {string}\n */\nconst REQUESTED_TOKEN_TYPE_FEDERATED_CONNECTION_ACCESS_TOKEN = \"http://auth0.com/oauth/token-type/federated-connection-access-token\";\nfunction createRouteUrl(path, baseUrl) {\n    return new URL((0,_utils_pathUtils_js__WEBPACK_IMPORTED_MODULE_7__.ensureNoLeadingSlash)((0,_utils_pathUtils_js__WEBPACK_IMPORTED_MODULE_7__.normalizeWithBasePath)(path)), (0,_utils_pathUtils_js__WEBPACK_IMPORTED_MODULE_7__.ensureTrailingSlash)(baseUrl));\n}\nclass AuthClient {\n    constructor(options) {\n        _AuthClient_instances.add(this);\n        // dependencies\n        this.fetch = options.fetch || fetch;\n        this.jwksCache = options.jwksCache || {};\n        this.allowInsecureRequests = options.allowInsecureRequests ?? false;\n        this.httpTimeout = options.httpTimeout ?? 5000;\n        this.httpOptions = () => {\n            const headers = new Headers();\n            const enableTelemetry = options.enableTelemetry ?? true;\n            if (enableTelemetry) {\n                const name = \"nextjs-auth0\";\n                const version = _package_json__WEBPACK_IMPORTED_MODULE_1__.version;\n                headers.set(\"User-Agent\", `${name}/${version}`);\n                headers.set(\"Auth0-Client\", encodeBase64(JSON.stringify({\n                    name,\n                    version\n                })));\n            }\n            return {\n                signal: AbortSignal.timeout(this.httpTimeout),\n                headers\n            };\n        };\n        if (this.allowInsecureRequests && \"development\" === \"production\") {}\n        // stores\n        this.transactionStore = options.transactionStore;\n        this.sessionStore = options.sessionStore;\n        // authorization server\n        this.domain = options.domain;\n        this.clientMetadata = { client_id: options.clientId };\n        // Apply DPoP timing validation options to client metadata if provided\n        if (options.dpopOptions) {\n            if (typeof options.dpopOptions.clockSkew === \"number\") {\n                this.clientMetadata[oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.clockSkew] = options.dpopOptions.clockSkew;\n            }\n            if (typeof options.dpopOptions.clockTolerance === \"number\") {\n                this.clientMetadata[oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.clockTolerance] =\n                    options.dpopOptions.clockTolerance;\n            }\n        }\n        // Store dpopOptions for use in retry logic\n        this.dpopOptions = options.dpopOptions;\n        this.clientSecret = options.clientSecret;\n        this.authorizationParameters = options.authorizationParameters || {\n            scope: _utils_constants_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_SCOPES\n        };\n        this.pushedAuthorizationRequests =\n            options.pushedAuthorizationRequests ?? false;\n        this.clientAssertionSigningKey = options.clientAssertionSigningKey;\n        this.clientAssertionSigningAlg =\n            options.clientAssertionSigningAlg || \"RS256\";\n        this.authorizationParameters.scope = (0,_utils_scope_helpers_js__WEBPACK_IMPORTED_MODULE_8__.ensureDefaultScope)(this.authorizationParameters);\n        const scope = (0,_utils_scope_helpers_js__WEBPACK_IMPORTED_MODULE_8__.getScopeForAudience)(this.authorizationParameters.scope, this.authorizationParameters.audience)\n            ?.split(\" \")\n            .map((s) => s.trim());\n        if (!scope || !scope.includes(\"openid\")) {\n            throw new Error(\"The 'openid' scope must be included in the set of scopes. See https://auth0.com/docs\");\n        }\n        // application\n        this.appBaseUrl = options.appBaseUrl;\n        this.signInReturnToPath = options.signInReturnToPath || \"/\";\n        // validate logout strategy\n        const validStrategies = [\"auto\", \"oidc\", \"v2\"];\n        let logoutStrategy = options.logoutStrategy || \"auto\";\n        if (!validStrategies.includes(logoutStrategy)) {\n            console.error(`Invalid logoutStrategy: ${logoutStrategy}. Must be one of: ${validStrategies.join(\", \")}. Defaulting to \"auto\"`);\n            logoutStrategy = \"auto\";\n        }\n        this.logoutStrategy = logoutStrategy;\n        this.includeIdTokenHintInOIDCLogoutUrl =\n            options.includeIdTokenHintInOIDCLogoutUrl ?? true;\n        // hooks\n        this.beforeSessionSaved = options.beforeSessionSaved;\n        this.onCallback = options.onCallback || this.defaultOnCallback;\n        // routes\n        this.routes = options.routes;\n        this.enableAccessTokenEndpoint = options.enableAccessTokenEndpoint ?? true;\n        this.noContentProfileResponseWhenUnauthenticated =\n            options.noContentProfileResponseWhenUnauthenticated ?? false;\n        this.enableConnectAccountEndpoint =\n            options.enableConnectAccountEndpoint ?? false;\n        this.useDPoP = options.useDPoP ?? false;\n        // Initialize DPoP if enabled. Check useDPoP flag first to avoid timing attacks.\n        if ((options.useDPoP ?? false) && options.dpopKeyPair) {\n            this.dpopKeyPair = options.dpopKeyPair;\n        }\n    }\n    async handler(req) {\n        const { pathname } = req.nextUrl;\n        const sanitizedPathname = (0,_utils_pathUtils_js__WEBPACK_IMPORTED_MODULE_7__.removeTrailingSlash)(pathname);\n        const method = req.method;\n        if (method === \"GET\" && sanitizedPathname === this.routes.login) {\n            return this.handleLogin(req);\n        }\n        else if (method === \"GET\" && sanitizedPathname === this.routes.logout) {\n            return this.handleLogout(req);\n        }\n        else if (method === \"GET\" && sanitizedPathname === this.routes.callback) {\n            return this.handleCallback(req);\n        }\n        else if (method === \"GET\" && sanitizedPathname === this.routes.profile) {\n            return this.handleProfile(req);\n        }\n        else if (method === \"GET\" &&\n            sanitizedPathname === this.routes.accessToken &&\n            this.enableAccessTokenEndpoint) {\n            return this.handleAccessToken(req);\n        }\n        else if (method === \"POST\" &&\n            sanitizedPathname === this.routes.backChannelLogout) {\n            return this.handleBackChannelLogout(req);\n        }\n        else if (method === \"GET\" &&\n            sanitizedPathname === this.routes.connectAccount &&\n            this.enableConnectAccountEndpoint) {\n            return this.handleConnectAccount(req);\n        }\n        else {\n            // no auth handler found, simply touch the sessions\n            // TODO: this should only happen if rolling sessions are enabled. Also, we should\n            // try to avoid reading from the DB (for stateful sessions) on every request if possible.\n            const res = next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n            const session = await this.sessionStore.get(req.cookies);\n            if (session) {\n                // we pass the existing session (containing an `createdAt` timestamp) to the set method\n                // which will update the cookie's `maxAge` property based on the `createdAt` time\n                await this.sessionStore.set(req.cookies, res.cookies, {\n                    ...session\n                });\n                (0,_cookies_js__WEBPACK_IMPORTED_MODULE_12__.addCacheControlHeadersForSession)(res);\n            }\n            return res;\n        }\n    }\n    async startInteractiveLogin(options = {}) {\n        const redirectUri = createRouteUrl(this.routes.callback, this.appBaseUrl); // must be registered with the authorization server\n        let returnTo = this.signInReturnToPath;\n        // Validate returnTo parameter\n        if (options.returnTo) {\n            const safeBaseUrl = new URL(this.authorizationParameters.redirect_uri ||\n                this.appBaseUrl);\n            const sanitizedReturnTo = (0,_utils_url_helpers_js__WEBPACK_IMPORTED_MODULE_11__.toSafeRedirect)(options.returnTo, safeBaseUrl);\n            if (sanitizedReturnTo) {\n                returnTo =\n                    sanitizedReturnTo.pathname +\n                        sanitizedReturnTo.search +\n                        sanitizedReturnTo.hash;\n            }\n        }\n        // Generate PKCE challenges\n        const codeChallengeMethod = \"S256\";\n        const codeVerifier = oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.generateRandomCodeVerifier();\n        const codeChallenge = await oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.calculatePKCECodeChallenge(codeVerifier);\n        const state = oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.generateRandomState();\n        const nonce = oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.generateRandomNonce();\n        // Construct base authorization parameters\n        // If provided on both sides, this does not merge the scope property,\n        // instead, the scope from the right side (options) fully overrides the left side.\n        // This is done to avoid breaking existing behavior.\n        const authorizationParams = (0,_utils_authorization_params_helpers_js__WEBPACK_IMPORTED_MODULE_4__.mergeAuthorizationParamsIntoSearchParams)(this.authorizationParameters, options.authorizationParameters, INTERNAL_AUTHORIZE_PARAMS);\n        authorizationParams.set(\"client_id\", this.clientMetadata.client_id);\n        authorizationParams.set(\"redirect_uri\", redirectUri.toString());\n        authorizationParams.set(\"response_type\", _types_index_js__WEBPACK_IMPORTED_MODULE_3__.RESPONSE_TYPES.CODE);\n        authorizationParams.set(\"code_challenge\", codeChallenge);\n        authorizationParams.set(\"code_challenge_method\", codeChallengeMethod);\n        authorizationParams.set(\"state\", state);\n        authorizationParams.set(\"nonce\", nonce);\n        // Add dpop_jkt parameter if DPoP is enabled\n        if (this.dpopKeyPair) {\n            try {\n                const publicKeyJwk = await jose__WEBPACK_IMPORTED_MODULE_16__.exportJWK(this.dpopKeyPair.publicKey);\n                const dpopJkt = await jose__WEBPACK_IMPORTED_MODULE_17__.calculateJwkThumbprint(publicKeyJwk);\n                authorizationParams.set(\"dpop_jkt\", dpopJkt);\n            }\n            catch (error) {\n                throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.DPoPError(_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.DPoPErrorCode.DPOP_JKT_CALCULATION_FAILED, \"DPoP is enabled but failed to calculate key thumbprint (dpop_jkt). \" +\n                    \"This is required for secure DPoP binding. Please check your key configuration.\", error instanceof Error ? error : undefined);\n            }\n        }\n        // Prepare transaction state\n        const transactionState = {\n            nonce,\n            maxAge: this.authorizationParameters.max_age,\n            codeVerifier,\n            responseType: _types_index_js__WEBPACK_IMPORTED_MODULE_3__.RESPONSE_TYPES.CODE,\n            state,\n            returnTo,\n            scope: authorizationParams.get(\"scope\") || undefined,\n            audience: authorizationParams.get(\"audience\") || undefined\n        };\n        // Generate authorization URL with PAR handling\n        const [error, authorizationUrl] = await this.authorizationUrl(authorizationParams);\n        if (error) {\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"An error occurred while trying to initiate the login request.\", {\n                status: 500\n            });\n        }\n        // Set response and save transaction\n        const res = next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(authorizationUrl.toString());\n        // Save transaction state\n        await this.transactionStore.save(res.cookies, transactionState);\n        return res;\n    }\n    async handleLogin(req) {\n        const searchParams = Object.fromEntries(req.nextUrl.searchParams.entries());\n        // Always forward all parameters\n        // When PAR is disabled, parameters go to authorization URL as before\n        // When PAR is enabled, all parameters are sent securely in the PAR request body\n        // do not pass returnTo as part of authorizationParameters\n        // returnTo should only be used in txn state\n        const { returnTo, ...authorizationParameters } = searchParams;\n        const options = {\n            authorizationParameters,\n            returnTo: returnTo\n        };\n        return this.startInteractiveLogin(options);\n    }\n    async handleLogout(req) {\n        const session = await this.sessionStore.get(req.cookies);\n        const [discoveryError, authorizationServerMetadata] = await this.discoverAuthorizationServerMetadata();\n        if (discoveryError) {\n            // Clean up session on discovery error\n            const errorResponse = new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"An error occurred while trying to initiate the logout request.\", {\n                status: 500\n            });\n            await this.sessionStore.delete(req.cookies, errorResponse.cookies);\n            await this.transactionStore.deleteAll(req.cookies, errorResponse.cookies);\n            return errorResponse;\n        }\n        const returnTo = req.nextUrl.searchParams.get(\"returnTo\") || this.appBaseUrl;\n        const federated = req.nextUrl.searchParams.has(\"federated\");\n        const createV2LogoutResponse = () => {\n            const url = new URL(\"/v2/logout\", this.issuer);\n            url.searchParams.set(\"returnTo\", returnTo);\n            url.searchParams.set(\"client_id\", this.clientMetadata.client_id);\n            if (federated) {\n                url.searchParams.set(\"federated\", \"\");\n            }\n            return next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(url);\n        };\n        const createOIDCLogoutResponse = () => {\n            const url = new URL(authorizationServerMetadata.end_session_endpoint);\n            url.searchParams.set(\"client_id\", this.clientMetadata.client_id);\n            url.searchParams.set(\"post_logout_redirect_uri\", returnTo);\n            if (session?.internal.sid) {\n                url.searchParams.set(\"logout_hint\", session.internal.sid);\n            }\n            if (this.includeIdTokenHintInOIDCLogoutUrl && session?.tokenSet.idToken) {\n                url.searchParams.set(\"id_token_hint\", session.tokenSet.idToken);\n            }\n            if (federated) {\n                url.searchParams.set(\"federated\", \"\");\n            }\n            return next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(url);\n        };\n        // Determine logout strategy and create appropriate response\n        let logoutResponse;\n        if (this.logoutStrategy === \"v2\") {\n            // Always use v2 logout endpoint\n            logoutResponse = createV2LogoutResponse();\n        }\n        else if (this.logoutStrategy === \"oidc\") {\n            // Always use OIDC RP-Initiated Logout\n            if (!authorizationServerMetadata.end_session_endpoint) {\n                // Clean up session on OIDC error\n                const errorResponse = new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"OIDC RP-Initiated Logout is not supported by the authorization server. Enable it or use a different logout strategy.\", {\n                    status: 500\n                });\n                await this.sessionStore.delete(req.cookies, errorResponse.cookies);\n                await this.transactionStore.deleteAll(req.cookies, errorResponse.cookies);\n                return errorResponse;\n            }\n            logoutResponse = createOIDCLogoutResponse();\n        }\n        else {\n            // Auto strategy (default): Try OIDC first, fallback to v2 if not available\n            if (!authorizationServerMetadata.end_session_endpoint) {\n                console.warn(\"The Auth0 client does not have RP-initiated logout enabled, the user will be redirected to the `/v2/logout` endpoint instead. Learn how to enable it here: https://auth0.com/docs/authenticate/login/logout/log-users-out-of-auth0#enable-endpoint-discovery\");\n                logoutResponse = createV2LogoutResponse();\n            }\n            else {\n                logoutResponse = createOIDCLogoutResponse();\n            }\n        }\n        // Clean up session and transaction cookies\n        await this.sessionStore.delete(req.cookies, logoutResponse.cookies);\n        (0,_cookies_js__WEBPACK_IMPORTED_MODULE_12__.addCacheControlHeadersForSession)(logoutResponse);\n        // Clear any orphaned transaction cookies\n        await this.transactionStore.deleteAll(req.cookies, logoutResponse.cookies);\n        return logoutResponse;\n    }\n    async handleCallback(req) {\n        const state = req.nextUrl.searchParams.get(\"state\");\n        if (!state) {\n            return this.handleCallbackError(new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.MissingStateError(), {}, req);\n        }\n        const transactionStateCookie = await this.transactionStore.get(req.cookies, state);\n        if (!transactionStateCookie) {\n            return this.onCallback(new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.InvalidStateError(), {}, null);\n        }\n        const transactionState = transactionStateCookie.payload;\n        const onCallbackCtx = {\n            responseType: transactionState.responseType,\n            returnTo: transactionState.returnTo\n        };\n        if (transactionState.responseType === _types_index_js__WEBPACK_IMPORTED_MODULE_3__.RESPONSE_TYPES.CONNECT_CODE) {\n            const session = await this.sessionStore.get(req.cookies);\n            if (!session) {\n                return this.handleCallbackError(new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountError({\n                    code: _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountErrorCodes.MISSING_SESSION,\n                    message: \"The user does not have an active session.\"\n                }), onCallbackCtx, req, state);\n            }\n            // get an access token for connected accounts\n            const [tokenSetError, tokenSetResponse] = await this.getTokenSet(session, {\n                audience: `${this.issuer}/me/`,\n                scope: \"create:me:connected_accounts\"\n            });\n            if (tokenSetError) {\n                return this.handleCallbackError(tokenSetError, onCallbackCtx, req, state);\n            }\n            const [completeConnectAccountError, connectedAccount] = await this.completeConnectAccount({\n                tokenSet: tokenSetResponse.tokenSet,\n                authSession: transactionState.authSession,\n                connectCode: req.nextUrl.searchParams.get(\"connect_code\"),\n                redirectUri: createRouteUrl(this.routes.callback, this.appBaseUrl).toString(),\n                codeVerifier: transactionState.codeVerifier\n            });\n            if (completeConnectAccountError) {\n                return this.handleCallbackError(completeConnectAccountError, onCallbackCtx, req, state);\n            }\n            const res = await this.onCallback(null, {\n                ...onCallbackCtx,\n                connectedAccount\n            }, session);\n            await this.transactionStore.delete(res.cookies, state);\n            return res;\n        }\n        const [discoveryError, authorizationServerMetadata] = await this.discoverAuthorizationServerMetadata();\n        if (discoveryError) {\n            return this.handleCallbackError(discoveryError, onCallbackCtx, req, state);\n        }\n        let codeGrantParams;\n        try {\n            codeGrantParams = oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.validateAuthResponse(authorizationServerMetadata, this.clientMetadata, req.nextUrl.searchParams, transactionState.state);\n        }\n        catch (e) {\n            return this.handleCallbackError(new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AuthorizationError({\n                cause: new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.OAuth2Error({\n                    code: e.error,\n                    message: e.error_description\n                })\n            }), onCallbackCtx, req, state);\n        }\n        let codeGrantResponse;\n        let redirectUri;\n        let authorizationCodeGrantRequestCall;\n        try {\n            redirectUri = createRouteUrl(this.routes.callback, this.appBaseUrl); // must be registered with the authorization server\n            authorizationCodeGrantRequestCall = async () => oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.authorizationCodeGrantRequest(authorizationServerMetadata, this.clientMetadata, await this.getClientAuth(), codeGrantParams, redirectUri.toString(), transactionState.codeVerifier, {\n                ...this.httpOptions(),\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.customFetch]: this.fetch,\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.allowInsecureRequests]: this.allowInsecureRequests,\n                ...(this.useDPoP &&\n                    this.dpopKeyPair && {\n                    DPoP: oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.DPoP(this.clientMetadata, this.dpopKeyPair)\n                })\n            });\n            codeGrantResponse = await authorizationCodeGrantRequestCall();\n        }\n        catch (e) {\n            return this.handleCallbackError(new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AuthorizationCodeGrantRequestError(e.message), onCallbackCtx, req, state);\n        }\n        let oidcRes;\n        try {\n            // Process the authorization code response\n            // For authorization code flows, oauth4webapi handles DPoP nonce management internally\n            // No need for manual retry since authorization codes are single-use\n            oidcRes = await oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.processAuthorizationCodeResponse(authorizationServerMetadata, this.clientMetadata, codeGrantResponse, {\n                expectedNonce: transactionState.nonce,\n                maxAge: transactionState.maxAge,\n                requireIdToken: true\n            });\n        }\n        catch (e) {\n            return this.handleCallbackError(new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AuthorizationCodeGrantError({\n                cause: new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.OAuth2Error({\n                    code: e.error,\n                    message: e.error_description\n                })\n            }), onCallbackCtx, req, state);\n        }\n        const idTokenClaims = oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.getValidatedIdTokenClaims(oidcRes);\n        let session = {\n            user: idTokenClaims,\n            tokenSet: {\n                accessToken: oidcRes.access_token,\n                idToken: oidcRes.id_token,\n                scope: oidcRes.scope,\n                requestedScope: transactionState.scope,\n                audience: transactionState.audience,\n                refreshToken: oidcRes.refresh_token,\n                expiresAt: Math.floor(Date.now() / 1000) + Number(oidcRes.expires_in)\n            },\n            internal: {\n                sid: idTokenClaims.sid,\n                createdAt: Math.floor(Date.now() / 1000)\n            }\n        };\n        const res = await this.onCallback(null, onCallbackCtx, session);\n        // call beforeSessionSaved callback if present\n        // if not then filter id_token claims with default rules\n        session = await this.finalizeSession(session, oidcRes.id_token);\n        await this.sessionStore.set(req.cookies, res.cookies, session, true);\n        (0,_cookies_js__WEBPACK_IMPORTED_MODULE_12__.addCacheControlHeadersForSession)(res);\n        // Clean up the current transaction cookie after successful authentication\n        await this.transactionStore.delete(res.cookies, state);\n        return res;\n    }\n    async handleProfile(req) {\n        const session = await this.sessionStore.get(req.cookies);\n        if (!session) {\n            if (this.noContentProfileResponseWhenUnauthenticated) {\n                return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n                    status: 204\n                });\n            }\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n                status: 401\n            });\n        }\n        const res = next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(session?.user);\n        (0,_cookies_js__WEBPACK_IMPORTED_MODULE_12__.addCacheControlHeadersForSession)(res);\n        return res;\n    }\n    async handleAccessToken(req) {\n        const session = await this.sessionStore.get(req.cookies);\n        const audience = req.nextUrl.searchParams.get(\"audience\");\n        const scope = req.nextUrl.searchParams.get(\"scope\");\n        if (!session) {\n            return next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: {\n                    message: \"The user does not have an active session.\",\n                    code: _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenErrorCode.MISSING_SESSION\n                }\n            }, {\n                status: 401\n            });\n        }\n        const [error, getTokenSetResponse] = await this.getTokenSet(session, {\n            scope,\n            audience\n        });\n        if (error) {\n            return next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: {\n                    message: error.message,\n                    code: error.code\n                }\n            }, {\n                status: 401\n            });\n        }\n        const { tokenSet: updatedTokenSet, idTokenClaims } = getTokenSetResponse;\n        const res = next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            token: updatedTokenSet.accessToken,\n            scope: updatedTokenSet.scope,\n            expires_at: updatedTokenSet.expiresAt,\n            ...(updatedTokenSet.token_type && {\n                token_type: updatedTokenSet.token_type\n            })\n        });\n        const sessionChanges = (0,_utils_session_changes_helpers_js__WEBPACK_IMPORTED_MODULE_9__.getSessionChangesAfterGetAccessToken)(session, updatedTokenSet, {\n            scope: this.authorizationParameters?.scope,\n            audience: this.authorizationParameters?.audience\n        });\n        if (sessionChanges) {\n            if (idTokenClaims) {\n                session.user = idTokenClaims;\n            }\n            // call beforeSessionSaved callback if present\n            // if not then filter id_token claims with default rules\n            const finalSession = await this.finalizeSession(session, updatedTokenSet.idToken);\n            await this.sessionStore.set(req.cookies, res.cookies, {\n                ...finalSession,\n                ...sessionChanges\n            });\n            (0,_cookies_js__WEBPACK_IMPORTED_MODULE_12__.addCacheControlHeadersForSession)(res);\n        }\n        return res;\n    }\n    async handleBackChannelLogout(req) {\n        if (!this.sessionStore.store) {\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"A session data store is not configured.\", {\n                status: 500\n            });\n        }\n        if (!this.sessionStore.store.deleteByLogoutToken) {\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Back-channel logout is not supported by the session data store.\", {\n                status: 500\n            });\n        }\n        const body = new URLSearchParams(await req.text());\n        const logoutToken = body.get(\"logout_token\");\n        if (!logoutToken) {\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Missing `logout_token` in the request body.\", {\n                status: 400\n            });\n        }\n        const [error, logoutTokenClaims] = await this.verifyLogoutToken(logoutToken);\n        if (error) {\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(error.message, {\n                status: 400\n            });\n        }\n        await this.sessionStore.store.deleteByLogoutToken(logoutTokenClaims);\n        return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n            status: 204\n        });\n    }\n    async handleConnectAccount(req) {\n        const session = await this.sessionStore.get(req.cookies);\n        // pass all query params except `connection` and `returnTo` as authorization params\n        const connection = req.nextUrl.searchParams.get(\"connection\");\n        const returnTo = req.nextUrl.searchParams.get(\"returnTo\") ?? undefined;\n        const authorizationParams = Object.fromEntries([...req.nextUrl.searchParams.entries()].filter(([key]) => key !== \"connection\" && key !== \"returnTo\"));\n        if (!connection) {\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"A connection is required.\", {\n                status: 400\n            });\n        }\n        if (!session) {\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"The user does not have an active session.\", {\n                status: 401\n            });\n        }\n        const [getTokenSetError, getTokenSetResponse] = await this.getTokenSet(session, {\n            scope: \"create:me:connected_accounts\",\n            audience: `${this.issuer}/me/`\n        });\n        if (getTokenSetError) {\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Failed to retrieve a connected account access token.\", {\n                status: 401\n            });\n        }\n        const { tokenSet, idTokenClaims } = getTokenSetResponse;\n        const [connectAccountError, connectAccountResponse] = await this.connectAccount({\n            tokenSet: tokenSet,\n            connection,\n            authorizationParams,\n            returnTo\n        });\n        if (connectAccountError) {\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(connectAccountError.message, {\n                status: connectAccountError.cause?.status ?? 500\n            });\n        }\n        // update the session with the new token set, if necessary\n        const sessionChanges = (0,_utils_session_changes_helpers_js__WEBPACK_IMPORTED_MODULE_9__.getSessionChangesAfterGetAccessToken)(session, tokenSet, {\n            scope: this.authorizationParameters?.scope ?? _utils_constants_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_SCOPES,\n            audience: this.authorizationParameters?.audience\n        });\n        if (sessionChanges) {\n            if (idTokenClaims) {\n                session.user = idTokenClaims;\n            }\n            // call beforeSessionSaved callback if present\n            // if not then filter id_token claims with default rules\n            const finalSession = await this.finalizeSession(session, tokenSet.idToken);\n            await this.sessionStore.set(req.cookies, connectAccountResponse.cookies, {\n                ...finalSession,\n                ...sessionChanges\n            });\n            (0,_cookies_js__WEBPACK_IMPORTED_MODULE_12__.addCacheControlHeadersForSession)(connectAccountResponse);\n        }\n        return connectAccountResponse;\n    }\n    /**\n     * Retrieves OAuth token sets, handling token refresh when necessary or if forced.\n     *\n     * @returns A tuple containing either:\n     *   - `[SdkError, null]` if an error occurred (missing refresh token, discovery failure, or refresh failure)\n     *   - `[null, {tokenSet, idTokenClaims}]` if a new token was retrieved, containing the new token set ID token claims\n     *   - `[null, {tokenSet, }]` if token refresh was not done and existing token was returned\n     */\n    async getTokenSet(sessionData, options = {}) {\n        // This will merge the scopes from the authorization parameters and the options.\n        // The scope from the options will be added to the scopes from the authorization parameters.\n        // If there are duplicate scopes, they will be removed.\n        const scope = (0,_utils_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_10__.mergeScopes)((0,_utils_scope_helpers_js__WEBPACK_IMPORTED_MODULE_8__.getScopeForAudience)(this.authorizationParameters.scope, options.audience ?? this.authorizationParameters.audience), options.scope);\n        const tokenSet = __classPrivateFieldGet(this, _AuthClient_instances, \"m\", _AuthClient_getTokenSetFromSession).call(this, sessionData, {\n            scope: scope,\n            audience: options.audience ?? this.authorizationParameters.audience\n        });\n        // no access token was found that matches the, optional, provided audience and scope\n        if (!tokenSet.refreshToken && !tokenSet.accessToken) {\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenError(_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenErrorCode.MISSING_REFRESH_TOKEN, \"No access token found and a refresh token was not provided. The user needs to re-authenticate.\"),\n                null\n            ];\n        }\n        // the access token was found, but it has expired and we do not have a refresh token\n        if (!tokenSet.refreshToken &&\n            tokenSet.accessToken &&\n            tokenSet.expiresAt &&\n            tokenSet.expiresAt <= Date.now() / 1000) {\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenError(_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenErrorCode.MISSING_REFRESH_TOKEN, \"The access token has expired and a refresh token was not provided. The user needs to re-authenticate.\"),\n                null\n            ];\n        }\n        if (tokenSet.refreshToken) {\n            // either the access token has expired or we are forcing a refresh\n            if (options.refresh ||\n                !tokenSet.expiresAt ||\n                tokenSet.expiresAt <= Date.now() / 1000) {\n                const [discoveryError, authorizationServerMetadata] = await this.discoverAuthorizationServerMetadata();\n                if (discoveryError) {\n                    return [discoveryError, null];\n                }\n                const additionalParameters = new URLSearchParams();\n                if (options.scope) {\n                    additionalParameters.append(\"scope\", scope);\n                }\n                if (options.audience) {\n                    additionalParameters.append(\"audience\", options.audience);\n                }\n                const refreshTokenGrantRequestCall = async () => oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.refreshTokenGrantRequest(authorizationServerMetadata, this.clientMetadata, await this.getClientAuth(), tokenSet.refreshToken, {\n                    ...this.httpOptions(),\n                    [oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.customFetch]: this.fetch,\n                    [oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.allowInsecureRequests]: this.allowInsecureRequests,\n                    additionalParameters,\n                    ...(this.useDPoP &&\n                        this.dpopKeyPair && {\n                        DPoP: oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.DPoP(this.clientMetadata, this.dpopKeyPair)\n                    })\n                });\n                const processRefreshTokenResponseCall = (response) => oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.processRefreshTokenResponse(authorizationServerMetadata, this.clientMetadata, response);\n                let oauthRes;\n                try {\n                    oauthRes = await (0,_utils_dpopUtils_js__WEBPACK_IMPORTED_MODULE_6__.withDPoPNonceRetry)(async () => {\n                        const refreshTokenRes = await refreshTokenGrantRequestCall();\n                        return await processRefreshTokenResponseCall(refreshTokenRes);\n                    }, this.dpopOptions?.retry);\n                }\n                catch (e) {\n                    return [\n                        new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenError(_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenErrorCode.FAILED_TO_REFRESH_TOKEN, \"The access token has expired and there was an error while trying to refresh it.\", new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.OAuth2Error({\n                            code: e.error,\n                            message: e.error_description\n                        })),\n                        null\n                    ];\n                }\n                const idTokenClaims = oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.getValidatedIdTokenClaims(oauthRes);\n                const accessTokenExpiresAt = Math.floor(Date.now() / 1000) + Number(oauthRes.expires_in);\n                const updatedTokenSet = {\n                    ...tokenSet, // contains the existing `iat` claim to maintain the session lifetime\n                    accessToken: oauthRes.access_token,\n                    idToken: oauthRes.id_token,\n                    // We store the both requested and granted scopes on the tokenSet, so we know what scopes were requested.\n                    // The server may return less scopes than requested.\n                    // This ensures we can return the same token again when a token for the same or less scopes is requested by using `requestedScope` during look-up.\n                    //\n                    // E.g. When requesting a token with scope `a b`, and we return one for scope `a` only,\n                    // - If we only store the returned scopes, we cannot return this token when the user requests a token for scope `a b` again.\n                    // - If we only store the requested scopes, we lose track of the actual scopes granted.\n                    //\n                    // Scopes actually granted by the server\n                    scope: oauthRes.scope,\n                    // Scopes requested by the client\n                    requestedScope: scope,\n                    expiresAt: accessTokenExpiresAt,\n                    // Keep the audience if it exists, otherwise use the one from the options.\n                    // If not provided, use `undefined`.\n                    audience: tokenSet.audience || options.audience || undefined,\n                    // Store the token type from the OAuth response (e.g., \"Bearer\", \"DPoP\")\n                    ...(oauthRes.token_type && { token_type: oauthRes.token_type })\n                };\n                if (oauthRes.refresh_token) {\n                    // refresh token rotation is enabled, persist the new refresh token from the response\n                    updatedTokenSet.refreshToken = oauthRes.refresh_token;\n                }\n                else {\n                    // we did not get a refresh token back, keep the current long-lived refresh token around\n                    updatedTokenSet.refreshToken = tokenSet.refreshToken;\n                }\n                return [\n                    null,\n                    {\n                        tokenSet: updatedTokenSet,\n                        idTokenClaims: idTokenClaims\n                    }\n                ];\n            }\n        }\n        return [null, { tokenSet: tokenSet, idTokenClaims: undefined }];\n    }\n    async backchannelAuthentication(options) {\n        const [discoveryError, authorizationServerMetadata] = await this.discoverAuthorizationServerMetadata();\n        if (discoveryError) {\n            return [discoveryError, null];\n        }\n        if (!authorizationServerMetadata.backchannel_authentication_endpoint) {\n            return [new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.BackchannelAuthenticationNotSupportedError(), null];\n        }\n        // If provided on both sides, this does not merge the scope property,\n        // instead, the scope from the right side (options) fully overrides the left side.\n        // This is done to avoid breaking existing behavior.\n        const authorizationParams = (0,_utils_authorization_params_helpers_js__WEBPACK_IMPORTED_MODULE_4__.mergeAuthorizationParamsIntoSearchParams)(this.authorizationParameters, options.authorizationParams, INTERNAL_AUTHORIZE_PARAMS);\n        if (!authorizationParams.get(\"scope\")) {\n            authorizationParams.set(\"scope\", _utils_constants_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_SCOPES);\n        }\n        authorizationParams.set(\"client_id\", this.clientMetadata.client_id);\n        authorizationParams.set(\"binding_message\", options.bindingMessage);\n        authorizationParams.set(\"login_hint\", JSON.stringify({\n            format: \"iss_sub\",\n            iss: authorizationServerMetadata.issuer,\n            sub: options.loginHint.sub\n        }));\n        if (options.requestedExpiry) {\n            authorizationParams.append(\"requested_expiry\", options.requestedExpiry.toString());\n        }\n        if (options.authorizationDetails) {\n            authorizationParams.append(\"authorization_details\", JSON.stringify(options.authorizationDetails));\n        }\n        const [openIdClientConfigError, openidClientConfig] = await this.getOpenIdClientConfig();\n        if (openIdClientConfigError) {\n            return [openIdClientConfigError, null];\n        }\n        try {\n            const backchannelAuthenticationResponse = await openid_client__WEBPACK_IMPORTED_MODULE_18__.initiateBackchannelAuthentication(openidClientConfig, authorizationParams);\n            const tokenEndpointResponse = await openid_client__WEBPACK_IMPORTED_MODULE_18__.pollBackchannelAuthenticationGrant(openidClientConfig, backchannelAuthenticationResponse);\n            const accessTokenExpiresAt = Math.floor(Date.now() / 1000) +\n                Number(tokenEndpointResponse.expires_in);\n            return [\n                null,\n                {\n                    tokenSet: {\n                        accessToken: tokenEndpointResponse.access_token,\n                        idToken: tokenEndpointResponse.id_token,\n                        scope: tokenEndpointResponse.scope,\n                        refreshToken: tokenEndpointResponse.refresh_token,\n                        expiresAt: accessTokenExpiresAt\n                    },\n                    idTokenClaims: tokenEndpointResponse.claims(),\n                    authorizationDetails: tokenEndpointResponse.authorization_details\n                }\n            ];\n        }\n        catch (e) {\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.BackchannelAuthenticationError({\n                    cause: new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.OAuth2Error({\n                        code: e.error,\n                        message: e.error_description\n                    })\n                }),\n                null\n            ];\n        }\n    }\n    async discoverAuthorizationServerMetadata() {\n        if (this.authorizationServerMetadata) {\n            return [null, this.authorizationServerMetadata];\n        }\n        const issuer = new URL(this.issuer);\n        try {\n            const authorizationServerMetadata = await oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.discoveryRequest(issuer, {\n                ...this.httpOptions(),\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.customFetch]: this.fetch,\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.allowInsecureRequests]: this.allowInsecureRequests\n            })\n                .then((response) => oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.processDiscoveryResponse(issuer, response));\n            this.authorizationServerMetadata = authorizationServerMetadata;\n            return [null, authorizationServerMetadata];\n        }\n        catch (e) {\n            console.error(`An error occurred while performing the discovery request. issuer=${issuer.toString()}, error:`, e);\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.DiscoveryError(\"Discovery failed for the OpenID Connect configuration.\"),\n                null\n            ];\n        }\n    }\n    async defaultOnCallback(error, ctx) {\n        if (error) {\n            return new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(error.message, {\n                status: 500\n            });\n        }\n        const res = next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(createRouteUrl(ctx.returnTo || \"/\", this.appBaseUrl));\n        return res;\n    }\n    /**\n     * Handle callback errors with transaction cleanup\n     */\n    async handleCallbackError(error, ctx, req, state) {\n        const response = await this.onCallback(error, ctx, null);\n        // Clean up the transaction cookie on error to prevent accumulation\n        if (state) {\n            await this.transactionStore.delete(response.cookies, state);\n        }\n        return response;\n    }\n    async verifyLogoutToken(logoutToken) {\n        const [discoveryError, authorizationServerMetadata] = await this.discoverAuthorizationServerMetadata();\n        if (discoveryError) {\n            return [discoveryError, null];\n        }\n        // only `RS256` is supported for logout tokens\n        const ID_TOKEN_SIGNING_ALG = \"RS256\";\n        const keyInput = jose__WEBPACK_IMPORTED_MODULE_19__.createRemoteJWKSet(new URL(authorizationServerMetadata.jwks_uri), {\n            [jose__WEBPACK_IMPORTED_MODULE_19__.jwksCache]: this.jwksCache\n        });\n        const { payload } = await jose__WEBPACK_IMPORTED_MODULE_20__.jwtVerify(logoutToken, keyInput, {\n            issuer: authorizationServerMetadata.issuer,\n            audience: this.clientMetadata.client_id,\n            algorithms: [ID_TOKEN_SIGNING_ALG],\n            requiredClaims: [\"iat\"]\n        });\n        if (!(\"sid\" in payload) && !(\"sub\" in payload)) {\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.BackchannelLogoutError('either \"sid\" or \"sub\" (or both) claims must be present'),\n                null\n            ];\n        }\n        if (\"sid\" in payload && typeof payload.sid !== \"string\") {\n            return [new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.BackchannelLogoutError('\"sid\" claim must be a string'), null];\n        }\n        if (\"sub\" in payload && typeof payload.sub !== \"string\") {\n            return [new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.BackchannelLogoutError('\"sub\" claim must be a string'), null];\n        }\n        if (\"nonce\" in payload) {\n            return [new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.BackchannelLogoutError('\"nonce\" claim is prohibited'), null];\n        }\n        if (!(\"events\" in payload)) {\n            return [new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.BackchannelLogoutError('\"events\" claim is missing'), null];\n        }\n        if (typeof payload.events !== \"object\" || payload.events === null) {\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.BackchannelLogoutError('\"events\" claim must be an object'),\n                null\n            ];\n        }\n        if (!(\"http://schemas.openid.net/event/backchannel-logout\" in payload.events)) {\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.BackchannelLogoutError('\"http://schemas.openid.net/event/backchannel-logout\" member is missing in the \"events\" claim'),\n                null\n            ];\n        }\n        if (typeof payload.events[\"http://schemas.openid.net/event/backchannel-logout\"] !== \"object\") {\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.BackchannelLogoutError('\"http://schemas.openid.net/event/backchannel-logout\" member in the \"events\" claim must be an object'),\n                null\n            ];\n        }\n        return [\n            null,\n            {\n                sid: payload.sid,\n                sub: payload.sub\n            }\n        ];\n    }\n    async authorizationUrl(params) {\n        const [discoveryError, authorizationServerMetadata] = await this.discoverAuthorizationServerMetadata();\n        if (discoveryError) {\n            return [discoveryError, null];\n        }\n        if (this.pushedAuthorizationRequests &&\n            !authorizationServerMetadata.pushed_authorization_request_endpoint) {\n            console.error(\"The Auth0 tenant does not have pushed authorization requests enabled. Learn how to enable it here: https://auth0.com/docs/get-started/applications/configure-par\");\n            return [\n                new Error(\"The authorization server does not support pushed authorization requests.\"),\n                null\n            ];\n        }\n        const authorizationUrl = new URL(authorizationServerMetadata.authorization_endpoint);\n        if (this.pushedAuthorizationRequests) {\n            // push the request params to the authorization server\n            const response = await oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.pushedAuthorizationRequest(authorizationServerMetadata, this.clientMetadata, await this.getClientAuth(), params, {\n                ...this.httpOptions(),\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.customFetch]: this.fetch,\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.allowInsecureRequests]: this.allowInsecureRequests\n            });\n            let parRes;\n            try {\n                parRes = await oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.processPushedAuthorizationResponse(authorizationServerMetadata, this.clientMetadata, response);\n            }\n            catch (e) {\n                return [\n                    new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AuthorizationError({\n                        cause: new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.OAuth2Error({\n                            code: e.error,\n                            message: e.error_description\n                        }),\n                        message: \"An error occurred while pushing the authorization request.\"\n                    }),\n                    null\n                ];\n            }\n            authorizationUrl.searchParams.set(\"request_uri\", parRes.request_uri);\n            authorizationUrl.searchParams.set(\"client_id\", this.clientMetadata.client_id);\n            return [null, authorizationUrl];\n        }\n        // append the query parameters to the authorization URL for the normal flow\n        authorizationUrl.search = params.toString();\n        return [null, authorizationUrl];\n    }\n    async getClientAuth() {\n        if (!this.clientSecret && !this.clientAssertionSigningKey) {\n            throw new Error(\"The client secret or client assertion signing key must be provided.\");\n        }\n        let clientPrivateKey = this\n            .clientAssertionSigningKey;\n        if (clientPrivateKey && typeof clientPrivateKey === \"string\") {\n            clientPrivateKey = await jose__WEBPACK_IMPORTED_MODULE_21__.importPKCS8(clientPrivateKey, this.clientAssertionSigningAlg);\n        }\n        return clientPrivateKey\n            ? oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.PrivateKeyJwt(clientPrivateKey)\n            : oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.ClientSecretPost(this.clientSecret);\n    }\n    get issuer() {\n        return this.domain.startsWith(\"http://\") ||\n            this.domain.startsWith(\"https://\")\n            ? this.domain\n            : `https://${this.domain}`;\n    }\n    /**\n     * Exchanges a refresh token for an access token for a connection.\n     *\n     * This method performs a token exchange using the provided refresh token and connection details.\n     * It first checks if the refresh token is present in the `tokenSet`. If not, it returns an error.\n     * Then, it constructs the necessary parameters for the token exchange request and performs\n     * the request to the authorization server's token endpoint.\n     *\n     * @returns {Promise<[AccessTokenForConnectionError, null] | [null, ConnectionTokenSet]>} A promise that resolves to a tuple.\n     *          The first element is either an `AccessTokenForConnectionError` if an error occurred, or `null` if the request was successful.\n     *          The second element is either `null` if an error occurred, or a `ConnectionTokenSet` object\n     *          containing the access token, expiration time, and scope if the request was successful.\n     *\n     * @throws {AccessTokenForConnectionError} If the refresh token is missing or if there is an error during the token exchange process.\n     */\n    async getConnectionTokenSet(tokenSet, connectionTokenSet, options) {\n        // If we do not have a refresh token\n        // and we do not have a connection token set in the cache or the one we have is expired,\n        // there is nothing to retrieve and we return an error.\n        if (!tokenSet.refreshToken &&\n            (!connectionTokenSet || connectionTokenSet.expiresAt <= Date.now() / 1000)) {\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenForConnectionError(_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenForConnectionErrorCode.MISSING_REFRESH_TOKEN, \"A refresh token was not present, Connection Access Token requires a refresh token. The user needs to re-authenticate.\"),\n                null\n            ];\n        }\n        // If we do have a refresh token,\n        // and we do not have a connection token set in the cache or the one we have is expired,\n        // we need to exchange the refresh token for a connection access token.\n        if (tokenSet.refreshToken &&\n            (!connectionTokenSet || connectionTokenSet.expiresAt <= Date.now() / 1000)) {\n            const params = new URLSearchParams();\n            params.append(\"connection\", options.connection);\n            const subjectTokenType = options.subject_token_type ??\n                _types_index_js__WEBPACK_IMPORTED_MODULE_3__.SUBJECT_TOKEN_TYPES.SUBJECT_TYPE_REFRESH_TOKEN;\n            const subjectToken = subjectTokenType === _types_index_js__WEBPACK_IMPORTED_MODULE_3__.SUBJECT_TOKEN_TYPES.SUBJECT_TYPE_ACCESS_TOKEN\n                ? tokenSet.accessToken\n                : tokenSet.refreshToken;\n            params.append(\"subject_token_type\", subjectTokenType);\n            params.append(\"subject_token\", subjectToken);\n            params.append(\"requested_token_type\", REQUESTED_TOKEN_TYPE_FEDERATED_CONNECTION_ACCESS_TOKEN);\n            if (options.login_hint) {\n                params.append(\"login_hint\", options.login_hint);\n            }\n            const [discoveryError, authorizationServerMetadata] = await this.discoverAuthorizationServerMetadata();\n            if (discoveryError) {\n                return [discoveryError, null];\n            }\n            const genericTokenEndpointRequestCall = async () => oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.genericTokenEndpointRequest(authorizationServerMetadata, this.clientMetadata, await this.getClientAuth(), GRANT_TYPE_FEDERATED_CONNECTION_ACCESS_TOKEN, params, {\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.customFetch]: this.fetch,\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.allowInsecureRequests]: this.allowInsecureRequests,\n                ...(this.useDPoP &&\n                    this.dpopKeyPair && {\n                    DPoP: oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.DPoP(this.clientMetadata, this.dpopKeyPair)\n                })\n            });\n            const processGenericTokenEndpointResponseCall = (response) => oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.processGenericTokenEndpointResponse(authorizationServerMetadata, this.clientMetadata, response);\n            let tokenEndpointResponse;\n            try {\n                tokenEndpointResponse = await (0,_utils_dpopUtils_js__WEBPACK_IMPORTED_MODULE_6__.withDPoPNonceRetry)(async () => {\n                    const httpResponse = await genericTokenEndpointRequestCall();\n                    return await processGenericTokenEndpointResponseCall(httpResponse);\n                }, this.dpopOptions?.retry);\n            }\n            catch (err) {\n                return [\n                    new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenForConnectionError(_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenForConnectionErrorCode.FAILED_TO_EXCHANGE, \"There was an error trying to exchange the refresh token for a connection access token.\", new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.OAuth2Error({\n                        code: err.error,\n                        message: err.error_description\n                    })),\n                    null\n                ];\n            }\n            return [\n                null,\n                {\n                    accessToken: tokenEndpointResponse.access_token,\n                    expiresAt: Math.floor(Date.now() / 1000) +\n                        Number(tokenEndpointResponse.expires_in),\n                    scope: tokenEndpointResponse.scope,\n                    connection: options.connection\n                }\n            ];\n        }\n        return [null, connectionTokenSet];\n    }\n    /**\n     * Filters and processes ID token claims for a session.\n     *\n     * If a `beforeSessionSaved` callback is configured, it will be invoked to allow\n     * custom processing of the session and ID token. Otherwise, default filtering\n     * will be applied to remove standard ID token claims from the user object.\n     */\n    async finalizeSession(session, idToken) {\n        if (this.beforeSessionSaved) {\n            const updatedSession = await this.beforeSessionSaved(session, idToken ?? null);\n            session = {\n                ...updatedSession,\n                internal: session.internal\n            };\n        }\n        else {\n            session.user = (0,_user_js__WEBPACK_IMPORTED_MODULE_14__.filterDefaultIdTokenClaims)(session.user);\n        }\n        return session;\n    }\n    /**\n     * Initiates the connect account flow for linking a third-party account to the user's profile.\n     * The user will be redirected to authorize the connection.\n     */\n    async connectAccount(options) {\n        const redirectUri = createRouteUrl(this.routes.callback, this.appBaseUrl);\n        let returnTo = this.signInReturnToPath;\n        // Validate returnTo parameter\n        if (options.returnTo) {\n            const safeBaseUrl = new URL(this.authorizationParameters.redirect_uri ||\n                this.appBaseUrl);\n            const sanitizedReturnTo = (0,_utils_url_helpers_js__WEBPACK_IMPORTED_MODULE_11__.toSafeRedirect)(options.returnTo, safeBaseUrl);\n            if (sanitizedReturnTo) {\n                returnTo =\n                    sanitizedReturnTo.pathname +\n                        sanitizedReturnTo.search +\n                        sanitizedReturnTo.hash;\n            }\n        }\n        // Generate PKCE challenges\n        const codeChallengeMethod = \"S256\";\n        const codeVerifier = oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.generateRandomCodeVerifier();\n        const codeChallenge = await oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.calculatePKCECodeChallenge(codeVerifier);\n        const state = oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.generateRandomState();\n        const [error, connectAccountResponse] = await this.createConnectAccountTicket({\n            tokenSet: options.tokenSet,\n            connection: options.connection,\n            redirectUri: redirectUri.toString(),\n            state,\n            codeChallenge,\n            codeChallengeMethod,\n            authorizationParams: options.authorizationParams\n        });\n        if (error) {\n            return [error, null];\n        }\n        const transactionState = {\n            codeVerifier,\n            responseType: _types_index_js__WEBPACK_IMPORTED_MODULE_3__.RESPONSE_TYPES.CONNECT_CODE,\n            state,\n            returnTo,\n            authSession: connectAccountResponse.authSession\n        };\n        const res = next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(`${connectAccountResponse.connectUri}?ticket=${encodeURIComponent(connectAccountResponse.connectParams.ticket)}`);\n        await this.transactionStore.save(res.cookies, transactionState);\n        return [null, res];\n    }\n    async createConnectAccountTicket(options) {\n        try {\n            const connectAccountUrl = new URL(\"/me/v1/connected-accounts/connect\", this.issuer);\n            const fetcher = await this.fetcherFactory({\n                useDPoP: this.useDPoP,\n                getAccessToken: async () => ({\n                    accessToken: options.tokenSet.accessToken,\n                    expiresAt: options.tokenSet.expiresAt || 0,\n                    scope: options.tokenSet.scope,\n                    token_type: options.tokenSet.token_type\n                }),\n                fetch: this.fetch\n            });\n            const httpOptions = this.httpOptions();\n            const headers = new Headers(httpOptions.headers);\n            headers.set(\"Content-Type\", \"application/json\");\n            const requestBody = {\n                connection: options.connection,\n                redirect_uri: options.redirectUri,\n                state: options.state,\n                code_challenge: options.codeChallenge,\n                code_challenge_method: options.codeChallengeMethod,\n                authorization_params: options.authorizationParams\n            };\n            const res = await fetcher.fetchWithAuth(connectAccountUrl.toString(), {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(requestBody)\n            });\n            if (!res.ok) {\n                try {\n                    const errorBody = await res.json();\n                    return [\n                        new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountError({\n                            code: _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountErrorCodes.FAILED_TO_INITIATE,\n                            message: `The request to initiate the connect account flow failed with status ${res.status}.`,\n                            cause: new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.MyAccountApiError({\n                                type: errorBody.type,\n                                title: errorBody.title,\n                                detail: errorBody.detail,\n                                status: res.status,\n                                validationErrors: errorBody.validation_errors\n                            })\n                        }),\n                        null\n                    ];\n                }\n                catch (e) {\n                    return [\n                        new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountError({\n                            code: _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountErrorCodes.FAILED_TO_INITIATE,\n                            message: `The request to initiate the connect account flow failed with status ${res.status}.`\n                        }),\n                        null\n                    ];\n                }\n            }\n            const { connect_uri, connect_params, auth_session, expires_in } = await res.json();\n            return [\n                null,\n                {\n                    connectUri: connect_uri,\n                    connectParams: connect_params,\n                    authSession: auth_session,\n                    expiresIn: expires_in\n                }\n            ];\n        }\n        catch (e) {\n            let message = \"An unexpected error occurred while trying to initiate the connect account flow.\";\n            if (e instanceof _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.DPoPError) {\n                message = e.message;\n            }\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountError({\n                    code: _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountErrorCodes.FAILED_TO_INITIATE,\n                    message: message\n                }),\n                null\n            ];\n        }\n    }\n    async completeConnectAccount(options) {\n        const completeConnectAccountUrl = new URL(\"/me/v1/connected-accounts/complete\", this.issuer);\n        try {\n            const httpOptions = this.httpOptions();\n            const headers = new Headers(httpOptions.headers);\n            headers.set(\"Content-Type\", \"application/json\");\n            const fetcher = await this.fetcherFactory({\n                useDPoP: this.useDPoP,\n                getAccessToken: async () => ({\n                    accessToken: options.tokenSet.accessToken,\n                    expiresAt: options.tokenSet.expiresAt || 0,\n                    scope: options.tokenSet.scope,\n                    token_type: options.tokenSet.token_type\n                }),\n                fetch: this.fetch\n            });\n            const requestBody = {\n                auth_session: options.authSession,\n                connect_code: options.connectCode,\n                redirect_uri: options.redirectUri,\n                code_verifier: options.codeVerifier\n            };\n            const res = await fetcher.fetchWithAuth(completeConnectAccountUrl, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(requestBody)\n            });\n            if (!res.ok) {\n                try {\n                    const errorBody = await res.json();\n                    return [\n                        new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountError({\n                            code: _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountErrorCodes.FAILED_TO_COMPLETE,\n                            message: `The request to complete the connect account flow failed with status ${res.status}.`,\n                            cause: new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.MyAccountApiError({\n                                type: errorBody.type,\n                                title: errorBody.title,\n                                detail: errorBody.detail,\n                                status: res.status,\n                                validationErrors: errorBody.validation_errors\n                            })\n                        }),\n                        null\n                    ];\n                }\n                catch (e) {\n                    return [\n                        new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountError({\n                            code: _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountErrorCodes.FAILED_TO_COMPLETE,\n                            message: `The request to complete the connect account flow failed with status ${res.status}.`\n                        }),\n                        null\n                    ];\n                }\n            }\n            const { id, connection, access_type, scopes, created_at, expires_at } = await res.json();\n            return [\n                null,\n                {\n                    id,\n                    connection,\n                    accessType: access_type,\n                    scopes,\n                    createdAt: created_at,\n                    expiresAt: expires_at\n                }\n            ];\n        }\n        catch (e) {\n            return [\n                new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountError({\n                    code: _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountErrorCodes.FAILED_TO_COMPLETE,\n                    message: \"An unexpected error occurred while trying to complete the connect account flow.\"\n                }),\n                null\n            ];\n        }\n    }\n    async getOpenIdClientConfig() {\n        const [discoveryError, authorizationServerMetadata] = await this.discoverAuthorizationServerMetadata();\n        if (discoveryError) {\n            return [discoveryError, null];\n        }\n        const openidClientConfig = new openid_client__WEBPACK_IMPORTED_MODULE_18__.Configuration(authorizationServerMetadata, this.clientMetadata.client_id, {}, await this.getClientAuth());\n        const httpOpts = this.httpOptions();\n        const telemetryHeaders = new Headers(httpOpts.headers);\n        openidClientConfig[openid_client__WEBPACK_IMPORTED_MODULE_18__.customFetch] = (...args) => {\n            const headers = new Headers(args[1].headers);\n            return this.fetch(args[0], {\n                ...args[1],\n                body: args[1].body,\n                headers: new Headers([...telemetryHeaders, ...headers])\n            });\n        };\n        openidClientConfig.timeout = this.httpTimeout;\n        if (this.allowInsecureRequests) {\n            openid_client__WEBPACK_IMPORTED_MODULE_18__.allowInsecureRequests(openidClientConfig);\n        }\n        return [null, openidClientConfig];\n    }\n    /**\n     * Creates a new Fetcher instance with DPoP support and authentication capabilities.\n     *\n     * This method creates fetcher-scoped DPoP handles via `oauth.DPoP(this.clientMetadata, this.dpopKeyPair!)`.\n     * Each fetcher instance maintains its own DPoP nonce state for isolation and security.\n     * It is recommended to create fetchers at module level and reuse them across requests\n     *\n     * @example Recommended fetcher reuse pattern\n     * ```typescript\n     * const managementApi = await auth0.fetcherFactory({\n     *   baseUrl: `https://${process.env.AUTH0_DOMAIN}/api/v2/`,\n     *   session: await getSession(req, res)\n     * });\n     *\n     * // Use the same fetcher for multiple requests\n     * const users = await managementApi.get('users');\n     * const roles = await managementApi.get('roles');\n     * ```\n     *\n     * **DPoP Nonce Management:**\n     * - Each fetcher learns and caches nonces from the authorization server\n     * - Failed nonce validation triggers automatic retry with updated nonce\n     * - Nonce state is isolated between fetcher instances for security\n     *\n     * @param options Configuration options for the fetcher\n     * @returns Promise resolving to a configured Fetcher instance\n     * @throws {DPoPError} When DPoP is enabled but no keypair is configured\n     */\n    async fetcherFactory(options) {\n        if (this.useDPoP && !this.dpopKeyPair) {\n            throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.DPoPError(_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.DPoPErrorCode.DPOP_CONFIGURATION_ERROR, \"DPoP is enabled but no keypair is configured.\");\n        }\n        // Ensure authorization server metadata is available for oauth4webapi\n        const [discoveryError, _authorizationServerMetadata] = await this.discoverAuthorizationServerMetadata();\n        if (discoveryError) {\n            throw discoveryError;\n        }\n        const fetcherConfig = {\n            // Fetcher-scoped DPoP handle and nonce management\n            dpopHandle: this.useDPoP && (options.useDPoP ?? true)\n                ? oauth4webapi__WEBPACK_IMPORTED_MODULE_15__.DPoP(this.clientMetadata, this.dpopKeyPair)\n                : undefined,\n            httpOptions: this.httpOptions,\n            allowInsecureRequests: this.allowInsecureRequests,\n            retryConfig: this.dpopOptions?.retry,\n            fetch: options.fetch,\n            getAccessToken: options.getAccessToken,\n            baseUrl: options.baseUrl\n        };\n        const fetcherHooks = {\n            getAccessToken: options.getAccessToken,\n            isDpopEnabled: () => options.useDPoP ?? this.useDPoP ?? false\n        };\n        return new _fetcher_js__WEBPACK_IMPORTED_MODULE_13__.Fetcher(fetcherConfig, fetcherHooks);\n    }\n}\n_AuthClient_instances = new WeakSet(), _AuthClient_getTokenSetFromSession = function _AuthClient_getTokenSetFromSession(session, options) {\n    const tokenSet = session.tokenSet;\n    const audience = options.audience;\n    const scope = options.scope;\n    // When audience and scope are provided, we need to compare them with the original ones provided in either the `SessionData.tokenSet` itself, or the Auth0Client constructor.\n    // When they are identical, we should read from the top-level `SessionData.tokenSet`.\n    // If not, we should look for the corresponding access token in `SessionData.accessTokens`\n    const isAudienceTheGlobalAudience = !audience ||\n        audience === (tokenSet.audience || this.authorizationParameters.audience);\n    const isScopeTheGlobalScope = !scope ||\n        (0,_utils_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_10__.compareScopes)(tokenSet.requestedScope ||\n            (0,_utils_scope_helpers_js__WEBPACK_IMPORTED_MODULE_8__.getScopeForAudience)(this.authorizationParameters.scope, audience), scope);\n    if (isAudienceTheGlobalAudience && isScopeTheGlobalScope) {\n        return tokenSet;\n    }\n    let accessTokenSet;\n    // If there is an audience, we can search for the correct access token in the array\n    // If there is no audience, we cannot find the correct access token in the array\n    if (audience) {\n        accessTokenSet = (0,_utils_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_10__.findAccessTokenSet)(session, { scope, audience });\n    }\n    // Convert the Access Token Set to a Token Set, which mostly ensures the Id Token and RefreshToken are also available,\n    // But the access token, expiresAt, audience and scope are taken from the Access Token Set.\n    // When no audience was found, we will return an empty Token Set with only the Id Token and Refresh Token\n    return (0,_utils_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_10__.tokenSetFromAccessTokenSet)(accessTokenSet, tokenSet);\n};\nconst encodeBase64 = (input) => {\n    const unencoded = new TextEncoder().encode(input);\n    const CHUNK_SIZE = 0x8000;\n    const arr = [];\n    for (let i = 0; i < unencoded.length; i += CHUNK_SIZE) {\n        arr.push(\n        // @ts-expect-error Argument of type 'Uint8Array' is not assignable to parameter of type 'number[]'.\n        String.fromCharCode.apply(null, unencoded.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join(\"\"));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9hdXRoLWNsaWVudC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDhCQUE4QixTQUFJLElBQUksU0FBSTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQzhDO0FBQ2pCO0FBQ1M7QUFDRTtBQUMyQjtBQUNtYTtBQUM5WjtBQUM0QjtBQUM3QztBQUNJO0FBQ21FO0FBQzFDO0FBQ087QUFDZ0M7QUFDbEU7QUFDTztBQUN6QjtBQUNnQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5RUFBb0IsQ0FBQywwRUFBcUIsU0FBUyx3RUFBbUI7QUFDekY7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxrREFBbUI7QUFDbkQsNkNBQTZDLEtBQUssR0FBRyxRQUFRO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsYUFBb0IsbUJBQW1CLEVBRXhFO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msb0RBQWU7QUFDbkQ7QUFDQTtBQUNBLG9DQUFvQyx5REFBb0I7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsK0RBQWM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDJFQUFrQjtBQUMvRCxzQkFBc0IsNEVBQW1CO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxlQUFlLG9CQUFvQiwyQkFBMkI7QUFDbkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQixrQ0FBa0Msd0VBQW1CO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdEQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixnQkFBZ0IsOEVBQWdDO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDLG1GQUFtRjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHNFQUFjO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixxRUFBZ0M7QUFDN0Qsb0NBQW9DLHFFQUFnQztBQUNwRSxzQkFBc0IsOERBQXlCO0FBQy9DLHNCQUFzQiw4REFBeUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsZ0hBQXdDO0FBQzVFO0FBQ0E7QUFDQSxpREFBaUQsMkRBQWM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsNENBQWM7QUFDekQsc0NBQXNDLHlEQUEyQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsdURBQVMsQ0FBQywyREFBYTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDJEQUFjO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQVk7QUFDbkM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLG9CQUFvQix3REFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVDQUF1QztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHdEQUFZO0FBQ2xEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHdEQUFZO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsd0RBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx3REFBWTtBQUN0RDtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDhFQUFnQztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCwrREFBaUIsTUFBTTtBQUN2RTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsK0RBQWlCLE1BQU07QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLDJEQUFjO0FBQzVEO0FBQ0E7QUFDQSxvREFBb0QsaUVBQW1CO0FBQ3ZFLDBCQUEwQixzRUFBd0I7QUFDbEQ7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLFlBQVk7QUFDekM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0RBQTBCO0FBQ3hEO0FBQ0E7QUFDQSxnREFBZ0QsZ0VBQWtCO0FBQ2xFLDJCQUEyQix5REFBVztBQUN0QztBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUZBQWlGO0FBQ2pGLDREQUE0RCx3RUFBbUM7QUFDL0Y7QUFDQSxpQkFBaUIsc0RBQWlCO0FBQ2xDLGlCQUFpQixnRUFBMkI7QUFDNUM7QUFDQTtBQUNBLDBCQUEwQiwrQ0FBVTtBQUNwQyxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxnRkFBa0M7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDJFQUFzQztBQUNsRTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGdEQUFnRCx5RUFBMkI7QUFDM0UsMkJBQTJCLHlEQUFXO0FBQ3RDO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EsOEJBQThCLG9FQUErQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsOEVBQWdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0RBQVk7QUFDdkM7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSx1QkFBdUIsd0RBQVk7QUFDbkM7QUFDQSxhQUFhO0FBQ2I7QUFDQSxvQkFBb0Isd0RBQVk7QUFDaEMsUUFBUSw4RUFBZ0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsd0RBQVk7QUFDL0I7QUFDQTtBQUNBLDBCQUEwQixrRUFBb0I7QUFDOUM7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxtQkFBbUIsd0RBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxhQUFhO0FBQ2I7QUFDQSxnQkFBZ0IsMkNBQTJDO0FBQzNELG9CQUFvQix3REFBWTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCwrQkFBK0IsdUdBQW9DO0FBQ25FO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsWUFBWSw4RUFBZ0M7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix3REFBWTtBQUNuQztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsdUJBQXVCLHdEQUFZO0FBQ25DO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHdEQUFZO0FBQ25DO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix3REFBWTtBQUNuQztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsbUJBQW1CLHdEQUFZO0FBQy9CO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQVk7QUFDbkM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLHVCQUF1Qix3REFBWTtBQUNuQztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsWUFBWTtBQUNyQyxTQUFTO0FBQ1Q7QUFDQSx1QkFBdUIsd0RBQVk7QUFDbkM7QUFDQSxhQUFhO0FBQ2I7QUFDQSxnQkFBZ0IsMEJBQTBCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx1QkFBdUIsd0RBQVk7QUFDbkM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLCtCQUErQix1R0FBb0M7QUFDbkUsMERBQTBELCtEQUFjO0FBQ3hFO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFlBQVksOEVBQWdDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isd0JBQXdCO0FBQzVDLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5RUFBVyxDQUFDLDRFQUFtQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDhEQUFnQixDQUFDLGtFQUFvQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOERBQWdCLENBQUMsa0VBQW9CO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLG1FQUE4QjtBQUMvRjtBQUNBLHFCQUFxQixzREFBaUI7QUFDdEMscUJBQXFCLGdFQUEyQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQVU7QUFDeEMscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixzRUFBc0Usc0VBQWlDO0FBQ3ZHO0FBQ0E7QUFDQSxxQ0FBcUMsdUVBQWtCO0FBQ3ZEO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDhEQUFnQixDQUFDLGtFQUFvQixpSEFBaUgseURBQVc7QUFDN0w7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0Msb0VBQStCO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGlDQUFpQztBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsOENBQThDO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHdGQUEwQztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxnSEFBd0M7QUFDNUU7QUFDQSw2Q0FBNkMsK0RBQWM7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCw2RUFBd0M7QUFDcEcsZ0RBQWdELDhFQUF5QztBQUN6RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDRFQUE4QjtBQUNsRCwrQkFBK0IseURBQVc7QUFDMUM7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsMkRBQ3JCO0FBQ2pDO0FBQ0EsaUJBQWlCLHNEQUFpQjtBQUNsQyxpQkFBaUIsZ0VBQTJCO0FBQzVDLGFBQWE7QUFDYixvQ0FBb0MsbUVBQThCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEZBQThGLGtCQUFrQjtBQUNoSDtBQUNBLG9CQUFvQiw0REFBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQVk7QUFDbkM7QUFDQSxhQUFhO0FBQ2I7QUFDQSxvQkFBb0Isd0RBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxREFBdUI7QUFDaEQsYUFBYSw0Q0FBYztBQUMzQixTQUFTO0FBQ1QsZ0JBQWdCLFVBQVUsUUFBUSw0Q0FBYztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esb0JBQW9CLG9FQUFzQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixvRUFBc0I7QUFDOUM7QUFDQTtBQUNBLHdCQUF3QixvRUFBc0I7QUFDOUM7QUFDQTtBQUNBLHdCQUF3QixvRUFBc0I7QUFDOUM7QUFDQTtBQUNBLHdCQUF3QixvRUFBc0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9FQUFzQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9FQUFzQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9FQUFzQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMscUVBQWdDO0FBQ25FO0FBQ0EsaUJBQWlCLHNEQUFpQjtBQUNsQyxpQkFBaUIsZ0VBQTJCO0FBQzVDLGFBQWE7QUFDYjtBQUNBO0FBQ0EsK0JBQStCLDZFQUF3QztBQUN2RTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0VBQWtCO0FBQzFDLG1DQUFtQyx5REFBVztBQUM5QztBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyw4Q0FBZ0I7QUFDckQ7QUFDQTtBQUNBLGNBQWMsd0RBQW1CO0FBQ2pDLGNBQWMsMkRBQXNCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsWUFBWTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsNkVBQTZFO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtCQUErQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDJFQUE2QixDQUFDLCtFQUFpQztBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdFQUFtQjtBQUNuQyxzREFBc0QsZ0VBQW1CO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxzRUFBaUM7QUFDakcsaUJBQWlCLHNEQUFpQjtBQUNsQyxpQkFBaUIsZ0VBQTJCO0FBQzVDO0FBQ0E7QUFDQSwwQkFBMEIsK0NBQVU7QUFDcEMsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYiwwRUFBMEUsOEVBQXlDO0FBQ25IO0FBQ0E7QUFDQSw4Q0FBOEMsdUVBQWtCO0FBQ2hFO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDJFQUE2QixDQUFDLCtFQUFpQyxtSEFBbUgseURBQVc7QUFDck47QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHFFQUEwQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHNFQUFjO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixxRUFBZ0M7QUFDN0Qsb0NBQW9DLHFFQUFnQztBQUNwRSxzQkFBc0IsOERBQXlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyREFBYztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3REFBWSxhQUFhLGtDQUFrQyxVQUFVLGdFQUFnRTtBQUN6SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaUVBQW1CO0FBQy9DLGtDQUFrQyxzRUFBd0I7QUFDMUQsNEdBQTRHLFdBQVc7QUFDdkgsdUNBQXVDLCtEQUFpQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGlFQUFtQjtBQUMvQyxrQ0FBa0Msc0VBQXdCO0FBQzFELDRHQUE0RyxXQUFXO0FBQ3ZILHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3REFBd0Q7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVEQUFTO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixpRUFBbUI7QUFDdkMsMEJBQTBCLHNFQUF3QjtBQUNsRDtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGlFQUFtQjtBQUMvQyxrQ0FBa0Msc0VBQXdCO0FBQzFELDRHQUE0RyxXQUFXO0FBQ3ZILHVDQUF1QywrREFBaUI7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3Qix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixpRUFBbUI7QUFDL0Msa0NBQWtDLHNFQUF3QjtBQUMxRCw0R0FBNEcsV0FBVztBQUN2SCx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOERBQThEO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUVBQW1CO0FBQ3ZDLDBCQUEwQixzRUFBd0I7QUFDbEQ7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHlEQUFvQiwrREFBK0Q7QUFDMUg7QUFDQTtBQUNBLDJCQUEyQix1REFBa0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxZQUFZLGlFQUE0QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix5QkFBeUI7QUFDdEQ7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdURBQVMsQ0FBQywyREFBYTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsK0NBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGlEQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMkVBQWE7QUFDckIsWUFBWSw0RUFBbUI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsZ0ZBQWtCLFlBQVksaUJBQWlCO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx3RkFBMEI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWl0c3V5b3NoaS9EZXNrdG9wL2F1dGgtdGVzdC9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgwK25leHRqcy1hdXRoMEA0LjExLjBfbmV4dEAxNi4wLjBfQGJhYmVsK2NvcmVANy4yOC41X3JlYWN0LWRvbUAxOS4yLjBfcmVhY3RAMTkuMi4wX2I4OWZkNzYxZTJiMTAzODU5YTI5MWFlOWFjMDQ1ZDU1L25vZGVfbW9kdWxlcy9AYXV0aDAvbmV4dGpzLWF1dGgwL2Rpc3Qvc2VydmVyL2F1dGgtY2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0ID0gKHRoaXMgJiYgdGhpcy5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KSB8fCBmdW5jdGlvbiAocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XG59O1xudmFyIF9BdXRoQ2xpZW50X2luc3RhbmNlcywgX0F1dGhDbGllbnRfZ2V0VG9rZW5TZXRGcm9tU2Vzc2lvbjtcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlci5qc1wiO1xuaW1wb3J0ICogYXMgam9zZSBmcm9tIFwiam9zZVwiO1xuaW1wb3J0ICogYXMgb2F1dGggZnJvbSBcIm9hdXRoNHdlYmFwaVwiO1xuaW1wb3J0ICogYXMgY2xpZW50IGZyb20gXCJvcGVuaWQtY2xpZW50XCI7XG5pbXBvcnQgcGFja2FnZUpzb24gZnJvbSBcIi4uLy4uL3BhY2thZ2UuanNvblwiIHdpdGggeyB0eXBlOiBcImpzb25cIiB9O1xuaW1wb3J0IHsgQWNjZXNzVG9rZW5FcnJvciwgQWNjZXNzVG9rZW5FcnJvckNvZGUsIEFjY2Vzc1Rva2VuRm9yQ29ubmVjdGlvbkVycm9yLCBBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb25FcnJvckNvZGUsIEF1dGhvcml6YXRpb25Db2RlR3JhbnRFcnJvciwgQXV0aG9yaXphdGlvbkNvZGVHcmFudFJlcXVlc3RFcnJvciwgQXV0aG9yaXphdGlvbkVycm9yLCBCYWNrY2hhbm5lbEF1dGhlbnRpY2F0aW9uRXJyb3IsIEJhY2tjaGFubmVsQXV0aGVudGljYXRpb25Ob3RTdXBwb3J0ZWRFcnJvciwgQmFja2NoYW5uZWxMb2dvdXRFcnJvciwgQ29ubmVjdEFjY291bnRFcnJvciwgQ29ubmVjdEFjY291bnRFcnJvckNvZGVzLCBEaXNjb3ZlcnlFcnJvciwgRFBvUEVycm9yLCBEUG9QRXJyb3JDb2RlLCBJbnZhbGlkU3RhdGVFcnJvciwgTWlzc2luZ1N0YXRlRXJyb3IsIE15QWNjb3VudEFwaUVycm9yLCBPQXV0aDJFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMvaW5kZXguanNcIjtcbmltcG9ydCB7IFJFU1BPTlNFX1RZUEVTLCBTVUJKRUNUX1RPS0VOX1RZUEVTIH0gZnJvbSBcIi4uL3R5cGVzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBtZXJnZUF1dGhvcml6YXRpb25QYXJhbXNJbnRvU2VhcmNoUGFyYW1zIH0gZnJvbSBcIi4uL3V0aWxzL2F1dGhvcml6YXRpb24tcGFyYW1zLWhlbHBlcnMuanNcIjtcbmltcG9ydCB7IERFRkFVTFRfU0NPUEVTIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgd2l0aERQb1BOb25jZVJldHJ5IH0gZnJvbSBcIi4uL3V0aWxzL2Rwb3BVdGlscy5qc1wiO1xuaW1wb3J0IHsgZW5zdXJlTm9MZWFkaW5nU2xhc2gsIGVuc3VyZVRyYWlsaW5nU2xhc2gsIG5vcm1hbGl6ZVdpdGhCYXNlUGF0aCwgcmVtb3ZlVHJhaWxpbmdTbGFzaCB9IGZyb20gXCIuLi91dGlscy9wYXRoVXRpbHMuanNcIjtcbmltcG9ydCB7IGVuc3VyZURlZmF1bHRTY29wZSwgZ2V0U2NvcGVGb3JBdWRpZW5jZSB9IGZyb20gXCIuLi91dGlscy9zY29wZS1oZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyBnZXRTZXNzaW9uQ2hhbmdlc0FmdGVyR2V0QWNjZXNzVG9rZW4gfSBmcm9tIFwiLi4vdXRpbHMvc2Vzc2lvbi1jaGFuZ2VzLWhlbHBlcnMuanNcIjtcbmltcG9ydCB7IGNvbXBhcmVTY29wZXMsIGZpbmRBY2Nlc3NUb2tlblNldCwgbWVyZ2VTY29wZXMsIHRva2VuU2V0RnJvbUFjY2Vzc1Rva2VuU2V0IH0gZnJvbSBcIi4uL3V0aWxzL3Rva2VuLXNldC1oZWxwZXJzLmpzXCI7XG5pbXBvcnQgeyB0b1NhZmVSZWRpcmVjdCB9IGZyb20gXCIuLi91dGlscy91cmwtaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgYWRkQ2FjaGVDb250cm9sSGVhZGVyc0ZvclNlc3Npb24gfSBmcm9tIFwiLi9jb29raWVzLmpzXCI7XG5pbXBvcnQgeyBGZXRjaGVyIH0gZnJvbSBcIi4vZmV0Y2hlci5qc1wiO1xuaW1wb3J0IHsgZmlsdGVyRGVmYXVsdElkVG9rZW5DbGFpbXMgfSBmcm9tIFwiLi91c2VyLmpzXCI7XG4vLyBwYXJhbXMgcGFzc2VkIHRvIHRoZSAvYXV0aG9yaXplIGVuZHBvaW50IHRoYXQgY2Fubm90IGJlIG92ZXJ3cml0dGVuXG5jb25zdCBJTlRFUk5BTF9BVVRIT1JJWkVfUEFSQU1TID0gW1xuICAgIFwiY2xpZW50X2lkXCIsXG4gICAgXCJyZWRpcmVjdF91cmlcIixcbiAgICBcInJlc3BvbnNlX3R5cGVcIixcbiAgICBcImNvZGVfY2hhbGxlbmdlXCIsXG4gICAgXCJjb2RlX2NoYWxsZW5nZV9tZXRob2RcIixcbiAgICBcInN0YXRlXCIsXG4gICAgXCJub25jZVwiXG5dO1xuLyoqXG4gKiBBIGNvbnN0YW50IHJlcHJlc2VudGluZyB0aGUgZ3JhbnQgdHlwZSBmb3IgZmVkZXJhdGVkIGNvbm5lY3Rpb24gYWNjZXNzIHRva2VuIGV4Y2hhbmdlLlxuICpcbiAqIFRoaXMgZ3JhbnQgdHlwZSBpcyB1c2VkIGluIE9BdXRoIHRva2VuIGV4Y2hhbmdlIHNjZW5hcmlvcyB3aGVyZSBhIGZlZGVyYXRlZCBjb25uZWN0aW9uXG4gKiBhY2Nlc3MgdG9rZW4gaXMgcmVxdWlyZWQuIEl0IGlzIHNwZWNpZmljIHRvIEF1dGgwJ3MgaW1wbGVtZW50YXRpb24gYW5kIGZvbGxvd3MgdGhlXG4gKiBcInVybjphdXRoMDpwYXJhbXM6b2F1dGg6Z3JhbnQtdHlwZTp0b2tlbi1leGNoYW5nZTpmZWRlcmF0ZWQtY29ubmVjdGlvbi1hY2Nlc3MtdG9rZW5cIiBmb3JtYXQuXG4gKi9cbmNvbnN0IEdSQU5UX1RZUEVfRkVERVJBVEVEX0NPTk5FQ1RJT05fQUNDRVNTX1RPS0VOID0gXCJ1cm46YXV0aDA6cGFyYW1zOm9hdXRoOmdyYW50LXR5cGU6dG9rZW4tZXhjaGFuZ2U6ZmVkZXJhdGVkLWNvbm5lY3Rpb24tYWNjZXNzLXRva2VuXCI7XG4vKipcbiAqIEEgY29uc3RhbnQgcmVwcmVzZW50aW5nIHRoZSB0b2tlbiB0eXBlIGZvciBmZWRlcmF0ZWQgY29ubmVjdGlvbiBhY2Nlc3MgdG9rZW5zLlxuICogVGhpcyBpcyB1c2VkIHRvIHNwZWNpZnkgdGhlIHR5cGUgb2YgdG9rZW4gYmVpbmcgcmVxdWVzdGVkIGZyb20gQXV0aDAuXG4gKlxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBSRVFVRVNURURfVE9LRU5fVFlQRV9GRURFUkFURURfQ09OTkVDVElPTl9BQ0NFU1NfVE9LRU4gPSBcImh0dHA6Ly9hdXRoMC5jb20vb2F1dGgvdG9rZW4tdHlwZS9mZWRlcmF0ZWQtY29ubmVjdGlvbi1hY2Nlc3MtdG9rZW5cIjtcbmZ1bmN0aW9uIGNyZWF0ZVJvdXRlVXJsKHBhdGgsIGJhc2VVcmwpIHtcbiAgICByZXR1cm4gbmV3IFVSTChlbnN1cmVOb0xlYWRpbmdTbGFzaChub3JtYWxpemVXaXRoQmFzZVBhdGgocGF0aCkpLCBlbnN1cmVUcmFpbGluZ1NsYXNoKGJhc2VVcmwpKTtcbn1cbmV4cG9ydCBjbGFzcyBBdXRoQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIF9BdXRoQ2xpZW50X2luc3RhbmNlcy5hZGQodGhpcyk7XG4gICAgICAgIC8vIGRlcGVuZGVuY2llc1xuICAgICAgICB0aGlzLmZldGNoID0gb3B0aW9ucy5mZXRjaCB8fCBmZXRjaDtcbiAgICAgICAgdGhpcy5qd2tzQ2FjaGUgPSBvcHRpb25zLmp3a3NDYWNoZSB8fCB7fTtcbiAgICAgICAgdGhpcy5hbGxvd0luc2VjdXJlUmVxdWVzdHMgPSBvcHRpb25zLmFsbG93SW5zZWN1cmVSZXF1ZXN0cyA/PyBmYWxzZTtcbiAgICAgICAgdGhpcy5odHRwVGltZW91dCA9IG9wdGlvbnMuaHR0cFRpbWVvdXQgPz8gNTAwMDtcbiAgICAgICAgdGhpcy5odHRwT3B0aW9ucyA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICAgICAgY29uc3QgZW5hYmxlVGVsZW1ldHJ5ID0gb3B0aW9ucy5lbmFibGVUZWxlbWV0cnkgPz8gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChlbmFibGVUZWxlbWV0cnkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gXCJuZXh0anMtYXV0aDBcIjtcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJzaW9uID0gcGFja2FnZUpzb24udmVyc2lvbjtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldChcIlVzZXItQWdlbnRcIiwgYCR7bmFtZX0vJHt2ZXJzaW9ufWApO1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuc2V0KFwiQXV0aDAtQ2xpZW50XCIsIGVuY29kZUJhc2U2NChKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb25cbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQodGhpcy5odHRwVGltZW91dCksXG4gICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dJbnNlY3VyZVJlcXVlc3RzICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiYWxsb3dJbnNlY3VyZVJlcXVlc3RzIGlzIGVuYWJsZWQgaW4gYSBwcm9kdWN0aW9uIGVudmlyb25tZW50LiBUaGlzIGlzIG5vdCByZWNvbW1lbmRlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3RvcmVzXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdG9yZSA9IG9wdGlvbnMudHJhbnNhY3Rpb25TdG9yZTtcbiAgICAgICAgdGhpcy5zZXNzaW9uU3RvcmUgPSBvcHRpb25zLnNlc3Npb25TdG9yZTtcbiAgICAgICAgLy8gYXV0aG9yaXphdGlvbiBzZXJ2ZXJcbiAgICAgICAgdGhpcy5kb21haW4gPSBvcHRpb25zLmRvbWFpbjtcbiAgICAgICAgdGhpcy5jbGllbnRNZXRhZGF0YSA9IHsgY2xpZW50X2lkOiBvcHRpb25zLmNsaWVudElkIH07XG4gICAgICAgIC8vIEFwcGx5IERQb1AgdGltaW5nIHZhbGlkYXRpb24gb3B0aW9ucyB0byBjbGllbnQgbWV0YWRhdGEgaWYgcHJvdmlkZWRcbiAgICAgICAgaWYgKG9wdGlvbnMuZHBvcE9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kcG9wT3B0aW9ucy5jbG9ja1NrZXcgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsaWVudE1ldGFkYXRhW29hdXRoLmNsb2NrU2tld10gPSBvcHRpb25zLmRwb3BPcHRpb25zLmNsb2NrU2tldztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kcG9wT3B0aW9ucy5jbG9ja1RvbGVyYW5jZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50TWV0YWRhdGFbb2F1dGguY2xvY2tUb2xlcmFuY2VdID1cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5kcG9wT3B0aW9ucy5jbG9ja1RvbGVyYW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTdG9yZSBkcG9wT3B0aW9ucyBmb3IgdXNlIGluIHJldHJ5IGxvZ2ljXG4gICAgICAgIHRoaXMuZHBvcE9wdGlvbnMgPSBvcHRpb25zLmRwb3BPcHRpb25zO1xuICAgICAgICB0aGlzLmNsaWVudFNlY3JldCA9IG9wdGlvbnMuY2xpZW50U2VjcmV0O1xuICAgICAgICB0aGlzLmF1dGhvcml6YXRpb25QYXJhbWV0ZXJzID0gb3B0aW9ucy5hdXRob3JpemF0aW9uUGFyYW1ldGVycyB8fCB7XG4gICAgICAgICAgICBzY29wZTogREVGQVVMVF9TQ09QRVNcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wdXNoZWRBdXRob3JpemF0aW9uUmVxdWVzdHMgPVxuICAgICAgICAgICAgb3B0aW9ucy5wdXNoZWRBdXRob3JpemF0aW9uUmVxdWVzdHMgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMuY2xpZW50QXNzZXJ0aW9uU2lnbmluZ0tleSA9IG9wdGlvbnMuY2xpZW50QXNzZXJ0aW9uU2lnbmluZ0tleTtcbiAgICAgICAgdGhpcy5jbGllbnRBc3NlcnRpb25TaWduaW5nQWxnID1cbiAgICAgICAgICAgIG9wdGlvbnMuY2xpZW50QXNzZXJ0aW9uU2lnbmluZ0FsZyB8fCBcIlJTMjU2XCI7XG4gICAgICAgIHRoaXMuYXV0aG9yaXphdGlvblBhcmFtZXRlcnMuc2NvcGUgPSBlbnN1cmVEZWZhdWx0U2NvcGUodGhpcy5hdXRob3JpemF0aW9uUGFyYW1ldGVycyk7XG4gICAgICAgIGNvbnN0IHNjb3BlID0gZ2V0U2NvcGVGb3JBdWRpZW5jZSh0aGlzLmF1dGhvcml6YXRpb25QYXJhbWV0ZXJzLnNjb3BlLCB0aGlzLmF1dGhvcml6YXRpb25QYXJhbWV0ZXJzLmF1ZGllbmNlKVxuICAgICAgICAgICAgPy5zcGxpdChcIiBcIilcbiAgICAgICAgICAgIC5tYXAoKHMpID0+IHMudHJpbSgpKTtcbiAgICAgICAgaWYgKCFzY29wZSB8fCAhc2NvcGUuaW5jbHVkZXMoXCJvcGVuaWRcIikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSAnb3BlbmlkJyBzY29wZSBtdXN0IGJlIGluY2x1ZGVkIGluIHRoZSBzZXQgb2Ygc2NvcGVzLiBTZWUgaHR0cHM6Ly9hdXRoMC5jb20vZG9jc1wiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhcHBsaWNhdGlvblxuICAgICAgICB0aGlzLmFwcEJhc2VVcmwgPSBvcHRpb25zLmFwcEJhc2VVcmw7XG4gICAgICAgIHRoaXMuc2lnbkluUmV0dXJuVG9QYXRoID0gb3B0aW9ucy5zaWduSW5SZXR1cm5Ub1BhdGggfHwgXCIvXCI7XG4gICAgICAgIC8vIHZhbGlkYXRlIGxvZ291dCBzdHJhdGVneVxuICAgICAgICBjb25zdCB2YWxpZFN0cmF0ZWdpZXMgPSBbXCJhdXRvXCIsIFwib2lkY1wiLCBcInYyXCJdO1xuICAgICAgICBsZXQgbG9nb3V0U3RyYXRlZ3kgPSBvcHRpb25zLmxvZ291dFN0cmF0ZWd5IHx8IFwiYXV0b1wiO1xuICAgICAgICBpZiAoIXZhbGlkU3RyYXRlZ2llcy5pbmNsdWRlcyhsb2dvdXRTdHJhdGVneSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEludmFsaWQgbG9nb3V0U3RyYXRlZ3k6ICR7bG9nb3V0U3RyYXRlZ3l9LiBNdXN0IGJlIG9uZSBvZjogJHt2YWxpZFN0cmF0ZWdpZXMuam9pbihcIiwgXCIpfS4gRGVmYXVsdGluZyB0byBcImF1dG9cImApO1xuICAgICAgICAgICAgbG9nb3V0U3RyYXRlZ3kgPSBcImF1dG9cIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ291dFN0cmF0ZWd5ID0gbG9nb3V0U3RyYXRlZ3k7XG4gICAgICAgIHRoaXMuaW5jbHVkZUlkVG9rZW5IaW50SW5PSURDTG9nb3V0VXJsID1cbiAgICAgICAgICAgIG9wdGlvbnMuaW5jbHVkZUlkVG9rZW5IaW50SW5PSURDTG9nb3V0VXJsID8/IHRydWU7XG4gICAgICAgIC8vIGhvb2tzXG4gICAgICAgIHRoaXMuYmVmb3JlU2Vzc2lvblNhdmVkID0gb3B0aW9ucy5iZWZvcmVTZXNzaW9uU2F2ZWQ7XG4gICAgICAgIHRoaXMub25DYWxsYmFjayA9IG9wdGlvbnMub25DYWxsYmFjayB8fCB0aGlzLmRlZmF1bHRPbkNhbGxiYWNrO1xuICAgICAgICAvLyByb3V0ZXNcbiAgICAgICAgdGhpcy5yb3V0ZXMgPSBvcHRpb25zLnJvdXRlcztcbiAgICAgICAgdGhpcy5lbmFibGVBY2Nlc3NUb2tlbkVuZHBvaW50ID0gb3B0aW9ucy5lbmFibGVBY2Nlc3NUb2tlbkVuZHBvaW50ID8/IHRydWU7XG4gICAgICAgIHRoaXMubm9Db250ZW50UHJvZmlsZVJlc3BvbnNlV2hlblVuYXV0aGVudGljYXRlZCA9XG4gICAgICAgICAgICBvcHRpb25zLm5vQ29udGVudFByb2ZpbGVSZXNwb25zZVdoZW5VbmF1dGhlbnRpY2F0ZWQgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMuZW5hYmxlQ29ubmVjdEFjY291bnRFbmRwb2ludCA9XG4gICAgICAgICAgICBvcHRpb25zLmVuYWJsZUNvbm5lY3RBY2NvdW50RW5kcG9pbnQgPz8gZmFsc2U7XG4gICAgICAgIHRoaXMudXNlRFBvUCA9IG9wdGlvbnMudXNlRFBvUCA/PyBmYWxzZTtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBEUG9QIGlmIGVuYWJsZWQuIENoZWNrIHVzZURQb1AgZmxhZyBmaXJzdCB0byBhdm9pZCB0aW1pbmcgYXR0YWNrcy5cbiAgICAgICAgaWYgKChvcHRpb25zLnVzZURQb1AgPz8gZmFsc2UpICYmIG9wdGlvbnMuZHBvcEtleVBhaXIpIHtcbiAgICAgICAgICAgIHRoaXMuZHBvcEtleVBhaXIgPSBvcHRpb25zLmRwb3BLZXlQYWlyO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZXIocmVxKSB7XG4gICAgICAgIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHJlcS5uZXh0VXJsO1xuICAgICAgICBjb25zdCBzYW5pdGl6ZWRQYXRobmFtZSA9IHJlbW92ZVRyYWlsaW5nU2xhc2gocGF0aG5hbWUpO1xuICAgICAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kO1xuICAgICAgICBpZiAobWV0aG9kID09PSBcIkdFVFwiICYmIHNhbml0aXplZFBhdGhuYW1lID09PSB0aGlzLnJvdXRlcy5sb2dpbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlTG9naW4ocmVxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXRob2QgPT09IFwiR0VUXCIgJiYgc2FuaXRpemVkUGF0aG5hbWUgPT09IHRoaXMucm91dGVzLmxvZ291dCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlTG9nb3V0KHJlcSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobWV0aG9kID09PSBcIkdFVFwiICYmIHNhbml0aXplZFBhdGhuYW1lID09PSB0aGlzLnJvdXRlcy5jYWxsYmFjaykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQ2FsbGJhY2socmVxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXRob2QgPT09IFwiR0VUXCIgJiYgc2FuaXRpemVkUGF0aG5hbWUgPT09IHRoaXMucm91dGVzLnByb2ZpbGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVByb2ZpbGUocmVxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXRob2QgPT09IFwiR0VUXCIgJiZcbiAgICAgICAgICAgIHNhbml0aXplZFBhdGhuYW1lID09PSB0aGlzLnJvdXRlcy5hY2Nlc3NUb2tlbiAmJlxuICAgICAgICAgICAgdGhpcy5lbmFibGVBY2Nlc3NUb2tlbkVuZHBvaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVBY2Nlc3NUb2tlbihyZXEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1ldGhvZCA9PT0gXCJQT1NUXCIgJiZcbiAgICAgICAgICAgIHNhbml0aXplZFBhdGhuYW1lID09PSB0aGlzLnJvdXRlcy5iYWNrQ2hhbm5lbExvZ291dCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQmFja0NoYW5uZWxMb2dvdXQocmVxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXRob2QgPT09IFwiR0VUXCIgJiZcbiAgICAgICAgICAgIHNhbml0aXplZFBhdGhuYW1lID09PSB0aGlzLnJvdXRlcy5jb25uZWN0QWNjb3VudCAmJlxuICAgICAgICAgICAgdGhpcy5lbmFibGVDb25uZWN0QWNjb3VudEVuZHBvaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVDb25uZWN0QWNjb3VudChyZXEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gbm8gYXV0aCBoYW5kbGVyIGZvdW5kLCBzaW1wbHkgdG91Y2ggdGhlIHNlc3Npb25zXG4gICAgICAgICAgICAvLyBUT0RPOiB0aGlzIHNob3VsZCBvbmx5IGhhcHBlbiBpZiByb2xsaW5nIHNlc3Npb25zIGFyZSBlbmFibGVkLiBBbHNvLCB3ZSBzaG91bGRcbiAgICAgICAgICAgIC8vIHRyeSB0byBhdm9pZCByZWFkaW5nIGZyb20gdGhlIERCIChmb3Igc3RhdGVmdWwgc2Vzc2lvbnMpIG9uIGV2ZXJ5IHJlcXVlc3QgaWYgcG9zc2libGUuXG4gICAgICAgICAgICBjb25zdCByZXMgPSBOZXh0UmVzcG9uc2UubmV4dCgpO1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuc2Vzc2lvblN0b3JlLmdldChyZXEuY29va2llcyk7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIC8vIHdlIHBhc3MgdGhlIGV4aXN0aW5nIHNlc3Npb24gKGNvbnRhaW5pbmcgYW4gYGNyZWF0ZWRBdGAgdGltZXN0YW1wKSB0byB0aGUgc2V0IG1ldGhvZFxuICAgICAgICAgICAgICAgIC8vIHdoaWNoIHdpbGwgdXBkYXRlIHRoZSBjb29raWUncyBgbWF4QWdlYCBwcm9wZXJ0eSBiYXNlZCBvbiB0aGUgYGNyZWF0ZWRBdGAgdGltZVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2Vzc2lvblN0b3JlLnNldChyZXEuY29va2llcywgcmVzLmNvb2tpZXMsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc2Vzc2lvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFkZENhY2hlQ29udHJvbEhlYWRlcnNGb3JTZXNzaW9uKHJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0SW50ZXJhY3RpdmVMb2dpbihvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgcmVkaXJlY3RVcmkgPSBjcmVhdGVSb3V0ZVVybCh0aGlzLnJvdXRlcy5jYWxsYmFjaywgdGhpcy5hcHBCYXNlVXJsKTsgLy8gbXVzdCBiZSByZWdpc3RlcmVkIHdpdGggdGhlIGF1dGhvcml6YXRpb24gc2VydmVyXG4gICAgICAgIGxldCByZXR1cm5UbyA9IHRoaXMuc2lnbkluUmV0dXJuVG9QYXRoO1xuICAgICAgICAvLyBWYWxpZGF0ZSByZXR1cm5UbyBwYXJhbWV0ZXJcbiAgICAgICAgaWYgKG9wdGlvbnMucmV0dXJuVG8pIHtcbiAgICAgICAgICAgIGNvbnN0IHNhZmVCYXNlVXJsID0gbmV3IFVSTCh0aGlzLmF1dGhvcml6YXRpb25QYXJhbWV0ZXJzLnJlZGlyZWN0X3VyaSB8fFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwQmFzZVVybCk7XG4gICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWRSZXR1cm5UbyA9IHRvU2FmZVJlZGlyZWN0KG9wdGlvbnMucmV0dXJuVG8sIHNhZmVCYXNlVXJsKTtcbiAgICAgICAgICAgIGlmIChzYW5pdGl6ZWRSZXR1cm5Ubykge1xuICAgICAgICAgICAgICAgIHJldHVyblRvID1cbiAgICAgICAgICAgICAgICAgICAgc2FuaXRpemVkUmV0dXJuVG8ucGF0aG5hbWUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FuaXRpemVkUmV0dXJuVG8uc2VhcmNoICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbml0aXplZFJldHVyblRvLmhhc2g7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2VuZXJhdGUgUEtDRSBjaGFsbGVuZ2VzXG4gICAgICAgIGNvbnN0IGNvZGVDaGFsbGVuZ2VNZXRob2QgPSBcIlMyNTZcIjtcbiAgICAgICAgY29uc3QgY29kZVZlcmlmaWVyID0gb2F1dGguZ2VuZXJhdGVSYW5kb21Db2RlVmVyaWZpZXIoKTtcbiAgICAgICAgY29uc3QgY29kZUNoYWxsZW5nZSA9IGF3YWl0IG9hdXRoLmNhbGN1bGF0ZVBLQ0VDb2RlQ2hhbGxlbmdlKGNvZGVWZXJpZmllcik7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gb2F1dGguZ2VuZXJhdGVSYW5kb21TdGF0ZSgpO1xuICAgICAgICBjb25zdCBub25jZSA9IG9hdXRoLmdlbmVyYXRlUmFuZG9tTm9uY2UoKTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGJhc2UgYXV0aG9yaXphdGlvbiBwYXJhbWV0ZXJzXG4gICAgICAgIC8vIElmIHByb3ZpZGVkIG9uIGJvdGggc2lkZXMsIHRoaXMgZG9lcyBub3QgbWVyZ2UgdGhlIHNjb3BlIHByb3BlcnR5LFxuICAgICAgICAvLyBpbnN0ZWFkLCB0aGUgc2NvcGUgZnJvbSB0aGUgcmlnaHQgc2lkZSAob3B0aW9ucykgZnVsbHkgb3ZlcnJpZGVzIHRoZSBsZWZ0IHNpZGUuXG4gICAgICAgIC8vIFRoaXMgaXMgZG9uZSB0byBhdm9pZCBicmVha2luZyBleGlzdGluZyBiZWhhdmlvci5cbiAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblBhcmFtcyA9IG1lcmdlQXV0aG9yaXphdGlvblBhcmFtc0ludG9TZWFyY2hQYXJhbXModGhpcy5hdXRob3JpemF0aW9uUGFyYW1ldGVycywgb3B0aW9ucy5hdXRob3JpemF0aW9uUGFyYW1ldGVycywgSU5URVJOQUxfQVVUSE9SSVpFX1BBUkFNUyk7XG4gICAgICAgIGF1dGhvcml6YXRpb25QYXJhbXMuc2V0KFwiY2xpZW50X2lkXCIsIHRoaXMuY2xpZW50TWV0YWRhdGEuY2xpZW50X2lkKTtcbiAgICAgICAgYXV0aG9yaXphdGlvblBhcmFtcy5zZXQoXCJyZWRpcmVjdF91cmlcIiwgcmVkaXJlY3RVcmkudG9TdHJpbmcoKSk7XG4gICAgICAgIGF1dGhvcml6YXRpb25QYXJhbXMuc2V0KFwicmVzcG9uc2VfdHlwZVwiLCBSRVNQT05TRV9UWVBFUy5DT0RFKTtcbiAgICAgICAgYXV0aG9yaXphdGlvblBhcmFtcy5zZXQoXCJjb2RlX2NoYWxsZW5nZVwiLCBjb2RlQ2hhbGxlbmdlKTtcbiAgICAgICAgYXV0aG9yaXphdGlvblBhcmFtcy5zZXQoXCJjb2RlX2NoYWxsZW5nZV9tZXRob2RcIiwgY29kZUNoYWxsZW5nZU1ldGhvZCk7XG4gICAgICAgIGF1dGhvcml6YXRpb25QYXJhbXMuc2V0KFwic3RhdGVcIiwgc3RhdGUpO1xuICAgICAgICBhdXRob3JpemF0aW9uUGFyYW1zLnNldChcIm5vbmNlXCIsIG5vbmNlKTtcbiAgICAgICAgLy8gQWRkIGRwb3Bfamt0IHBhcmFtZXRlciBpZiBEUG9QIGlzIGVuYWJsZWRcbiAgICAgICAgaWYgKHRoaXMuZHBvcEtleVBhaXIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHVibGljS2V5SndrID0gYXdhaXQgam9zZS5leHBvcnRKV0sodGhpcy5kcG9wS2V5UGFpci5wdWJsaWNLZXkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRwb3BKa3QgPSBhd2FpdCBqb3NlLmNhbGN1bGF0ZUp3a1RodW1icHJpbnQocHVibGljS2V5SndrKTtcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uUGFyYW1zLnNldChcImRwb3Bfamt0XCIsIGRwb3BKa3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERQb1BFcnJvcihEUG9QRXJyb3JDb2RlLkRQT1BfSktUX0NBTENVTEFUSU9OX0ZBSUxFRCwgXCJEUG9QIGlzIGVuYWJsZWQgYnV0IGZhaWxlZCB0byBjYWxjdWxhdGUga2V5IHRodW1icHJpbnQgKGRwb3Bfamt0KS4gXCIgK1xuICAgICAgICAgICAgICAgICAgICBcIlRoaXMgaXMgcmVxdWlyZWQgZm9yIHNlY3VyZSBEUG9QIGJpbmRpbmcuIFBsZWFzZSBjaGVjayB5b3VyIGtleSBjb25maWd1cmF0aW9uLlwiLCBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFByZXBhcmUgdHJhbnNhY3Rpb24gc3RhdGVcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25TdGF0ZSA9IHtcbiAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAgbWF4QWdlOiB0aGlzLmF1dGhvcml6YXRpb25QYXJhbWV0ZXJzLm1heF9hZ2UsXG4gICAgICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgICAgICByZXNwb25zZVR5cGU6IFJFU1BPTlNFX1RZUEVTLkNPREUsXG4gICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgIHJldHVyblRvLFxuICAgICAgICAgICAgc2NvcGU6IGF1dGhvcml6YXRpb25QYXJhbXMuZ2V0KFwic2NvcGVcIikgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgYXVkaWVuY2U6IGF1dGhvcml6YXRpb25QYXJhbXMuZ2V0KFwiYXVkaWVuY2VcIikgfHwgdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIC8vIEdlbmVyYXRlIGF1dGhvcml6YXRpb24gVVJMIHdpdGggUEFSIGhhbmRsaW5nXG4gICAgICAgIGNvbnN0IFtlcnJvciwgYXV0aG9yaXphdGlvblVybF0gPSBhd2FpdCB0aGlzLmF1dGhvcml6YXRpb25VcmwoYXV0aG9yaXphdGlvblBhcmFtcyk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gaW5pdGlhdGUgdGhlIGxvZ2luIHJlcXVlc3QuXCIsIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IHJlc3BvbnNlIGFuZCBzYXZlIHRyYW5zYWN0aW9uXG4gICAgICAgIGNvbnN0IHJlcyA9IE5leHRSZXNwb25zZS5yZWRpcmVjdChhdXRob3JpemF0aW9uVXJsLnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBTYXZlIHRyYW5zYWN0aW9uIHN0YXRlXG4gICAgICAgIGF3YWl0IHRoaXMudHJhbnNhY3Rpb25TdG9yZS5zYXZlKHJlcy5jb29raWVzLCB0cmFuc2FjdGlvblN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTG9naW4ocmVxKSB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IE9iamVjdC5mcm9tRW50cmllcyhyZXEubmV4dFVybC5zZWFyY2hQYXJhbXMuZW50cmllcygpKTtcbiAgICAgICAgLy8gQWx3YXlzIGZvcndhcmQgYWxsIHBhcmFtZXRlcnNcbiAgICAgICAgLy8gV2hlbiBQQVIgaXMgZGlzYWJsZWQsIHBhcmFtZXRlcnMgZ28gdG8gYXV0aG9yaXphdGlvbiBVUkwgYXMgYmVmb3JlXG4gICAgICAgIC8vIFdoZW4gUEFSIGlzIGVuYWJsZWQsIGFsbCBwYXJhbWV0ZXJzIGFyZSBzZW50IHNlY3VyZWx5IGluIHRoZSBQQVIgcmVxdWVzdCBib2R5XG4gICAgICAgIC8vIGRvIG5vdCBwYXNzIHJldHVyblRvIGFzIHBhcnQgb2YgYXV0aG9yaXphdGlvblBhcmFtZXRlcnNcbiAgICAgICAgLy8gcmV0dXJuVG8gc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0eG4gc3RhdGVcbiAgICAgICAgY29uc3QgeyByZXR1cm5UbywgLi4uYXV0aG9yaXphdGlvblBhcmFtZXRlcnMgfSA9IHNlYXJjaFBhcmFtcztcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb25QYXJhbWV0ZXJzLFxuICAgICAgICAgICAgcmV0dXJuVG86IHJldHVyblRvXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0SW50ZXJhY3RpdmVMb2dpbihvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTG9nb3V0KHJlcSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5zZXNzaW9uU3RvcmUuZ2V0KHJlcS5jb29raWVzKTtcbiAgICAgICAgY29uc3QgW2Rpc2NvdmVyeUVycm9yLCBhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGFdID0gYXdhaXQgdGhpcy5kaXNjb3ZlckF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YSgpO1xuICAgICAgICBpZiAoZGlzY292ZXJ5RXJyb3IpIHtcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIHNlc3Npb24gb24gZGlzY292ZXJ5IGVycm9yXG4gICAgICAgICAgICBjb25zdCBlcnJvclJlc3BvbnNlID0gbmV3IE5leHRSZXNwb25zZShcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHRyeWluZyB0byBpbml0aWF0ZSB0aGUgbG9nb3V0IHJlcXVlc3QuXCIsIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlc3Npb25TdG9yZS5kZWxldGUocmVxLmNvb2tpZXMsIGVycm9yUmVzcG9uc2UuY29va2llcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRyYW5zYWN0aW9uU3RvcmUuZGVsZXRlQWxsKHJlcS5jb29raWVzLCBlcnJvclJlc3BvbnNlLmNvb2tpZXMpO1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yUmVzcG9uc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmV0dXJuVG8gPSByZXEubmV4dFVybC5zZWFyY2hQYXJhbXMuZ2V0KFwicmV0dXJuVG9cIikgfHwgdGhpcy5hcHBCYXNlVXJsO1xuICAgICAgICBjb25zdCBmZWRlcmF0ZWQgPSByZXEubmV4dFVybC5zZWFyY2hQYXJhbXMuaGFzKFwiZmVkZXJhdGVkXCIpO1xuICAgICAgICBjb25zdCBjcmVhdGVWMkxvZ291dFJlc3BvbnNlID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChcIi92Mi9sb2dvdXRcIiwgdGhpcy5pc3N1ZXIpO1xuICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJyZXR1cm5Ub1wiLCByZXR1cm5Ubyk7XG4gICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImNsaWVudF9pZFwiLCB0aGlzLmNsaWVudE1ldGFkYXRhLmNsaWVudF9pZCk7XG4gICAgICAgICAgICBpZiAoZmVkZXJhdGVkKSB7XG4gICAgICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJmZWRlcmF0ZWRcIiwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHVybCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGNyZWF0ZU9JRENMb2dvdXRSZXNwb25zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhLmVuZF9zZXNzaW9uX2VuZHBvaW50KTtcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2xpZW50X2lkXCIsIHRoaXMuY2xpZW50TWV0YWRhdGEuY2xpZW50X2lkKTtcbiAgICAgICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwicG9zdF9sb2dvdXRfcmVkaXJlY3RfdXJpXCIsIHJldHVyblRvKTtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uPy5pbnRlcm5hbC5zaWQpIHtcbiAgICAgICAgICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImxvZ291dF9oaW50XCIsIHNlc3Npb24uaW50ZXJuYWwuc2lkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmluY2x1ZGVJZFRva2VuSGludEluT0lEQ0xvZ291dFVybCAmJiBzZXNzaW9uPy50b2tlblNldC5pZFRva2VuKSB7XG4gICAgICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJpZF90b2tlbl9oaW50XCIsIHNlc3Npb24udG9rZW5TZXQuaWRUb2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZmVkZXJhdGVkKSB7XG4gICAgICAgICAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJmZWRlcmF0ZWRcIiwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHVybCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIERldGVybWluZSBsb2dvdXQgc3RyYXRlZ3kgYW5kIGNyZWF0ZSBhcHByb3ByaWF0ZSByZXNwb25zZVxuICAgICAgICBsZXQgbG9nb3V0UmVzcG9uc2U7XG4gICAgICAgIGlmICh0aGlzLmxvZ291dFN0cmF0ZWd5ID09PSBcInYyXCIpIHtcbiAgICAgICAgICAgIC8vIEFsd2F5cyB1c2UgdjIgbG9nb3V0IGVuZHBvaW50XG4gICAgICAgICAgICBsb2dvdXRSZXNwb25zZSA9IGNyZWF0ZVYyTG9nb3V0UmVzcG9uc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmxvZ291dFN0cmF0ZWd5ID09PSBcIm9pZGNcIikge1xuICAgICAgICAgICAgLy8gQWx3YXlzIHVzZSBPSURDIFJQLUluaXRpYXRlZCBMb2dvdXRcbiAgICAgICAgICAgIGlmICghYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhLmVuZF9zZXNzaW9uX2VuZHBvaW50KSB7XG4gICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgc2Vzc2lvbiBvbiBPSURDIGVycm9yXG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JSZXNwb25zZSA9IG5ldyBOZXh0UmVzcG9uc2UoXCJPSURDIFJQLUluaXRpYXRlZCBMb2dvdXQgaXMgbm90IHN1cHBvcnRlZCBieSB0aGUgYXV0aG9yaXphdGlvbiBzZXJ2ZXIuIEVuYWJsZSBpdCBvciB1c2UgYSBkaWZmZXJlbnQgbG9nb3V0IHN0cmF0ZWd5LlwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXNzaW9uU3RvcmUuZGVsZXRlKHJlcS5jb29raWVzLCBlcnJvclJlc3BvbnNlLmNvb2tpZXMpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudHJhbnNhY3Rpb25TdG9yZS5kZWxldGVBbGwocmVxLmNvb2tpZXMsIGVycm9yUmVzcG9uc2UuY29va2llcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yUmVzcG9uc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2dvdXRSZXNwb25zZSA9IGNyZWF0ZU9JRENMb2dvdXRSZXNwb25zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gQXV0byBzdHJhdGVneSAoZGVmYXVsdCk6IFRyeSBPSURDIGZpcnN0LCBmYWxsYmFjayB0byB2MiBpZiBub3QgYXZhaWxhYmxlXG4gICAgICAgICAgICBpZiAoIWF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YS5lbmRfc2Vzc2lvbl9lbmRwb2ludCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlRoZSBBdXRoMCBjbGllbnQgZG9lcyBub3QgaGF2ZSBSUC1pbml0aWF0ZWQgbG9nb3V0IGVuYWJsZWQsIHRoZSB1c2VyIHdpbGwgYmUgcmVkaXJlY3RlZCB0byB0aGUgYC92Mi9sb2dvdXRgIGVuZHBvaW50IGluc3RlYWQuIExlYXJuIGhvdyB0byBlbmFibGUgaXQgaGVyZTogaHR0cHM6Ly9hdXRoMC5jb20vZG9jcy9hdXRoZW50aWNhdGUvbG9naW4vbG9nb3V0L2xvZy11c2Vycy1vdXQtb2YtYXV0aDAjZW5hYmxlLWVuZHBvaW50LWRpc2NvdmVyeVwiKTtcbiAgICAgICAgICAgICAgICBsb2dvdXRSZXNwb25zZSA9IGNyZWF0ZVYyTG9nb3V0UmVzcG9uc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxvZ291dFJlc3BvbnNlID0gY3JlYXRlT0lEQ0xvZ291dFJlc3BvbnNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2xlYW4gdXAgc2Vzc2lvbiBhbmQgdHJhbnNhY3Rpb24gY29va2llc1xuICAgICAgICBhd2FpdCB0aGlzLnNlc3Npb25TdG9yZS5kZWxldGUocmVxLmNvb2tpZXMsIGxvZ291dFJlc3BvbnNlLmNvb2tpZXMpO1xuICAgICAgICBhZGRDYWNoZUNvbnRyb2xIZWFkZXJzRm9yU2Vzc2lvbihsb2dvdXRSZXNwb25zZSk7XG4gICAgICAgIC8vIENsZWFyIGFueSBvcnBoYW5lZCB0cmFuc2FjdGlvbiBjb29raWVzXG4gICAgICAgIGF3YWl0IHRoaXMudHJhbnNhY3Rpb25TdG9yZS5kZWxldGVBbGwocmVxLmNvb2tpZXMsIGxvZ291dFJlc3BvbnNlLmNvb2tpZXMpO1xuICAgICAgICByZXR1cm4gbG9nb3V0UmVzcG9uc2U7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNhbGxiYWNrKHJlcSkge1xuICAgICAgICBjb25zdCBzdGF0ZSA9IHJlcS5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJzdGF0ZVwiKTtcbiAgICAgICAgaWYgKCFzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQ2FsbGJhY2tFcnJvcihuZXcgTWlzc2luZ1N0YXRlRXJyb3IoKSwge30sIHJlcSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25TdGF0ZUNvb2tpZSA9IGF3YWl0IHRoaXMudHJhbnNhY3Rpb25TdG9yZS5nZXQocmVxLmNvb2tpZXMsIHN0YXRlKTtcbiAgICAgICAgaWYgKCF0cmFuc2FjdGlvblN0YXRlQ29va2llKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbkNhbGxiYWNrKG5ldyBJbnZhbGlkU3RhdGVFcnJvcigpLCB7fSwgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25TdGF0ZSA9IHRyYW5zYWN0aW9uU3RhdGVDb29raWUucGF5bG9hZDtcbiAgICAgICAgY29uc3Qgb25DYWxsYmFja0N0eCA9IHtcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogdHJhbnNhY3Rpb25TdGF0ZS5yZXNwb25zZVR5cGUsXG4gICAgICAgICAgICByZXR1cm5UbzogdHJhbnNhY3Rpb25TdGF0ZS5yZXR1cm5Ub1xuICAgICAgICB9O1xuICAgICAgICBpZiAodHJhbnNhY3Rpb25TdGF0ZS5yZXNwb25zZVR5cGUgPT09IFJFU1BPTlNFX1RZUEVTLkNPTk5FQ1RfQ09ERSkge1xuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuc2Vzc2lvblN0b3JlLmdldChyZXEuY29va2llcyk7XG4gICAgICAgICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVDYWxsYmFja0Vycm9yKG5ldyBDb25uZWN0QWNjb3VudEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogQ29ubmVjdEFjY291bnRFcnJvckNvZGVzLk1JU1NJTkdfU0VTU0lPTixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaGUgdXNlciBkb2VzIG5vdCBoYXZlIGFuIGFjdGl2ZSBzZXNzaW9uLlwiXG4gICAgICAgICAgICAgICAgfSksIG9uQ2FsbGJhY2tDdHgsIHJlcSwgc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZ2V0IGFuIGFjY2VzcyB0b2tlbiBmb3IgY29ubmVjdGVkIGFjY291bnRzXG4gICAgICAgICAgICBjb25zdCBbdG9rZW5TZXRFcnJvciwgdG9rZW5TZXRSZXNwb25zZV0gPSBhd2FpdCB0aGlzLmdldFRva2VuU2V0KHNlc3Npb24sIHtcbiAgICAgICAgICAgICAgICBhdWRpZW5jZTogYCR7dGhpcy5pc3N1ZXJ9L21lL2AsXG4gICAgICAgICAgICAgICAgc2NvcGU6IFwiY3JlYXRlOm1lOmNvbm5lY3RlZF9hY2NvdW50c1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0b2tlblNldEVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQ2FsbGJhY2tFcnJvcih0b2tlblNldEVycm9yLCBvbkNhbGxiYWNrQ3R4LCByZXEsIHN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IFtjb21wbGV0ZUNvbm5lY3RBY2NvdW50RXJyb3IsIGNvbm5lY3RlZEFjY291bnRdID0gYXdhaXQgdGhpcy5jb21wbGV0ZUNvbm5lY3RBY2NvdW50KHtcbiAgICAgICAgICAgICAgICB0b2tlblNldDogdG9rZW5TZXRSZXNwb25zZS50b2tlblNldCxcbiAgICAgICAgICAgICAgICBhdXRoU2Vzc2lvbjogdHJhbnNhY3Rpb25TdGF0ZS5hdXRoU2Vzc2lvbixcbiAgICAgICAgICAgICAgICBjb25uZWN0Q29kZTogcmVxLm5leHRVcmwuc2VhcmNoUGFyYW1zLmdldChcImNvbm5lY3RfY29kZVwiKSxcbiAgICAgICAgICAgICAgICByZWRpcmVjdFVyaTogY3JlYXRlUm91dGVVcmwodGhpcy5yb3V0ZXMuY2FsbGJhY2ssIHRoaXMuYXBwQmFzZVVybCkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBjb2RlVmVyaWZpZXI6IHRyYW5zYWN0aW9uU3RhdGUuY29kZVZlcmlmaWVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjb21wbGV0ZUNvbm5lY3RBY2NvdW50RXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVDYWxsYmFja0Vycm9yKGNvbXBsZXRlQ29ubmVjdEFjY291bnRFcnJvciwgb25DYWxsYmFja0N0eCwgcmVxLCBzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLm9uQ2FsbGJhY2sobnVsbCwge1xuICAgICAgICAgICAgICAgIC4uLm9uQ2FsbGJhY2tDdHgsXG4gICAgICAgICAgICAgICAgY29ubmVjdGVkQWNjb3VudFxuICAgICAgICAgICAgfSwgc2Vzc2lvbik7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnRyYW5zYWN0aW9uU3RvcmUuZGVsZXRlKHJlcy5jb29raWVzLCBzdGF0ZSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtkaXNjb3ZlcnlFcnJvciwgYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhXSA9IGF3YWl0IHRoaXMuZGlzY292ZXJBdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEoKTtcbiAgICAgICAgaWYgKGRpc2NvdmVyeUVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVDYWxsYmFja0Vycm9yKGRpc2NvdmVyeUVycm9yLCBvbkNhbGxiYWNrQ3R4LCByZXEsIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29kZUdyYW50UGFyYW1zO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29kZUdyYW50UGFyYW1zID0gb2F1dGgudmFsaWRhdGVBdXRoUmVzcG9uc2UoYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhLCB0aGlzLmNsaWVudE1ldGFkYXRhLCByZXEubmV4dFVybC5zZWFyY2hQYXJhbXMsIHRyYW5zYWN0aW9uU3RhdGUuc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVDYWxsYmFja0Vycm9yKG5ldyBBdXRob3JpemF0aW9uRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNhdXNlOiBuZXcgT0F1dGgyRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBlLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlLmVycm9yX2Rlc2NyaXB0aW9uXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLCBvbkNhbGxiYWNrQ3R4LCByZXEsIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29kZUdyYW50UmVzcG9uc2U7XG4gICAgICAgIGxldCByZWRpcmVjdFVyaTtcbiAgICAgICAgbGV0IGF1dGhvcml6YXRpb25Db2RlR3JhbnRSZXF1ZXN0Q2FsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlZGlyZWN0VXJpID0gY3JlYXRlUm91dGVVcmwodGhpcy5yb3V0ZXMuY2FsbGJhY2ssIHRoaXMuYXBwQmFzZVVybCk7IC8vIG11c3QgYmUgcmVnaXN0ZXJlZCB3aXRoIHRoZSBhdXRob3JpemF0aW9uIHNlcnZlclxuICAgICAgICAgICAgYXV0aG9yaXphdGlvbkNvZGVHcmFudFJlcXVlc3RDYWxsID0gYXN5bmMgKCkgPT4gb2F1dGguYXV0aG9yaXphdGlvbkNvZGVHcmFudFJlcXVlc3QoYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhLCB0aGlzLmNsaWVudE1ldGFkYXRhLCBhd2FpdCB0aGlzLmdldENsaWVudEF1dGgoKSwgY29kZUdyYW50UGFyYW1zLCByZWRpcmVjdFVyaS50b1N0cmluZygpLCB0cmFuc2FjdGlvblN0YXRlLmNvZGVWZXJpZmllciwge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuaHR0cE9wdGlvbnMoKSxcbiAgICAgICAgICAgICAgICBbb2F1dGguY3VzdG9tRmV0Y2hdOiB0aGlzLmZldGNoLFxuICAgICAgICAgICAgICAgIFtvYXV0aC5hbGxvd0luc2VjdXJlUmVxdWVzdHNdOiB0aGlzLmFsbG93SW5zZWN1cmVSZXF1ZXN0cyxcbiAgICAgICAgICAgICAgICAuLi4odGhpcy51c2VEUG9QICYmXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHBvcEtleVBhaXIgJiYge1xuICAgICAgICAgICAgICAgICAgICBEUG9QOiBvYXV0aC5EUG9QKHRoaXMuY2xpZW50TWV0YWRhdGEsIHRoaXMuZHBvcEtleVBhaXIpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29kZUdyYW50UmVzcG9uc2UgPSBhd2FpdCBhdXRob3JpemF0aW9uQ29kZUdyYW50UmVxdWVzdENhbGwoKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQ2FsbGJhY2tFcnJvcihuZXcgQXV0aG9yaXphdGlvbkNvZGVHcmFudFJlcXVlc3RFcnJvcihlLm1lc3NhZ2UpLCBvbkNhbGxiYWNrQ3R4LCByZXEsIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb2lkY1JlcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFByb2Nlc3MgdGhlIGF1dGhvcml6YXRpb24gY29kZSByZXNwb25zZVxuICAgICAgICAgICAgLy8gRm9yIGF1dGhvcml6YXRpb24gY29kZSBmbG93cywgb2F1dGg0d2ViYXBpIGhhbmRsZXMgRFBvUCBub25jZSBtYW5hZ2VtZW50IGludGVybmFsbHlcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgZm9yIG1hbnVhbCByZXRyeSBzaW5jZSBhdXRob3JpemF0aW9uIGNvZGVzIGFyZSBzaW5nbGUtdXNlXG4gICAgICAgICAgICBvaWRjUmVzID0gYXdhaXQgb2F1dGgucHJvY2Vzc0F1dGhvcml6YXRpb25Db2RlUmVzcG9uc2UoYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhLCB0aGlzLmNsaWVudE1ldGFkYXRhLCBjb2RlR3JhbnRSZXNwb25zZSwge1xuICAgICAgICAgICAgICAgIGV4cGVjdGVkTm9uY2U6IHRyYW5zYWN0aW9uU3RhdGUubm9uY2UsXG4gICAgICAgICAgICAgICAgbWF4QWdlOiB0cmFuc2FjdGlvblN0YXRlLm1heEFnZSxcbiAgICAgICAgICAgICAgICByZXF1aXJlSWRUb2tlbjogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUNhbGxiYWNrRXJyb3IobmV3IEF1dGhvcml6YXRpb25Db2RlR3JhbnRFcnJvcih7XG4gICAgICAgICAgICAgICAgY2F1c2U6IG5ldyBPQXV0aDJFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IGUuZXJyb3IsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUuZXJyb3JfZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSksIG9uQ2FsbGJhY2tDdHgsIHJlcSwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlkVG9rZW5DbGFpbXMgPSBvYXV0aC5nZXRWYWxpZGF0ZWRJZFRva2VuQ2xhaW1zKG9pZGNSZXMpO1xuICAgICAgICBsZXQgc2Vzc2lvbiA9IHtcbiAgICAgICAgICAgIHVzZXI6IGlkVG9rZW5DbGFpbXMsXG4gICAgICAgICAgICB0b2tlblNldDoge1xuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBvaWRjUmVzLmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgICAgICBpZFRva2VuOiBvaWRjUmVzLmlkX3Rva2VuLFxuICAgICAgICAgICAgICAgIHNjb3BlOiBvaWRjUmVzLnNjb3BlLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RlZFNjb3BlOiB0cmFuc2FjdGlvblN0YXRlLnNjb3BlLFxuICAgICAgICAgICAgICAgIGF1ZGllbmNlOiB0cmFuc2FjdGlvblN0YXRlLmF1ZGllbmNlLFxuICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogb2lkY1Jlcy5yZWZyZXNoX3Rva2VuLFxuICAgICAgICAgICAgICAgIGV4cGlyZXNBdDogTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgKyBOdW1iZXIob2lkY1Jlcy5leHBpcmVzX2luKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGludGVybmFsOiB7XG4gICAgICAgICAgICAgICAgc2lkOiBpZFRva2VuQ2xhaW1zLnNpZCxcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMub25DYWxsYmFjayhudWxsLCBvbkNhbGxiYWNrQ3R4LCBzZXNzaW9uKTtcbiAgICAgICAgLy8gY2FsbCBiZWZvcmVTZXNzaW9uU2F2ZWQgY2FsbGJhY2sgaWYgcHJlc2VudFxuICAgICAgICAvLyBpZiBub3QgdGhlbiBmaWx0ZXIgaWRfdG9rZW4gY2xhaW1zIHdpdGggZGVmYXVsdCBydWxlc1xuICAgICAgICBzZXNzaW9uID0gYXdhaXQgdGhpcy5maW5hbGl6ZVNlc3Npb24oc2Vzc2lvbiwgb2lkY1Jlcy5pZF90b2tlbik7XG4gICAgICAgIGF3YWl0IHRoaXMuc2Vzc2lvblN0b3JlLnNldChyZXEuY29va2llcywgcmVzLmNvb2tpZXMsIHNlc3Npb24sIHRydWUpO1xuICAgICAgICBhZGRDYWNoZUNvbnRyb2xIZWFkZXJzRm9yU2Vzc2lvbihyZXMpO1xuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgY3VycmVudCB0cmFuc2FjdGlvbiBjb29raWUgYWZ0ZXIgc3VjY2Vzc2Z1bCBhdXRoZW50aWNhdGlvblxuICAgICAgICBhd2FpdCB0aGlzLnRyYW5zYWN0aW9uU3RvcmUuZGVsZXRlKHJlcy5jb29raWVzLCBzdGF0ZSk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVByb2ZpbGUocmVxKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCB0aGlzLnNlc3Npb25TdG9yZS5nZXQocmVxLmNvb2tpZXMpO1xuICAgICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5vQ29udGVudFByb2ZpbGVSZXNwb25zZVdoZW5VbmF1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjA0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiA0MDFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IE5leHRSZXNwb25zZS5qc29uKHNlc3Npb24/LnVzZXIpO1xuICAgICAgICBhZGRDYWNoZUNvbnRyb2xIZWFkZXJzRm9yU2Vzc2lvbihyZXMpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVBY2Nlc3NUb2tlbihyZXEpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuc2Vzc2lvblN0b3JlLmdldChyZXEuY29va2llcyk7XG4gICAgICAgIGNvbnN0IGF1ZGllbmNlID0gcmVxLm5leHRVcmwuc2VhcmNoUGFyYW1zLmdldChcImF1ZGllbmNlXCIpO1xuICAgICAgICBjb25zdCBzY29wZSA9IHJlcS5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJzY29wZVwiKTtcbiAgICAgICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhbiBhY3RpdmUgc2Vzc2lvbi5cIixcbiAgICAgICAgICAgICAgICAgICAgY29kZTogQWNjZXNzVG9rZW5FcnJvckNvZGUuTUlTU0lOR19TRVNTSU9OXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHN0YXR1czogNDAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbZXJyb3IsIGdldFRva2VuU2V0UmVzcG9uc2VdID0gYXdhaXQgdGhpcy5nZXRUb2tlblNldChzZXNzaW9uLCB7XG4gICAgICAgICAgICBzY29wZSxcbiAgICAgICAgICAgIGF1ZGllbmNlXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogZXJyb3IuY29kZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDQwMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0b2tlblNldDogdXBkYXRlZFRva2VuU2V0LCBpZFRva2VuQ2xhaW1zIH0gPSBnZXRUb2tlblNldFJlc3BvbnNlO1xuICAgICAgICBjb25zdCByZXMgPSBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgICB0b2tlbjogdXBkYXRlZFRva2VuU2V0LmFjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgc2NvcGU6IHVwZGF0ZWRUb2tlblNldC5zY29wZSxcbiAgICAgICAgICAgIGV4cGlyZXNfYXQ6IHVwZGF0ZWRUb2tlblNldC5leHBpcmVzQXQsXG4gICAgICAgICAgICAuLi4odXBkYXRlZFRva2VuU2V0LnRva2VuX3R5cGUgJiYge1xuICAgICAgICAgICAgICAgIHRva2VuX3R5cGU6IHVwZGF0ZWRUb2tlblNldC50b2tlbl90eXBlXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNoYW5nZXMgPSBnZXRTZXNzaW9uQ2hhbmdlc0FmdGVyR2V0QWNjZXNzVG9rZW4oc2Vzc2lvbiwgdXBkYXRlZFRva2VuU2V0LCB7XG4gICAgICAgICAgICBzY29wZTogdGhpcy5hdXRob3JpemF0aW9uUGFyYW1ldGVycz8uc2NvcGUsXG4gICAgICAgICAgICBhdWRpZW5jZTogdGhpcy5hdXRob3JpemF0aW9uUGFyYW1ldGVycz8uYXVkaWVuY2VcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChzZXNzaW9uQ2hhbmdlcykge1xuICAgICAgICAgICAgaWYgKGlkVG9rZW5DbGFpbXMpIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLnVzZXIgPSBpZFRva2VuQ2xhaW1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2FsbCBiZWZvcmVTZXNzaW9uU2F2ZWQgY2FsbGJhY2sgaWYgcHJlc2VudFxuICAgICAgICAgICAgLy8gaWYgbm90IHRoZW4gZmlsdGVyIGlkX3Rva2VuIGNsYWltcyB3aXRoIGRlZmF1bHQgcnVsZXNcbiAgICAgICAgICAgIGNvbnN0IGZpbmFsU2Vzc2lvbiA9IGF3YWl0IHRoaXMuZmluYWxpemVTZXNzaW9uKHNlc3Npb24sIHVwZGF0ZWRUb2tlblNldC5pZFRva2VuKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2Vzc2lvblN0b3JlLnNldChyZXEuY29va2llcywgcmVzLmNvb2tpZXMsIHtcbiAgICAgICAgICAgICAgICAuLi5maW5hbFNlc3Npb24sXG4gICAgICAgICAgICAgICAgLi4uc2Vzc2lvbkNoYW5nZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYWRkQ2FjaGVDb250cm9sSGVhZGVyc0ZvclNlc3Npb24ocmVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVCYWNrQ2hhbm5lbExvZ291dChyZXEpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNlc3Npb25TdG9yZS5zdG9yZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXCJBIHNlc3Npb24gZGF0YSBzdG9yZSBpcyBub3QgY29uZmlndXJlZC5cIiwge1xuICAgICAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2Vzc2lvblN0b3JlLnN0b3JlLmRlbGV0ZUJ5TG9nb3V0VG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKFwiQmFjay1jaGFubmVsIGxvZ291dCBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBzZXNzaW9uIGRhdGEgc3RvcmUuXCIsIHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoYXdhaXQgcmVxLnRleHQoKSk7XG4gICAgICAgIGNvbnN0IGxvZ291dFRva2VuID0gYm9keS5nZXQoXCJsb2dvdXRfdG9rZW5cIik7XG4gICAgICAgIGlmICghbG9nb3V0VG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKFwiTWlzc2luZyBgbG9nb3V0X3Rva2VuYCBpbiB0aGUgcmVxdWVzdCBib2R5LlwiLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiA0MDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtlcnJvciwgbG9nb3V0VG9rZW5DbGFpbXNdID0gYXdhaXQgdGhpcy52ZXJpZnlMb2dvdXRUb2tlbihsb2dvdXRUb2tlbik7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoZXJyb3IubWVzc2FnZSwge1xuICAgICAgICAgICAgICAgIHN0YXR1czogNDAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnNlc3Npb25TdG9yZS5zdG9yZS5kZWxldGVCeUxvZ291dFRva2VuKGxvZ291dFRva2VuQ2xhaW1zKTtcbiAgICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UobnVsbCwge1xuICAgICAgICAgICAgc3RhdHVzOiAyMDRcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNvbm5lY3RBY2NvdW50KHJlcSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5zZXNzaW9uU3RvcmUuZ2V0KHJlcS5jb29raWVzKTtcbiAgICAgICAgLy8gcGFzcyBhbGwgcXVlcnkgcGFyYW1zIGV4Y2VwdCBgY29ubmVjdGlvbmAgYW5kIGByZXR1cm5Ub2AgYXMgYXV0aG9yaXphdGlvbiBwYXJhbXNcbiAgICAgICAgY29uc3QgY29ubmVjdGlvbiA9IHJlcS5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJjb25uZWN0aW9uXCIpO1xuICAgICAgICBjb25zdCByZXR1cm5UbyA9IHJlcS5uZXh0VXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJyZXR1cm5Ub1wiKSA/PyB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25QYXJhbXMgPSBPYmplY3QuZnJvbUVudHJpZXMoWy4uLnJlcS5uZXh0VXJsLnNlYXJjaFBhcmFtcy5lbnRyaWVzKCldLmZpbHRlcigoW2tleV0pID0+IGtleSAhPT0gXCJjb25uZWN0aW9uXCIgJiYga2V5ICE9PSBcInJldHVyblRvXCIpKTtcbiAgICAgICAgaWYgKCFjb25uZWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcIkEgY29ubmVjdGlvbiBpcyByZXF1aXJlZC5cIiwge1xuICAgICAgICAgICAgICAgIHN0YXR1czogNDAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKFwiVGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhbiBhY3RpdmUgc2Vzc2lvbi5cIiwge1xuICAgICAgICAgICAgICAgIHN0YXR1czogNDAxXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbZ2V0VG9rZW5TZXRFcnJvciwgZ2V0VG9rZW5TZXRSZXNwb25zZV0gPSBhd2FpdCB0aGlzLmdldFRva2VuU2V0KHNlc3Npb24sIHtcbiAgICAgICAgICAgIHNjb3BlOiBcImNyZWF0ZTptZTpjb25uZWN0ZWRfYWNjb3VudHNcIixcbiAgICAgICAgICAgIGF1ZGllbmNlOiBgJHt0aGlzLmlzc3Vlcn0vbWUvYFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGdldFRva2VuU2V0RXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKFwiRmFpbGVkIHRvIHJldHJpZXZlIGEgY29ubmVjdGVkIGFjY291bnQgYWNjZXNzIHRva2VuLlwiLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiA0MDFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgdG9rZW5TZXQsIGlkVG9rZW5DbGFpbXMgfSA9IGdldFRva2VuU2V0UmVzcG9uc2U7XG4gICAgICAgIGNvbnN0IFtjb25uZWN0QWNjb3VudEVycm9yLCBjb25uZWN0QWNjb3VudFJlc3BvbnNlXSA9IGF3YWl0IHRoaXMuY29ubmVjdEFjY291bnQoe1xuICAgICAgICAgICAgdG9rZW5TZXQ6IHRva2VuU2V0LFxuICAgICAgICAgICAgY29ubmVjdGlvbixcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb25QYXJhbXMsXG4gICAgICAgICAgICByZXR1cm5Ub1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGNvbm5lY3RBY2NvdW50RXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKGNvbm5lY3RBY2NvdW50RXJyb3IubWVzc2FnZSwge1xuICAgICAgICAgICAgICAgIHN0YXR1czogY29ubmVjdEFjY291bnRFcnJvci5jYXVzZT8uc3RhdHVzID8/IDUwMFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBzZXNzaW9uIHdpdGggdGhlIG5ldyB0b2tlbiBzZXQsIGlmIG5lY2Vzc2FyeVxuICAgICAgICBjb25zdCBzZXNzaW9uQ2hhbmdlcyA9IGdldFNlc3Npb25DaGFuZ2VzQWZ0ZXJHZXRBY2Nlc3NUb2tlbihzZXNzaW9uLCB0b2tlblNldCwge1xuICAgICAgICAgICAgc2NvcGU6IHRoaXMuYXV0aG9yaXphdGlvblBhcmFtZXRlcnM/LnNjb3BlID8/IERFRkFVTFRfU0NPUEVTLFxuICAgICAgICAgICAgYXVkaWVuY2U6IHRoaXMuYXV0aG9yaXphdGlvblBhcmFtZXRlcnM/LmF1ZGllbmNlXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2Vzc2lvbkNoYW5nZXMpIHtcbiAgICAgICAgICAgIGlmIChpZFRva2VuQ2xhaW1zKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbi51c2VyID0gaWRUb2tlbkNsYWltcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNhbGwgYmVmb3JlU2Vzc2lvblNhdmVkIGNhbGxiYWNrIGlmIHByZXNlbnRcbiAgICAgICAgICAgIC8vIGlmIG5vdCB0aGVuIGZpbHRlciBpZF90b2tlbiBjbGFpbXMgd2l0aCBkZWZhdWx0IHJ1bGVzXG4gICAgICAgICAgICBjb25zdCBmaW5hbFNlc3Npb24gPSBhd2FpdCB0aGlzLmZpbmFsaXplU2Vzc2lvbihzZXNzaW9uLCB0b2tlblNldC5pZFRva2VuKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2Vzc2lvblN0b3JlLnNldChyZXEuY29va2llcywgY29ubmVjdEFjY291bnRSZXNwb25zZS5jb29raWVzLCB7XG4gICAgICAgICAgICAgICAgLi4uZmluYWxTZXNzaW9uLFxuICAgICAgICAgICAgICAgIC4uLnNlc3Npb25DaGFuZ2VzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFkZENhY2hlQ29udHJvbEhlYWRlcnNGb3JTZXNzaW9uKGNvbm5lY3RBY2NvdW50UmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb25uZWN0QWNjb3VudFJlc3BvbnNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgT0F1dGggdG9rZW4gc2V0cywgaGFuZGxpbmcgdG9rZW4gcmVmcmVzaCB3aGVuIG5lY2Vzc2FyeSBvciBpZiBmb3JjZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIHR1cGxlIGNvbnRhaW5pbmcgZWl0aGVyOlxuICAgICAqICAgLSBgW1Nka0Vycm9yLCBudWxsXWAgaWYgYW4gZXJyb3Igb2NjdXJyZWQgKG1pc3NpbmcgcmVmcmVzaCB0b2tlbiwgZGlzY292ZXJ5IGZhaWx1cmUsIG9yIHJlZnJlc2ggZmFpbHVyZSlcbiAgICAgKiAgIC0gYFtudWxsLCB7dG9rZW5TZXQsIGlkVG9rZW5DbGFpbXN9XWAgaWYgYSBuZXcgdG9rZW4gd2FzIHJldHJpZXZlZCwgY29udGFpbmluZyB0aGUgbmV3IHRva2VuIHNldCBJRCB0b2tlbiBjbGFpbXNcbiAgICAgKiAgIC0gYFtudWxsLCB7dG9rZW5TZXQsIH1dYCBpZiB0b2tlbiByZWZyZXNoIHdhcyBub3QgZG9uZSBhbmQgZXhpc3RpbmcgdG9rZW4gd2FzIHJldHVybmVkXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VG9rZW5TZXQoc2Vzc2lvbkRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICAvLyBUaGlzIHdpbGwgbWVyZ2UgdGhlIHNjb3BlcyBmcm9tIHRoZSBhdXRob3JpemF0aW9uIHBhcmFtZXRlcnMgYW5kIHRoZSBvcHRpb25zLlxuICAgICAgICAvLyBUaGUgc2NvcGUgZnJvbSB0aGUgb3B0aW9ucyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBzY29wZXMgZnJvbSB0aGUgYXV0aG9yaXphdGlvbiBwYXJhbWV0ZXJzLlxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgZHVwbGljYXRlIHNjb3BlcywgdGhleSB3aWxsIGJlIHJlbW92ZWQuXG4gICAgICAgIGNvbnN0IHNjb3BlID0gbWVyZ2VTY29wZXMoZ2V0U2NvcGVGb3JBdWRpZW5jZSh0aGlzLmF1dGhvcml6YXRpb25QYXJhbWV0ZXJzLnNjb3BlLCBvcHRpb25zLmF1ZGllbmNlID8/IHRoaXMuYXV0aG9yaXphdGlvblBhcmFtZXRlcnMuYXVkaWVuY2UpLCBvcHRpb25zLnNjb3BlKTtcbiAgICAgICAgY29uc3QgdG9rZW5TZXQgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9BdXRoQ2xpZW50X2luc3RhbmNlcywgXCJtXCIsIF9BdXRoQ2xpZW50X2dldFRva2VuU2V0RnJvbVNlc3Npb24pLmNhbGwodGhpcywgc2Vzc2lvbkRhdGEsIHtcbiAgICAgICAgICAgIHNjb3BlOiBzY29wZSxcbiAgICAgICAgICAgIGF1ZGllbmNlOiBvcHRpb25zLmF1ZGllbmNlID8/IHRoaXMuYXV0aG9yaXphdGlvblBhcmFtZXRlcnMuYXVkaWVuY2VcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIG5vIGFjY2VzcyB0b2tlbiB3YXMgZm91bmQgdGhhdCBtYXRjaGVzIHRoZSwgb3B0aW9uYWwsIHByb3ZpZGVkIGF1ZGllbmNlIGFuZCBzY29wZVxuICAgICAgICBpZiAoIXRva2VuU2V0LnJlZnJlc2hUb2tlbiAmJiAhdG9rZW5TZXQuYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgbmV3IEFjY2Vzc1Rva2VuRXJyb3IoQWNjZXNzVG9rZW5FcnJvckNvZGUuTUlTU0lOR19SRUZSRVNIX1RPS0VOLCBcIk5vIGFjY2VzcyB0b2tlbiBmb3VuZCBhbmQgYSByZWZyZXNoIHRva2VuIHdhcyBub3QgcHJvdmlkZWQuIFRoZSB1c2VyIG5lZWRzIHRvIHJlLWF1dGhlbnRpY2F0ZS5cIiksXG4gICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGUgYWNjZXNzIHRva2VuIHdhcyBmb3VuZCwgYnV0IGl0IGhhcyBleHBpcmVkIGFuZCB3ZSBkbyBub3QgaGF2ZSBhIHJlZnJlc2ggdG9rZW5cbiAgICAgICAgaWYgKCF0b2tlblNldC5yZWZyZXNoVG9rZW4gJiZcbiAgICAgICAgICAgIHRva2VuU2V0LmFjY2Vzc1Rva2VuICYmXG4gICAgICAgICAgICB0b2tlblNldC5leHBpcmVzQXQgJiZcbiAgICAgICAgICAgIHRva2VuU2V0LmV4cGlyZXNBdCA8PSBEYXRlLm5vdygpIC8gMTAwMCkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBuZXcgQWNjZXNzVG9rZW5FcnJvcihBY2Nlc3NUb2tlbkVycm9yQ29kZS5NSVNTSU5HX1JFRlJFU0hfVE9LRU4sIFwiVGhlIGFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZCBhbmQgYSByZWZyZXNoIHRva2VuIHdhcyBub3QgcHJvdmlkZWQuIFRoZSB1c2VyIG5lZWRzIHRvIHJlLWF1dGhlbnRpY2F0ZS5cIiksXG4gICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9rZW5TZXQucmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgICAvLyBlaXRoZXIgdGhlIGFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZCBvciB3ZSBhcmUgZm9yY2luZyBhIHJlZnJlc2hcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnJlZnJlc2ggfHxcbiAgICAgICAgICAgICAgICAhdG9rZW5TZXQuZXhwaXJlc0F0IHx8XG4gICAgICAgICAgICAgICAgdG9rZW5TZXQuZXhwaXJlc0F0IDw9IERhdGUubm93KCkgLyAxMDAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2Rpc2NvdmVyeUVycm9yLCBhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGFdID0gYXdhaXQgdGhpcy5kaXNjb3ZlckF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YSgpO1xuICAgICAgICAgICAgICAgIGlmIChkaXNjb3ZlcnlFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2Rpc2NvdmVyeUVycm9yLCBudWxsXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbFBhcmFtZXRlcnMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc2NvcGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkaXRpb25hbFBhcmFtZXRlcnMuYXBwZW5kKFwic2NvcGVcIiwgc2NvcGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5hdWRpZW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRpdGlvbmFsUGFyYW1ldGVycy5hcHBlbmQoXCJhdWRpZW5jZVwiLCBvcHRpb25zLmF1ZGllbmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVmcmVzaFRva2VuR3JhbnRSZXF1ZXN0Q2FsbCA9IGFzeW5jICgpID0+IG9hdXRoLnJlZnJlc2hUb2tlbkdyYW50UmVxdWVzdChhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEsIHRoaXMuY2xpZW50TWV0YWRhdGEsIGF3YWl0IHRoaXMuZ2V0Q2xpZW50QXV0aCgpLCB0b2tlblNldC5yZWZyZXNoVG9rZW4sIHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5odHRwT3B0aW9ucygpLFxuICAgICAgICAgICAgICAgICAgICBbb2F1dGguY3VzdG9tRmV0Y2hdOiB0aGlzLmZldGNoLFxuICAgICAgICAgICAgICAgICAgICBbb2F1dGguYWxsb3dJbnNlY3VyZVJlcXVlc3RzXTogdGhpcy5hbGxvd0luc2VjdXJlUmVxdWVzdHMsXG4gICAgICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxQYXJhbWV0ZXJzLFxuICAgICAgICAgICAgICAgICAgICAuLi4odGhpcy51c2VEUG9QICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRwb3BLZXlQYWlyICYmIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERQb1A6IG9hdXRoLkRQb1AodGhpcy5jbGllbnRNZXRhZGF0YSwgdGhpcy5kcG9wS2V5UGFpcilcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzUmVmcmVzaFRva2VuUmVzcG9uc2VDYWxsID0gKHJlc3BvbnNlKSA9PiBvYXV0aC5wcm9jZXNzUmVmcmVzaFRva2VuUmVzcG9uc2UoYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhLCB0aGlzLmNsaWVudE1ldGFkYXRhLCByZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgbGV0IG9hdXRoUmVzO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG9hdXRoUmVzID0gYXdhaXQgd2l0aERQb1BOb25jZVJldHJ5KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZnJlc2hUb2tlblJlcyA9IGF3YWl0IHJlZnJlc2hUb2tlbkdyYW50UmVxdWVzdENhbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBwcm9jZXNzUmVmcmVzaFRva2VuUmVzcG9uc2VDYWxsKHJlZnJlc2hUb2tlblJlcyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuZHBvcE9wdGlvbnM/LnJldHJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBBY2Nlc3NUb2tlbkVycm9yKEFjY2Vzc1Rva2VuRXJyb3JDb2RlLkZBSUxFRF9UT19SRUZSRVNIX1RPS0VOLCBcIlRoZSBhY2Nlc3MgdG9rZW4gaGFzIGV4cGlyZWQgYW5kIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSB0cnlpbmcgdG8gcmVmcmVzaCBpdC5cIiwgbmV3IE9BdXRoMkVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBlLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUuZXJyb3JfZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaWRUb2tlbkNsYWltcyA9IG9hdXRoLmdldFZhbGlkYXRlZElkVG9rZW5DbGFpbXMob2F1dGhSZXMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuRXhwaXJlc0F0ID0gTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgKyBOdW1iZXIob2F1dGhSZXMuZXhwaXJlc19pbik7XG4gICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlZFRva2VuU2V0ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi50b2tlblNldCwgLy8gY29udGFpbnMgdGhlIGV4aXN0aW5nIGBpYXRgIGNsYWltIHRvIG1haW50YWluIHRoZSBzZXNzaW9uIGxpZmV0aW1lXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBvYXV0aFJlcy5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW46IG9hdXRoUmVzLmlkX3Rva2VuLFxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBzdG9yZSB0aGUgYm90aCByZXF1ZXN0ZWQgYW5kIGdyYW50ZWQgc2NvcGVzIG9uIHRoZSB0b2tlblNldCwgc28gd2Uga25vdyB3aGF0IHNjb3BlcyB3ZXJlIHJlcXVlc3RlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHNlcnZlciBtYXkgcmV0dXJuIGxlc3Mgc2NvcGVzIHRoYW4gcmVxdWVzdGVkLlxuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgd2UgY2FuIHJldHVybiB0aGUgc2FtZSB0b2tlbiBhZ2FpbiB3aGVuIGEgdG9rZW4gZm9yIHRoZSBzYW1lIG9yIGxlc3Mgc2NvcGVzIGlzIHJlcXVlc3RlZCBieSB1c2luZyBgcmVxdWVzdGVkU2NvcGVgIGR1cmluZyBsb29rLXVwLlxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBFLmcuIFdoZW4gcmVxdWVzdGluZyBhIHRva2VuIHdpdGggc2NvcGUgYGEgYmAsIGFuZCB3ZSByZXR1cm4gb25lIGZvciBzY29wZSBgYWAgb25seSxcbiAgICAgICAgICAgICAgICAgICAgLy8gLSBJZiB3ZSBvbmx5IHN0b3JlIHRoZSByZXR1cm5lZCBzY29wZXMsIHdlIGNhbm5vdCByZXR1cm4gdGhpcyB0b2tlbiB3aGVuIHRoZSB1c2VyIHJlcXVlc3RzIGEgdG9rZW4gZm9yIHNjb3BlIGBhIGJgIGFnYWluLlxuICAgICAgICAgICAgICAgICAgICAvLyAtIElmIHdlIG9ubHkgc3RvcmUgdGhlIHJlcXVlc3RlZCBzY29wZXMsIHdlIGxvc2UgdHJhY2sgb2YgdGhlIGFjdHVhbCBzY29wZXMgZ3JhbnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgLy8gU2NvcGVzIGFjdHVhbGx5IGdyYW50ZWQgYnkgdGhlIHNlcnZlclxuICAgICAgICAgICAgICAgICAgICBzY29wZTogb2F1dGhSZXMuc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIFNjb3BlcyByZXF1ZXN0ZWQgYnkgdGhlIGNsaWVudFxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRTY29wZTogc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXNBdDogYWNjZXNzVG9rZW5FeHBpcmVzQXQsXG4gICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIGF1ZGllbmNlIGlmIGl0IGV4aXN0cywgb3RoZXJ3aXNlIHVzZSB0aGUgb25lIGZyb20gdGhlIG9wdGlvbnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIG5vdCBwcm92aWRlZCwgdXNlIGB1bmRlZmluZWRgLlxuICAgICAgICAgICAgICAgICAgICBhdWRpZW5jZTogdG9rZW5TZXQuYXVkaWVuY2UgfHwgb3B0aW9ucy5hdWRpZW5jZSB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIC8vIFN0b3JlIHRoZSB0b2tlbiB0eXBlIGZyb20gdGhlIE9BdXRoIHJlc3BvbnNlIChlLmcuLCBcIkJlYXJlclwiLCBcIkRQb1BcIilcbiAgICAgICAgICAgICAgICAgICAgLi4uKG9hdXRoUmVzLnRva2VuX3R5cGUgJiYgeyB0b2tlbl90eXBlOiBvYXV0aFJlcy50b2tlbl90eXBlIH0pXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAob2F1dGhSZXMucmVmcmVzaF90b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAvLyByZWZyZXNoIHRva2VuIHJvdGF0aW9uIGlzIGVuYWJsZWQsIHBlcnNpc3QgdGhlIG5ldyByZWZyZXNoIHRva2VuIGZyb20gdGhlIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRUb2tlblNldC5yZWZyZXNoVG9rZW4gPSBvYXV0aFJlcy5yZWZyZXNoX3Rva2VuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgZGlkIG5vdCBnZXQgYSByZWZyZXNoIHRva2VuIGJhY2ssIGtlZXAgdGhlIGN1cnJlbnQgbG9uZy1saXZlZCByZWZyZXNoIHRva2VuIGFyb3VuZFxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVG9rZW5TZXQucmVmcmVzaFRva2VuID0gdG9rZW5TZXQucmVmcmVzaFRva2VuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlblNldDogdXBkYXRlZFRva2VuU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRUb2tlbkNsYWltczogaWRUb2tlbkNsYWltc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW251bGwsIHsgdG9rZW5TZXQ6IHRva2VuU2V0LCBpZFRva2VuQ2xhaW1zOiB1bmRlZmluZWQgfV07XG4gICAgfVxuICAgIGFzeW5jIGJhY2tjaGFubmVsQXV0aGVudGljYXRpb24ob3B0aW9ucykge1xuICAgICAgICBjb25zdCBbZGlzY292ZXJ5RXJyb3IsIGF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YV0gPSBhd2FpdCB0aGlzLmRpc2NvdmVyQXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhKCk7XG4gICAgICAgIGlmIChkaXNjb3ZlcnlFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIFtkaXNjb3ZlcnlFcnJvciwgbnVsbF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEuYmFja2NoYW5uZWxfYXV0aGVudGljYXRpb25fZW5kcG9pbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IEJhY2tjaGFubmVsQXV0aGVudGljYXRpb25Ob3RTdXBwb3J0ZWRFcnJvcigpLCBudWxsXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBwcm92aWRlZCBvbiBib3RoIHNpZGVzLCB0aGlzIGRvZXMgbm90IG1lcmdlIHRoZSBzY29wZSBwcm9wZXJ0eSxcbiAgICAgICAgLy8gaW5zdGVhZCwgdGhlIHNjb3BlIGZyb20gdGhlIHJpZ2h0IHNpZGUgKG9wdGlvbnMpIGZ1bGx5IG92ZXJyaWRlcyB0aGUgbGVmdCBzaWRlLlxuICAgICAgICAvLyBUaGlzIGlzIGRvbmUgdG8gYXZvaWQgYnJlYWtpbmcgZXhpc3RpbmcgYmVoYXZpb3IuXG4gICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25QYXJhbXMgPSBtZXJnZUF1dGhvcml6YXRpb25QYXJhbXNJbnRvU2VhcmNoUGFyYW1zKHRoaXMuYXV0aG9yaXphdGlvblBhcmFtZXRlcnMsIG9wdGlvbnMuYXV0aG9yaXphdGlvblBhcmFtcywgSU5URVJOQUxfQVVUSE9SSVpFX1BBUkFNUyk7XG4gICAgICAgIGlmICghYXV0aG9yaXphdGlvblBhcmFtcy5nZXQoXCJzY29wZVwiKSkge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvblBhcmFtcy5zZXQoXCJzY29wZVwiLCBERUZBVUxUX1NDT1BFUyk7XG4gICAgICAgIH1cbiAgICAgICAgYXV0aG9yaXphdGlvblBhcmFtcy5zZXQoXCJjbGllbnRfaWRcIiwgdGhpcy5jbGllbnRNZXRhZGF0YS5jbGllbnRfaWQpO1xuICAgICAgICBhdXRob3JpemF0aW9uUGFyYW1zLnNldChcImJpbmRpbmdfbWVzc2FnZVwiLCBvcHRpb25zLmJpbmRpbmdNZXNzYWdlKTtcbiAgICAgICAgYXV0aG9yaXphdGlvblBhcmFtcy5zZXQoXCJsb2dpbl9oaW50XCIsIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIGZvcm1hdDogXCJpc3Nfc3ViXCIsXG4gICAgICAgICAgICBpc3M6IGF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YS5pc3N1ZXIsXG4gICAgICAgICAgICBzdWI6IG9wdGlvbnMubG9naW5IaW50LnN1YlxuICAgICAgICB9KSk7XG4gICAgICAgIGlmIChvcHRpb25zLnJlcXVlc3RlZEV4cGlyeSkge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvblBhcmFtcy5hcHBlbmQoXCJyZXF1ZXN0ZWRfZXhwaXJ5XCIsIG9wdGlvbnMucmVxdWVzdGVkRXhwaXJ5LnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmF1dGhvcml6YXRpb25EZXRhaWxzKSB7XG4gICAgICAgICAgICBhdXRob3JpemF0aW9uUGFyYW1zLmFwcGVuZChcImF1dGhvcml6YXRpb25fZGV0YWlsc1wiLCBKU09OLnN0cmluZ2lmeShvcHRpb25zLmF1dGhvcml6YXRpb25EZXRhaWxzKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgW29wZW5JZENsaWVudENvbmZpZ0Vycm9yLCBvcGVuaWRDbGllbnRDb25maWddID0gYXdhaXQgdGhpcy5nZXRPcGVuSWRDbGllbnRDb25maWcoKTtcbiAgICAgICAgaWYgKG9wZW5JZENsaWVudENvbmZpZ0Vycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gW29wZW5JZENsaWVudENvbmZpZ0Vycm9yLCBudWxsXTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYmFja2NoYW5uZWxBdXRoZW50aWNhdGlvblJlc3BvbnNlID0gYXdhaXQgY2xpZW50LmluaXRpYXRlQmFja2NoYW5uZWxBdXRoZW50aWNhdGlvbihvcGVuaWRDbGllbnRDb25maWcsIGF1dGhvcml6YXRpb25QYXJhbXMpO1xuICAgICAgICAgICAgY29uc3QgdG9rZW5FbmRwb2ludFJlc3BvbnNlID0gYXdhaXQgY2xpZW50LnBvbGxCYWNrY2hhbm5lbEF1dGhlbnRpY2F0aW9uR3JhbnQob3BlbmlkQ2xpZW50Q29uZmlnLCBiYWNrY2hhbm5lbEF1dGhlbnRpY2F0aW9uUmVzcG9uc2UpO1xuICAgICAgICAgICAgY29uc3QgYWNjZXNzVG9rZW5FeHBpcmVzQXQgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKSArXG4gICAgICAgICAgICAgICAgTnVtYmVyKHRva2VuRW5kcG9pbnRSZXNwb25zZS5leHBpcmVzX2luKTtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRva2VuU2V0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogdG9rZW5FbmRwb2ludFJlc3BvbnNlLmFjY2Vzc190b2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkVG9rZW46IHRva2VuRW5kcG9pbnRSZXNwb25zZS5pZF90b2tlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlOiB0b2tlbkVuZHBvaW50UmVzcG9uc2Uuc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoVG9rZW46IHRva2VuRW5kcG9pbnRSZXNwb25zZS5yZWZyZXNoX3Rva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0F0OiBhY2Nlc3NUb2tlbkV4cGlyZXNBdFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuQ2xhaW1zOiB0b2tlbkVuZHBvaW50UmVzcG9uc2UuY2xhaW1zKCksXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb25EZXRhaWxzOiB0b2tlbkVuZHBvaW50UmVzcG9uc2UuYXV0aG9yaXphdGlvbl9kZXRhaWxzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBuZXcgQmFja2NoYW5uZWxBdXRoZW50aWNhdGlvbkVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IG5ldyBPQXV0aDJFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBlLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZS5lcnJvcl9kZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgZGlzY292ZXJBdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLmF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIFtudWxsLCB0aGlzLmF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YV07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNzdWVyID0gbmV3IFVSTCh0aGlzLmlzc3Vlcik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEgPSBhd2FpdCBvYXV0aFxuICAgICAgICAgICAgICAgIC5kaXNjb3ZlcnlSZXF1ZXN0KGlzc3Vlciwge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuaHR0cE9wdGlvbnMoKSxcbiAgICAgICAgICAgICAgICBbb2F1dGguY3VzdG9tRmV0Y2hdOiB0aGlzLmZldGNoLFxuICAgICAgICAgICAgICAgIFtvYXV0aC5hbGxvd0luc2VjdXJlUmVxdWVzdHNdOiB0aGlzLmFsbG93SW5zZWN1cmVSZXF1ZXN0c1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IG9hdXRoLnByb2Nlc3NEaXNjb3ZlcnlSZXNwb25zZShpc3N1ZXIsIHJlc3BvbnNlKSk7XG4gICAgICAgICAgICB0aGlzLmF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YSA9IGF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YTtcbiAgICAgICAgICAgIHJldHVybiBbbnVsbCwgYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcGVyZm9ybWluZyB0aGUgZGlzY292ZXJ5IHJlcXVlc3QuIGlzc3Vlcj0ke2lzc3Vlci50b1N0cmluZygpfSwgZXJyb3I6YCwgZSk7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIG5ldyBEaXNjb3ZlcnlFcnJvcihcIkRpc2NvdmVyeSBmYWlsZWQgZm9yIHRoZSBPcGVuSUQgQ29ubmVjdCBjb25maWd1cmF0aW9uLlwiKSxcbiAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGRlZmF1bHRPbkNhbGxiYWNrKGVycm9yLCBjdHgpIHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShlcnJvci5tZXNzYWdlLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiA1MDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcyA9IE5leHRSZXNwb25zZS5yZWRpcmVjdChjcmVhdGVSb3V0ZVVybChjdHgucmV0dXJuVG8gfHwgXCIvXCIsIHRoaXMuYXBwQmFzZVVybCkpO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgY2FsbGJhY2sgZXJyb3JzIHdpdGggdHJhbnNhY3Rpb24gY2xlYW51cFxuICAgICAqL1xuICAgIGFzeW5jIGhhbmRsZUNhbGxiYWNrRXJyb3IoZXJyb3IsIGN0eCwgcmVxLCBzdGF0ZSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMub25DYWxsYmFjayhlcnJvciwgY3R4LCBudWxsKTtcbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHRyYW5zYWN0aW9uIGNvb2tpZSBvbiBlcnJvciB0byBwcmV2ZW50IGFjY3VtdWxhdGlvblxuICAgICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudHJhbnNhY3Rpb25TdG9yZS5kZWxldGUocmVzcG9uc2UuY29va2llcywgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gICAgYXN5bmMgdmVyaWZ5TG9nb3V0VG9rZW4obG9nb3V0VG9rZW4pIHtcbiAgICAgICAgY29uc3QgW2Rpc2NvdmVyeUVycm9yLCBhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGFdID0gYXdhaXQgdGhpcy5kaXNjb3ZlckF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YSgpO1xuICAgICAgICBpZiAoZGlzY292ZXJ5RXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBbZGlzY292ZXJ5RXJyb3IsIG51bGxdO1xuICAgICAgICB9XG4gICAgICAgIC8vIG9ubHkgYFJTMjU2YCBpcyBzdXBwb3J0ZWQgZm9yIGxvZ291dCB0b2tlbnNcbiAgICAgICAgY29uc3QgSURfVE9LRU5fU0lHTklOR19BTEcgPSBcIlJTMjU2XCI7XG4gICAgICAgIGNvbnN0IGtleUlucHV0ID0gam9zZS5jcmVhdGVSZW1vdGVKV0tTZXQobmV3IFVSTChhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEuandrc191cmkpLCB7XG4gICAgICAgICAgICBbam9zZS5qd2tzQ2FjaGVdOiB0aGlzLmp3a3NDYWNoZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyBwYXlsb2FkIH0gPSBhd2FpdCBqb3NlLmp3dFZlcmlmeShsb2dvdXRUb2tlbiwga2V5SW5wdXQsIHtcbiAgICAgICAgICAgIGlzc3VlcjogYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhLmlzc3VlcixcbiAgICAgICAgICAgIGF1ZGllbmNlOiB0aGlzLmNsaWVudE1ldGFkYXRhLmNsaWVudF9pZCxcbiAgICAgICAgICAgIGFsZ29yaXRobXM6IFtJRF9UT0tFTl9TSUdOSU5HX0FMR10sXG4gICAgICAgICAgICByZXF1aXJlZENsYWltczogW1wiaWF0XCJdXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIShcInNpZFwiIGluIHBheWxvYWQpICYmICEoXCJzdWJcIiBpbiBwYXlsb2FkKSkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBuZXcgQmFja2NoYW5uZWxMb2dvdXRFcnJvcignZWl0aGVyIFwic2lkXCIgb3IgXCJzdWJcIiAob3IgYm90aCkgY2xhaW1zIG11c3QgYmUgcHJlc2VudCcpLFxuICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwic2lkXCIgaW4gcGF5bG9hZCAmJiB0eXBlb2YgcGF5bG9hZC5zaWQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IEJhY2tjaGFubmVsTG9nb3V0RXJyb3IoJ1wic2lkXCIgY2xhaW0gbXVzdCBiZSBhIHN0cmluZycpLCBudWxsXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJzdWJcIiBpbiBwYXlsb2FkICYmIHR5cGVvZiBwYXlsb2FkLnN1YiAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtuZXcgQmFja2NoYW5uZWxMb2dvdXRFcnJvcignXCJzdWJcIiBjbGFpbSBtdXN0IGJlIGEgc3RyaW5nJyksIG51bGxdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcIm5vbmNlXCIgaW4gcGF5bG9hZCkge1xuICAgICAgICAgICAgcmV0dXJuIFtuZXcgQmFja2NoYW5uZWxMb2dvdXRFcnJvcignXCJub25jZVwiIGNsYWltIGlzIHByb2hpYml0ZWQnKSwgbnVsbF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoXCJldmVudHNcIiBpbiBwYXlsb2FkKSkge1xuICAgICAgICAgICAgcmV0dXJuIFtuZXcgQmFja2NoYW5uZWxMb2dvdXRFcnJvcignXCJldmVudHNcIiBjbGFpbSBpcyBtaXNzaW5nJyksIG51bGxdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcGF5bG9hZC5ldmVudHMgIT09IFwib2JqZWN0XCIgfHwgcGF5bG9hZC5ldmVudHMgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgbmV3IEJhY2tjaGFubmVsTG9nb3V0RXJyb3IoJ1wiZXZlbnRzXCIgY2xhaW0gbXVzdCBiZSBhbiBvYmplY3QnKSxcbiAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKFwiaHR0cDovL3NjaGVtYXMub3BlbmlkLm5ldC9ldmVudC9iYWNrY2hhbm5lbC1sb2dvdXRcIiBpbiBwYXlsb2FkLmV2ZW50cykpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgbmV3IEJhY2tjaGFubmVsTG9nb3V0RXJyb3IoJ1wiaHR0cDovL3NjaGVtYXMub3BlbmlkLm5ldC9ldmVudC9iYWNrY2hhbm5lbC1sb2dvdXRcIiBtZW1iZXIgaXMgbWlzc2luZyBpbiB0aGUgXCJldmVudHNcIiBjbGFpbScpLFxuICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkLmV2ZW50c1tcImh0dHA6Ly9zY2hlbWFzLm9wZW5pZC5uZXQvZXZlbnQvYmFja2NoYW5uZWwtbG9nb3V0XCJdICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIG5ldyBCYWNrY2hhbm5lbExvZ291dEVycm9yKCdcImh0dHA6Ly9zY2hlbWFzLm9wZW5pZC5uZXQvZXZlbnQvYmFja2NoYW5uZWwtbG9nb3V0XCIgbWVtYmVyIGluIHRoZSBcImV2ZW50c1wiIGNsYWltIG11c3QgYmUgYW4gb2JqZWN0JyksXG4gICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzaWQ6IHBheWxvYWQuc2lkLFxuICAgICAgICAgICAgICAgIHN1YjogcGF5bG9hZC5zdWJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICB9XG4gICAgYXN5bmMgYXV0aG9yaXphdGlvblVybChwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgW2Rpc2NvdmVyeUVycm9yLCBhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGFdID0gYXdhaXQgdGhpcy5kaXNjb3ZlckF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YSgpO1xuICAgICAgICBpZiAoZGlzY292ZXJ5RXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBbZGlzY292ZXJ5RXJyb3IsIG51bGxdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnB1c2hlZEF1dGhvcml6YXRpb25SZXF1ZXN0cyAmJlxuICAgICAgICAgICAgIWF1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YS5wdXNoZWRfYXV0aG9yaXphdGlvbl9yZXF1ZXN0X2VuZHBvaW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVGhlIEF1dGgwIHRlbmFudCBkb2VzIG5vdCBoYXZlIHB1c2hlZCBhdXRob3JpemF0aW9uIHJlcXVlc3RzIGVuYWJsZWQuIExlYXJuIGhvdyB0byBlbmFibGUgaXQgaGVyZTogaHR0cHM6Ly9hdXRoMC5jb20vZG9jcy9nZXQtc3RhcnRlZC9hcHBsaWNhdGlvbnMvY29uZmlndXJlLXBhclwiKTtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgbmV3IEVycm9yKFwiVGhlIGF1dGhvcml6YXRpb24gc2VydmVyIGRvZXMgbm90IHN1cHBvcnQgcHVzaGVkIGF1dGhvcml6YXRpb24gcmVxdWVzdHMuXCIpLFxuICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblVybCA9IG5ldyBVUkwoYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhLmF1dGhvcml6YXRpb25fZW5kcG9pbnQpO1xuICAgICAgICBpZiAodGhpcy5wdXNoZWRBdXRob3JpemF0aW9uUmVxdWVzdHMpIHtcbiAgICAgICAgICAgIC8vIHB1c2ggdGhlIHJlcXVlc3QgcGFyYW1zIHRvIHRoZSBhdXRob3JpemF0aW9uIHNlcnZlclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvYXV0aC5wdXNoZWRBdXRob3JpemF0aW9uUmVxdWVzdChhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEsIHRoaXMuY2xpZW50TWV0YWRhdGEsIGF3YWl0IHRoaXMuZ2V0Q2xpZW50QXV0aCgpLCBwYXJhbXMsIHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmh0dHBPcHRpb25zKCksXG4gICAgICAgICAgICAgICAgW29hdXRoLmN1c3RvbUZldGNoXTogdGhpcy5mZXRjaCxcbiAgICAgICAgICAgICAgICBbb2F1dGguYWxsb3dJbnNlY3VyZVJlcXVlc3RzXTogdGhpcy5hbGxvd0luc2VjdXJlUmVxdWVzdHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IHBhclJlcztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcGFyUmVzID0gYXdhaXQgb2F1dGgucHJvY2Vzc1B1c2hlZEF1dGhvcml6YXRpb25SZXNwb25zZShhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEsIHRoaXMuY2xpZW50TWV0YWRhdGEsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IEF1dGhvcml6YXRpb25FcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXVzZTogbmV3IE9BdXRoMkVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBlLmVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGUuZXJyb3JfZGVzY3JpcHRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBwdXNoaW5nIHRoZSBhdXRob3JpemF0aW9uIHJlcXVlc3QuXCJcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXV0aG9yaXphdGlvblVybC5zZWFyY2hQYXJhbXMuc2V0KFwicmVxdWVzdF91cmlcIiwgcGFyUmVzLnJlcXVlc3RfdXJpKTtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb25Vcmwuc2VhcmNoUGFyYW1zLnNldChcImNsaWVudF9pZFwiLCB0aGlzLmNsaWVudE1ldGFkYXRhLmNsaWVudF9pZCk7XG4gICAgICAgICAgICByZXR1cm4gW251bGwsIGF1dGhvcml6YXRpb25VcmxdO1xuICAgICAgICB9XG4gICAgICAgIC8vIGFwcGVuZCB0aGUgcXVlcnkgcGFyYW1ldGVycyB0byB0aGUgYXV0aG9yaXphdGlvbiBVUkwgZm9yIHRoZSBub3JtYWwgZmxvd1xuICAgICAgICBhdXRob3JpemF0aW9uVXJsLnNlYXJjaCA9IHBhcmFtcy50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gW251bGwsIGF1dGhvcml6YXRpb25VcmxdO1xuICAgIH1cbiAgICBhc3luYyBnZXRDbGllbnRBdXRoKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2xpZW50U2VjcmV0ICYmICF0aGlzLmNsaWVudEFzc2VydGlvblNpZ25pbmdLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBjbGllbnQgc2VjcmV0IG9yIGNsaWVudCBhc3NlcnRpb24gc2lnbmluZyBrZXkgbXVzdCBiZSBwcm92aWRlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNsaWVudFByaXZhdGVLZXkgPSB0aGlzXG4gICAgICAgICAgICAuY2xpZW50QXNzZXJ0aW9uU2lnbmluZ0tleTtcbiAgICAgICAgaWYgKGNsaWVudFByaXZhdGVLZXkgJiYgdHlwZW9mIGNsaWVudFByaXZhdGVLZXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGNsaWVudFByaXZhdGVLZXkgPSBhd2FpdCBqb3NlLmltcG9ydFBLQ1M4KGNsaWVudFByaXZhdGVLZXksIHRoaXMuY2xpZW50QXNzZXJ0aW9uU2lnbmluZ0FsZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsaWVudFByaXZhdGVLZXlcbiAgICAgICAgICAgID8gb2F1dGguUHJpdmF0ZUtleUp3dChjbGllbnRQcml2YXRlS2V5KVxuICAgICAgICAgICAgOiBvYXV0aC5DbGllbnRTZWNyZXRQb3N0KHRoaXMuY2xpZW50U2VjcmV0KTtcbiAgICB9XG4gICAgZ2V0IGlzc3VlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9tYWluLnN0YXJ0c1dpdGgoXCJodHRwOi8vXCIpIHx8XG4gICAgICAgICAgICB0aGlzLmRvbWFpbi5zdGFydHNXaXRoKFwiaHR0cHM6Ly9cIilcbiAgICAgICAgICAgID8gdGhpcy5kb21haW5cbiAgICAgICAgICAgIDogYGh0dHBzOi8vJHt0aGlzLmRvbWFpbn1gO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFeGNoYW5nZXMgYSByZWZyZXNoIHRva2VuIGZvciBhbiBhY2Nlc3MgdG9rZW4gZm9yIGEgY29ubmVjdGlvbi5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHBlcmZvcm1zIGEgdG9rZW4gZXhjaGFuZ2UgdXNpbmcgdGhlIHByb3ZpZGVkIHJlZnJlc2ggdG9rZW4gYW5kIGNvbm5lY3Rpb24gZGV0YWlscy5cbiAgICAgKiBJdCBmaXJzdCBjaGVja3MgaWYgdGhlIHJlZnJlc2ggdG9rZW4gaXMgcHJlc2VudCBpbiB0aGUgYHRva2VuU2V0YC4gSWYgbm90LCBpdCByZXR1cm5zIGFuIGVycm9yLlxuICAgICAqIFRoZW4sIGl0IGNvbnN0cnVjdHMgdGhlIG5lY2Vzc2FyeSBwYXJhbWV0ZXJzIGZvciB0aGUgdG9rZW4gZXhjaGFuZ2UgcmVxdWVzdCBhbmQgcGVyZm9ybXNcbiAgICAgKiB0aGUgcmVxdWVzdCB0byB0aGUgYXV0aG9yaXphdGlvbiBzZXJ2ZXIncyB0b2tlbiBlbmRwb2ludC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFtBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb25FcnJvciwgbnVsbF0gfCBbbnVsbCwgQ29ubmVjdGlvblRva2VuU2V0XT59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgdHVwbGUuXG4gICAgICogICAgICAgICAgVGhlIGZpcnN0IGVsZW1lbnQgaXMgZWl0aGVyIGFuIGBBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb25FcnJvcmAgaWYgYW4gZXJyb3Igb2NjdXJyZWQsIG9yIGBudWxsYCBpZiB0aGUgcmVxdWVzdCB3YXMgc3VjY2Vzc2Z1bC5cbiAgICAgKiAgICAgICAgICBUaGUgc2Vjb25kIGVsZW1lbnQgaXMgZWl0aGVyIGBudWxsYCBpZiBhbiBlcnJvciBvY2N1cnJlZCwgb3IgYSBgQ29ubmVjdGlvblRva2VuU2V0YCBvYmplY3RcbiAgICAgKiAgICAgICAgICBjb250YWluaW5nIHRoZSBhY2Nlc3MgdG9rZW4sIGV4cGlyYXRpb24gdGltZSwgYW5kIHNjb3BlIGlmIHRoZSByZXF1ZXN0IHdhcyBzdWNjZXNzZnVsLlxuICAgICAqXG4gICAgICogQHRocm93cyB7QWNjZXNzVG9rZW5Gb3JDb25uZWN0aW9uRXJyb3J9IElmIHRoZSByZWZyZXNoIHRva2VuIGlzIG1pc3Npbmcgb3IgaWYgdGhlcmUgaXMgYW4gZXJyb3IgZHVyaW5nIHRoZSB0b2tlbiBleGNoYW5nZSBwcm9jZXNzLlxuICAgICAqL1xuICAgIGFzeW5jIGdldENvbm5lY3Rpb25Ub2tlblNldCh0b2tlblNldCwgY29ubmVjdGlvblRva2VuU2V0LCBvcHRpb25zKSB7XG4gICAgICAgIC8vIElmIHdlIGRvIG5vdCBoYXZlIGEgcmVmcmVzaCB0b2tlblxuICAgICAgICAvLyBhbmQgd2UgZG8gbm90IGhhdmUgYSBjb25uZWN0aW9uIHRva2VuIHNldCBpbiB0aGUgY2FjaGUgb3IgdGhlIG9uZSB3ZSBoYXZlIGlzIGV4cGlyZWQsXG4gICAgICAgIC8vIHRoZXJlIGlzIG5vdGhpbmcgdG8gcmV0cmlldmUgYW5kIHdlIHJldHVybiBhbiBlcnJvci5cbiAgICAgICAgaWYgKCF0b2tlblNldC5yZWZyZXNoVG9rZW4gJiZcbiAgICAgICAgICAgICghY29ubmVjdGlvblRva2VuU2V0IHx8IGNvbm5lY3Rpb25Ub2tlblNldC5leHBpcmVzQXQgPD0gRGF0ZS5ub3coKSAvIDEwMDApKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIG5ldyBBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb25FcnJvcihBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb25FcnJvckNvZGUuTUlTU0lOR19SRUZSRVNIX1RPS0VOLCBcIkEgcmVmcmVzaCB0b2tlbiB3YXMgbm90IHByZXNlbnQsIENvbm5lY3Rpb24gQWNjZXNzIFRva2VuIHJlcXVpcmVzIGEgcmVmcmVzaCB0b2tlbi4gVGhlIHVzZXIgbmVlZHMgdG8gcmUtYXV0aGVudGljYXRlLlwiKSxcbiAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGRvIGhhdmUgYSByZWZyZXNoIHRva2VuLFxuICAgICAgICAvLyBhbmQgd2UgZG8gbm90IGhhdmUgYSBjb25uZWN0aW9uIHRva2VuIHNldCBpbiB0aGUgY2FjaGUgb3IgdGhlIG9uZSB3ZSBoYXZlIGlzIGV4cGlyZWQsXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gZXhjaGFuZ2UgdGhlIHJlZnJlc2ggdG9rZW4gZm9yIGEgY29ubmVjdGlvbiBhY2Nlc3MgdG9rZW4uXG4gICAgICAgIGlmICh0b2tlblNldC5yZWZyZXNoVG9rZW4gJiZcbiAgICAgICAgICAgICghY29ubmVjdGlvblRva2VuU2V0IHx8IGNvbm5lY3Rpb25Ub2tlblNldC5leHBpcmVzQXQgPD0gRGF0ZS5ub3coKSAvIDEwMDApKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwiY29ubmVjdGlvblwiLCBvcHRpb25zLmNvbm5lY3Rpb24pO1xuICAgICAgICAgICAgY29uc3Qgc3ViamVjdFRva2VuVHlwZSA9IG9wdGlvbnMuc3ViamVjdF90b2tlbl90eXBlID8/XG4gICAgICAgICAgICAgICAgU1VCSkVDVF9UT0tFTl9UWVBFUy5TVUJKRUNUX1RZUEVfUkVGUkVTSF9UT0tFTjtcbiAgICAgICAgICAgIGNvbnN0IHN1YmplY3RUb2tlbiA9IHN1YmplY3RUb2tlblR5cGUgPT09IFNVQkpFQ1RfVE9LRU5fVFlQRVMuU1VCSkVDVF9UWVBFX0FDQ0VTU19UT0tFTlxuICAgICAgICAgICAgICAgID8gdG9rZW5TZXQuYWNjZXNzVG9rZW5cbiAgICAgICAgICAgICAgICA6IHRva2VuU2V0LnJlZnJlc2hUb2tlbjtcbiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoXCJzdWJqZWN0X3Rva2VuX3R5cGVcIiwgc3ViamVjdFRva2VuVHlwZSk7XG4gICAgICAgICAgICBwYXJhbXMuYXBwZW5kKFwic3ViamVjdF90b2tlblwiLCBzdWJqZWN0VG9rZW4pO1xuICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcInJlcXVlc3RlZF90b2tlbl90eXBlXCIsIFJFUVVFU1RFRF9UT0tFTl9UWVBFX0ZFREVSQVRFRF9DT05ORUNUSU9OX0FDQ0VTU19UT0tFTik7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sb2dpbl9oaW50KSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChcImxvZ2luX2hpbnRcIiwgb3B0aW9ucy5sb2dpbl9oaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IFtkaXNjb3ZlcnlFcnJvciwgYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhXSA9IGF3YWl0IHRoaXMuZGlzY292ZXJBdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChkaXNjb3ZlcnlFcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBbZGlzY292ZXJ5RXJyb3IsIG51bGxdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ2VuZXJpY1Rva2VuRW5kcG9pbnRSZXF1ZXN0Q2FsbCA9IGFzeW5jICgpID0+IG9hdXRoLmdlbmVyaWNUb2tlbkVuZHBvaW50UmVxdWVzdChhdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEsIHRoaXMuY2xpZW50TWV0YWRhdGEsIGF3YWl0IHRoaXMuZ2V0Q2xpZW50QXV0aCgpLCBHUkFOVF9UWVBFX0ZFREVSQVRFRF9DT05ORUNUSU9OX0FDQ0VTU19UT0tFTiwgcGFyYW1zLCB7XG4gICAgICAgICAgICAgICAgW29hdXRoLmN1c3RvbUZldGNoXTogdGhpcy5mZXRjaCxcbiAgICAgICAgICAgICAgICBbb2F1dGguYWxsb3dJbnNlY3VyZVJlcXVlc3RzXTogdGhpcy5hbGxvd0luc2VjdXJlUmVxdWVzdHMsXG4gICAgICAgICAgICAgICAgLi4uKHRoaXMudXNlRFBvUCAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRwb3BLZXlQYWlyICYmIHtcbiAgICAgICAgICAgICAgICAgICAgRFBvUDogb2F1dGguRFBvUCh0aGlzLmNsaWVudE1ldGFkYXRhLCB0aGlzLmRwb3BLZXlQYWlyKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NHZW5lcmljVG9rZW5FbmRwb2ludFJlc3BvbnNlQ2FsbCA9IChyZXNwb25zZSkgPT4gb2F1dGgucHJvY2Vzc0dlbmVyaWNUb2tlbkVuZHBvaW50UmVzcG9uc2UoYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhLCB0aGlzLmNsaWVudE1ldGFkYXRhLCByZXNwb25zZSk7XG4gICAgICAgICAgICBsZXQgdG9rZW5FbmRwb2ludFJlc3BvbnNlO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0b2tlbkVuZHBvaW50UmVzcG9uc2UgPSBhd2FpdCB3aXRoRFBvUE5vbmNlUmV0cnkoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBodHRwUmVzcG9uc2UgPSBhd2FpdCBnZW5lcmljVG9rZW5FbmRwb2ludFJlcXVlc3RDYWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBwcm9jZXNzR2VuZXJpY1Rva2VuRW5kcG9pbnRSZXNwb25zZUNhbGwoaHR0cFJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9LCB0aGlzLmRwb3BPcHRpb25zPy5yZXRyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgbmV3IEFjY2Vzc1Rva2VuRm9yQ29ubmVjdGlvbkVycm9yKEFjY2Vzc1Rva2VuRm9yQ29ubmVjdGlvbkVycm9yQ29kZS5GQUlMRURfVE9fRVhDSEFOR0UsIFwiVGhlcmUgd2FzIGFuIGVycm9yIHRyeWluZyB0byBleGNoYW5nZSB0aGUgcmVmcmVzaCB0b2tlbiBmb3IgYSBjb25uZWN0aW9uIGFjY2VzcyB0b2tlbi5cIiwgbmV3IE9BdXRoMkVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IGVyci5lcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5lcnJvcl9kZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRva2VuRW5kcG9pbnRSZXNwb25zZS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXNBdDogTWF0aC5mbG9vcihEYXRlLm5vdygpIC8gMTAwMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgTnVtYmVyKHRva2VuRW5kcG9pbnRSZXNwb25zZS5leHBpcmVzX2luKSxcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6IHRva2VuRW5kcG9pbnRSZXNwb25zZS5zY29wZSxcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbjogb3B0aW9ucy5jb25uZWN0aW9uXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW251bGwsIGNvbm5lY3Rpb25Ub2tlblNldF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbHRlcnMgYW5kIHByb2Nlc3NlcyBJRCB0b2tlbiBjbGFpbXMgZm9yIGEgc2Vzc2lvbi5cbiAgICAgKlxuICAgICAqIElmIGEgYGJlZm9yZVNlc3Npb25TYXZlZGAgY2FsbGJhY2sgaXMgY29uZmlndXJlZCwgaXQgd2lsbCBiZSBpbnZva2VkIHRvIGFsbG93XG4gICAgICogY3VzdG9tIHByb2Nlc3Npbmcgb2YgdGhlIHNlc3Npb24gYW5kIElEIHRva2VuLiBPdGhlcndpc2UsIGRlZmF1bHQgZmlsdGVyaW5nXG4gICAgICogd2lsbCBiZSBhcHBsaWVkIHRvIHJlbW92ZSBzdGFuZGFyZCBJRCB0b2tlbiBjbGFpbXMgZnJvbSB0aGUgdXNlciBvYmplY3QuXG4gICAgICovXG4gICAgYXN5bmMgZmluYWxpemVTZXNzaW9uKHNlc3Npb24sIGlkVG9rZW4pIHtcbiAgICAgICAgaWYgKHRoaXMuYmVmb3JlU2Vzc2lvblNhdmVkKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkU2Vzc2lvbiA9IGF3YWl0IHRoaXMuYmVmb3JlU2Vzc2lvblNhdmVkKHNlc3Npb24sIGlkVG9rZW4gPz8gbnVsbCk7XG4gICAgICAgICAgICBzZXNzaW9uID0ge1xuICAgICAgICAgICAgICAgIC4uLnVwZGF0ZWRTZXNzaW9uLFxuICAgICAgICAgICAgICAgIGludGVybmFsOiBzZXNzaW9uLmludGVybmFsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2Vzc2lvbi51c2VyID0gZmlsdGVyRGVmYXVsdElkVG9rZW5DbGFpbXMoc2Vzc2lvbi51c2VyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5pdGlhdGVzIHRoZSBjb25uZWN0IGFjY291bnQgZmxvdyBmb3IgbGlua2luZyBhIHRoaXJkLXBhcnR5IGFjY291bnQgdG8gdGhlIHVzZXIncyBwcm9maWxlLlxuICAgICAqIFRoZSB1c2VyIHdpbGwgYmUgcmVkaXJlY3RlZCB0byBhdXRob3JpemUgdGhlIGNvbm5lY3Rpb24uXG4gICAgICovXG4gICAgYXN5bmMgY29ubmVjdEFjY291bnQob3B0aW9ucykge1xuICAgICAgICBjb25zdCByZWRpcmVjdFVyaSA9IGNyZWF0ZVJvdXRlVXJsKHRoaXMucm91dGVzLmNhbGxiYWNrLCB0aGlzLmFwcEJhc2VVcmwpO1xuICAgICAgICBsZXQgcmV0dXJuVG8gPSB0aGlzLnNpZ25JblJldHVyblRvUGF0aDtcbiAgICAgICAgLy8gVmFsaWRhdGUgcmV0dXJuVG8gcGFyYW1ldGVyXG4gICAgICAgIGlmIChvcHRpb25zLnJldHVyblRvKSB7XG4gICAgICAgICAgICBjb25zdCBzYWZlQmFzZVVybCA9IG5ldyBVUkwodGhpcy5hdXRob3JpemF0aW9uUGFyYW1ldGVycy5yZWRpcmVjdF91cmkgfHxcbiAgICAgICAgICAgICAgICB0aGlzLmFwcEJhc2VVcmwpO1xuICAgICAgICAgICAgY29uc3Qgc2FuaXRpemVkUmV0dXJuVG8gPSB0b1NhZmVSZWRpcmVjdChvcHRpb25zLnJldHVyblRvLCBzYWZlQmFzZVVybCk7XG4gICAgICAgICAgICBpZiAoc2FuaXRpemVkUmV0dXJuVG8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm5UbyA9XG4gICAgICAgICAgICAgICAgICAgIHNhbml0aXplZFJldHVyblRvLnBhdGhuYW1lICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbml0aXplZFJldHVyblRvLnNlYXJjaCArXG4gICAgICAgICAgICAgICAgICAgICAgICBzYW5pdGl6ZWRSZXR1cm5Uby5oYXNoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEdlbmVyYXRlIFBLQ0UgY2hhbGxlbmdlc1xuICAgICAgICBjb25zdCBjb2RlQ2hhbGxlbmdlTWV0aG9kID0gXCJTMjU2XCI7XG4gICAgICAgIGNvbnN0IGNvZGVWZXJpZmllciA9IG9hdXRoLmdlbmVyYXRlUmFuZG9tQ29kZVZlcmlmaWVyKCk7XG4gICAgICAgIGNvbnN0IGNvZGVDaGFsbGVuZ2UgPSBhd2FpdCBvYXV0aC5jYWxjdWxhdGVQS0NFQ29kZUNoYWxsZW5nZShjb2RlVmVyaWZpZXIpO1xuICAgICAgICBjb25zdCBzdGF0ZSA9IG9hdXRoLmdlbmVyYXRlUmFuZG9tU3RhdGUoKTtcbiAgICAgICAgY29uc3QgW2Vycm9yLCBjb25uZWN0QWNjb3VudFJlc3BvbnNlXSA9IGF3YWl0IHRoaXMuY3JlYXRlQ29ubmVjdEFjY291bnRUaWNrZXQoe1xuICAgICAgICAgICAgdG9rZW5TZXQ6IG9wdGlvbnMudG9rZW5TZXQsXG4gICAgICAgICAgICBjb25uZWN0aW9uOiBvcHRpb25zLmNvbm5lY3Rpb24sXG4gICAgICAgICAgICByZWRpcmVjdFVyaTogcmVkaXJlY3RVcmkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHN0YXRlLFxuICAgICAgICAgICAgY29kZUNoYWxsZW5nZSxcbiAgICAgICAgICAgIGNvZGVDaGFsbGVuZ2VNZXRob2QsXG4gICAgICAgICAgICBhdXRob3JpemF0aW9uUGFyYW1zOiBvcHRpb25zLmF1dGhvcml6YXRpb25QYXJhbXNcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIFtlcnJvciwgbnVsbF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25TdGF0ZSA9IHtcbiAgICAgICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogUkVTUE9OU0VfVFlQRVMuQ09OTkVDVF9DT0RFLFxuICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICByZXR1cm5UbyxcbiAgICAgICAgICAgIGF1dGhTZXNzaW9uOiBjb25uZWN0QWNjb3VudFJlc3BvbnNlLmF1dGhTZXNzaW9uXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlcyA9IE5leHRSZXNwb25zZS5yZWRpcmVjdChgJHtjb25uZWN0QWNjb3VudFJlc3BvbnNlLmNvbm5lY3RVcml9P3RpY2tldD0ke2VuY29kZVVSSUNvbXBvbmVudChjb25uZWN0QWNjb3VudFJlc3BvbnNlLmNvbm5lY3RQYXJhbXMudGlja2V0KX1gKTtcbiAgICAgICAgYXdhaXQgdGhpcy50cmFuc2FjdGlvblN0b3JlLnNhdmUocmVzLmNvb2tpZXMsIHRyYW5zYWN0aW9uU3RhdGUpO1xuICAgICAgICByZXR1cm4gW251bGwsIHJlc107XG4gICAgfVxuICAgIGFzeW5jIGNyZWF0ZUNvbm5lY3RBY2NvdW50VGlja2V0KG9wdGlvbnMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RBY2NvdW50VXJsID0gbmV3IFVSTChcIi9tZS92MS9jb25uZWN0ZWQtYWNjb3VudHMvY29ubmVjdFwiLCB0aGlzLmlzc3Vlcik7XG4gICAgICAgICAgICBjb25zdCBmZXRjaGVyID0gYXdhaXQgdGhpcy5mZXRjaGVyRmFjdG9yeSh7XG4gICAgICAgICAgICAgICAgdXNlRFBvUDogdGhpcy51c2VEUG9QLFxuICAgICAgICAgICAgICAgIGdldEFjY2Vzc1Rva2VuOiBhc3luYyAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogb3B0aW9ucy50b2tlblNldC5hY2Nlc3NUb2tlbixcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0F0OiBvcHRpb25zLnRva2VuU2V0LmV4cGlyZXNBdCB8fCAwLFxuICAgICAgICAgICAgICAgICAgICBzY29wZTogb3B0aW9ucy50b2tlblNldC5zY29wZSxcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5fdHlwZTogb3B0aW9ucy50b2tlblNldC50b2tlbl90eXBlXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgZmV0Y2g6IHRoaXMuZmV0Y2hcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgaHR0cE9wdGlvbnMgPSB0aGlzLmh0dHBPcHRpb25zKCk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoaHR0cE9wdGlvbnMuaGVhZGVycyk7XG4gICAgICAgICAgICBoZWFkZXJzLnNldChcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgICAgICAgICBjb25uZWN0aW9uOiBvcHRpb25zLmNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgcmVkaXJlY3RfdXJpOiBvcHRpb25zLnJlZGlyZWN0VXJpLFxuICAgICAgICAgICAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgICAgICAgICAgIGNvZGVfY2hhbGxlbmdlOiBvcHRpb25zLmNvZGVDaGFsbGVuZ2UsXG4gICAgICAgICAgICAgICAgY29kZV9jaGFsbGVuZ2VfbWV0aG9kOiBvcHRpb25zLmNvZGVDaGFsbGVuZ2VNZXRob2QsXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbl9wYXJhbXM6IG9wdGlvbnMuYXV0aG9yaXphdGlvblBhcmFtc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoZXIuZmV0Y2hXaXRoQXV0aChjb25uZWN0QWNjb3VudFVybC50b1N0cmluZygpLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlcnJvckJvZHkgPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IENvbm5lY3RBY2NvdW50RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IENvbm5lY3RBY2NvdW50RXJyb3JDb2Rlcy5GQUlMRURfVE9fSU5JVElBVEUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYFRoZSByZXF1ZXN0IHRvIGluaXRpYXRlIHRoZSBjb25uZWN0IGFjY291bnQgZmxvdyBmYWlsZWQgd2l0aCBzdGF0dXMgJHtyZXMuc3RhdHVzfS5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdXNlOiBuZXcgTXlBY2NvdW50QXBpRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBlcnJvckJvZHkudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGVycm9yQm9keS50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiBlcnJvckJvZHkuZGV0YWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlcy5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25FcnJvcnM6IGVycm9yQm9keS52YWxpZGF0aW9uX2Vycm9yc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBDb25uZWN0QWNjb3VudEVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBDb25uZWN0QWNjb3VudEVycm9yQ29kZXMuRkFJTEVEX1RPX0lOSVRJQVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBUaGUgcmVxdWVzdCB0byBpbml0aWF0ZSB0aGUgY29ubmVjdCBhY2NvdW50IGZsb3cgZmFpbGVkIHdpdGggc3RhdHVzICR7cmVzLnN0YXR1c30uYFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBudWxsXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBjb25uZWN0X3VyaSwgY29ubmVjdF9wYXJhbXMsIGF1dGhfc2Vzc2lvbiwgZXhwaXJlc19pbiB9ID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3RVcmk6IGNvbm5lY3RfdXJpLFxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0UGFyYW1zOiBjb25uZWN0X3BhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgYXV0aFNlc3Npb246IGF1dGhfc2Vzc2lvbixcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0luOiBleHBpcmVzX2luXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2UgPSBcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQgd2hpbGUgdHJ5aW5nIHRvIGluaXRpYXRlIHRoZSBjb25uZWN0IGFjY291bnQgZmxvdy5cIjtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgRFBvUEVycm9yKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGUubWVzc2FnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgbmV3IENvbm5lY3RBY2NvdW50RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBDb25uZWN0QWNjb3VudEVycm9yQ29kZXMuRkFJTEVEX1RPX0lOSVRJQVRFLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBjb21wbGV0ZUNvbm5lY3RBY2NvdW50KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29tcGxldGVDb25uZWN0QWNjb3VudFVybCA9IG5ldyBVUkwoXCIvbWUvdjEvY29ubmVjdGVkLWFjY291bnRzL2NvbXBsZXRlXCIsIHRoaXMuaXNzdWVyKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGh0dHBPcHRpb25zID0gdGhpcy5odHRwT3B0aW9ucygpO1xuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKGh0dHBPcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgaGVhZGVycy5zZXQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICAgICAgY29uc3QgZmV0Y2hlciA9IGF3YWl0IHRoaXMuZmV0Y2hlckZhY3Rvcnkoe1xuICAgICAgICAgICAgICAgIHVzZURQb1A6IHRoaXMudXNlRFBvUCxcbiAgICAgICAgICAgICAgICBnZXRBY2Nlc3NUb2tlbjogYXN5bmMgKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9wdGlvbnMudG9rZW5TZXQuYWNjZXNzVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGV4cGlyZXNBdDogb3B0aW9ucy50b2tlblNldC5leHBpcmVzQXQgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgc2NvcGU6IG9wdGlvbnMudG9rZW5TZXQuc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgIHRva2VuX3R5cGU6IG9wdGlvbnMudG9rZW5TZXQudG9rZW5fdHlwZVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGZldGNoOiB0aGlzLmZldGNoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICAgICAgICAgIGF1dGhfc2Vzc2lvbjogb3B0aW9ucy5hdXRoU2Vzc2lvbixcbiAgICAgICAgICAgICAgICBjb25uZWN0X2NvZGU6IG9wdGlvbnMuY29ubmVjdENvZGUsXG4gICAgICAgICAgICAgICAgcmVkaXJlY3RfdXJpOiBvcHRpb25zLnJlZGlyZWN0VXJpLFxuICAgICAgICAgICAgICAgIGNvZGVfdmVyaWZpZXI6IG9wdGlvbnMuY29kZVZlcmlmaWVyXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2hlci5mZXRjaFdpdGhBdXRoKGNvbXBsZXRlQ29ubmVjdEFjY291bnRVcmwsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXJlcy5vaykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yQm9keSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ29ubmVjdEFjY291bnRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogQ29ubmVjdEFjY291bnRFcnJvckNvZGVzLkZBSUxFRF9UT19DT01QTEVURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVGhlIHJlcXVlc3QgdG8gY29tcGxldGUgdGhlIGNvbm5lY3QgYWNjb3VudCBmbG93IGZhaWxlZCB3aXRoIHN0YXR1cyAke3Jlcy5zdGF0dXN9LmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F1c2U6IG5ldyBNeUFjY291bnRBcGlFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGVycm9yQm9keS50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogZXJyb3JCb2R5LnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IGVycm9yQm9keS5kZXRhaWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbkVycm9yczogZXJyb3JCb2R5LnZhbGlkYXRpb25fZXJyb3JzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IENvbm5lY3RBY2NvdW50RXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IENvbm5lY3RBY2NvdW50RXJyb3JDb2Rlcy5GQUlMRURfVE9fQ09NUExFVEUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYFRoZSByZXF1ZXN0IHRvIGNvbXBsZXRlIHRoZSBjb25uZWN0IGFjY291bnQgZmxvdyBmYWlsZWQgd2l0aCBzdGF0dXMgJHtyZXMuc3RhdHVzfS5gXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGlkLCBjb25uZWN0aW9uLCBhY2Nlc3NfdHlwZSwgc2NvcGVzLCBjcmVhdGVkX2F0LCBleHBpcmVzX2F0IH0gPSBhd2FpdCByZXMuanNvbigpO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGFjY2Vzc1R5cGU6IGFjY2Vzc190eXBlLFxuICAgICAgICAgICAgICAgICAgICBzY29wZXMsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogY3JlYXRlZF9hdCxcbiAgICAgICAgICAgICAgICAgICAgZXhwaXJlc0F0OiBleHBpcmVzX2F0XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBuZXcgQ29ubmVjdEFjY291bnRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IENvbm5lY3RBY2NvdW50RXJyb3JDb2Rlcy5GQUlMRURfVE9fQ09NUExFVEUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCB3aGlsZSB0cnlpbmcgdG8gY29tcGxldGUgdGhlIGNvbm5lY3QgYWNjb3VudCBmbG93LlwiXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgbnVsbFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXRPcGVuSWRDbGllbnRDb25maWcoKSB7XG4gICAgICAgIGNvbnN0IFtkaXNjb3ZlcnlFcnJvciwgYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhXSA9IGF3YWl0IHRoaXMuZGlzY292ZXJBdXRob3JpemF0aW9uU2VydmVyTWV0YWRhdGEoKTtcbiAgICAgICAgaWYgKGRpc2NvdmVyeUVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gW2Rpc2NvdmVyeUVycm9yLCBudWxsXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcGVuaWRDbGllbnRDb25maWcgPSBuZXcgY2xpZW50LkNvbmZpZ3VyYXRpb24oYXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhLCB0aGlzLmNsaWVudE1ldGFkYXRhLmNsaWVudF9pZCwge30sIGF3YWl0IHRoaXMuZ2V0Q2xpZW50QXV0aCgpKTtcbiAgICAgICAgY29uc3QgaHR0cE9wdHMgPSB0aGlzLmh0dHBPcHRpb25zKCk7XG4gICAgICAgIGNvbnN0IHRlbGVtZXRyeUhlYWRlcnMgPSBuZXcgSGVhZGVycyhodHRwT3B0cy5oZWFkZXJzKTtcbiAgICAgICAgb3BlbmlkQ2xpZW50Q29uZmlnW2NsaWVudC5jdXN0b21GZXRjaF0gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKGFyZ3NbMV0uaGVhZGVycyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaChhcmdzWzBdLCB7XG4gICAgICAgICAgICAgICAgLi4uYXJnc1sxXSxcbiAgICAgICAgICAgICAgICBib2R5OiBhcmdzWzFdLmJvZHksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoWy4uLnRlbGVtZXRyeUhlYWRlcnMsIC4uLmhlYWRlcnNdKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIG9wZW5pZENsaWVudENvbmZpZy50aW1lb3V0ID0gdGhpcy5odHRwVGltZW91dDtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dJbnNlY3VyZVJlcXVlc3RzKSB7XG4gICAgICAgICAgICBjbGllbnQuYWxsb3dJbnNlY3VyZVJlcXVlc3RzKG9wZW5pZENsaWVudENvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtudWxsLCBvcGVuaWRDbGllbnRDb25maWddO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IEZldGNoZXIgaW5zdGFuY2Ugd2l0aCBEUG9QIHN1cHBvcnQgYW5kIGF1dGhlbnRpY2F0aW9uIGNhcGFiaWxpdGllcy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGNyZWF0ZXMgZmV0Y2hlci1zY29wZWQgRFBvUCBoYW5kbGVzIHZpYSBgb2F1dGguRFBvUCh0aGlzLmNsaWVudE1ldGFkYXRhLCB0aGlzLmRwb3BLZXlQYWlyISlgLlxuICAgICAqIEVhY2ggZmV0Y2hlciBpbnN0YW5jZSBtYWludGFpbnMgaXRzIG93biBEUG9QIG5vbmNlIHN0YXRlIGZvciBpc29sYXRpb24gYW5kIHNlY3VyaXR5LlxuICAgICAqIEl0IGlzIHJlY29tbWVuZGVkIHRvIGNyZWF0ZSBmZXRjaGVycyBhdCBtb2R1bGUgbGV2ZWwgYW5kIHJldXNlIHRoZW0gYWNyb3NzIHJlcXVlc3RzXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZSBSZWNvbW1lbmRlZCBmZXRjaGVyIHJldXNlIHBhdHRlcm5cbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogY29uc3QgbWFuYWdlbWVudEFwaSA9IGF3YWl0IGF1dGgwLmZldGNoZXJGYWN0b3J5KHtcbiAgICAgKiAgIGJhc2VVcmw6IGBodHRwczovLyR7cHJvY2Vzcy5lbnYuQVVUSDBfRE9NQUlOfS9hcGkvdjIvYCxcbiAgICAgKiAgIHNlc3Npb246IGF3YWl0IGdldFNlc3Npb24ocmVxLCByZXMpXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiAvLyBVc2UgdGhlIHNhbWUgZmV0Y2hlciBmb3IgbXVsdGlwbGUgcmVxdWVzdHNcbiAgICAgKiBjb25zdCB1c2VycyA9IGF3YWl0IG1hbmFnZW1lbnRBcGkuZ2V0KCd1c2VycycpO1xuICAgICAqIGNvbnN0IHJvbGVzID0gYXdhaXQgbWFuYWdlbWVudEFwaS5nZXQoJ3JvbGVzJyk7XG4gICAgICogYGBgXG4gICAgICpcbiAgICAgKiAqKkRQb1AgTm9uY2UgTWFuYWdlbWVudDoqKlxuICAgICAqIC0gRWFjaCBmZXRjaGVyIGxlYXJucyBhbmQgY2FjaGVzIG5vbmNlcyBmcm9tIHRoZSBhdXRob3JpemF0aW9uIHNlcnZlclxuICAgICAqIC0gRmFpbGVkIG5vbmNlIHZhbGlkYXRpb24gdHJpZ2dlcnMgYXV0b21hdGljIHJldHJ5IHdpdGggdXBkYXRlZCBub25jZVxuICAgICAqIC0gTm9uY2Ugc3RhdGUgaXMgaXNvbGF0ZWQgYmV0d2VlbiBmZXRjaGVyIGluc3RhbmNlcyBmb3Igc2VjdXJpdHlcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIGZldGNoZXJcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byBhIGNvbmZpZ3VyZWQgRmV0Y2hlciBpbnN0YW5jZVxuICAgICAqIEB0aHJvd3Mge0RQb1BFcnJvcn0gV2hlbiBEUG9QIGlzIGVuYWJsZWQgYnV0IG5vIGtleXBhaXIgaXMgY29uZmlndXJlZFxuICAgICAqL1xuICAgIGFzeW5jIGZldGNoZXJGYWN0b3J5KG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMudXNlRFBvUCAmJiAhdGhpcy5kcG9wS2V5UGFpcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IERQb1BFcnJvcihEUG9QRXJyb3JDb2RlLkRQT1BfQ09ORklHVVJBVElPTl9FUlJPUiwgXCJEUG9QIGlzIGVuYWJsZWQgYnV0IG5vIGtleXBhaXIgaXMgY29uZmlndXJlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW5zdXJlIGF1dGhvcml6YXRpb24gc2VydmVyIG1ldGFkYXRhIGlzIGF2YWlsYWJsZSBmb3Igb2F1dGg0d2ViYXBpXG4gICAgICAgIGNvbnN0IFtkaXNjb3ZlcnlFcnJvciwgX2F1dGhvcml6YXRpb25TZXJ2ZXJNZXRhZGF0YV0gPSBhd2FpdCB0aGlzLmRpc2NvdmVyQXV0aG9yaXphdGlvblNlcnZlck1ldGFkYXRhKCk7XG4gICAgICAgIGlmIChkaXNjb3ZlcnlFcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgZGlzY292ZXJ5RXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmV0Y2hlckNvbmZpZyA9IHtcbiAgICAgICAgICAgIC8vIEZldGNoZXItc2NvcGVkIERQb1AgaGFuZGxlIGFuZCBub25jZSBtYW5hZ2VtZW50XG4gICAgICAgICAgICBkcG9wSGFuZGxlOiB0aGlzLnVzZURQb1AgJiYgKG9wdGlvbnMudXNlRFBvUCA/PyB0cnVlKVxuICAgICAgICAgICAgICAgID8gb2F1dGguRFBvUCh0aGlzLmNsaWVudE1ldGFkYXRhLCB0aGlzLmRwb3BLZXlQYWlyKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaHR0cE9wdGlvbnM6IHRoaXMuaHR0cE9wdGlvbnMsXG4gICAgICAgICAgICBhbGxvd0luc2VjdXJlUmVxdWVzdHM6IHRoaXMuYWxsb3dJbnNlY3VyZVJlcXVlc3RzLFxuICAgICAgICAgICAgcmV0cnlDb25maWc6IHRoaXMuZHBvcE9wdGlvbnM/LnJldHJ5LFxuICAgICAgICAgICAgZmV0Y2g6IG9wdGlvbnMuZmV0Y2gsXG4gICAgICAgICAgICBnZXRBY2Nlc3NUb2tlbjogb3B0aW9ucy5nZXRBY2Nlc3NUb2tlbixcbiAgICAgICAgICAgIGJhc2VVcmw6IG9wdGlvbnMuYmFzZVVybFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmZXRjaGVySG9va3MgPSB7XG4gICAgICAgICAgICBnZXRBY2Nlc3NUb2tlbjogb3B0aW9ucy5nZXRBY2Nlc3NUb2tlbixcbiAgICAgICAgICAgIGlzRHBvcEVuYWJsZWQ6ICgpID0+IG9wdGlvbnMudXNlRFBvUCA/PyB0aGlzLnVzZURQb1AgPz8gZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBGZXRjaGVyKGZldGNoZXJDb25maWcsIGZldGNoZXJIb29rcyk7XG4gICAgfVxufVxuX0F1dGhDbGllbnRfaW5zdGFuY2VzID0gbmV3IFdlYWtTZXQoKSwgX0F1dGhDbGllbnRfZ2V0VG9rZW5TZXRGcm9tU2Vzc2lvbiA9IGZ1bmN0aW9uIF9BdXRoQ2xpZW50X2dldFRva2VuU2V0RnJvbVNlc3Npb24oc2Vzc2lvbiwgb3B0aW9ucykge1xuICAgIGNvbnN0IHRva2VuU2V0ID0gc2Vzc2lvbi50b2tlblNldDtcbiAgICBjb25zdCBhdWRpZW5jZSA9IG9wdGlvbnMuYXVkaWVuY2U7XG4gICAgY29uc3Qgc2NvcGUgPSBvcHRpb25zLnNjb3BlO1xuICAgIC8vIFdoZW4gYXVkaWVuY2UgYW5kIHNjb3BlIGFyZSBwcm92aWRlZCwgd2UgbmVlZCB0byBjb21wYXJlIHRoZW0gd2l0aCB0aGUgb3JpZ2luYWwgb25lcyBwcm92aWRlZCBpbiBlaXRoZXIgdGhlIGBTZXNzaW9uRGF0YS50b2tlblNldGAgaXRzZWxmLCBvciB0aGUgQXV0aDBDbGllbnQgY29uc3RydWN0b3IuXG4gICAgLy8gV2hlbiB0aGV5IGFyZSBpZGVudGljYWwsIHdlIHNob3VsZCByZWFkIGZyb20gdGhlIHRvcC1sZXZlbCBgU2Vzc2lvbkRhdGEudG9rZW5TZXRgLlxuICAgIC8vIElmIG5vdCwgd2Ugc2hvdWxkIGxvb2sgZm9yIHRoZSBjb3JyZXNwb25kaW5nIGFjY2VzcyB0b2tlbiBpbiBgU2Vzc2lvbkRhdGEuYWNjZXNzVG9rZW5zYFxuICAgIGNvbnN0IGlzQXVkaWVuY2VUaGVHbG9iYWxBdWRpZW5jZSA9ICFhdWRpZW5jZSB8fFxuICAgICAgICBhdWRpZW5jZSA9PT0gKHRva2VuU2V0LmF1ZGllbmNlIHx8IHRoaXMuYXV0aG9yaXphdGlvblBhcmFtZXRlcnMuYXVkaWVuY2UpO1xuICAgIGNvbnN0IGlzU2NvcGVUaGVHbG9iYWxTY29wZSA9ICFzY29wZSB8fFxuICAgICAgICBjb21wYXJlU2NvcGVzKHRva2VuU2V0LnJlcXVlc3RlZFNjb3BlIHx8XG4gICAgICAgICAgICBnZXRTY29wZUZvckF1ZGllbmNlKHRoaXMuYXV0aG9yaXphdGlvblBhcmFtZXRlcnMuc2NvcGUsIGF1ZGllbmNlKSwgc2NvcGUpO1xuICAgIGlmIChpc0F1ZGllbmNlVGhlR2xvYmFsQXVkaWVuY2UgJiYgaXNTY29wZVRoZUdsb2JhbFNjb3BlKSB7XG4gICAgICAgIHJldHVybiB0b2tlblNldDtcbiAgICB9XG4gICAgbGV0IGFjY2Vzc1Rva2VuU2V0O1xuICAgIC8vIElmIHRoZXJlIGlzIGFuIGF1ZGllbmNlLCB3ZSBjYW4gc2VhcmNoIGZvciB0aGUgY29ycmVjdCBhY2Nlc3MgdG9rZW4gaW4gdGhlIGFycmF5XG4gICAgLy8gSWYgdGhlcmUgaXMgbm8gYXVkaWVuY2UsIHdlIGNhbm5vdCBmaW5kIHRoZSBjb3JyZWN0IGFjY2VzcyB0b2tlbiBpbiB0aGUgYXJyYXlcbiAgICBpZiAoYXVkaWVuY2UpIHtcbiAgICAgICAgYWNjZXNzVG9rZW5TZXQgPSBmaW5kQWNjZXNzVG9rZW5TZXQoc2Vzc2lvbiwgeyBzY29wZSwgYXVkaWVuY2UgfSk7XG4gICAgfVxuICAgIC8vIENvbnZlcnQgdGhlIEFjY2VzcyBUb2tlbiBTZXQgdG8gYSBUb2tlbiBTZXQsIHdoaWNoIG1vc3RseSBlbnN1cmVzIHRoZSBJZCBUb2tlbiBhbmQgUmVmcmVzaFRva2VuIGFyZSBhbHNvIGF2YWlsYWJsZSxcbiAgICAvLyBCdXQgdGhlIGFjY2VzcyB0b2tlbiwgZXhwaXJlc0F0LCBhdWRpZW5jZSBhbmQgc2NvcGUgYXJlIHRha2VuIGZyb20gdGhlIEFjY2VzcyBUb2tlbiBTZXQuXG4gICAgLy8gV2hlbiBubyBhdWRpZW5jZSB3YXMgZm91bmQsIHdlIHdpbGwgcmV0dXJuIGFuIGVtcHR5IFRva2VuIFNldCB3aXRoIG9ubHkgdGhlIElkIFRva2VuIGFuZCBSZWZyZXNoIFRva2VuXG4gICAgcmV0dXJuIHRva2VuU2V0RnJvbUFjY2Vzc1Rva2VuU2V0KGFjY2Vzc1Rva2VuU2V0LCB0b2tlblNldCk7XG59O1xuY29uc3QgZW5jb2RlQmFzZTY0ID0gKGlucHV0KSA9PiB7XG4gICAgY29uc3QgdW5lbmNvZGVkID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGlucHV0KTtcbiAgICBjb25zdCBDSFVOS19TSVpFID0gMHg4MDAwO1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdW5lbmNvZGVkLmxlbmd0aDsgaSArPSBDSFVOS19TSVpFKSB7XG4gICAgICAgIGFyci5wdXNoKFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEFyZ3VtZW50IG9mIHR5cGUgJ1VpbnQ4QXJyYXknIGlzIG5vdCBhc3NpZ25hYmxlIHRvIHBhcmFtZXRlciBvZiB0eXBlICdudW1iZXJbXScuXG4gICAgICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgdW5lbmNvZGVkLnN1YmFycmF5KGksIGkgKyBDSFVOS19TSVpFKSkpO1xuICAgIH1cbiAgICByZXR1cm4gYnRvYShhcnIuam9pbihcIlwiKSk7XG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/auth-client.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/client.js":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/client.js ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Auth0Client: () => (/* binding */ Auth0Client)\n/* harmony export */ });\n/* harmony import */ var next_headers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers.js */ \"(rsc)/../../node_modules/.pnpm/next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/api/headers.js\");\n/* harmony import */ var next_server_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server.js */ \"(rsc)/../../node_modules/.pnpm/next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/errors/index.js\");\n/* harmony import */ var _utils_constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/constants.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/constants.js\");\n/* harmony import */ var _utils_dpopUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/dpopUtils.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/dpopUtils.js\");\n/* harmony import */ var _utils_request_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/request.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/request.js\");\n/* harmony import */ var _utils_session_changes_helpers_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/session-changes-helpers.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/session-changes-helpers.js\");\n/* harmony import */ var _auth_client_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./auth-client.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/auth-client.js\");\n/* harmony import */ var _cookies_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./cookies.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/cookies.js\");\n/* harmony import */ var _helpers_with_api_auth_required_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./helpers/with-api-auth-required.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/helpers/with-api-auth-required.js\");\n/* harmony import */ var _helpers_with_page_auth_required_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./helpers/with-page-auth-required.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/helpers/with-page-auth-required.js\");\n/* harmony import */ var _session_stateful_session_store_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./session/stateful-session-store.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/stateful-session-store.js\");\n/* harmony import */ var _session_stateless_session_store_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./session/stateless-session-store.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/stateless-session-store.js\");\n/* harmony import */ var _token_request_cache_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./token-request-cache.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/token-request-cache.js\");\n/* harmony import */ var _transaction_store_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./transaction-store.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/transaction-store.js\");\nvar __classPrivateFieldSet = (undefined && undefined.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Auth0Client_options, _Auth0Client_tokenRequestCache;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass Auth0Client {\n    constructor(options = {}) {\n        _Auth0Client_options.set(this, void 0);\n        // Cache for in-flight token requests to prevent race conditions\n        _Auth0Client_tokenRequestCache.set(this, new _token_request_cache_js__WEBPACK_IMPORTED_MODULE_13__.TokenRequestCache());\n        __classPrivateFieldSet(this, _Auth0Client_options, options, \"f\");\n        // Extract and validate required options\n        const { domain, clientId, clientSecret, appBaseUrl, secret, clientAssertionSigningKey } = this.validateAndExtractRequiredOptions(options);\n        this.domain = domain;\n        const clientAssertionSigningAlg = options.clientAssertionSigningAlg ||\n            process.env.AUTH0_CLIENT_ASSERTION_SIGNING_ALG;\n        // Validate DPoP configuration and resolve from environment variables if needed\n        const { dpopKeyPair: resolvedDpopKeyPair, dpopOptions: resolvedDpopOptions } = (0,_utils_dpopUtils_js__WEBPACK_IMPORTED_MODULE_4__.validateDpopConfiguration)(options);\n        // Auto-detect base path for cookie configuration\n        const basePath = process.env.NEXT_PUBLIC_BASE_PATH;\n        const sessionCookieOptions = {\n            name: options.session?.cookie?.name ?? \"__session\",\n            secure: options.session?.cookie?.secure ??\n                process.env.AUTH0_COOKIE_SECURE === \"true\",\n            sameSite: options.session?.cookie?.sameSite ??\n                process.env.AUTH0_COOKIE_SAME_SITE ??\n                \"lax\",\n            path: options.session?.cookie?.path ??\n                process.env.AUTH0_COOKIE_PATH ??\n                basePath ??\n                \"/\",\n            transient: options.session?.cookie?.transient ??\n                process.env.AUTH0_COOKIE_TRANSIENT === \"true\",\n            domain: options.session?.cookie?.domain ?? process.env.AUTH0_COOKIE_DOMAIN\n        };\n        const transactionCookieOptions = {\n            prefix: options.transactionCookie?.prefix ?? \"__txn_\",\n            secure: options.transactionCookie?.secure ?? false,\n            sameSite: options.transactionCookie?.sameSite ?? \"lax\",\n            path: options.transactionCookie?.path ?? basePath ?? \"/\",\n            maxAge: options.transactionCookie?.maxAge ?? 3600\n        };\n        if (appBaseUrl) {\n            const { protocol } = new URL(appBaseUrl);\n            if (protocol === \"https:\") {\n                sessionCookieOptions.secure = true;\n                transactionCookieOptions.secure = true;\n            }\n        }\n        this.routes = {\n            login: process.env.NEXT_PUBLIC_LOGIN_ROUTE || \"/auth/login\",\n            logout: \"/auth/logout\",\n            callback: \"/auth/callback\",\n            backChannelLogout: \"/auth/backchannel-logout\",\n            profile: process.env.NEXT_PUBLIC_PROFILE_ROUTE || \"/auth/profile\",\n            accessToken: process.env.NEXT_PUBLIC_ACCESS_TOKEN_ROUTE || \"/auth/access-token\",\n            connectAccount: \"/auth/connect\",\n            ...options.routes\n        };\n        this.transactionStore = new _transaction_store_js__WEBPACK_IMPORTED_MODULE_14__.TransactionStore({\n            secret,\n            cookieOptions: transactionCookieOptions,\n            enableParallelTransactions: options.enableParallelTransactions ?? true\n        });\n        this.sessionStore = options.sessionStore\n            ? new _session_stateful_session_store_js__WEBPACK_IMPORTED_MODULE_11__.StatefulSessionStore({\n                ...options.session,\n                secret,\n                store: options.sessionStore,\n                cookieOptions: sessionCookieOptions\n            })\n            : new _session_stateless_session_store_js__WEBPACK_IMPORTED_MODULE_12__.StatelessSessionStore({\n                ...options.session,\n                secret,\n                cookieOptions: sessionCookieOptions\n            });\n        this.authClient = new _auth_client_js__WEBPACK_IMPORTED_MODULE_7__.AuthClient({\n            transactionStore: this.transactionStore,\n            sessionStore: this.sessionStore,\n            domain,\n            clientId,\n            clientSecret,\n            clientAssertionSigningKey,\n            clientAssertionSigningAlg,\n            authorizationParameters: options.authorizationParameters,\n            pushedAuthorizationRequests: options.pushedAuthorizationRequests,\n            appBaseUrl,\n            secret,\n            signInReturnToPath: options.signInReturnToPath,\n            logoutStrategy: options.logoutStrategy,\n            includeIdTokenHintInOIDCLogoutUrl: options.includeIdTokenHintInOIDCLogoutUrl,\n            beforeSessionSaved: options.beforeSessionSaved,\n            onCallback: options.onCallback,\n            routes: this.routes,\n            allowInsecureRequests: options.allowInsecureRequests,\n            httpTimeout: options.httpTimeout,\n            enableTelemetry: options.enableTelemetry,\n            enableAccessTokenEndpoint: options.enableAccessTokenEndpoint,\n            noContentProfileResponseWhenUnauthenticated: options.noContentProfileResponseWhenUnauthenticated,\n            enableConnectAccountEndpoint: options.enableConnectAccountEndpoint,\n            useDPoP: options.useDPoP || false,\n            dpopKeyPair: options.dpopKeyPair || resolvedDpopKeyPair,\n            dpopOptions: options.dpopOptions || resolvedDpopOptions\n        });\n    }\n    /**\n     * middleware mounts the SDK routes to run as a middleware function.\n     */\n    middleware(req) {\n        return this.authClient.handler.bind(this.authClient)(req);\n    }\n    /**\n     * getSession returns the session data for the current request.\n     */\n    async getSession(req) {\n        if (req) {\n            // middleware usage\n            if (req instanceof next_server_js__WEBPACK_IMPORTED_MODULE_1__.NextRequest) {\n                return this.sessionStore.get(req.cookies);\n            }\n            // pages router usage\n            return this.sessionStore.get(this.createRequestCookies(req));\n        }\n        // app router usage: Server Components, Server Actions, Route Handlers\n        return this.sessionStore.get(await (0,next_headers_js__WEBPACK_IMPORTED_MODULE_0__.cookies)());\n    }\n    /**\n     * getAccessToken returns the access token.\n     *\n     * Please note: If you are passing audience, ensure that the used audiences and scopes are\n     * part of the Application's Refresh Token Policies in Auth0 when configuring Multi-Resource Refresh Tokens (MRRT).\n     * {@link https://auth0.com/docs/secure/tokens/refresh-tokens/multi-resource-refresh-token|See Auth0 Documentation on Multi-resource Refresh Tokens}\n     *\n     * NOTE: Server Components cannot set cookies. Calling `getAccessToken()` in a Server Component will cause the access token to be refreshed, if it is expired, and the updated token set will not to be persisted.\n     * It is recommended to call `getAccessToken(req, res)` in the middleware if you need to retrieve the access token in a Server Component to ensure the updated token set is persisted.\n     */\n    async getAccessToken(arg1, arg2, arg3) {\n        const defaultOptions = {\n            refresh: false\n        };\n        let req = undefined;\n        let res = undefined;\n        let options = {};\n        // Determine which overload was called based on arguments\n        if (arg1 &&\n            (arg1 instanceof Request || typeof arg1.headers === \"object\")) {\n            // Case: getAccessToken(req, res, options?)\n            req = arg1;\n            res = arg2; // arg2 must be Response if arg1 is Request\n            // Merge provided options (arg3) with defaults\n            options = { ...defaultOptions, ...(arg3 ?? {}) };\n            if (!res) {\n                throw new TypeError(\"getAccessToken(req, res): The 'res' argument is missing. Both 'req' and 'res' must be provided together for Pages Router or middleware usage.\");\n            }\n        }\n        else {\n            // Case: getAccessToken(options?) or getAccessToken()\n            // arg1 (if present) must be options, arg2 and arg3 must be undefined.\n            if (arg2 !== undefined || arg3 !== undefined) {\n                throw new TypeError(\"getAccessToken: Invalid arguments. Valid signatures are getAccessToken(), getAccessToken(options), or getAccessToken(req, res, options).\");\n            }\n            // Merge provided options (arg1) with defaults\n            options = {\n                ...defaultOptions,\n                ...(arg1 ?? {})\n            };\n        }\n        // Execute the token request with caching to avoid duplicate in-flight requests\n        return __classPrivateFieldGet(this, _Auth0Client_tokenRequestCache, \"f\").execute(() => this.executeGetAccessToken(req, res, options), {\n            options,\n            authorizationParameters: __classPrivateFieldGet(this, _Auth0Client_options, \"f\").authorizationParameters\n        });\n    }\n    /**\n     * Core implementation of getAccessToken that performs the actual token retrieval.\n     * This is separated to enable request coalescing via the cache.\n     */\n    async executeGetAccessToken(req, res, options) {\n        const session = req\n            ? await this.getSession(req)\n            : await this.getSession();\n        if (!session) {\n            throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenError(_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenErrorCode.MISSING_SESSION, \"The user does not have an active session.\");\n        }\n        const [error, getTokenSetResponse] = await this.authClient.getTokenSet(session, options);\n        if (error) {\n            throw error;\n        }\n        const { tokenSet, idTokenClaims } = getTokenSetResponse;\n        // update the session with the new token set, if necessary\n        const sessionChanges = (0,_utils_session_changes_helpers_js__WEBPACK_IMPORTED_MODULE_6__.getSessionChangesAfterGetAccessToken)(session, tokenSet, {\n            scope: __classPrivateFieldGet(this, _Auth0Client_options, \"f\").authorizationParameters?.scope ?? _utils_constants_js__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_SCOPES,\n            audience: __classPrivateFieldGet(this, _Auth0Client_options, \"f\").authorizationParameters?.audience\n        });\n        if (sessionChanges) {\n            if (idTokenClaims) {\n                session.user = idTokenClaims;\n            }\n            // call beforeSessionSaved callback if present\n            // if not then filter id_token claims with default rules\n            const finalSession = await this.authClient.finalizeSession(session, tokenSet.idToken);\n            await this.saveToSession({\n                ...finalSession,\n                ...sessionChanges\n            }, req, res);\n        }\n        return {\n            token: tokenSet.accessToken,\n            scope: tokenSet.scope,\n            expiresAt: tokenSet.expiresAt,\n            token_type: tokenSet.token_type,\n            audience: tokenSet.audience\n        };\n    }\n    /**\n     * Retrieves an access token for a connection.\n     *\n     * This method attempts to obtain an access token for a specified connection.\n     * It first checks if a session exists, either from the provided request or from cookies.\n     * If no session is found, it throws a `AccessTokenForConnectionError` indicating\n     * that the user does not have an active session.\n     *\n     * @param {AccessTokenForConnectionOptions} options - Options for retrieving an access token for a connection.\n     * @param {PagesRouterRequest | NextRequest} [req] - An optional request object from which to extract session information.\n     * @param {PagesRouterResponse | NextResponse} [res] - An optional response object from which to extract session information.\n     *\n     * @throws {AccessTokenForConnectionError} If the user does not have an active session.\n     * @throws {Error} If there is an error during the token exchange process.\n     *\n     * @returns {Promise<{ token: string; expiresAt: number; scope?: string }} An object containing the access token and its expiration time.\n     */\n    async getAccessTokenForConnection(options, req, res) {\n        const session = req\n            ? await this.getSession(req)\n            : await this.getSession();\n        if (!session) {\n            throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenForConnectionError(_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenForConnectionErrorCode.MISSING_SESSION, \"The user does not have an active session.\");\n        }\n        // Find the connection token set in the session\n        const existingTokenSet = session.connectionTokenSets?.find((tokenSet) => tokenSet.connection === options.connection);\n        const [error, retrievedTokenSet] = await this.authClient.getConnectionTokenSet(session.tokenSet, existingTokenSet, options);\n        if (error !== null) {\n            throw error;\n        }\n        // If we didn't have a corresponding connection token set in the session\n        // or if the one we have in the session does not match the one we received\n        // We want to update the store incase we retrieved a token set.\n        if (retrievedTokenSet &&\n            (!existingTokenSet ||\n                retrievedTokenSet.accessToken !== existingTokenSet.accessToken ||\n                retrievedTokenSet.expiresAt !== existingTokenSet.expiresAt ||\n                retrievedTokenSet.scope !== existingTokenSet.scope)) {\n            let tokenSets;\n            // If we already had the connection token set in the session\n            // we need to update the item in the array\n            // If not, we need to add it.\n            if (existingTokenSet) {\n                tokenSets = session.connectionTokenSets?.map((tokenSet) => tokenSet.connection === options.connection\n                    ? retrievedTokenSet\n                    : tokenSet);\n            }\n            else {\n                tokenSets = [...(session.connectionTokenSets || []), retrievedTokenSet];\n            }\n            await this.saveToSession({\n                ...session,\n                connectionTokenSets: tokenSets\n            }, req, res);\n        }\n        return {\n            token: retrievedTokenSet.accessToken,\n            scope: retrievedTokenSet.scope,\n            expiresAt: retrievedTokenSet.expiresAt\n        };\n    }\n    /**\n     * updateSession updates the session of the currently authenticated user. If the user does not have a session, an error is thrown.\n     */\n    async updateSession(reqOrSession, res, sessionData) {\n        if (!res) {\n            // app router: Server Actions, Route Handlers\n            const existingSession = await this.getSession();\n            if (!existingSession) {\n                throw new Error(\"The user is not authenticated.\");\n            }\n            const updatedSession = reqOrSession;\n            if (!updatedSession) {\n                throw new Error(\"The session data is missing.\");\n            }\n            await this.sessionStore.set(await (0,next_headers_js__WEBPACK_IMPORTED_MODULE_0__.cookies)(), await (0,next_headers_js__WEBPACK_IMPORTED_MODULE_0__.cookies)(), {\n                ...updatedSession,\n                internal: {\n                    ...existingSession.internal\n                }\n            });\n        }\n        else {\n            const req = reqOrSession;\n            if (!sessionData) {\n                throw new Error(\"The session data is missing.\");\n            }\n            if (req instanceof next_server_js__WEBPACK_IMPORTED_MODULE_1__.NextRequest && res instanceof next_server_js__WEBPACK_IMPORTED_MODULE_1__.NextResponse) {\n                // middleware usage\n                const existingSession = await this.getSession(req);\n                if (!existingSession) {\n                    throw new Error(\"The user is not authenticated.\");\n                }\n                await this.sessionStore.set(req.cookies, res.cookies, {\n                    ...sessionData,\n                    internal: {\n                        ...existingSession.internal\n                    }\n                });\n            }\n            else {\n                // pages router usage\n                const existingSession = await this.getSession(req);\n                if (!existingSession) {\n                    throw new Error(\"The user is not authenticated.\");\n                }\n                const resHeaders = new Headers();\n                const resCookies = new _cookies_js__WEBPACK_IMPORTED_MODULE_8__.ResponseCookies(resHeaders);\n                const updatedSession = sessionData;\n                const reqCookies = this.createRequestCookies(req);\n                const pagesRouterRes = res;\n                await this.sessionStore.set(reqCookies, resCookies, {\n                    ...updatedSession,\n                    internal: {\n                        ...existingSession.internal\n                    }\n                });\n                for (const [key, value] of resHeaders.entries()) {\n                    pagesRouterRes.setHeader(key, value);\n                }\n            }\n        }\n    }\n    createRequestCookies(req) {\n        const headers = new Headers();\n        for (const key in req.headers) {\n            if (Array.isArray(req.headers[key])) {\n                for (const value of req.headers[key]) {\n                    headers.append(key, value);\n                }\n            }\n            else {\n                headers.append(key, req.headers[key] ?? \"\");\n            }\n        }\n        return new _cookies_js__WEBPACK_IMPORTED_MODULE_8__.RequestCookies(headers);\n    }\n    async startInteractiveLogin(options = {}) {\n        return this.authClient.startInteractiveLogin(options);\n    }\n    /**\n     * Authenticates using Client-Initiated Backchannel Authentication and returns the token set and optionally the ID token claims and authorization details.\n     *\n     * This method will initialize the backchannel authentication process with Auth0, and poll the token endpoint until the authentication is complete.\n     *\n     * Using Client-Initiated Backchannel Authentication requires the feature to be enabled in the Auth0 dashboard.\n     * @see https://auth0.com/docs/get-started/authentication-and-authorization-flow/client-initiated-backchannel-authentication-flow\n     */\n    async getTokenByBackchannelAuth(options) {\n        const [error, response] = await this.authClient.backchannelAuthentication(options);\n        if (error) {\n            throw error;\n        }\n        return response;\n    }\n    /**\n     * Initiates the Connect Account flow to connect a third-party account to the user's profile.\n     * If the user does not have an active session, a `ConnectAccountError` is thrown.\n     *\n     * This method first attempts to obtain an access token with the `create:me:connected_accounts` scope\n     * for the My Account API to create a connected account for the user.\n     *\n     * The user will then be redirected to authorize the connection with the third-party provider.\n     */\n    async connectAccount(options) {\n        const session = await this.getSession();\n        if (!session) {\n            throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountError({\n                code: _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.ConnectAccountErrorCodes.MISSING_SESSION,\n                message: \"The user does not have an active session.\"\n            });\n        }\n        const getMyAccountTokenOpts = {\n            audience: `${this.issuer}/me/`,\n            scope: \"create:me:connected_accounts\"\n        };\n        const accessToken = await this.getAccessToken(getMyAccountTokenOpts);\n        const [error, connectAccountResponse] = await this.authClient.connectAccount({\n            ...options,\n            tokenSet: {\n                accessToken: accessToken.token,\n                expiresAt: accessToken.expiresAt,\n                scope: getMyAccountTokenOpts.scope,\n                audience: accessToken.audience\n            }\n        });\n        if (error) {\n            throw error;\n        }\n        return connectAccountResponse;\n    }\n    withPageAuthRequired(fnOrOpts, opts) {\n        const config = {\n            loginUrl: this.routes.login\n        };\n        const appRouteHandler = (0,_helpers_with_page_auth_required_js__WEBPACK_IMPORTED_MODULE_10__.appRouteHandlerFactory)(this, config);\n        const pageRouteHandler = (0,_helpers_with_page_auth_required_js__WEBPACK_IMPORTED_MODULE_10__.pageRouteHandlerFactory)(this, config);\n        if (typeof fnOrOpts === \"function\") {\n            return appRouteHandler(fnOrOpts, opts);\n        }\n        return pageRouteHandler(fnOrOpts);\n    }\n    withApiAuthRequired(apiRoute) {\n        const pageRouteHandler = _helpers_with_api_auth_required_js__WEBPACK_IMPORTED_MODULE_9__.pageRouteHandlerFactory(this);\n        const appRouteHandler = _helpers_with_api_auth_required_js__WEBPACK_IMPORTED_MODULE_9__.appRouteHandlerFactory(this);\n        return (req, resOrParams) => {\n            if ((0,_utils_request_js__WEBPACK_IMPORTED_MODULE_5__.isRequest)(req)) {\n                return appRouteHandler(apiRoute)(req, resOrParams);\n            }\n            return pageRouteHandler(apiRoute)(req, resOrParams);\n        };\n    }\n    async saveToSession(data, req, res) {\n        if (req && res) {\n            if (req instanceof next_server_js__WEBPACK_IMPORTED_MODULE_1__.NextRequest && res instanceof next_server_js__WEBPACK_IMPORTED_MODULE_1__.NextResponse) {\n                // middleware usage\n                await this.sessionStore.set(req.cookies, res.cookies, data);\n            }\n            else {\n                // pages router usage\n                const resHeaders = new Headers();\n                const resCookies = new _cookies_js__WEBPACK_IMPORTED_MODULE_8__.ResponseCookies(resHeaders);\n                const pagesRouterRes = res;\n                await this.sessionStore.set(this.createRequestCookies(req), resCookies, data);\n                for (const [key, value] of resHeaders.entries()) {\n                    pagesRouterRes.setHeader(key, value);\n                }\n            }\n        }\n        else {\n            // app router usage: Server Components, Server Actions, Route Handlers\n            try {\n                await this.sessionStore.set(await (0,next_headers_js__WEBPACK_IMPORTED_MODULE_0__.cookies)(), await (0,next_headers_js__WEBPACK_IMPORTED_MODULE_0__.cookies)(), data);\n            }\n            catch (e) {\n                if (true) {\n                    console.warn(\"Failed to persist the updated token set. `getAccessToken()` was likely called from a Server Component which cannot set cookies.\");\n                }\n            }\n        }\n    }\n    /**\n     * Validates and extracts required configuration options.\n     * @param options The client options\n     * @returns The validated required options\n     * @throws ConfigurationError if any required option is missing\n     */\n    validateAndExtractRequiredOptions(options) {\n        // Base required options that are always needed\n        const requiredOptions = {\n            domain: options.domain ?? process.env.AUTH0_DOMAIN,\n            clientId: options.clientId ?? process.env.AUTH0_CLIENT_ID,\n            appBaseUrl: options.appBaseUrl ?? process.env.APP_BASE_URL,\n            secret: options.secret ?? process.env.AUTH0_SECRET\n        };\n        // Check client authentication options - either clientSecret OR clientAssertionSigningKey must be provided\n        const clientSecret = options.clientSecret ?? process.env.AUTH0_CLIENT_SECRET;\n        const clientAssertionSigningKey = options.clientAssertionSigningKey ??\n            process.env.AUTH0_CLIENT_ASSERTION_SIGNING_KEY;\n        const hasClientAuthentication = !!(clientSecret || clientAssertionSigningKey);\n        const missing = Object.entries(requiredOptions)\n            .filter(([, value]) => !value)\n            .map(([key]) => key);\n        // Add client authentication error if neither option is provided\n        if (!hasClientAuthentication) {\n            missing.push(\"clientAuthentication\");\n        }\n        if (missing.length) {\n            // Map of option keys to their exact environment variable names\n            const envVarNames = {\n                domain: \"AUTH0_DOMAIN\",\n                clientId: \"AUTH0_CLIENT_ID\",\n                appBaseUrl: \"APP_BASE_URL\",\n                secret: \"AUTH0_SECRET\"\n            };\n            // Standard intro message explaining the issue\n            let errorMessage = \"WARNING: Not all required options were provided when creating an instance of Auth0Client. Ensure to provide all missing options, either by passing it to the Auth0Client constructor, or by setting the corresponding environment variable.\\n\";\n            // Add specific details for each missing option\n            missing.forEach((key) => {\n                if (key === \"clientAuthentication\") {\n                    errorMessage += `Missing: clientAuthentication: Set either AUTH0_CLIENT_SECRET env var or AUTH0_CLIENT_ASSERTION_SIGNING_KEY env var, or pass clientSecret or clientAssertionSigningKey in options\\n`;\n                }\n                else if (envVarNames[key]) {\n                    errorMessage += `Missing: ${key}: Set ${envVarNames[key]} env var or pass ${key} in options\\n`;\n                }\n                else {\n                    errorMessage += `Missing: ${key}\\n`;\n                }\n            });\n            console.error(errorMessage.trim());\n        }\n        // Prepare the result object with all validated options\n        const result = {\n            ...requiredOptions,\n            clientSecret,\n            clientAssertionSigningKey\n        };\n        // Type-safe assignment after validation\n        return result;\n    }\n    /**\n     * Creates a configured Fetcher instance for making authenticated API requests.\n     *\n     * This method creates a specialized HTTP client that handles:\n     * - Automatic access token retrieval and injection\n     * - DPoP (Demonstrating Proof-of-Possession) proof generation when enabled\n     * - Token refresh and session management\n     * - Error handling and retry logic for DPoP nonce errors\n     * - Base URL resolution for relative requests\n     *\n     * The fetcher provides a high-level interface for making requests to protected resources\n     * without manually handling authentication details.\n     *\n     * @template TOutput - Response type that extends the standard Response interface\n     * @param req - Request object for session context (required for Pages Router, optional for App Router)\n     * @param options - Configuration options for the fetcher\n     * @param options.useDPoP - Enable DPoP for this fetcher instance (overrides global setting)\n     * @param options.baseUrl - Base URL for resolving relative requests\n     * @param options.getAccessToken - Custom access token factory function\n     * @param options.fetch - Custom fetch implementation\n     * @returns Promise that resolves to a configured Fetcher instance\n     * @throws AccessTokenError when no active session exists\n     *\n     * @example\n     * ```typescript\n     * import { auth0 } from \"@/lib/auth0\";\n     *\n     * const fetcher = await auth0.createFetcher(undefined, {\n     *   baseUrl: \"https://api.example.com\",\n     *   useDPoP: true\n     * });\n     *\n     * const response = await fetcher.fetchWithAuth(\"/users\");\n     * const users = await response.json();\n     * ```\n     *\n     * @see {@link Fetcher} for details on using the returned fetcher instance\n     * @see {@link FetcherMinimalConfig} for available configuration options\n     */\n    async createFetcher(req, options) {\n        const session = req\n            ? await this.getSession(req)\n            : await this.getSession();\n        if (!session) {\n            throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenError(_errors_index_js__WEBPACK_IMPORTED_MODULE_2__.AccessTokenErrorCode.MISSING_SESSION, \"The user does not have an active session.\");\n        }\n        const getAccessToken = async (getAccessTokenOptions) => {\n            const [error, getTokenSetResponse] = await this.authClient.getTokenSet(session, getAccessTokenOptions || {});\n            if (error) {\n                throw error;\n            }\n            return getTokenSetResponse.tokenSet;\n        };\n        const fetcher = await this.authClient.fetcherFactory({\n            ...options,\n            getAccessToken\n        });\n        return fetcher;\n    }\n    get issuer() {\n        return this.domain.startsWith(\"http://\") ||\n            this.domain.startsWith(\"https://\")\n            ? this.domain\n            : `https://${this.domain}`;\n    }\n}\n_Auth0Client_options = new WeakMap(), _Auth0Client_tokenRequestCache = new WeakMap();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9jbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDhCQUE4QixTQUFJLElBQUksU0FBSTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLFNBQUksSUFBSSxTQUFJO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDMEM7QUFDaUI7QUFDa0k7QUFDdEk7QUFDVztBQUNsQjtBQUMyQztBQUM3QztBQUNpQjtBQUNZO0FBQzRCO0FBQzVCO0FBQ0U7QUFDaEI7QUFDSDtBQUNuRDtBQUNQLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0EscURBQXFELHVFQUFpQjtBQUN0RTtBQUNBO0FBQ0EsZ0JBQWdCLGdGQUFnRjtBQUNoRztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxRUFBcUUsRUFBRSw4RUFBeUI7QUFDaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsV0FBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msb0VBQWdCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLGtCQUFrQixxRkFBb0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isa0JBQWtCLHVGQUFxQjtBQUN2QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsOEJBQThCLHVEQUFVO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsdURBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHdEQUFPO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLHdCQUF3QixpQ0FBaUM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFnQixDQUFDLGtFQUFvQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBCQUEwQjtBQUMxQztBQUNBLCtCQUErQix1R0FBb0M7QUFDbkUsNkdBQTZHLCtEQUFjO0FBQzNIO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlDQUFpQztBQUNoRCxlQUFlLGtDQUFrQztBQUNqRCxlQUFlLG9DQUFvQztBQUNuRDtBQUNBLGdCQUFnQiwrQkFBK0I7QUFDL0MsZ0JBQWdCLE9BQU87QUFDdkI7QUFDQSxpQkFBaUIsVUFBVSxlQUFlLG1CQUFtQixrQkFBa0I7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDJFQUE2QixDQUFDLCtFQUFpQztBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHdEQUFPLFVBQVUsd0RBQU87QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLHVEQUFXLG1CQUFtQix3REFBWTtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHdEQUFlO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHVEQUFjO0FBQ2pDO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsaUVBQW1CO0FBQ3pDLHNCQUFzQixzRUFBd0I7QUFDOUM7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLHlCQUF5QixZQUFZO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDRGQUFzQjtBQUN0RCxpQ0FBaUMsNkZBQXVCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx1RkFBMkM7QUFDNUUsZ0NBQWdDLHNGQUEwQztBQUMxRTtBQUNBLGdCQUFnQiw0REFBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix1REFBVyxtQkFBbUIsd0RBQVk7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHdEQUFlO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELHdEQUFPLFVBQVUsd0RBQU87QUFDMUU7QUFDQTtBQUNBLG9CQUFvQixJQUFzQztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELElBQUksUUFBUSxrQkFBa0Isa0JBQWtCLEtBQUs7QUFDckc7QUFDQTtBQUNBLGdEQUFnRCxJQUFJO0FBQ3BEO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGVBQWU7QUFDNUIsYUFBYSw0QkFBNEI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDhEQUFnQixDQUFDLGtFQUFvQjtBQUMzRDtBQUNBO0FBQ0EsdUhBQXVIO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLFlBQVk7QUFDckM7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWl0c3V5b3NoaS9EZXNrdG9wL2F1dGgtdGVzdC9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgwK25leHRqcy1hdXRoMEA0LjExLjBfbmV4dEAxNi4wLjBfQGJhYmVsK2NvcmVANy4yOC41X3JlYWN0LWRvbUAxOS4yLjBfcmVhY3RAMTkuMi4wX2I4OWZkNzYxZTJiMTAzODU5YTI5MWFlOWFjMDQ1ZDU1L25vZGVfbW9kdWxlcy9AYXV0aDAvbmV4dGpzLWF1dGgwL2Rpc3Qvc2VydmVyL2NsaWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX19jbGFzc1ByaXZhdGVGaWVsZFNldCA9ICh0aGlzICYmIHRoaXMuX19jbGFzc1ByaXZhdGVGaWVsZFNldCkgfHwgZnVuY3Rpb24gKHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XG59O1xudmFyIF9fY2xhc3NQcml2YXRlRmllbGRHZXQgPSAodGhpcyAmJiB0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXQpIHx8IGZ1bmN0aW9uIChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn07XG52YXIgX0F1dGgwQ2xpZW50X29wdGlvbnMsIF9BdXRoMENsaWVudF90b2tlblJlcXVlc3RDYWNoZTtcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tIFwibmV4dC9oZWFkZXJzLmpzXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyLmpzXCI7XG5pbXBvcnQgeyBBY2Nlc3NUb2tlbkVycm9yLCBBY2Nlc3NUb2tlbkVycm9yQ29kZSwgQWNjZXNzVG9rZW5Gb3JDb25uZWN0aW9uRXJyb3IsIEFjY2Vzc1Rva2VuRm9yQ29ubmVjdGlvbkVycm9yQ29kZSwgQ29ubmVjdEFjY291bnRFcnJvciwgQ29ubmVjdEFjY291bnRFcnJvckNvZGVzIH0gZnJvbSBcIi4uL2Vycm9ycy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9TQ09QRVMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZURwb3BDb25maWd1cmF0aW9uIH0gZnJvbSBcIi4uL3V0aWxzL2Rwb3BVdGlscy5qc1wiO1xuaW1wb3J0IHsgaXNSZXF1ZXN0IH0gZnJvbSBcIi4uL3V0aWxzL3JlcXVlc3QuanNcIjtcbmltcG9ydCB7IGdldFNlc3Npb25DaGFuZ2VzQWZ0ZXJHZXRBY2Nlc3NUb2tlbiB9IGZyb20gXCIuLi91dGlscy9zZXNzaW9uLWNoYW5nZXMtaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgQXV0aENsaWVudCB9IGZyb20gXCIuL2F1dGgtY2xpZW50LmpzXCI7XG5pbXBvcnQgeyBSZXF1ZXN0Q29va2llcywgUmVzcG9uc2VDb29raWVzIH0gZnJvbSBcIi4vY29va2llcy5qc1wiO1xuaW1wb3J0ICogYXMgd2l0aEFwaUF1dGhSZXF1aXJlZCBmcm9tIFwiLi9oZWxwZXJzL3dpdGgtYXBpLWF1dGgtcmVxdWlyZWQuanNcIjtcbmltcG9ydCB7IGFwcFJvdXRlSGFuZGxlckZhY3RvcnksIHBhZ2VSb3V0ZUhhbmRsZXJGYWN0b3J5IH0gZnJvbSBcIi4vaGVscGVycy93aXRoLXBhZ2UtYXV0aC1yZXF1aXJlZC5qc1wiO1xuaW1wb3J0IHsgU3RhdGVmdWxTZXNzaW9uU3RvcmUgfSBmcm9tIFwiLi9zZXNzaW9uL3N0YXRlZnVsLXNlc3Npb24tc3RvcmUuanNcIjtcbmltcG9ydCB7IFN0YXRlbGVzc1Nlc3Npb25TdG9yZSB9IGZyb20gXCIuL3Nlc3Npb24vc3RhdGVsZXNzLXNlc3Npb24tc3RvcmUuanNcIjtcbmltcG9ydCB7IFRva2VuUmVxdWVzdENhY2hlIH0gZnJvbSBcIi4vdG9rZW4tcmVxdWVzdC1jYWNoZS5qc1wiO1xuaW1wb3J0IHsgVHJhbnNhY3Rpb25TdG9yZSB9IGZyb20gXCIuL3RyYW5zYWN0aW9uLXN0b3JlLmpzXCI7XG5leHBvcnQgY2xhc3MgQXV0aDBDbGllbnQge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBfQXV0aDBDbGllbnRfb3B0aW9ucy5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgLy8gQ2FjaGUgZm9yIGluLWZsaWdodCB0b2tlbiByZXF1ZXN0cyB0byBwcmV2ZW50IHJhY2UgY29uZGl0aW9uc1xuICAgICAgICBfQXV0aDBDbGllbnRfdG9rZW5SZXF1ZXN0Q2FjaGUuc2V0KHRoaXMsIG5ldyBUb2tlblJlcXVlc3RDYWNoZSgpKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQXV0aDBDbGllbnRfb3B0aW9ucywgb3B0aW9ucywgXCJmXCIpO1xuICAgICAgICAvLyBFeHRyYWN0IGFuZCB2YWxpZGF0ZSByZXF1aXJlZCBvcHRpb25zXG4gICAgICAgIGNvbnN0IHsgZG9tYWluLCBjbGllbnRJZCwgY2xpZW50U2VjcmV0LCBhcHBCYXNlVXJsLCBzZWNyZXQsIGNsaWVudEFzc2VydGlvblNpZ25pbmdLZXkgfSA9IHRoaXMudmFsaWRhdGVBbmRFeHRyYWN0UmVxdWlyZWRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICB0aGlzLmRvbWFpbiA9IGRvbWFpbjtcbiAgICAgICAgY29uc3QgY2xpZW50QXNzZXJ0aW9uU2lnbmluZ0FsZyA9IG9wdGlvbnMuY2xpZW50QXNzZXJ0aW9uU2lnbmluZ0FsZyB8fFxuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuQVVUSDBfQ0xJRU5UX0FTU0VSVElPTl9TSUdOSU5HX0FMRztcbiAgICAgICAgLy8gVmFsaWRhdGUgRFBvUCBjb25maWd1cmF0aW9uIGFuZCByZXNvbHZlIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzIGlmIG5lZWRlZFxuICAgICAgICBjb25zdCB7IGRwb3BLZXlQYWlyOiByZXNvbHZlZERwb3BLZXlQYWlyLCBkcG9wT3B0aW9uczogcmVzb2x2ZWREcG9wT3B0aW9ucyB9ID0gdmFsaWRhdGVEcG9wQ29uZmlndXJhdGlvbihvcHRpb25zKTtcbiAgICAgICAgLy8gQXV0by1kZXRlY3QgYmFzZSBwYXRoIGZvciBjb29raWUgY29uZmlndXJhdGlvblxuICAgICAgICBjb25zdCBiYXNlUGF0aCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBU0VfUEFUSDtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkNvb2tpZU9wdGlvbnMgPSB7XG4gICAgICAgICAgICBuYW1lOiBvcHRpb25zLnNlc3Npb24/LmNvb2tpZT8ubmFtZSA/PyBcIl9fc2Vzc2lvblwiLFxuICAgICAgICAgICAgc2VjdXJlOiBvcHRpb25zLnNlc3Npb24/LmNvb2tpZT8uc2VjdXJlID8/XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuQVVUSDBfQ09PS0lFX1NFQ1VSRSA9PT0gXCJ0cnVlXCIsXG4gICAgICAgICAgICBzYW1lU2l0ZTogb3B0aW9ucy5zZXNzaW9uPy5jb29raWU/LnNhbWVTaXRlID8/XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnYuQVVUSDBfQ09PS0lFX1NBTUVfU0lURSA/P1xuICAgICAgICAgICAgICAgIFwibGF4XCIsXG4gICAgICAgICAgICBwYXRoOiBvcHRpb25zLnNlc3Npb24/LmNvb2tpZT8ucGF0aCA/P1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52LkFVVEgwX0NPT0tJRV9QQVRIID8/XG4gICAgICAgICAgICAgICAgYmFzZVBhdGggPz9cbiAgICAgICAgICAgICAgICBcIi9cIixcbiAgICAgICAgICAgIHRyYW5zaWVudDogb3B0aW9ucy5zZXNzaW9uPy5jb29raWU/LnRyYW5zaWVudCA/P1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52LkFVVEgwX0NPT0tJRV9UUkFOU0lFTlQgPT09IFwidHJ1ZVwiLFxuICAgICAgICAgICAgZG9tYWluOiBvcHRpb25zLnNlc3Npb24/LmNvb2tpZT8uZG9tYWluID8/IHByb2Nlc3MuZW52LkFVVEgwX0NPT0tJRV9ET01BSU5cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb25Db29raWVPcHRpb25zID0ge1xuICAgICAgICAgICAgcHJlZml4OiBvcHRpb25zLnRyYW5zYWN0aW9uQ29va2llPy5wcmVmaXggPz8gXCJfX3R4bl9cIixcbiAgICAgICAgICAgIHNlY3VyZTogb3B0aW9ucy50cmFuc2FjdGlvbkNvb2tpZT8uc2VjdXJlID8/IGZhbHNlLFxuICAgICAgICAgICAgc2FtZVNpdGU6IG9wdGlvbnMudHJhbnNhY3Rpb25Db29raWU/LnNhbWVTaXRlID8/IFwibGF4XCIsXG4gICAgICAgICAgICBwYXRoOiBvcHRpb25zLnRyYW5zYWN0aW9uQ29va2llPy5wYXRoID8/IGJhc2VQYXRoID8/IFwiL1wiLFxuICAgICAgICAgICAgbWF4QWdlOiBvcHRpb25zLnRyYW5zYWN0aW9uQ29va2llPy5tYXhBZ2UgPz8gMzYwMFxuICAgICAgICB9O1xuICAgICAgICBpZiAoYXBwQmFzZVVybCkge1xuICAgICAgICAgICAgY29uc3QgeyBwcm90b2NvbCB9ID0gbmV3IFVSTChhcHBCYXNlVXJsKTtcbiAgICAgICAgICAgIGlmIChwcm90b2NvbCA9PT0gXCJodHRwczpcIikge1xuICAgICAgICAgICAgICAgIHNlc3Npb25Db29raWVPcHRpb25zLnNlY3VyZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb25Db29raWVPcHRpb25zLnNlY3VyZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb3V0ZXMgPSB7XG4gICAgICAgICAgICBsb2dpbjogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfTE9HSU5fUk9VVEUgfHwgXCIvYXV0aC9sb2dpblwiLFxuICAgICAgICAgICAgbG9nb3V0OiBcIi9hdXRoL2xvZ291dFwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6IFwiL2F1dGgvY2FsbGJhY2tcIixcbiAgICAgICAgICAgIGJhY2tDaGFubmVsTG9nb3V0OiBcIi9hdXRoL2JhY2tjaGFubmVsLWxvZ291dFwiLFxuICAgICAgICAgICAgcHJvZmlsZTogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfUFJPRklMRV9ST1VURSB8fCBcIi9hdXRoL3Byb2ZpbGVcIixcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BQ0NFU1NfVE9LRU5fUk9VVEUgfHwgXCIvYXV0aC9hY2Nlc3MtdG9rZW5cIixcbiAgICAgICAgICAgIGNvbm5lY3RBY2NvdW50OiBcIi9hdXRoL2Nvbm5lY3RcIixcbiAgICAgICAgICAgIC4uLm9wdGlvbnMucm91dGVzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25TdG9yZSA9IG5ldyBUcmFuc2FjdGlvblN0b3JlKHtcbiAgICAgICAgICAgIHNlY3JldCxcbiAgICAgICAgICAgIGNvb2tpZU9wdGlvbnM6IHRyYW5zYWN0aW9uQ29va2llT3B0aW9ucyxcbiAgICAgICAgICAgIGVuYWJsZVBhcmFsbGVsVHJhbnNhY3Rpb25zOiBvcHRpb25zLmVuYWJsZVBhcmFsbGVsVHJhbnNhY3Rpb25zID8/IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2Vzc2lvblN0b3JlID0gb3B0aW9ucy5zZXNzaW9uU3RvcmVcbiAgICAgICAgICAgID8gbmV3IFN0YXRlZnVsU2Vzc2lvblN0b3JlKHtcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLnNlc3Npb24sXG4gICAgICAgICAgICAgICAgc2VjcmV0LFxuICAgICAgICAgICAgICAgIHN0b3JlOiBvcHRpb25zLnNlc3Npb25TdG9yZSxcbiAgICAgICAgICAgICAgICBjb29raWVPcHRpb25zOiBzZXNzaW9uQ29va2llT3B0aW9uc1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogbmV3IFN0YXRlbGVzc1Nlc3Npb25TdG9yZSh7XG4gICAgICAgICAgICAgICAgLi4ub3B0aW9ucy5zZXNzaW9uLFxuICAgICAgICAgICAgICAgIHNlY3JldCxcbiAgICAgICAgICAgICAgICBjb29raWVPcHRpb25zOiBzZXNzaW9uQ29va2llT3B0aW9uc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYXV0aENsaWVudCA9IG5ldyBBdXRoQ2xpZW50KHtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uU3RvcmU6IHRoaXMudHJhbnNhY3Rpb25TdG9yZSxcbiAgICAgICAgICAgIHNlc3Npb25TdG9yZTogdGhpcy5zZXNzaW9uU3RvcmUsXG4gICAgICAgICAgICBkb21haW4sXG4gICAgICAgICAgICBjbGllbnRJZCxcbiAgICAgICAgICAgIGNsaWVudFNlY3JldCxcbiAgICAgICAgICAgIGNsaWVudEFzc2VydGlvblNpZ25pbmdLZXksXG4gICAgICAgICAgICBjbGllbnRBc3NlcnRpb25TaWduaW5nQWxnLFxuICAgICAgICAgICAgYXV0aG9yaXphdGlvblBhcmFtZXRlcnM6IG9wdGlvbnMuYXV0aG9yaXphdGlvblBhcmFtZXRlcnMsXG4gICAgICAgICAgICBwdXNoZWRBdXRob3JpemF0aW9uUmVxdWVzdHM6IG9wdGlvbnMucHVzaGVkQXV0aG9yaXphdGlvblJlcXVlc3RzLFxuICAgICAgICAgICAgYXBwQmFzZVVybCxcbiAgICAgICAgICAgIHNlY3JldCxcbiAgICAgICAgICAgIHNpZ25JblJldHVyblRvUGF0aDogb3B0aW9ucy5zaWduSW5SZXR1cm5Ub1BhdGgsXG4gICAgICAgICAgICBsb2dvdXRTdHJhdGVneTogb3B0aW9ucy5sb2dvdXRTdHJhdGVneSxcbiAgICAgICAgICAgIGluY2x1ZGVJZFRva2VuSGludEluT0lEQ0xvZ291dFVybDogb3B0aW9ucy5pbmNsdWRlSWRUb2tlbkhpbnRJbk9JRENMb2dvdXRVcmwsXG4gICAgICAgICAgICBiZWZvcmVTZXNzaW9uU2F2ZWQ6IG9wdGlvbnMuYmVmb3JlU2Vzc2lvblNhdmVkLFxuICAgICAgICAgICAgb25DYWxsYmFjazogb3B0aW9ucy5vbkNhbGxiYWNrLFxuICAgICAgICAgICAgcm91dGVzOiB0aGlzLnJvdXRlcyxcbiAgICAgICAgICAgIGFsbG93SW5zZWN1cmVSZXF1ZXN0czogb3B0aW9ucy5hbGxvd0luc2VjdXJlUmVxdWVzdHMsXG4gICAgICAgICAgICBodHRwVGltZW91dDogb3B0aW9ucy5odHRwVGltZW91dCxcbiAgICAgICAgICAgIGVuYWJsZVRlbGVtZXRyeTogb3B0aW9ucy5lbmFibGVUZWxlbWV0cnksXG4gICAgICAgICAgICBlbmFibGVBY2Nlc3NUb2tlbkVuZHBvaW50OiBvcHRpb25zLmVuYWJsZUFjY2Vzc1Rva2VuRW5kcG9pbnQsXG4gICAgICAgICAgICBub0NvbnRlbnRQcm9maWxlUmVzcG9uc2VXaGVuVW5hdXRoZW50aWNhdGVkOiBvcHRpb25zLm5vQ29udGVudFByb2ZpbGVSZXNwb25zZVdoZW5VbmF1dGhlbnRpY2F0ZWQsXG4gICAgICAgICAgICBlbmFibGVDb25uZWN0QWNjb3VudEVuZHBvaW50OiBvcHRpb25zLmVuYWJsZUNvbm5lY3RBY2NvdW50RW5kcG9pbnQsXG4gICAgICAgICAgICB1c2VEUG9QOiBvcHRpb25zLnVzZURQb1AgfHwgZmFsc2UsXG4gICAgICAgICAgICBkcG9wS2V5UGFpcjogb3B0aW9ucy5kcG9wS2V5UGFpciB8fCByZXNvbHZlZERwb3BLZXlQYWlyLFxuICAgICAgICAgICAgZHBvcE9wdGlvbnM6IG9wdGlvbnMuZHBvcE9wdGlvbnMgfHwgcmVzb2x2ZWREcG9wT3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogbWlkZGxld2FyZSBtb3VudHMgdGhlIFNESyByb3V0ZXMgdG8gcnVuIGFzIGEgbWlkZGxld2FyZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBtaWRkbGV3YXJlKHJlcSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdXRoQ2xpZW50LmhhbmRsZXIuYmluZCh0aGlzLmF1dGhDbGllbnQpKHJlcSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGdldFNlc3Npb24gcmV0dXJucyB0aGUgc2Vzc2lvbiBkYXRhIGZvciB0aGUgY3VycmVudCByZXF1ZXN0LlxuICAgICAqL1xuICAgIGFzeW5jIGdldFNlc3Npb24ocmVxKSB7XG4gICAgICAgIGlmIChyZXEpIHtcbiAgICAgICAgICAgIC8vIG1pZGRsZXdhcmUgdXNhZ2VcbiAgICAgICAgICAgIGlmIChyZXEgaW5zdGFuY2VvZiBOZXh0UmVxdWVzdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNlc3Npb25TdG9yZS5nZXQocmVxLmNvb2tpZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcGFnZXMgcm91dGVyIHVzYWdlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmUuZ2V0KHRoaXMuY3JlYXRlUmVxdWVzdENvb2tpZXMocmVxKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXBwIHJvdXRlciB1c2FnZTogU2VydmVyIENvbXBvbmVudHMsIFNlcnZlciBBY3Rpb25zLCBSb3V0ZSBIYW5kbGVyc1xuICAgICAgICByZXR1cm4gdGhpcy5zZXNzaW9uU3RvcmUuZ2V0KGF3YWl0IGNvb2tpZXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGdldEFjY2Vzc1Rva2VuIHJldHVybnMgdGhlIGFjY2VzcyB0b2tlbi5cbiAgICAgKlxuICAgICAqIFBsZWFzZSBub3RlOiBJZiB5b3UgYXJlIHBhc3NpbmcgYXVkaWVuY2UsIGVuc3VyZSB0aGF0IHRoZSB1c2VkIGF1ZGllbmNlcyBhbmQgc2NvcGVzIGFyZVxuICAgICAqIHBhcnQgb2YgdGhlIEFwcGxpY2F0aW9uJ3MgUmVmcmVzaCBUb2tlbiBQb2xpY2llcyBpbiBBdXRoMCB3aGVuIGNvbmZpZ3VyaW5nIE11bHRpLVJlc291cmNlIFJlZnJlc2ggVG9rZW5zIChNUlJUKS5cbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9hdXRoMC5jb20vZG9jcy9zZWN1cmUvdG9rZW5zL3JlZnJlc2gtdG9rZW5zL211bHRpLXJlc291cmNlLXJlZnJlc2gtdG9rZW58U2VlIEF1dGgwIERvY3VtZW50YXRpb24gb24gTXVsdGktcmVzb3VyY2UgUmVmcmVzaCBUb2tlbnN9XG4gICAgICpcbiAgICAgKiBOT1RFOiBTZXJ2ZXIgQ29tcG9uZW50cyBjYW5ub3Qgc2V0IGNvb2tpZXMuIENhbGxpbmcgYGdldEFjY2Vzc1Rva2VuKClgIGluIGEgU2VydmVyIENvbXBvbmVudCB3aWxsIGNhdXNlIHRoZSBhY2Nlc3MgdG9rZW4gdG8gYmUgcmVmcmVzaGVkLCBpZiBpdCBpcyBleHBpcmVkLCBhbmQgdGhlIHVwZGF0ZWQgdG9rZW4gc2V0IHdpbGwgbm90IHRvIGJlIHBlcnNpc3RlZC5cbiAgICAgKiBJdCBpcyByZWNvbW1lbmRlZCB0byBjYWxsIGBnZXRBY2Nlc3NUb2tlbihyZXEsIHJlcylgIGluIHRoZSBtaWRkbGV3YXJlIGlmIHlvdSBuZWVkIHRvIHJldHJpZXZlIHRoZSBhY2Nlc3MgdG9rZW4gaW4gYSBTZXJ2ZXIgQ29tcG9uZW50IHRvIGVuc3VyZSB0aGUgdXBkYXRlZCB0b2tlbiBzZXQgaXMgcGVyc2lzdGVkLlxuICAgICAqL1xuICAgIGFzeW5jIGdldEFjY2Vzc1Rva2VuKGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICByZWZyZXNoOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgICBsZXQgcmVxID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgcmVzID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgb3B0aW9ucyA9IHt9O1xuICAgICAgICAvLyBEZXRlcm1pbmUgd2hpY2ggb3ZlcmxvYWQgd2FzIGNhbGxlZCBiYXNlZCBvbiBhcmd1bWVudHNcbiAgICAgICAgaWYgKGFyZzEgJiZcbiAgICAgICAgICAgIChhcmcxIGluc3RhbmNlb2YgUmVxdWVzdCB8fCB0eXBlb2YgYXJnMS5oZWFkZXJzID09PSBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgLy8gQ2FzZTogZ2V0QWNjZXNzVG9rZW4ocmVxLCByZXMsIG9wdGlvbnM/KVxuICAgICAgICAgICAgcmVxID0gYXJnMTtcbiAgICAgICAgICAgIHJlcyA9IGFyZzI7IC8vIGFyZzIgbXVzdCBiZSBSZXNwb25zZSBpZiBhcmcxIGlzIFJlcXVlc3RcbiAgICAgICAgICAgIC8vIE1lcmdlIHByb3ZpZGVkIG9wdGlvbnMgKGFyZzMpIHdpdGggZGVmYXVsdHNcbiAgICAgICAgICAgIG9wdGlvbnMgPSB7IC4uLmRlZmF1bHRPcHRpb25zLCAuLi4oYXJnMyA/PyB7fSkgfTtcbiAgICAgICAgICAgIGlmICghcmVzKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImdldEFjY2Vzc1Rva2VuKHJlcSwgcmVzKTogVGhlICdyZXMnIGFyZ3VtZW50IGlzIG1pc3NpbmcuIEJvdGggJ3JlcScgYW5kICdyZXMnIG11c3QgYmUgcHJvdmlkZWQgdG9nZXRoZXIgZm9yIFBhZ2VzIFJvdXRlciBvciBtaWRkbGV3YXJlIHVzYWdlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIENhc2U6IGdldEFjY2Vzc1Rva2VuKG9wdGlvbnM/KSBvciBnZXRBY2Nlc3NUb2tlbigpXG4gICAgICAgICAgICAvLyBhcmcxIChpZiBwcmVzZW50KSBtdXN0IGJlIG9wdGlvbnMsIGFyZzIgYW5kIGFyZzMgbXVzdCBiZSB1bmRlZmluZWQuXG4gICAgICAgICAgICBpZiAoYXJnMiAhPT0gdW5kZWZpbmVkIHx8IGFyZzMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJnZXRBY2Nlc3NUb2tlbjogSW52YWxpZCBhcmd1bWVudHMuIFZhbGlkIHNpZ25hdHVyZXMgYXJlIGdldEFjY2Vzc1Rva2VuKCksIGdldEFjY2Vzc1Rva2VuKG9wdGlvbnMpLCBvciBnZXRBY2Nlc3NUb2tlbihyZXEsIHJlcywgb3B0aW9ucykuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWVyZ2UgcHJvdmlkZWQgb3B0aW9ucyAoYXJnMSkgd2l0aCBkZWZhdWx0c1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAuLi5kZWZhdWx0T3B0aW9ucyxcbiAgICAgICAgICAgICAgICAuLi4oYXJnMSA/PyB7fSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgdG9rZW4gcmVxdWVzdCB3aXRoIGNhY2hpbmcgdG8gYXZvaWQgZHVwbGljYXRlIGluLWZsaWdodCByZXF1ZXN0c1xuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQXV0aDBDbGllbnRfdG9rZW5SZXF1ZXN0Q2FjaGUsIFwiZlwiKS5leGVjdXRlKCgpID0+IHRoaXMuZXhlY3V0ZUdldEFjY2Vzc1Rva2VuKHJlcSwgcmVzLCBvcHRpb25zKSwge1xuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb25QYXJhbWV0ZXJzOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9BdXRoMENsaWVudF9vcHRpb25zLCBcImZcIikuYXV0aG9yaXphdGlvblBhcmFtZXRlcnNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvcmUgaW1wbGVtZW50YXRpb24gb2YgZ2V0QWNjZXNzVG9rZW4gdGhhdCBwZXJmb3JtcyB0aGUgYWN0dWFsIHRva2VuIHJldHJpZXZhbC5cbiAgICAgKiBUaGlzIGlzIHNlcGFyYXRlZCB0byBlbmFibGUgcmVxdWVzdCBjb2FsZXNjaW5nIHZpYSB0aGUgY2FjaGUuXG4gICAgICovXG4gICAgYXN5bmMgZXhlY3V0ZUdldEFjY2Vzc1Rva2VuKHJlcSwgcmVzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSByZXFcbiAgICAgICAgICAgID8gYXdhaXQgdGhpcy5nZXRTZXNzaW9uKHJlcSlcbiAgICAgICAgICAgIDogYXdhaXQgdGhpcy5nZXRTZXNzaW9uKCk7XG4gICAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEFjY2Vzc1Rva2VuRXJyb3IoQWNjZXNzVG9rZW5FcnJvckNvZGUuTUlTU0lOR19TRVNTSU9OLCBcIlRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYW4gYWN0aXZlIHNlc3Npb24uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtlcnJvciwgZ2V0VG9rZW5TZXRSZXNwb25zZV0gPSBhd2FpdCB0aGlzLmF1dGhDbGllbnQuZ2V0VG9rZW5TZXQoc2Vzc2lvbiwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyB0b2tlblNldCwgaWRUb2tlbkNsYWltcyB9ID0gZ2V0VG9rZW5TZXRSZXNwb25zZTtcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBzZXNzaW9uIHdpdGggdGhlIG5ldyB0b2tlbiBzZXQsIGlmIG5lY2Vzc2FyeVxuICAgICAgICBjb25zdCBzZXNzaW9uQ2hhbmdlcyA9IGdldFNlc3Npb25DaGFuZ2VzQWZ0ZXJHZXRBY2Nlc3NUb2tlbihzZXNzaW9uLCB0b2tlblNldCwge1xuICAgICAgICAgICAgc2NvcGU6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0F1dGgwQ2xpZW50X29wdGlvbnMsIFwiZlwiKS5hdXRob3JpemF0aW9uUGFyYW1ldGVycz8uc2NvcGUgPz8gREVGQVVMVF9TQ09QRVMsXG4gICAgICAgICAgICBhdWRpZW5jZTogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQXV0aDBDbGllbnRfb3B0aW9ucywgXCJmXCIpLmF1dGhvcml6YXRpb25QYXJhbWV0ZXJzPy5hdWRpZW5jZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNlc3Npb25DaGFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAoaWRUb2tlbkNsYWltcykge1xuICAgICAgICAgICAgICAgIHNlc3Npb24udXNlciA9IGlkVG9rZW5DbGFpbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjYWxsIGJlZm9yZVNlc3Npb25TYXZlZCBjYWxsYmFjayBpZiBwcmVzZW50XG4gICAgICAgICAgICAvLyBpZiBub3QgdGhlbiBmaWx0ZXIgaWRfdG9rZW4gY2xhaW1zIHdpdGggZGVmYXVsdCBydWxlc1xuICAgICAgICAgICAgY29uc3QgZmluYWxTZXNzaW9uID0gYXdhaXQgdGhpcy5hdXRoQ2xpZW50LmZpbmFsaXplU2Vzc2lvbihzZXNzaW9uLCB0b2tlblNldC5pZFRva2VuKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVRvU2Vzc2lvbih7XG4gICAgICAgICAgICAgICAgLi4uZmluYWxTZXNzaW9uLFxuICAgICAgICAgICAgICAgIC4uLnNlc3Npb25DaGFuZ2VzXG4gICAgICAgICAgICB9LCByZXEsIHJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRva2VuOiB0b2tlblNldC5hY2Nlc3NUb2tlbixcbiAgICAgICAgICAgIHNjb3BlOiB0b2tlblNldC5zY29wZSxcbiAgICAgICAgICAgIGV4cGlyZXNBdDogdG9rZW5TZXQuZXhwaXJlc0F0LFxuICAgICAgICAgICAgdG9rZW5fdHlwZTogdG9rZW5TZXQudG9rZW5fdHlwZSxcbiAgICAgICAgICAgIGF1ZGllbmNlOiB0b2tlblNldC5hdWRpZW5jZVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYW4gYWNjZXNzIHRva2VuIGZvciBhIGNvbm5lY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBhdHRlbXB0cyB0byBvYnRhaW4gYW4gYWNjZXNzIHRva2VuIGZvciBhIHNwZWNpZmllZCBjb25uZWN0aW9uLlxuICAgICAqIEl0IGZpcnN0IGNoZWNrcyBpZiBhIHNlc3Npb24gZXhpc3RzLCBlaXRoZXIgZnJvbSB0aGUgcHJvdmlkZWQgcmVxdWVzdCBvciBmcm9tIGNvb2tpZXMuXG4gICAgICogSWYgbm8gc2Vzc2lvbiBpcyBmb3VuZCwgaXQgdGhyb3dzIGEgYEFjY2Vzc1Rva2VuRm9yQ29ubmVjdGlvbkVycm9yYCBpbmRpY2F0aW5nXG4gICAgICogdGhhdCB0aGUgdXNlciBkb2VzIG5vdCBoYXZlIGFuIGFjdGl2ZSBzZXNzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb25PcHRpb25zfSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgcmV0cmlldmluZyBhbiBhY2Nlc3MgdG9rZW4gZm9yIGEgY29ubmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge1BhZ2VzUm91dGVyUmVxdWVzdCB8IE5leHRSZXF1ZXN0fSBbcmVxXSAtIEFuIG9wdGlvbmFsIHJlcXVlc3Qgb2JqZWN0IGZyb20gd2hpY2ggdG8gZXh0cmFjdCBzZXNzaW9uIGluZm9ybWF0aW9uLlxuICAgICAqIEBwYXJhbSB7UGFnZXNSb3V0ZXJSZXNwb25zZSB8IE5leHRSZXNwb25zZX0gW3Jlc10gLSBBbiBvcHRpb25hbCByZXNwb25zZSBvYmplY3QgZnJvbSB3aGljaCB0byBleHRyYWN0IHNlc3Npb24gaW5mb3JtYXRpb24uXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIHtBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb25FcnJvcn0gSWYgdGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhbiBhY3RpdmUgc2Vzc2lvbi5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgaXMgYW4gZXJyb3IgZHVyaW5nIHRoZSB0b2tlbiBleGNoYW5nZSBwcm9jZXNzLlxuICAgICAqXG4gICAgICogQHJldHVybnMge1Byb21pc2U8eyB0b2tlbjogc3RyaW5nOyBleHBpcmVzQXQ6IG51bWJlcjsgc2NvcGU/OiBzdHJpbmcgfX0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGFjY2VzcyB0b2tlbiBhbmQgaXRzIGV4cGlyYXRpb24gdGltZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRBY2Nlc3NUb2tlbkZvckNvbm5lY3Rpb24ob3B0aW9ucywgcmVxLCByZXMpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHJlcVxuICAgICAgICAgICAgPyBhd2FpdCB0aGlzLmdldFNlc3Npb24ocmVxKVxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLmdldFNlc3Npb24oKTtcbiAgICAgICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQWNjZXNzVG9rZW5Gb3JDb25uZWN0aW9uRXJyb3IoQWNjZXNzVG9rZW5Gb3JDb25uZWN0aW9uRXJyb3JDb2RlLk1JU1NJTkdfU0VTU0lPTiwgXCJUaGUgdXNlciBkb2VzIG5vdCBoYXZlIGFuIGFjdGl2ZSBzZXNzaW9uLlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBGaW5kIHRoZSBjb25uZWN0aW9uIHRva2VuIHNldCBpbiB0aGUgc2Vzc2lvblxuICAgICAgICBjb25zdCBleGlzdGluZ1Rva2VuU2V0ID0gc2Vzc2lvbi5jb25uZWN0aW9uVG9rZW5TZXRzPy5maW5kKCh0b2tlblNldCkgPT4gdG9rZW5TZXQuY29ubmVjdGlvbiA9PT0gb3B0aW9ucy5jb25uZWN0aW9uKTtcbiAgICAgICAgY29uc3QgW2Vycm9yLCByZXRyaWV2ZWRUb2tlblNldF0gPSBhd2FpdCB0aGlzLmF1dGhDbGllbnQuZ2V0Q29ubmVjdGlvblRva2VuU2V0KHNlc3Npb24udG9rZW5TZXQsIGV4aXN0aW5nVG9rZW5TZXQsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoZXJyb3IgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHdlIGRpZG4ndCBoYXZlIGEgY29ycmVzcG9uZGluZyBjb25uZWN0aW9uIHRva2VuIHNldCBpbiB0aGUgc2Vzc2lvblxuICAgICAgICAvLyBvciBpZiB0aGUgb25lIHdlIGhhdmUgaW4gdGhlIHNlc3Npb24gZG9lcyBub3QgbWF0Y2ggdGhlIG9uZSB3ZSByZWNlaXZlZFxuICAgICAgICAvLyBXZSB3YW50IHRvIHVwZGF0ZSB0aGUgc3RvcmUgaW5jYXNlIHdlIHJldHJpZXZlZCBhIHRva2VuIHNldC5cbiAgICAgICAgaWYgKHJldHJpZXZlZFRva2VuU2V0ICYmXG4gICAgICAgICAgICAoIWV4aXN0aW5nVG9rZW5TZXQgfHxcbiAgICAgICAgICAgICAgICByZXRyaWV2ZWRUb2tlblNldC5hY2Nlc3NUb2tlbiAhPT0gZXhpc3RpbmdUb2tlblNldC5hY2Nlc3NUb2tlbiB8fFxuICAgICAgICAgICAgICAgIHJldHJpZXZlZFRva2VuU2V0LmV4cGlyZXNBdCAhPT0gZXhpc3RpbmdUb2tlblNldC5leHBpcmVzQXQgfHxcbiAgICAgICAgICAgICAgICByZXRyaWV2ZWRUb2tlblNldC5zY29wZSAhPT0gZXhpc3RpbmdUb2tlblNldC5zY29wZSkpIHtcbiAgICAgICAgICAgIGxldCB0b2tlblNldHM7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhZCB0aGUgY29ubmVjdGlvbiB0b2tlbiBzZXQgaW4gdGhlIHNlc3Npb25cbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSBpdGVtIGluIHRoZSBhcnJheVxuICAgICAgICAgICAgLy8gSWYgbm90LCB3ZSBuZWVkIHRvIGFkZCBpdC5cbiAgICAgICAgICAgIGlmIChleGlzdGluZ1Rva2VuU2V0KSB7XG4gICAgICAgICAgICAgICAgdG9rZW5TZXRzID0gc2Vzc2lvbi5jb25uZWN0aW9uVG9rZW5TZXRzPy5tYXAoKHRva2VuU2V0KSA9PiB0b2tlblNldC5jb25uZWN0aW9uID09PSBvcHRpb25zLmNvbm5lY3Rpb25cbiAgICAgICAgICAgICAgICAgICAgPyByZXRyaWV2ZWRUb2tlblNldFxuICAgICAgICAgICAgICAgICAgICA6IHRva2VuU2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRva2VuU2V0cyA9IFsuLi4oc2Vzc2lvbi5jb25uZWN0aW9uVG9rZW5TZXRzIHx8IFtdKSwgcmV0cmlldmVkVG9rZW5TZXRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlVG9TZXNzaW9uKHtcbiAgICAgICAgICAgICAgICAuLi5zZXNzaW9uLFxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25Ub2tlblNldHM6IHRva2VuU2V0c1xuICAgICAgICAgICAgfSwgcmVxLCByZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b2tlbjogcmV0cmlldmVkVG9rZW5TZXQuYWNjZXNzVG9rZW4sXG4gICAgICAgICAgICBzY29wZTogcmV0cmlldmVkVG9rZW5TZXQuc2NvcGUsXG4gICAgICAgICAgICBleHBpcmVzQXQ6IHJldHJpZXZlZFRva2VuU2V0LmV4cGlyZXNBdFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiB1cGRhdGVTZXNzaW9uIHVwZGF0ZXMgdGhlIHNlc3Npb24gb2YgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIuIElmIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBzZXNzaW9uLCBhbiBlcnJvciBpcyB0aHJvd24uXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlU2Vzc2lvbihyZXFPclNlc3Npb24sIHJlcywgc2Vzc2lvbkRhdGEpIHtcbiAgICAgICAgaWYgKCFyZXMpIHtcbiAgICAgICAgICAgIC8vIGFwcCByb3V0ZXI6IFNlcnZlciBBY3Rpb25zLCBSb3V0ZSBIYW5kbGVyc1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTZXNzaW9uID0gYXdhaXQgdGhpcy5nZXRTZXNzaW9uKCk7XG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nU2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRTZXNzaW9uID0gcmVxT3JTZXNzaW9uO1xuICAgICAgICAgICAgaWYgKCF1cGRhdGVkU2Vzc2lvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBzZXNzaW9uIGRhdGEgaXMgbWlzc2luZy5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlc3Npb25TdG9yZS5zZXQoYXdhaXQgY29va2llcygpLCBhd2FpdCBjb29raWVzKCksIHtcbiAgICAgICAgICAgICAgICAuLi51cGRhdGVkU2Vzc2lvbixcbiAgICAgICAgICAgICAgICBpbnRlcm5hbDoge1xuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1Nlc3Npb24uaW50ZXJuYWxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcSA9IHJlcU9yU2Vzc2lvbjtcbiAgICAgICAgICAgIGlmICghc2Vzc2lvbkRhdGEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc2Vzc2lvbiBkYXRhIGlzIG1pc3NpbmcuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcSBpbnN0YW5jZW9mIE5leHRSZXF1ZXN0ICYmIHJlcyBpbnN0YW5jZW9mIE5leHRSZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIC8vIG1pZGRsZXdhcmUgdXNhZ2VcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1Nlc3Npb24gPSBhd2FpdCB0aGlzLmdldFNlc3Npb24ocmVxKTtcbiAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nU2Vzc2lvbikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdXNlciBpcyBub3QgYXV0aGVudGljYXRlZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2Vzc2lvblN0b3JlLnNldChyZXEuY29va2llcywgcmVzLmNvb2tpZXMsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uc2Vzc2lvbkRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGludGVybmFsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1Nlc3Npb24uaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gcGFnZXMgcm91dGVyIHVzYWdlXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTZXNzaW9uID0gYXdhaXQgdGhpcy5nZXRTZXNzaW9uKHJlcSk7XG4gICAgICAgICAgICAgICAgaWYgKCFleGlzdGluZ1Nlc3Npb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByZXNIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNDb29raWVzID0gbmV3IFJlc3BvbnNlQ29va2llcyhyZXNIZWFkZXJzKTtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkU2Vzc2lvbiA9IHNlc3Npb25EYXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcUNvb2tpZXMgPSB0aGlzLmNyZWF0ZVJlcXVlc3RDb29raWVzKHJlcSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFnZXNSb3V0ZXJSZXMgPSByZXM7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXNzaW9uU3RvcmUuc2V0KHJlcUNvb2tpZXMsIHJlc0Nvb2tpZXMsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4udXBkYXRlZFNlc3Npb24sXG4gICAgICAgICAgICAgICAgICAgIGludGVybmFsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ1Nlc3Npb24uaW50ZXJuYWxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHJlc0hlYWRlcnMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2VzUm91dGVyUmVzLnNldEhlYWRlcihrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlUmVxdWVzdENvb2tpZXMocmVxKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXEuaGVhZGVycykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVxLmhlYWRlcnNba2V5XSkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHJlcS5oZWFkZXJzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5hcHBlbmQoa2V5LCByZXEuaGVhZGVyc1trZXldID8/IFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUmVxdWVzdENvb2tpZXMoaGVhZGVycyk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0SW50ZXJhY3RpdmVMb2dpbihvcHRpb25zID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aENsaWVudC5zdGFydEludGVyYWN0aXZlTG9naW4ob3B0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF1dGhlbnRpY2F0ZXMgdXNpbmcgQ2xpZW50LUluaXRpYXRlZCBCYWNrY2hhbm5lbCBBdXRoZW50aWNhdGlvbiBhbmQgcmV0dXJucyB0aGUgdG9rZW4gc2V0IGFuZCBvcHRpb25hbGx5IHRoZSBJRCB0b2tlbiBjbGFpbXMgYW5kIGF1dGhvcml6YXRpb24gZGV0YWlscy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHdpbGwgaW5pdGlhbGl6ZSB0aGUgYmFja2NoYW5uZWwgYXV0aGVudGljYXRpb24gcHJvY2VzcyB3aXRoIEF1dGgwLCBhbmQgcG9sbCB0aGUgdG9rZW4gZW5kcG9pbnQgdW50aWwgdGhlIGF1dGhlbnRpY2F0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAqXG4gICAgICogVXNpbmcgQ2xpZW50LUluaXRpYXRlZCBCYWNrY2hhbm5lbCBBdXRoZW50aWNhdGlvbiByZXF1aXJlcyB0aGUgZmVhdHVyZSB0byBiZSBlbmFibGVkIGluIHRoZSBBdXRoMCBkYXNoYm9hcmQuXG4gICAgICogQHNlZSBodHRwczovL2F1dGgwLmNvbS9kb2NzL2dldC1zdGFydGVkL2F1dGhlbnRpY2F0aW9uLWFuZC1hdXRob3JpemF0aW9uLWZsb3cvY2xpZW50LWluaXRpYXRlZC1iYWNrY2hhbm5lbC1hdXRoZW50aWNhdGlvbi1mbG93XG4gICAgICovXG4gICAgYXN5bmMgZ2V0VG9rZW5CeUJhY2tjaGFubmVsQXV0aChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IFtlcnJvciwgcmVzcG9uc2VdID0gYXdhaXQgdGhpcy5hdXRoQ2xpZW50LmJhY2tjaGFubmVsQXV0aGVudGljYXRpb24ob3B0aW9ucyk7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWF0ZXMgdGhlIENvbm5lY3QgQWNjb3VudCBmbG93IHRvIGNvbm5lY3QgYSB0aGlyZC1wYXJ0eSBhY2NvdW50IHRvIHRoZSB1c2VyJ3MgcHJvZmlsZS5cbiAgICAgKiBJZiB0aGUgdXNlciBkb2VzIG5vdCBoYXZlIGFuIGFjdGl2ZSBzZXNzaW9uLCBhIGBDb25uZWN0QWNjb3VudEVycm9yYCBpcyB0aHJvd24uXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBmaXJzdCBhdHRlbXB0cyB0byBvYnRhaW4gYW4gYWNjZXNzIHRva2VuIHdpdGggdGhlIGBjcmVhdGU6bWU6Y29ubmVjdGVkX2FjY291bnRzYCBzY29wZVxuICAgICAqIGZvciB0aGUgTXkgQWNjb3VudCBBUEkgdG8gY3JlYXRlIGEgY29ubmVjdGVkIGFjY291bnQgZm9yIHRoZSB1c2VyLlxuICAgICAqXG4gICAgICogVGhlIHVzZXIgd2lsbCB0aGVuIGJlIHJlZGlyZWN0ZWQgdG8gYXV0aG9yaXplIHRoZSBjb25uZWN0aW9uIHdpdGggdGhlIHRoaXJkLXBhcnR5IHByb3ZpZGVyLlxuICAgICAqL1xuICAgIGFzeW5jIGNvbm5lY3RBY2NvdW50KG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuZ2V0U2Vzc2lvbigpO1xuICAgICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBDb25uZWN0QWNjb3VudEVycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBDb25uZWN0QWNjb3VudEVycm9yQ29kZXMuTUlTU0lOR19TRVNTSU9OLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiVGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhbiBhY3RpdmUgc2Vzc2lvbi5cIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2V0TXlBY2NvdW50VG9rZW5PcHRzID0ge1xuICAgICAgICAgICAgYXVkaWVuY2U6IGAke3RoaXMuaXNzdWVyfS9tZS9gLFxuICAgICAgICAgICAgc2NvcGU6IFwiY3JlYXRlOm1lOmNvbm5lY3RlZF9hY2NvdW50c1wiXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbihnZXRNeUFjY291bnRUb2tlbk9wdHMpO1xuICAgICAgICBjb25zdCBbZXJyb3IsIGNvbm5lY3RBY2NvdW50UmVzcG9uc2VdID0gYXdhaXQgdGhpcy5hdXRoQ2xpZW50LmNvbm5lY3RBY2NvdW50KHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICB0b2tlblNldDoge1xuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBhY2Nlc3NUb2tlbi50b2tlbixcbiAgICAgICAgICAgICAgICBleHBpcmVzQXQ6IGFjY2Vzc1Rva2VuLmV4cGlyZXNBdCxcbiAgICAgICAgICAgICAgICBzY29wZTogZ2V0TXlBY2NvdW50VG9rZW5PcHRzLnNjb3BlLFxuICAgICAgICAgICAgICAgIGF1ZGllbmNlOiBhY2Nlc3NUb2tlbi5hdWRpZW5jZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29ubmVjdEFjY291bnRSZXNwb25zZTtcbiAgICB9XG4gICAgd2l0aFBhZ2VBdXRoUmVxdWlyZWQoZm5Pck9wdHMsIG9wdHMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgbG9naW5Vcmw6IHRoaXMucm91dGVzLmxvZ2luXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGFwcFJvdXRlSGFuZGxlciA9IGFwcFJvdXRlSGFuZGxlckZhY3RvcnkodGhpcywgY29uZmlnKTtcbiAgICAgICAgY29uc3QgcGFnZVJvdXRlSGFuZGxlciA9IHBhZ2VSb3V0ZUhhbmRsZXJGYWN0b3J5KHRoaXMsIGNvbmZpZyk7XG4gICAgICAgIGlmICh0eXBlb2YgZm5Pck9wdHMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcmV0dXJuIGFwcFJvdXRlSGFuZGxlcihmbk9yT3B0cywgb3B0cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhZ2VSb3V0ZUhhbmRsZXIoZm5Pck9wdHMpO1xuICAgIH1cbiAgICB3aXRoQXBpQXV0aFJlcXVpcmVkKGFwaVJvdXRlKSB7XG4gICAgICAgIGNvbnN0IHBhZ2VSb3V0ZUhhbmRsZXIgPSB3aXRoQXBpQXV0aFJlcXVpcmVkLnBhZ2VSb3V0ZUhhbmRsZXJGYWN0b3J5KHRoaXMpO1xuICAgICAgICBjb25zdCBhcHBSb3V0ZUhhbmRsZXIgPSB3aXRoQXBpQXV0aFJlcXVpcmVkLmFwcFJvdXRlSGFuZGxlckZhY3RvcnkodGhpcyk7XG4gICAgICAgIHJldHVybiAocmVxLCByZXNPclBhcmFtcykgPT4ge1xuICAgICAgICAgICAgaWYgKGlzUmVxdWVzdChyZXEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwcFJvdXRlSGFuZGxlcihhcGlSb3V0ZSkocmVxLCByZXNPclBhcmFtcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGFnZVJvdXRlSGFuZGxlcihhcGlSb3V0ZSkocmVxLCByZXNPclBhcmFtcyk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jIHNhdmVUb1Nlc3Npb24oZGF0YSwgcmVxLCByZXMpIHtcbiAgICAgICAgaWYgKHJlcSAmJiByZXMpIHtcbiAgICAgICAgICAgIGlmIChyZXEgaW5zdGFuY2VvZiBOZXh0UmVxdWVzdCAmJiByZXMgaW5zdGFuY2VvZiBOZXh0UmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAvLyBtaWRkbGV3YXJlIHVzYWdlXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXNzaW9uU3RvcmUuc2V0KHJlcS5jb29raWVzLCByZXMuY29va2llcywgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBwYWdlcyByb3V0ZXIgdXNhZ2VcbiAgICAgICAgICAgICAgICBjb25zdCByZXNIZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNDb29raWVzID0gbmV3IFJlc3BvbnNlQ29va2llcyhyZXNIZWFkZXJzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYWdlc1JvdXRlclJlcyA9IHJlcztcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNlc3Npb25TdG9yZS5zZXQodGhpcy5jcmVhdGVSZXF1ZXN0Q29va2llcyhyZXEpLCByZXNDb29raWVzLCBkYXRhKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiByZXNIZWFkZXJzLmVudHJpZXMoKSkge1xuICAgICAgICAgICAgICAgICAgICBwYWdlc1JvdXRlclJlcy5zZXRIZWFkZXIoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gYXBwIHJvdXRlciB1c2FnZTogU2VydmVyIENvbXBvbmVudHMsIFNlcnZlciBBY3Rpb25zLCBSb3V0ZSBIYW5kbGVyc1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNlc3Npb25TdG9yZS5zZXQoYXdhaXQgY29va2llcygpLCBhd2FpdCBjb29raWVzKCksIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gcGVyc2lzdCB0aGUgdXBkYXRlZCB0b2tlbiBzZXQuIGBnZXRBY2Nlc3NUb2tlbigpYCB3YXMgbGlrZWx5IGNhbGxlZCBmcm9tIGEgU2VydmVyIENvbXBvbmVudCB3aGljaCBjYW5ub3Qgc2V0IGNvb2tpZXMuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgYW5kIGV4dHJhY3RzIHJlcXVpcmVkIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2xpZW50IG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsaWRhdGVkIHJlcXVpcmVkIG9wdGlvbnNcbiAgICAgKiBAdGhyb3dzIENvbmZpZ3VyYXRpb25FcnJvciBpZiBhbnkgcmVxdWlyZWQgb3B0aW9uIGlzIG1pc3NpbmdcbiAgICAgKi9cbiAgICB2YWxpZGF0ZUFuZEV4dHJhY3RSZXF1aXJlZE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICAvLyBCYXNlIHJlcXVpcmVkIG9wdGlvbnMgdGhhdCBhcmUgYWx3YXlzIG5lZWRlZFxuICAgICAgICBjb25zdCByZXF1aXJlZE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBkb21haW46IG9wdGlvbnMuZG9tYWluID8/IHByb2Nlc3MuZW52LkFVVEgwX0RPTUFJTixcbiAgICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkID8/IHByb2Nlc3MuZW52LkFVVEgwX0NMSUVOVF9JRCxcbiAgICAgICAgICAgIGFwcEJhc2VVcmw6IG9wdGlvbnMuYXBwQmFzZVVybCA/PyBwcm9jZXNzLmVudi5BUFBfQkFTRV9VUkwsXG4gICAgICAgICAgICBzZWNyZXQ6IG9wdGlvbnMuc2VjcmV0ID8/IHByb2Nlc3MuZW52LkFVVEgwX1NFQ1JFVFxuICAgICAgICB9O1xuICAgICAgICAvLyBDaGVjayBjbGllbnQgYXV0aGVudGljYXRpb24gb3B0aW9ucyAtIGVpdGhlciBjbGllbnRTZWNyZXQgT1IgY2xpZW50QXNzZXJ0aW9uU2lnbmluZ0tleSBtdXN0IGJlIHByb3ZpZGVkXG4gICAgICAgIGNvbnN0IGNsaWVudFNlY3JldCA9IG9wdGlvbnMuY2xpZW50U2VjcmV0ID8/IHByb2Nlc3MuZW52LkFVVEgwX0NMSUVOVF9TRUNSRVQ7XG4gICAgICAgIGNvbnN0IGNsaWVudEFzc2VydGlvblNpZ25pbmdLZXkgPSBvcHRpb25zLmNsaWVudEFzc2VydGlvblNpZ25pbmdLZXkgPz9cbiAgICAgICAgICAgIHByb2Nlc3MuZW52LkFVVEgwX0NMSUVOVF9BU1NFUlRJT05fU0lHTklOR19LRVk7XG4gICAgICAgIGNvbnN0IGhhc0NsaWVudEF1dGhlbnRpY2F0aW9uID0gISEoY2xpZW50U2VjcmV0IHx8IGNsaWVudEFzc2VydGlvblNpZ25pbmdLZXkpO1xuICAgICAgICBjb25zdCBtaXNzaW5nID0gT2JqZWN0LmVudHJpZXMocmVxdWlyZWRPcHRpb25zKVxuICAgICAgICAgICAgLmZpbHRlcigoWywgdmFsdWVdKSA9PiAhdmFsdWUpXG4gICAgICAgICAgICAubWFwKChba2V5XSkgPT4ga2V5KTtcbiAgICAgICAgLy8gQWRkIGNsaWVudCBhdXRoZW50aWNhdGlvbiBlcnJvciBpZiBuZWl0aGVyIG9wdGlvbiBpcyBwcm92aWRlZFxuICAgICAgICBpZiAoIWhhc0NsaWVudEF1dGhlbnRpY2F0aW9uKSB7XG4gICAgICAgICAgICBtaXNzaW5nLnB1c2goXCJjbGllbnRBdXRoZW50aWNhdGlvblwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWlzc2luZy5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIE1hcCBvZiBvcHRpb24ga2V5cyB0byB0aGVpciBleGFjdCBlbnZpcm9ubWVudCB2YXJpYWJsZSBuYW1lc1xuICAgICAgICAgICAgY29uc3QgZW52VmFyTmFtZXMgPSB7XG4gICAgICAgICAgICAgICAgZG9tYWluOiBcIkFVVEgwX0RPTUFJTlwiLFxuICAgICAgICAgICAgICAgIGNsaWVudElkOiBcIkFVVEgwX0NMSUVOVF9JRFwiLFxuICAgICAgICAgICAgICAgIGFwcEJhc2VVcmw6IFwiQVBQX0JBU0VfVVJMXCIsXG4gICAgICAgICAgICAgICAgc2VjcmV0OiBcIkFVVEgwX1NFQ1JFVFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gU3RhbmRhcmQgaW50cm8gbWVzc2FnZSBleHBsYWluaW5nIHRoZSBpc3N1ZVxuICAgICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IFwiV0FSTklORzogTm90IGFsbCByZXF1aXJlZCBvcHRpb25zIHdlcmUgcHJvdmlkZWQgd2hlbiBjcmVhdGluZyBhbiBpbnN0YW5jZSBvZiBBdXRoMENsaWVudC4gRW5zdXJlIHRvIHByb3ZpZGUgYWxsIG1pc3Npbmcgb3B0aW9ucywgZWl0aGVyIGJ5IHBhc3NpbmcgaXQgdG8gdGhlIEF1dGgwQ2xpZW50IGNvbnN0cnVjdG9yLCBvciBieSBzZXR0aW5nIHRoZSBjb3JyZXNwb25kaW5nIGVudmlyb25tZW50IHZhcmlhYmxlLlxcblwiO1xuICAgICAgICAgICAgLy8gQWRkIHNwZWNpZmljIGRldGFpbHMgZm9yIGVhY2ggbWlzc2luZyBvcHRpb25cbiAgICAgICAgICAgIG1pc3NpbmcuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gXCJjbGllbnRBdXRoZW50aWNhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPSBgTWlzc2luZzogY2xpZW50QXV0aGVudGljYXRpb246IFNldCBlaXRoZXIgQVVUSDBfQ0xJRU5UX1NFQ1JFVCBlbnYgdmFyIG9yIEFVVEgwX0NMSUVOVF9BU1NFUlRJT05fU0lHTklOR19LRVkgZW52IHZhciwgb3IgcGFzcyBjbGllbnRTZWNyZXQgb3IgY2xpZW50QXNzZXJ0aW9uU2lnbmluZ0tleSBpbiBvcHRpb25zXFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZW52VmFyTmFtZXNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz0gYE1pc3Npbmc6ICR7a2V5fTogU2V0ICR7ZW52VmFyTmFtZXNba2V5XX0gZW52IHZhciBvciBwYXNzICR7a2V5fSBpbiBvcHRpb25zXFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPSBgTWlzc2luZzogJHtrZXl9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNZXNzYWdlLnRyaW0oKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJlcGFyZSB0aGUgcmVzdWx0IG9iamVjdCB3aXRoIGFsbCB2YWxpZGF0ZWQgb3B0aW9uc1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgICAuLi5yZXF1aXJlZE9wdGlvbnMsXG4gICAgICAgICAgICBjbGllbnRTZWNyZXQsXG4gICAgICAgICAgICBjbGllbnRBc3NlcnRpb25TaWduaW5nS2V5XG4gICAgICAgIH07XG4gICAgICAgIC8vIFR5cGUtc2FmZSBhc3NpZ25tZW50IGFmdGVyIHZhbGlkYXRpb25cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNvbmZpZ3VyZWQgRmV0Y2hlciBpbnN0YW5jZSBmb3IgbWFraW5nIGF1dGhlbnRpY2F0ZWQgQVBJIHJlcXVlc3RzLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgY3JlYXRlcyBhIHNwZWNpYWxpemVkIEhUVFAgY2xpZW50IHRoYXQgaGFuZGxlczpcbiAgICAgKiAtIEF1dG9tYXRpYyBhY2Nlc3MgdG9rZW4gcmV0cmlldmFsIGFuZCBpbmplY3Rpb25cbiAgICAgKiAtIERQb1AgKERlbW9uc3RyYXRpbmcgUHJvb2Ytb2YtUG9zc2Vzc2lvbikgcHJvb2YgZ2VuZXJhdGlvbiB3aGVuIGVuYWJsZWRcbiAgICAgKiAtIFRva2VuIHJlZnJlc2ggYW5kIHNlc3Npb24gbWFuYWdlbWVudFxuICAgICAqIC0gRXJyb3IgaGFuZGxpbmcgYW5kIHJldHJ5IGxvZ2ljIGZvciBEUG9QIG5vbmNlIGVycm9yc1xuICAgICAqIC0gQmFzZSBVUkwgcmVzb2x1dGlvbiBmb3IgcmVsYXRpdmUgcmVxdWVzdHNcbiAgICAgKlxuICAgICAqIFRoZSBmZXRjaGVyIHByb3ZpZGVzIGEgaGlnaC1sZXZlbCBpbnRlcmZhY2UgZm9yIG1ha2luZyByZXF1ZXN0cyB0byBwcm90ZWN0ZWQgcmVzb3VyY2VzXG4gICAgICogd2l0aG91dCBtYW51YWxseSBoYW5kbGluZyBhdXRoZW50aWNhdGlvbiBkZXRhaWxzLlxuICAgICAqXG4gICAgICogQHRlbXBsYXRlIFRPdXRwdXQgLSBSZXNwb25zZSB0eXBlIHRoYXQgZXh0ZW5kcyB0aGUgc3RhbmRhcmQgUmVzcG9uc2UgaW50ZXJmYWNlXG4gICAgICogQHBhcmFtIHJlcSAtIFJlcXVlc3Qgb2JqZWN0IGZvciBzZXNzaW9uIGNvbnRleHQgKHJlcXVpcmVkIGZvciBQYWdlcyBSb3V0ZXIsIG9wdGlvbmFsIGZvciBBcHAgUm91dGVyKVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgZmV0Y2hlclxuICAgICAqIEBwYXJhbSBvcHRpb25zLnVzZURQb1AgLSBFbmFibGUgRFBvUCBmb3IgdGhpcyBmZXRjaGVyIGluc3RhbmNlIChvdmVycmlkZXMgZ2xvYmFsIHNldHRpbmcpXG4gICAgICogQHBhcmFtIG9wdGlvbnMuYmFzZVVybCAtIEJhc2UgVVJMIGZvciByZXNvbHZpbmcgcmVsYXRpdmUgcmVxdWVzdHNcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5nZXRBY2Nlc3NUb2tlbiAtIEN1c3RvbSBhY2Nlc3MgdG9rZW4gZmFjdG9yeSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBvcHRpb25zLmZldGNoIC0gQ3VzdG9tIGZldGNoIGltcGxlbWVudGF0aW9uXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgY29uZmlndXJlZCBGZXRjaGVyIGluc3RhbmNlXG4gICAgICogQHRocm93cyBBY2Nlc3NUb2tlbkVycm9yIHdoZW4gbm8gYWN0aXZlIHNlc3Npb24gZXhpc3RzXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBpbXBvcnQgeyBhdXRoMCB9IGZyb20gXCJAL2xpYi9hdXRoMFwiO1xuICAgICAqXG4gICAgICogY29uc3QgZmV0Y2hlciA9IGF3YWl0IGF1dGgwLmNyZWF0ZUZldGNoZXIodW5kZWZpbmVkLCB7XG4gICAgICogICBiYXNlVXJsOiBcImh0dHBzOi8vYXBpLmV4YW1wbGUuY29tXCIsXG4gICAgICogICB1c2VEUG9QOiB0cnVlXG4gICAgICogfSk7XG4gICAgICpcbiAgICAgKiBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoZXIuZmV0Y2hXaXRoQXV0aChcIi91c2Vyc1wiKTtcbiAgICAgKiBjb25zdCB1c2VycyA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIEBzZWUge0BsaW5rIEZldGNoZXJ9IGZvciBkZXRhaWxzIG9uIHVzaW5nIHRoZSByZXR1cm5lZCBmZXRjaGVyIGluc3RhbmNlXG4gICAgICogQHNlZSB7QGxpbmsgRmV0Y2hlck1pbmltYWxDb25maWd9IGZvciBhdmFpbGFibGUgY29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlRmV0Y2hlcihyZXEsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHJlcVxuICAgICAgICAgICAgPyBhd2FpdCB0aGlzLmdldFNlc3Npb24ocmVxKVxuICAgICAgICAgICAgOiBhd2FpdCB0aGlzLmdldFNlc3Npb24oKTtcbiAgICAgICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgQWNjZXNzVG9rZW5FcnJvcihBY2Nlc3NUb2tlbkVycm9yQ29kZS5NSVNTSU5HX1NFU1NJT04sIFwiVGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhbiBhY3RpdmUgc2Vzc2lvbi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2V0QWNjZXNzVG9rZW4gPSBhc3luYyAoZ2V0QWNjZXNzVG9rZW5PcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbZXJyb3IsIGdldFRva2VuU2V0UmVzcG9uc2VdID0gYXdhaXQgdGhpcy5hdXRoQ2xpZW50LmdldFRva2VuU2V0KHNlc3Npb24sIGdldEFjY2Vzc1Rva2VuT3B0aW9ucyB8fCB7fSk7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZXRUb2tlblNldFJlc3BvbnNlLnRva2VuU2V0O1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBmZXRjaGVyID0gYXdhaXQgdGhpcy5hdXRoQ2xpZW50LmZldGNoZXJGYWN0b3J5KHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBnZXRBY2Nlc3NUb2tlblxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZldGNoZXI7XG4gICAgfVxuICAgIGdldCBpc3N1ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvbWFpbi5zdGFydHNXaXRoKFwiaHR0cDovL1wiKSB8fFxuICAgICAgICAgICAgdGhpcy5kb21haW4uc3RhcnRzV2l0aChcImh0dHBzOi8vXCIpXG4gICAgICAgICAgICA/IHRoaXMuZG9tYWluXG4gICAgICAgICAgICA6IGBodHRwczovLyR7dGhpcy5kb21haW59YDtcbiAgICB9XG59XG5fQXV0aDBDbGllbnRfb3B0aW9ucyA9IG5ldyBXZWFrTWFwKCksIF9BdXRoMENsaWVudF90b2tlblJlcXVlc3RDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/client.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/cookies.js":
/*!*****************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/cookies.js ***!
  \*****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RequestCookies: () => (/* reexport safe */ _edge_runtime_cookies__WEBPACK_IMPORTED_MODULE_0__.RequestCookies),\n/* harmony export */   ResponseCookies: () => (/* reexport safe */ _edge_runtime_cookies__WEBPACK_IMPORTED_MODULE_0__.ResponseCookies),\n/* harmony export */   addCacheControlHeadersForSession: () => (/* binding */ addCacheControlHeadersForSession),\n/* harmony export */   decrypt: () => (/* binding */ decrypt),\n/* harmony export */   deleteChunkedCookie: () => (/* binding */ deleteChunkedCookie),\n/* harmony export */   deleteCookie: () => (/* binding */ deleteCookie),\n/* harmony export */   encrypt: () => (/* binding */ encrypt),\n/* harmony export */   getChunkedCookie: () => (/* binding */ getChunkedCookie),\n/* harmony export */   setChunkedCookie: () => (/* binding */ setChunkedCookie),\n/* harmony export */   sign: () => (/* binding */ sign),\n/* harmony export */   verifySigned: () => (/* binding */ verifySigned)\n/* harmony export */ });\n/* harmony import */ var _edge_runtime_cookies__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @edge-runtime/cookies */ \"(rsc)/../../node_modules/.pnpm/@edge-runtime+cookies@5.0.2/node_modules/@edge-runtime/cookies/dist/index.mjs\");\n/* harmony import */ var _panva_hkdf__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @panva/hkdf */ \"(rsc)/../../node_modules/.pnpm/@panva+hkdf@1.2.1/node_modules/@panva/hkdf/dist/node/esm/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jose */ \"(rsc)/../../node_modules/.pnpm/jose@6.1.0/node_modules/jose/dist/webapi/jwt/encrypt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jose */ \"(rsc)/../../node_modules/.pnpm/jose@6.1.0/node_modules/jose/dist/webapi/jwt/decrypt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/../../node_modules/.pnpm/jose@6.1.0/node_modules/jose/dist/webapi/util/base64url.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(rsc)/../../node_modules/.pnpm/jose@6.1.0/node_modules/jose/dist/webapi/jws/flattened/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! jose */ \"(rsc)/../../node_modules/.pnpm/jose@6.1.0/node_modules/jose/dist/webapi/jws/flattened/sign.js\");\n\n\n\nconst ENC = \"A256GCM\";\nconst ALG = \"dir\";\nconst DIGEST = \"sha256\";\nconst BYTE_LENGTH = 32;\nconst ENCRYPTION_INFO = \"JWE CEK\";\nasync function encrypt(payload, secret, expiration, additionalHeaders) {\n    const encryptionSecret = await (0,_panva_hkdf__WEBPACK_IMPORTED_MODULE_1__.hkdf)(DIGEST, secret, \"\", ENCRYPTION_INFO, BYTE_LENGTH);\n    const encryptedCookie = await new jose__WEBPACK_IMPORTED_MODULE_2__.EncryptJWT(payload)\n        .setProtectedHeader({ enc: ENC, alg: ALG, ...additionalHeaders })\n        .setExpirationTime(expiration)\n        .encrypt(encryptionSecret);\n    return encryptedCookie.toString();\n}\nasync function decrypt(cookieValue, secret, options) {\n    try {\n        const encryptionSecret = await (0,_panva_hkdf__WEBPACK_IMPORTED_MODULE_1__.hkdf)(DIGEST, secret, \"\", ENCRYPTION_INFO, BYTE_LENGTH);\n        const cookie = await jose__WEBPACK_IMPORTED_MODULE_3__.jwtDecrypt(cookieValue, encryptionSecret, {\n            ...options,\n            ...{ clockTolerance: 15 }\n        });\n        return cookie;\n    }\n    catch (e) {\n        if (e.code === \"ERR_JWT_EXPIRED\") {\n            return null;\n        }\n        throw e;\n    }\n}\n/**\n * Derive a signing key from a given secret.\n * This method is used solely to migrate signed, legacy cookies to the new encrypted cookie format (v4+).\n */\nconst signingSecret = (secret) => (0,_panva_hkdf__WEBPACK_IMPORTED_MODULE_1__.hkdf)(\"sha256\", secret, \"\", \"JWS Cookie Signing\", BYTE_LENGTH);\n/**\n * Verify a signed cookie. If the cookie is valid, the value is returned. Otherwise, undefined is returned.\n * This method is used solely to migrate signed, legacy cookies to the new encrypted cookie format (v4+).\n */\nasync function verifySigned(k, v, secret) {\n    if (!v) {\n        return undefined;\n    }\n    const [value, signature] = v.split(\".\");\n    const flattenedJWS = {\n        protected: jose__WEBPACK_IMPORTED_MODULE_4__.encode(JSON.stringify({ alg: \"HS256\", b64: false, crit: [\"b64\"] })),\n        payload: `${k}=${value}`,\n        signature\n    };\n    const key = await signingSecret(secret);\n    try {\n        await jose__WEBPACK_IMPORTED_MODULE_5__.flattenedVerify(flattenedJWS, key, {\n            algorithms: [\"HS256\"]\n        });\n        return value;\n    }\n    catch (e) {\n        return undefined;\n    }\n}\n/**\n * Sign a cookie value using a secret.\n * This method is used solely to migrate signed, legacy cookies to the new encrypted cookie format (v4+).\n */\nasync function sign(name, value, secret) {\n    const key = await signingSecret(secret);\n    const { signature } = await new jose__WEBPACK_IMPORTED_MODULE_6__.FlattenedSign(new TextEncoder().encode(`${name}=${value}`))\n        .setProtectedHeader({ alg: \"HS256\", b64: false, crit: [\"b64\"] })\n        .sign(key);\n    return `${value}.${signature}`;\n}\n\n\n// Chunked cookies Configuration\nconst MAX_CHUNK_SIZE = 3500; // Slightly under 4KB\nconst CHUNK_PREFIX = \"__\";\nconst CHUNK_INDEX_REGEX = new RegExp(`${CHUNK_PREFIX}(\\\\d+)$`);\nconst LEGACY_CHUNK_INDEX_REGEX = /\\.(\\d+)$/;\n/**\n * Retrieves the index of a cookie based on its name.\n * Supports current format `{name}__{index}` and legacy format `{name}.{index}`.\n *\n * @param name - The name of the cookie.\n * @returns The index of the cookie. Returns undefined if no index is found.\n */\nconst getChunkedCookieIndex = (name, isLegacyCookie) => {\n    const match = isLegacyCookie\n        ? LEGACY_CHUNK_INDEX_REGEX.exec(name)\n        : CHUNK_INDEX_REGEX.exec(name);\n    if (!match) {\n        return undefined;\n    }\n    return parseInt(match[1], 10);\n};\n/**\n * Retrieves all cookies from the request that have names starting with a specific prefix.\n *\n * @param reqCookies - The cookies from the request.\n * @param name - The base name of the cookies to retrieve.\n * @returns An array of cookies that have names starting with the specified prefix.\n */\nconst getAllChunkedCookies = (reqCookies, name, isLegacyCookie) => {\n    const chunkedCookieRegex = new RegExp(isLegacyCookie\n        ? `^${name}${LEGACY_CHUNK_INDEX_REGEX.source}$`\n        : `^${name}${CHUNK_PREFIX}\\\\d+$`);\n    return reqCookies\n        .getAll()\n        .filter((cookie) => chunkedCookieRegex.test(cookie.name));\n};\n/**\n * Sets a cookie with the given name and value, splitting it into chunks if necessary.\n *\n * If the value exceeds the maximum chunk size, it will be split into multiple cookies\n * with names suffixed by a chunk index.\n *\n * @param name - The name of the cookie.\n * @param value - The value to be stored in the cookie.\n * @param options - Options for setting the cookie.\n * @param reqCookies - The request cookies object, used to enable read-after-write in the same request for middleware.\n * @param resCookies - The response cookies object, used to set the cookies in the response.\n */\nfunction setChunkedCookie(name, value, options, reqCookies, resCookies) {\n    const { transient, ...restOptions } = options;\n    const finalOptions = { ...restOptions };\n    if (transient) {\n        delete finalOptions.maxAge;\n    }\n    const valueBytes = new TextEncoder().encode(value).length;\n    // If value fits in a single cookie, set it directly\n    if (valueBytes <= MAX_CHUNK_SIZE) {\n        resCookies.set(name, value, finalOptions);\n        // to enable read-after-write in the same request for middleware\n        reqCookies.set(name, value);\n        // When we are writing a non-chunked cookie, we should remove the chunked cookies\n        // Remove any previously stored chunks for this cookie name\n        getAllChunkedCookies(reqCookies, name).forEach((cookieChunk) => {\n            deleteCookie(resCookies, cookieChunk.name, {\n                path: finalOptions.path,\n                domain: finalOptions.domain\n            });\n            reqCookies.delete(cookieChunk.name);\n        });\n        return;\n    }\n    // Split value into chunks\n    let position = 0;\n    let chunkIndex = 0;\n    while (position < value.length) {\n        const chunk = value.slice(position, position + MAX_CHUNK_SIZE);\n        const chunkName = `${name}${CHUNK_PREFIX}${chunkIndex}`;\n        resCookies.set(chunkName, chunk, finalOptions);\n        // to enable read-after-write in the same request for middleware\n        reqCookies.set(chunkName, chunk);\n        position += MAX_CHUNK_SIZE;\n        chunkIndex++;\n    }\n    // clear unused chunks\n    const chunks = getAllChunkedCookies(reqCookies, name);\n    const chunksToRemove = chunks.length - chunkIndex;\n    if (chunksToRemove > 0) {\n        for (let i = 0; i < chunksToRemove; i++) {\n            const chunkIndexToRemove = chunkIndex + i;\n            const chunkName = `${name}${CHUNK_PREFIX}${chunkIndexToRemove}`;\n            deleteCookie(resCookies, chunkName, {\n                path: finalOptions.path,\n                domain: finalOptions.domain\n            });\n            reqCookies.delete(chunkName);\n        }\n    }\n    // When we have written chunked cookies, we should remove the non-chunked cookie\n    deleteCookie(resCookies, name, {\n        path: finalOptions.path,\n        domain: finalOptions.domain\n    });\n    reqCookies.delete(name);\n}\n/**\n * Retrieves a chunked cookie by its name from the request cookies.\n * If a regular cookie with the given name exists, it returns its value.\n * Otherwise, it attempts to retrieve and combine all chunks of the cookie.\n *\n * @param name - The name of the cookie to retrieve.\n * @param reqCookies - The request cookies object.\n * @returns The combined value of the chunked cookie, or `undefined` if the cookie does not exist or is incomplete.\n */\nfunction getChunkedCookie(name, reqCookies, isLegacyCookie) {\n    // Check if regular cookie exists\n    const cookie = reqCookies.get(name);\n    if (cookie?.value) {\n        // If the base cookie exists, return its value (handles non-chunked case)\n        return cookie.value;\n    }\n    const chunks = getAllChunkedCookies(reqCookies, name, isLegacyCookie).sort(\n    // Extract index from cookie name and sort numerically\n    (first, second) => {\n        return (getChunkedCookieIndex(first.name, isLegacyCookie) -\n            getChunkedCookieIndex(second.name, isLegacyCookie));\n    });\n    if (chunks.length === 0) {\n        return undefined;\n    }\n    // Validate sequence integrity - check for missing chunks\n    const highestIndex = getChunkedCookieIndex(chunks[chunks.length - 1].name, isLegacyCookie);\n    if (chunks.length !== highestIndex + 1) {\n        console.warn(`Incomplete chunked cookie '${name}': Found ${chunks.length} chunks, expected ${highestIndex + 1}`);\n        return undefined;\n    }\n    // Combine all chunks\n    return chunks.map((c) => c.value).join(\"\");\n}\n/**\n * Deletes a chunked cookie and all its associated chunks from the response cookies.\n *\n * @param name - The name of the main cookie to delete.\n * @param reqCookies - The request cookies object containing all cookies from the request.\n * @param resCookies - The response cookies object to manipulate the cookies in the response.\n * @param isLegacyCookie - Whether to handle legacy cookie format.\n * @param options - Options for cookie deletion including domain and path.\n */\nfunction deleteChunkedCookie(name, reqCookies, resCookies, isLegacyCookie, options) {\n    // Delete main cookie\n    deleteCookie(resCookies, name, options);\n    getAllChunkedCookies(reqCookies, name, isLegacyCookie).forEach((cookie) => {\n        deleteCookie(resCookies, cookie.name, options); // Delete each filtered cookie\n    });\n}\n/**\n * Unconditionally adds strict cache-control headers to the response.\n *\n * This ensures the response is not cached by CDNs or other shared caches.\n * It is now the caller's responsibility to decide when to call this function.\n *\n * Usage:\n * Call this function whenever a `Set-Cookie` header is being written\n * for session management or any other sensitive data that must not be cached.\n */\nfunction addCacheControlHeadersForSession(res) {\n    res.headers.set(\"Cache-Control\", \"private, no-cache, no-store, must-revalidate, max-age=0\");\n    res.headers.set(\"Pragma\", \"no-cache\");\n    res.headers.set(\"Expires\", \"0\");\n}\n/**\n * Deletes a cookie from the response with optional domain and path specifications.\n *\n * @param resCookies - The response cookies object to manipulate.\n * @param name - The name of the cookie to delete.\n * @param options - Optional domain and path settings for cookie deletion.\n */\nfunction deleteCookie(resCookies, name, options) {\n    const deleteOptions = {\n        maxAge: 0 // Ensure the cookie is deleted immediately\n    };\n    if (options?.domain) {\n        deleteOptions.domain = options.domain;\n    }\n    if (options?.path) {\n        deleteOptions.path = options.path;\n    }\n    resCookies.set(name, \"\", deleteOptions);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9jb29raWVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RTtBQUNyQztBQUNOO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLG1DQUFtQyxpREFBSTtBQUN2QyxzQ0FBc0MsNENBQWU7QUFDckQsOEJBQThCLDBDQUEwQztBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSx1Q0FBdUMsaURBQUk7QUFDM0MsNkJBQTZCLDRDQUFlO0FBQzVDO0FBQ0EsaUJBQWlCO0FBQ2pCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxpREFBSTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix3Q0FBcUIsa0JBQWtCLHlDQUF5QztBQUNuRyxvQkFBb0IsRUFBRSxHQUFHLE1BQU07QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGlEQUFvQjtBQUNsQztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxZQUFZLFlBQVksWUFBWSwrQ0FBa0IsNkJBQTZCLEtBQUssR0FBRyxNQUFNO0FBQ2pHLDhCQUE4Qix5Q0FBeUM7QUFDdkU7QUFDQSxjQUFjLE1BQU0sR0FBRyxVQUFVO0FBQ2pDO0FBQzJCO0FBQ0Q7QUFDMUI7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSx3Q0FBd0MsYUFBYTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsS0FBSyxHQUFHLE1BQU0sc0JBQXNCLEtBQUssRUFBRSxNQUFNO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxLQUFLLEVBQUUsZ0NBQWdDO0FBQ3JELGNBQWMsS0FBSyxFQUFFLGFBQWE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVksNEJBQTRCO0FBQ3hDLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsS0FBSyxFQUFFLGFBQWEsRUFBRSxXQUFXO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLG9CQUFvQjtBQUM1QztBQUNBLGlDQUFpQyxLQUFLLEVBQUUsYUFBYSxFQUFFLG1CQUFtQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsS0FBSyxXQUFXLGVBQWUsbUJBQW1CLGlCQUFpQjtBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taXRzdXlvc2hpL0Rlc2t0b3AvYXV0aC10ZXN0L25vZGVfbW9kdWxlcy8ucG5wbS9AYXV0aDArbmV4dGpzLWF1dGgwQDQuMTEuMF9uZXh0QDE2LjAuMF9AYmFiZWwrY29yZUA3LjI4LjVfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfYjg5ZmQ3NjFlMmIxMDM4NTlhMjkxYWU5YWMwNDVkNTUvbm9kZV9tb2R1bGVzL0BhdXRoMC9uZXh0anMtYXV0aDAvZGlzdC9zZXJ2ZXIvY29va2llcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0Q29va2llcywgUmVzcG9uc2VDb29raWVzIH0gZnJvbSBcIkBlZGdlLXJ1bnRpbWUvY29va2llc1wiO1xuaW1wb3J0IHsgaGtkZiB9IGZyb20gXCJAcGFudmEvaGtkZlwiO1xuaW1wb3J0ICogYXMgam9zZSBmcm9tIFwiam9zZVwiO1xuY29uc3QgRU5DID0gXCJBMjU2R0NNXCI7XG5jb25zdCBBTEcgPSBcImRpclwiO1xuY29uc3QgRElHRVNUID0gXCJzaGEyNTZcIjtcbmNvbnN0IEJZVEVfTEVOR1RIID0gMzI7XG5jb25zdCBFTkNSWVBUSU9OX0lORk8gPSBcIkpXRSBDRUtcIjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbmNyeXB0KHBheWxvYWQsIHNlY3JldCwgZXhwaXJhdGlvbiwgYWRkaXRpb25hbEhlYWRlcnMpIHtcbiAgICBjb25zdCBlbmNyeXB0aW9uU2VjcmV0ID0gYXdhaXQgaGtkZihESUdFU1QsIHNlY3JldCwgXCJcIiwgRU5DUllQVElPTl9JTkZPLCBCWVRFX0xFTkdUSCk7XG4gICAgY29uc3QgZW5jcnlwdGVkQ29va2llID0gYXdhaXQgbmV3IGpvc2UuRW5jcnlwdEpXVChwYXlsb2FkKVxuICAgICAgICAuc2V0UHJvdGVjdGVkSGVhZGVyKHsgZW5jOiBFTkMsIGFsZzogQUxHLCAuLi5hZGRpdGlvbmFsSGVhZGVycyB9KVxuICAgICAgICAuc2V0RXhwaXJhdGlvblRpbWUoZXhwaXJhdGlvbilcbiAgICAgICAgLmVuY3J5cHQoZW5jcnlwdGlvblNlY3JldCk7XG4gICAgcmV0dXJuIGVuY3J5cHRlZENvb2tpZS50b1N0cmluZygpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlY3J5cHQoY29va2llVmFsdWUsIHNlY3JldCwgb3B0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVuY3J5cHRpb25TZWNyZXQgPSBhd2FpdCBoa2RmKERJR0VTVCwgc2VjcmV0LCBcIlwiLCBFTkNSWVBUSU9OX0lORk8sIEJZVEVfTEVOR1RIKTtcbiAgICAgICAgY29uc3QgY29va2llID0gYXdhaXQgam9zZS5qd3REZWNyeXB0KGNvb2tpZVZhbHVlLCBlbmNyeXB0aW9uU2VjcmV0LCB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgLi4ueyBjbG9ja1RvbGVyYW5jZTogMTUgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNvb2tpZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUuY29kZSA9PT0gXCJFUlJfSldUX0VYUElSRURcIikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZTtcbiAgICB9XG59XG4vKipcbiAqIERlcml2ZSBhIHNpZ25pbmcga2V5IGZyb20gYSBnaXZlbiBzZWNyZXQuXG4gKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHNvbGVseSB0byBtaWdyYXRlIHNpZ25lZCwgbGVnYWN5IGNvb2tpZXMgdG8gdGhlIG5ldyBlbmNyeXB0ZWQgY29va2llIGZvcm1hdCAodjQrKS5cbiAqL1xuY29uc3Qgc2lnbmluZ1NlY3JldCA9IChzZWNyZXQpID0+IGhrZGYoXCJzaGEyNTZcIiwgc2VjcmV0LCBcIlwiLCBcIkpXUyBDb29raWUgU2lnbmluZ1wiLCBCWVRFX0xFTkdUSCk7XG4vKipcbiAqIFZlcmlmeSBhIHNpZ25lZCBjb29raWUuIElmIHRoZSBjb29raWUgaXMgdmFsaWQsIHRoZSB2YWx1ZSBpcyByZXR1cm5lZC4gT3RoZXJ3aXNlLCB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG4gKiBUaGlzIG1ldGhvZCBpcyB1c2VkIHNvbGVseSB0byBtaWdyYXRlIHNpZ25lZCwgbGVnYWN5IGNvb2tpZXMgdG8gdGhlIG5ldyBlbmNyeXB0ZWQgY29va2llIGZvcm1hdCAodjQrKS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmeVNpZ25lZChrLCB2LCBzZWNyZXQpIHtcbiAgICBpZiAoIXYpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgY29uc3QgW3ZhbHVlLCBzaWduYXR1cmVdID0gdi5zcGxpdChcIi5cIik7XG4gICAgY29uc3QgZmxhdHRlbmVkSldTID0ge1xuICAgICAgICBwcm90ZWN0ZWQ6IGpvc2UuYmFzZTY0dXJsLmVuY29kZShKU09OLnN0cmluZ2lmeSh7IGFsZzogXCJIUzI1NlwiLCBiNjQ6IGZhbHNlLCBjcml0OiBbXCJiNjRcIl0gfSkpLFxuICAgICAgICBwYXlsb2FkOiBgJHtrfT0ke3ZhbHVlfWAsXG4gICAgICAgIHNpZ25hdHVyZVxuICAgIH07XG4gICAgY29uc3Qga2V5ID0gYXdhaXQgc2lnbmluZ1NlY3JldChzZWNyZXQpO1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGpvc2UuZmxhdHRlbmVkVmVyaWZ5KGZsYXR0ZW5lZEpXUywga2V5LCB7XG4gICAgICAgICAgICBhbGdvcml0aG1zOiBbXCJIUzI1NlwiXVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8qKlxuICogU2lnbiBhIGNvb2tpZSB2YWx1ZSB1c2luZyBhIHNlY3JldC5cbiAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgc29sZWx5IHRvIG1pZ3JhdGUgc2lnbmVkLCBsZWdhY3kgY29va2llcyB0byB0aGUgbmV3IGVuY3J5cHRlZCBjb29raWUgZm9ybWF0ICh2NCspLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnbihuYW1lLCB2YWx1ZSwgc2VjcmV0KSB7XG4gICAgY29uc3Qga2V5ID0gYXdhaXQgc2lnbmluZ1NlY3JldChzZWNyZXQpO1xuICAgIGNvbnN0IHsgc2lnbmF0dXJlIH0gPSBhd2FpdCBuZXcgam9zZS5GbGF0dGVuZWRTaWduKG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShgJHtuYW1lfT0ke3ZhbHVlfWApKVxuICAgICAgICAuc2V0UHJvdGVjdGVkSGVhZGVyKHsgYWxnOiBcIkhTMjU2XCIsIGI2NDogZmFsc2UsIGNyaXQ6IFtcImI2NFwiXSB9KVxuICAgICAgICAuc2lnbihrZXkpO1xuICAgIHJldHVybiBgJHt2YWx1ZX0uJHtzaWduYXR1cmV9YDtcbn1cbmV4cG9ydCB7IFJlc3BvbnNlQ29va2llcyB9O1xuZXhwb3J0IHsgUmVxdWVzdENvb2tpZXMgfTtcbi8vIENodW5rZWQgY29va2llcyBDb25maWd1cmF0aW9uXG5jb25zdCBNQVhfQ0hVTktfU0laRSA9IDM1MDA7IC8vIFNsaWdodGx5IHVuZGVyIDRLQlxuY29uc3QgQ0hVTktfUFJFRklYID0gXCJfX1wiO1xuY29uc3QgQ0hVTktfSU5ERVhfUkVHRVggPSBuZXcgUmVnRXhwKGAke0NIVU5LX1BSRUZJWH0oXFxcXGQrKSRgKTtcbmNvbnN0IExFR0FDWV9DSFVOS19JTkRFWF9SRUdFWCA9IC9cXC4oXFxkKykkLztcbi8qKlxuICogUmV0cmlldmVzIHRoZSBpbmRleCBvZiBhIGNvb2tpZSBiYXNlZCBvbiBpdHMgbmFtZS5cbiAqIFN1cHBvcnRzIGN1cnJlbnQgZm9ybWF0IGB7bmFtZX1fX3tpbmRleH1gIGFuZCBsZWdhY3kgZm9ybWF0IGB7bmFtZX0ue2luZGV4fWAuXG4gKlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgY29va2llLlxuICogQHJldHVybnMgVGhlIGluZGV4IG9mIHRoZSBjb29raWUuIFJldHVybnMgdW5kZWZpbmVkIGlmIG5vIGluZGV4IGlzIGZvdW5kLlxuICovXG5jb25zdCBnZXRDaHVua2VkQ29va2llSW5kZXggPSAobmFtZSwgaXNMZWdhY3lDb29raWUpID0+IHtcbiAgICBjb25zdCBtYXRjaCA9IGlzTGVnYWN5Q29va2llXG4gICAgICAgID8gTEVHQUNZX0NIVU5LX0lOREVYX1JFR0VYLmV4ZWMobmFtZSlcbiAgICAgICAgOiBDSFVOS19JTkRFWF9SRUdFWC5leGVjKG5hbWUpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG59O1xuLyoqXG4gKiBSZXRyaWV2ZXMgYWxsIGNvb2tpZXMgZnJvbSB0aGUgcmVxdWVzdCB0aGF0IGhhdmUgbmFtZXMgc3RhcnRpbmcgd2l0aCBhIHNwZWNpZmljIHByZWZpeC5cbiAqXG4gKiBAcGFyYW0gcmVxQ29va2llcyAtIFRoZSBjb29raWVzIGZyb20gdGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBiYXNlIG5hbWUgb2YgdGhlIGNvb2tpZXMgdG8gcmV0cmlldmUuXG4gKiBAcmV0dXJucyBBbiBhcnJheSBvZiBjb29raWVzIHRoYXQgaGF2ZSBuYW1lcyBzdGFydGluZyB3aXRoIHRoZSBzcGVjaWZpZWQgcHJlZml4LlxuICovXG5jb25zdCBnZXRBbGxDaHVua2VkQ29va2llcyA9IChyZXFDb29raWVzLCBuYW1lLCBpc0xlZ2FjeUNvb2tpZSkgPT4ge1xuICAgIGNvbnN0IGNodW5rZWRDb29raWVSZWdleCA9IG5ldyBSZWdFeHAoaXNMZWdhY3lDb29raWVcbiAgICAgICAgPyBgXiR7bmFtZX0ke0xFR0FDWV9DSFVOS19JTkRFWF9SRUdFWC5zb3VyY2V9JGBcbiAgICAgICAgOiBgXiR7bmFtZX0ke0NIVU5LX1BSRUZJWH1cXFxcZCskYCk7XG4gICAgcmV0dXJuIHJlcUNvb2tpZXNcbiAgICAgICAgLmdldEFsbCgpXG4gICAgICAgIC5maWx0ZXIoKGNvb2tpZSkgPT4gY2h1bmtlZENvb2tpZVJlZ2V4LnRlc3QoY29va2llLm5hbWUpKTtcbn07XG4vKipcbiAqIFNldHMgYSBjb29raWUgd2l0aCB0aGUgZ2l2ZW4gbmFtZSBhbmQgdmFsdWUsIHNwbGl0dGluZyBpdCBpbnRvIGNodW5rcyBpZiBuZWNlc3NhcnkuXG4gKlxuICogSWYgdGhlIHZhbHVlIGV4Y2VlZHMgdGhlIG1heGltdW0gY2h1bmsgc2l6ZSwgaXQgd2lsbCBiZSBzcGxpdCBpbnRvIG11bHRpcGxlIGNvb2tpZXNcbiAqIHdpdGggbmFtZXMgc3VmZml4ZWQgYnkgYSBjaHVuayBpbmRleC5cbiAqXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBjb29raWUuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gYmUgc3RvcmVkIGluIHRoZSBjb29raWUuXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbnMgZm9yIHNldHRpbmcgdGhlIGNvb2tpZS5cbiAqIEBwYXJhbSByZXFDb29raWVzIC0gVGhlIHJlcXVlc3QgY29va2llcyBvYmplY3QsIHVzZWQgdG8gZW5hYmxlIHJlYWQtYWZ0ZXItd3JpdGUgaW4gdGhlIHNhbWUgcmVxdWVzdCBmb3IgbWlkZGxld2FyZS5cbiAqIEBwYXJhbSByZXNDb29raWVzIC0gVGhlIHJlc3BvbnNlIGNvb2tpZXMgb2JqZWN0LCB1c2VkIHRvIHNldCB0aGUgY29va2llcyBpbiB0aGUgcmVzcG9uc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDaHVua2VkQ29va2llKG5hbWUsIHZhbHVlLCBvcHRpb25zLCByZXFDb29raWVzLCByZXNDb29raWVzKSB7XG4gICAgY29uc3QgeyB0cmFuc2llbnQsIC4uLnJlc3RPcHRpb25zIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IGZpbmFsT3B0aW9ucyA9IHsgLi4ucmVzdE9wdGlvbnMgfTtcbiAgICBpZiAodHJhbnNpZW50KSB7XG4gICAgICAgIGRlbGV0ZSBmaW5hbE9wdGlvbnMubWF4QWdlO1xuICAgIH1cbiAgICBjb25zdCB2YWx1ZUJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHZhbHVlKS5sZW5ndGg7XG4gICAgLy8gSWYgdmFsdWUgZml0cyBpbiBhIHNpbmdsZSBjb29raWUsIHNldCBpdCBkaXJlY3RseVxuICAgIGlmICh2YWx1ZUJ5dGVzIDw9IE1BWF9DSFVOS19TSVpFKSB7XG4gICAgICAgIHJlc0Nvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCBmaW5hbE9wdGlvbnMpO1xuICAgICAgICAvLyB0byBlbmFibGUgcmVhZC1hZnRlci13cml0ZSBpbiB0aGUgc2FtZSByZXF1ZXN0IGZvciBtaWRkbGV3YXJlXG4gICAgICAgIHJlcUNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlKTtcbiAgICAgICAgLy8gV2hlbiB3ZSBhcmUgd3JpdGluZyBhIG5vbi1jaHVua2VkIGNvb2tpZSwgd2Ugc2hvdWxkIHJlbW92ZSB0aGUgY2h1bmtlZCBjb29raWVzXG4gICAgICAgIC8vIFJlbW92ZSBhbnkgcHJldmlvdXNseSBzdG9yZWQgY2h1bmtzIGZvciB0aGlzIGNvb2tpZSBuYW1lXG4gICAgICAgIGdldEFsbENodW5rZWRDb29raWVzKHJlcUNvb2tpZXMsIG5hbWUpLmZvckVhY2goKGNvb2tpZUNodW5rKSA9PiB7XG4gICAgICAgICAgICBkZWxldGVDb29raWUocmVzQ29va2llcywgY29va2llQ2h1bmsubmFtZSwge1xuICAgICAgICAgICAgICAgIHBhdGg6IGZpbmFsT3B0aW9ucy5wYXRoLFxuICAgICAgICAgICAgICAgIGRvbWFpbjogZmluYWxPcHRpb25zLmRvbWFpblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXFDb29raWVzLmRlbGV0ZShjb29raWVDaHVuay5uYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gU3BsaXQgdmFsdWUgaW50byBjaHVua3NcbiAgICBsZXQgcG9zaXRpb24gPSAwO1xuICAgIGxldCBjaHVua0luZGV4ID0gMDtcbiAgICB3aGlsZSAocG9zaXRpb24gPCB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgY2h1bmsgPSB2YWx1ZS5zbGljZShwb3NpdGlvbiwgcG9zaXRpb24gKyBNQVhfQ0hVTktfU0laRSk7XG4gICAgICAgIGNvbnN0IGNodW5rTmFtZSA9IGAke25hbWV9JHtDSFVOS19QUkVGSVh9JHtjaHVua0luZGV4fWA7XG4gICAgICAgIHJlc0Nvb2tpZXMuc2V0KGNodW5rTmFtZSwgY2h1bmssIGZpbmFsT3B0aW9ucyk7XG4gICAgICAgIC8vIHRvIGVuYWJsZSByZWFkLWFmdGVyLXdyaXRlIGluIHRoZSBzYW1lIHJlcXVlc3QgZm9yIG1pZGRsZXdhcmVcbiAgICAgICAgcmVxQ29va2llcy5zZXQoY2h1bmtOYW1lLCBjaHVuayk7XG4gICAgICAgIHBvc2l0aW9uICs9IE1BWF9DSFVOS19TSVpFO1xuICAgICAgICBjaHVua0luZGV4Kys7XG4gICAgfVxuICAgIC8vIGNsZWFyIHVudXNlZCBjaHVua3NcbiAgICBjb25zdCBjaHVua3MgPSBnZXRBbGxDaHVua2VkQ29va2llcyhyZXFDb29raWVzLCBuYW1lKTtcbiAgICBjb25zdCBjaHVua3NUb1JlbW92ZSA9IGNodW5rcy5sZW5ndGggLSBjaHVua0luZGV4O1xuICAgIGlmIChjaHVua3NUb1JlbW92ZSA+IDApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaHVua3NUb1JlbW92ZTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjaHVua0luZGV4VG9SZW1vdmUgPSBjaHVua0luZGV4ICsgaTtcbiAgICAgICAgICAgIGNvbnN0IGNodW5rTmFtZSA9IGAke25hbWV9JHtDSFVOS19QUkVGSVh9JHtjaHVua0luZGV4VG9SZW1vdmV9YDtcbiAgICAgICAgICAgIGRlbGV0ZUNvb2tpZShyZXNDb29raWVzLCBjaHVua05hbWUsIHtcbiAgICAgICAgICAgICAgICBwYXRoOiBmaW5hbE9wdGlvbnMucGF0aCxcbiAgICAgICAgICAgICAgICBkb21haW46IGZpbmFsT3B0aW9ucy5kb21haW5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVxQ29va2llcy5kZWxldGUoY2h1bmtOYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBXaGVuIHdlIGhhdmUgd3JpdHRlbiBjaHVua2VkIGNvb2tpZXMsIHdlIHNob3VsZCByZW1vdmUgdGhlIG5vbi1jaHVua2VkIGNvb2tpZVxuICAgIGRlbGV0ZUNvb2tpZShyZXNDb29raWVzLCBuYW1lLCB7XG4gICAgICAgIHBhdGg6IGZpbmFsT3B0aW9ucy5wYXRoLFxuICAgICAgICBkb21haW46IGZpbmFsT3B0aW9ucy5kb21haW5cbiAgICB9KTtcbiAgICByZXFDb29raWVzLmRlbGV0ZShuYW1lKTtcbn1cbi8qKlxuICogUmV0cmlldmVzIGEgY2h1bmtlZCBjb29raWUgYnkgaXRzIG5hbWUgZnJvbSB0aGUgcmVxdWVzdCBjb29raWVzLlxuICogSWYgYSByZWd1bGFyIGNvb2tpZSB3aXRoIHRoZSBnaXZlbiBuYW1lIGV4aXN0cywgaXQgcmV0dXJucyBpdHMgdmFsdWUuXG4gKiBPdGhlcndpc2UsIGl0IGF0dGVtcHRzIHRvIHJldHJpZXZlIGFuZCBjb21iaW5lIGFsbCBjaHVua3Mgb2YgdGhlIGNvb2tpZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBjb29raWUgdG8gcmV0cmlldmUuXG4gKiBAcGFyYW0gcmVxQ29va2llcyAtIFRoZSByZXF1ZXN0IGNvb2tpZXMgb2JqZWN0LlxuICogQHJldHVybnMgVGhlIGNvbWJpbmVkIHZhbHVlIG9mIHRoZSBjaHVua2VkIGNvb2tpZSwgb3IgYHVuZGVmaW5lZGAgaWYgdGhlIGNvb2tpZSBkb2VzIG5vdCBleGlzdCBvciBpcyBpbmNvbXBsZXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2h1bmtlZENvb2tpZShuYW1lLCByZXFDb29raWVzLCBpc0xlZ2FjeUNvb2tpZSkge1xuICAgIC8vIENoZWNrIGlmIHJlZ3VsYXIgY29va2llIGV4aXN0c1xuICAgIGNvbnN0IGNvb2tpZSA9IHJlcUNvb2tpZXMuZ2V0KG5hbWUpO1xuICAgIGlmIChjb29raWU/LnZhbHVlKSB7XG4gICAgICAgIC8vIElmIHRoZSBiYXNlIGNvb2tpZSBleGlzdHMsIHJldHVybiBpdHMgdmFsdWUgKGhhbmRsZXMgbm9uLWNodW5rZWQgY2FzZSlcbiAgICAgICAgcmV0dXJuIGNvb2tpZS52YWx1ZTtcbiAgICB9XG4gICAgY29uc3QgY2h1bmtzID0gZ2V0QWxsQ2h1bmtlZENvb2tpZXMocmVxQ29va2llcywgbmFtZSwgaXNMZWdhY3lDb29raWUpLnNvcnQoXG4gICAgLy8gRXh0cmFjdCBpbmRleCBmcm9tIGNvb2tpZSBuYW1lIGFuZCBzb3J0IG51bWVyaWNhbGx5XG4gICAgKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICAgICAgcmV0dXJuIChnZXRDaHVua2VkQ29va2llSW5kZXgoZmlyc3QubmFtZSwgaXNMZWdhY3lDb29raWUpIC1cbiAgICAgICAgICAgIGdldENodW5rZWRDb29raWVJbmRleChzZWNvbmQubmFtZSwgaXNMZWdhY3lDb29raWUpKTtcbiAgICB9KTtcbiAgICBpZiAoY2h1bmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBWYWxpZGF0ZSBzZXF1ZW5jZSBpbnRlZ3JpdHkgLSBjaGVjayBmb3IgbWlzc2luZyBjaHVua3NcbiAgICBjb25zdCBoaWdoZXN0SW5kZXggPSBnZXRDaHVua2VkQ29va2llSW5kZXgoY2h1bmtzW2NodW5rcy5sZW5ndGggLSAxXS5uYW1lLCBpc0xlZ2FjeUNvb2tpZSk7XG4gICAgaWYgKGNodW5rcy5sZW5ndGggIT09IGhpZ2hlc3RJbmRleCArIDEpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBJbmNvbXBsZXRlIGNodW5rZWQgY29va2llICcke25hbWV9JzogRm91bmQgJHtjaHVua3MubGVuZ3RofSBjaHVua3MsIGV4cGVjdGVkICR7aGlnaGVzdEluZGV4ICsgMX1gKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgLy8gQ29tYmluZSBhbGwgY2h1bmtzXG4gICAgcmV0dXJuIGNodW5rcy5tYXAoKGMpID0+IGMudmFsdWUpLmpvaW4oXCJcIik7XG59XG4vKipcbiAqIERlbGV0ZXMgYSBjaHVua2VkIGNvb2tpZSBhbmQgYWxsIGl0cyBhc3NvY2lhdGVkIGNodW5rcyBmcm9tIHRoZSByZXNwb25zZSBjb29raWVzLlxuICpcbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIG1haW4gY29va2llIHRvIGRlbGV0ZS5cbiAqIEBwYXJhbSByZXFDb29raWVzIC0gVGhlIHJlcXVlc3QgY29va2llcyBvYmplY3QgY29udGFpbmluZyBhbGwgY29va2llcyBmcm9tIHRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHJlc0Nvb2tpZXMgLSBUaGUgcmVzcG9uc2UgY29va2llcyBvYmplY3QgdG8gbWFuaXB1bGF0ZSB0aGUgY29va2llcyBpbiB0aGUgcmVzcG9uc2UuXG4gKiBAcGFyYW0gaXNMZWdhY3lDb29raWUgLSBXaGV0aGVyIHRvIGhhbmRsZSBsZWdhY3kgY29va2llIGZvcm1hdC5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9ucyBmb3IgY29va2llIGRlbGV0aW9uIGluY2x1ZGluZyBkb21haW4gYW5kIHBhdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVDaHVua2VkQ29va2llKG5hbWUsIHJlcUNvb2tpZXMsIHJlc0Nvb2tpZXMsIGlzTGVnYWN5Q29va2llLCBvcHRpb25zKSB7XG4gICAgLy8gRGVsZXRlIG1haW4gY29va2llXG4gICAgZGVsZXRlQ29va2llKHJlc0Nvb2tpZXMsIG5hbWUsIG9wdGlvbnMpO1xuICAgIGdldEFsbENodW5rZWRDb29raWVzKHJlcUNvb2tpZXMsIG5hbWUsIGlzTGVnYWN5Q29va2llKS5mb3JFYWNoKChjb29raWUpID0+IHtcbiAgICAgICAgZGVsZXRlQ29va2llKHJlc0Nvb2tpZXMsIGNvb2tpZS5uYW1lLCBvcHRpb25zKTsgLy8gRGVsZXRlIGVhY2ggZmlsdGVyZWQgY29va2llXG4gICAgfSk7XG59XG4vKipcbiAqIFVuY29uZGl0aW9uYWxseSBhZGRzIHN0cmljdCBjYWNoZS1jb250cm9sIGhlYWRlcnMgdG8gdGhlIHJlc3BvbnNlLlxuICpcbiAqIFRoaXMgZW5zdXJlcyB0aGUgcmVzcG9uc2UgaXMgbm90IGNhY2hlZCBieSBDRE5zIG9yIG90aGVyIHNoYXJlZCBjYWNoZXMuXG4gKiBJdCBpcyBub3cgdGhlIGNhbGxlcidzIHJlc3BvbnNpYmlsaXR5IHRvIGRlY2lkZSB3aGVuIHRvIGNhbGwgdGhpcyBmdW5jdGlvbi5cbiAqXG4gKiBVc2FnZTpcbiAqIENhbGwgdGhpcyBmdW5jdGlvbiB3aGVuZXZlciBhIGBTZXQtQ29va2llYCBoZWFkZXIgaXMgYmVpbmcgd3JpdHRlblxuICogZm9yIHNlc3Npb24gbWFuYWdlbWVudCBvciBhbnkgb3RoZXIgc2Vuc2l0aXZlIGRhdGEgdGhhdCBtdXN0IG5vdCBiZSBjYWNoZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDYWNoZUNvbnRyb2xIZWFkZXJzRm9yU2Vzc2lvbihyZXMpIHtcbiAgICByZXMuaGVhZGVycy5zZXQoXCJDYWNoZS1Db250cm9sXCIsIFwicHJpdmF0ZSwgbm8tY2FjaGUsIG5vLXN0b3JlLCBtdXN0LXJldmFsaWRhdGUsIG1heC1hZ2U9MFwiKTtcbiAgICByZXMuaGVhZGVycy5zZXQoXCJQcmFnbWFcIiwgXCJuby1jYWNoZVwiKTtcbiAgICByZXMuaGVhZGVycy5zZXQoXCJFeHBpcmVzXCIsIFwiMFwiKTtcbn1cbi8qKlxuICogRGVsZXRlcyBhIGNvb2tpZSBmcm9tIHRoZSByZXNwb25zZSB3aXRoIG9wdGlvbmFsIGRvbWFpbiBhbmQgcGF0aCBzcGVjaWZpY2F0aW9ucy5cbiAqXG4gKiBAcGFyYW0gcmVzQ29va2llcyAtIFRoZSByZXNwb25zZSBjb29raWVzIG9iamVjdCB0byBtYW5pcHVsYXRlLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgY29va2llIHRvIGRlbGV0ZS5cbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwgZG9tYWluIGFuZCBwYXRoIHNldHRpbmdzIGZvciBjb29raWUgZGVsZXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVDb29raWUocmVzQ29va2llcywgbmFtZSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGRlbGV0ZU9wdGlvbnMgPSB7XG4gICAgICAgIG1heEFnZTogMCAvLyBFbnN1cmUgdGhlIGNvb2tpZSBpcyBkZWxldGVkIGltbWVkaWF0ZWx5XG4gICAgfTtcbiAgICBpZiAob3B0aW9ucz8uZG9tYWluKSB7XG4gICAgICAgIGRlbGV0ZU9wdGlvbnMuZG9tYWluID0gb3B0aW9ucy5kb21haW47XG4gICAgfVxuICAgIGlmIChvcHRpb25zPy5wYXRoKSB7XG4gICAgICAgIGRlbGV0ZU9wdGlvbnMucGF0aCA9IG9wdGlvbnMucGF0aDtcbiAgICB9XG4gICAgcmVzQ29va2llcy5zZXQobmFtZSwgXCJcIiwgZGVsZXRlT3B0aW9ucyk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/cookies.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/fetcher.js":
/*!*****************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/fetcher.js ***!
  \*****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Fetcher: () => (/* binding */ Fetcher)\n/* harmony export */ });\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! oauth4webapi */ \"(rsc)/../../node_modules/.pnpm/oauth4webapi@3.8.2/node_modules/oauth4webapi/build/index.js\");\n\n/**\n * Fetcher class for making authenticated HTTP requests with optional DPoP support.\n *\n * This class provides a high-level interface for making HTTP requests to protected resources\n * using OAuth 2.0 access tokens. It supports both standard Bearer token authentication and\n * DPoP (Demonstrating Proof-of-Possession) for enhanced security.\n *\n * Key Features:\n * - Automatic access token injection\n * - DPoP proof generation and nonce error retry\n * - Flexible URL handling (absolute and relative)\n * - Type-safe response handling\n * - Custom fetch implementation support\n *\n * @template TOutput - Response type that extends the standard Response interface\n *\n * @example\n * ```typescript\n * const fetcher = await auth0.createFetcher(req, {\n *   baseUrl: 'https://api.example.com',\n *   useDPoP: true\n * });\n *\n * const response = await fetcher.fetchWithAuth('/protected-resource', {\n *   method: 'POST',\n *   body: JSON.stringify({ data: 'example' })\n * });\n * ```\n */\nclass Fetcher {\n    constructor(config, hooks) {\n        this.hooks = hooks;\n        this.config = {\n            ...config,\n            fetch: config.fetch ||\n                // For easier testing and constructor compatibility with SSR.\n                (typeof window === \"undefined\"\n                    ? fetch\n                    : window.fetch.bind(window))\n        };\n    }\n    /**\n     * Checks if a URL is absolute (includes protocol and domain).\n     *\n     * @param url - The URL string to test\n     * @returns True if the URL is absolute, false otherwise\n     *\n     * @example\n     * ```typescript\n     * fetcher.isAbsoluteUrl('https://api.example.com/data') // true\n     * fetcher.isAbsoluteUrl('/api/data') // false\n     * fetcher.isAbsoluteUrl('//example.com/api') // true\n     * ```\n     */\n    isAbsoluteUrl(url) {\n        try {\n            new URL(url);\n            return true;\n        }\n        catch {\n            return false;\n        }\n    }\n    /**\n     * Builds a complete URL from base URL and relative path.\n     *\n     * @param baseUrl - The base URL to resolve against (optional)\n     * @param url - The URL or path to resolve\n     * @returns The complete resolved URL\n     * @throws TypeError if url is relative but baseUrl is not provided\n     *\n     * @example\n     * ```typescript\n     * fetcher.buildUrl('https://api.example.com', '/users')\n     * // Returns: 'https://api.example.com/users'\n     * ```\n     */\n    buildUrl(baseUrl, url) {\n        if (url) {\n            if (this.isAbsoluteUrl(url)) {\n                return url;\n            }\n            if (baseUrl) {\n                return `${baseUrl.replace(/\\/?\\/$/, \"\")}/${url.replace(/^\\/+/, \"\")}`;\n            }\n        }\n        throw new TypeError(\"`url` must be absolute or `baseUrl` non-empty.\");\n    }\n    /**\n     * Retrieves an access token for the current request.\n     * Uses the configured access token factory or falls back to the hooks implementation.\n     *\n     * @param getAccessTokenOptions - Options for token retrieval (scope, audience, etc.)\n     * @returns Promise that resolves to the access token string\n     *\n     * @example\n     * ```typescript\n     * const token = await fetcher.getAccessToken({\n     *   scope: 'read:data',\n     *   audience: 'https://api.example.com'\n     * });\n     * ```\n     */\n    getAccessToken(getAccessTokenOptions) {\n        return this.config.getAccessToken\n            ? this.config.getAccessToken(getAccessTokenOptions ?? {})\n            : this.hooks.getAccessToken(getAccessTokenOptions ?? {});\n    }\n    buildBaseRequest(info, init) {\n        // Handle URL resolution before creating Request object\n        let resolvedUrl;\n        if (info instanceof Request) {\n            // If info is already a Request object, use its URL\n            resolvedUrl = info.url;\n        }\n        else if (info instanceof URL) {\n            // If info is a URL object, convert to string\n            resolvedUrl = info.toString();\n        }\n        else {\n            // info is a string - check if we need to resolve it with baseUrl\n            if (this.config.baseUrl && !this.isAbsoluteUrl(info)) {\n                // Resolve relative URL with baseUrl\n                resolvedUrl = this.buildUrl(this.config.baseUrl, info);\n            }\n            else {\n                // Use as-is (either absolute URL or no baseUrl configured)\n                resolvedUrl = info;\n            }\n        }\n        // Create Request object with resolved URL\n        return new Request(resolvedUrl, init);\n    }\n    getHeader(headers, name) {\n        if (Array.isArray(headers)) {\n            return new Headers(headers).get(name) || \"\";\n        }\n        if (typeof headers.get === \"function\") {\n            return headers.get(name) || \"\";\n        }\n        return headers[name] || \"\";\n    }\n    async internalFetchWithAuth(info, init, callbacks, getAccessTokenOptions) {\n        const request = this.buildBaseRequest(info, init);\n        const accessTokenResponse = await this.getAccessToken(getAccessTokenOptions);\n        let useDpop;\n        let accessToken;\n        if (typeof accessTokenResponse === \"string\") {\n            useDpop = this.config.dpopHandle ? true : false;\n            accessToken = accessTokenResponse;\n        }\n        else {\n            useDpop = this.config.dpopHandle\n                ? accessTokenResponse.token_type?.toLowerCase() === \"dpop\"\n                : false;\n            accessToken = accessTokenResponse.accessToken;\n        }\n        try {\n            // Make (DPoP)-authenticated request using oauth4webapi\n            const response = await (0,oauth4webapi__WEBPACK_IMPORTED_MODULE_0__.protectedResourceRequest)(accessToken, request.method, new URL(request.url), request.headers, request.body, {\n                ...this.config.httpOptions(),\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_0__.customFetch]: (url, options) => {\n                    return this.config.fetch(url, options);\n                },\n                [oauth4webapi__WEBPACK_IMPORTED_MODULE_0__.allowInsecureRequests]: this.config.allowInsecureRequests || false,\n                ...(useDpop && { DPoP: this.config.dpopHandle })\n            });\n            return response;\n        }\n        catch (error) {\n            // Use oauth4webapi's isDPoPNonceError to detect nonce errors\n            if ((0,oauth4webapi__WEBPACK_IMPORTED_MODULE_0__.isDPoPNonceError)(error) && callbacks.onUseDpopNonceError) {\n                // Retry once with the callback\n                return callbacks.onUseDpopNonceError();\n            }\n            // Re-throw non-DPoP nonce errors or if no callback available\n            throw error;\n        }\n    }\n    isRequestInit(obj) {\n        if (!obj || typeof obj !== \"object\")\n            return false;\n        // Check for GetAccessTokenOptions-specific properties\n        // Since RequestInit and GetAccessTokenOptions have no common properties,\n        // if any GetAccessTokenOptions property is present, it's GetAccessTokenOptions\n        const getAccessTokenOptionsProps = [\"refresh\", \"scope\", \"audience\"];\n        const hasGetAccessTokenOptionsProp = getAccessTokenOptionsProps.some((prop) => Object.prototype.hasOwnProperty.call(obj, prop));\n        // If it has GetAccessTokenOptions props, it's NOT RequestInit\n        // Otherwise, default to RequestInit (backwards compatibility)\n        return !hasGetAccessTokenOptionsProp;\n    }\n    // Implementation\n    fetchWithAuth(info, initOrOptions, getAccessTokenOptions) {\n        // Parameter disambiguation for 2-argument case\n        let init;\n        let accessTokenOptions;\n        if (arguments.length === 2 && initOrOptions !== undefined) {\n            // Determine if second argument is RequestInit or GetAccessTokenOptions\n            if (this.isRequestInit(initOrOptions)) {\n                init = initOrOptions;\n                accessTokenOptions = undefined;\n            }\n            else {\n                init = undefined;\n                accessTokenOptions = initOrOptions;\n            }\n        }\n        else {\n            // 3-argument case or 1-argument case\n            init = initOrOptions;\n            accessTokenOptions = getAccessTokenOptions;\n        }\n        const callbacks = {\n            onUseDpopNonceError: async () => {\n                // Use configured retry values or defaults\n                const retryConfig = this.config.retryConfig ?? {\n                    delay: 100,\n                    jitter: true\n                };\n                let delay = retryConfig.delay ?? 100;\n                // Apply jitter if enabled\n                if (retryConfig.jitter) {\n                    delay = delay * (0.5 + Math.random() * 0.5); // 50-100% of original delay\n                }\n                await new Promise((resolve) => setTimeout(resolve, delay));\n                try {\n                    return await this.internalFetchWithAuth(info, init, {\n                        ...callbacks,\n                        // Retry on a `use_dpop_nonce` error, but just once.\n                        onUseDpopNonceError: undefined\n                    }, accessTokenOptions);\n                }\n                catch (retryError) {\n                    // If the retry also fails, enhance the error with context\n                    if ((0,oauth4webapi__WEBPACK_IMPORTED_MODULE_0__.isDPoPNonceError)(retryError)) {\n                        const enhancedError = new Error(`DPoP nonce error persisted after retry: ${retryError.message}`);\n                        enhancedError.code =\n                            retryError.code || \"dpop_nonce_retry_failed\";\n                        throw enhancedError;\n                    }\n                    // For non-DPoP errors, just re-throw\n                    throw retryError;\n                }\n            }\n        };\n        return this.internalFetchWithAuth(info, init, callbacks, accessTokenOptions);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9mZXRjaGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThHO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsaUJBQWlCO0FBQzdDLElBQUk7QUFDSjtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDhCQUE4QixHQUFHLHdCQUF3QjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRTtBQUNwRSxtRUFBbUU7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsc0VBQXdCO0FBQzNEO0FBQ0EsaUJBQWlCLHFEQUFXO0FBQzVCO0FBQ0EsaUJBQWlCO0FBQ2pCLGlCQUFpQiwrREFBcUI7QUFDdEMsaUNBQWlDLDhCQUE4QjtBQUMvRCxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsOERBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUU7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDhEQUFnQjtBQUN4QyxtR0FBbUcsbUJBQW1CO0FBQ3RIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pdHN1eW9zaGkvRGVza3RvcC9hdXRoLXRlc3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9mZXRjaGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFsbG93SW5zZWN1cmVSZXF1ZXN0cywgY3VzdG9tRmV0Y2gsIGlzRFBvUE5vbmNlRXJyb3IsIHByb3RlY3RlZFJlc291cmNlUmVxdWVzdCB9IGZyb20gXCJvYXV0aDR3ZWJhcGlcIjtcbi8qKlxuICogRmV0Y2hlciBjbGFzcyBmb3IgbWFraW5nIGF1dGhlbnRpY2F0ZWQgSFRUUCByZXF1ZXN0cyB3aXRoIG9wdGlvbmFsIERQb1Agc3VwcG9ydC5cbiAqXG4gKiBUaGlzIGNsYXNzIHByb3ZpZGVzIGEgaGlnaC1sZXZlbCBpbnRlcmZhY2UgZm9yIG1ha2luZyBIVFRQIHJlcXVlc3RzIHRvIHByb3RlY3RlZCByZXNvdXJjZXNcbiAqIHVzaW5nIE9BdXRoIDIuMCBhY2Nlc3MgdG9rZW5zLiBJdCBzdXBwb3J0cyBib3RoIHN0YW5kYXJkIEJlYXJlciB0b2tlbiBhdXRoZW50aWNhdGlvbiBhbmRcbiAqIERQb1AgKERlbW9uc3RyYXRpbmcgUHJvb2Ytb2YtUG9zc2Vzc2lvbikgZm9yIGVuaGFuY2VkIHNlY3VyaXR5LlxuICpcbiAqIEtleSBGZWF0dXJlczpcbiAqIC0gQXV0b21hdGljIGFjY2VzcyB0b2tlbiBpbmplY3Rpb25cbiAqIC0gRFBvUCBwcm9vZiBnZW5lcmF0aW9uIGFuZCBub25jZSBlcnJvciByZXRyeVxuICogLSBGbGV4aWJsZSBVUkwgaGFuZGxpbmcgKGFic29sdXRlIGFuZCByZWxhdGl2ZSlcbiAqIC0gVHlwZS1zYWZlIHJlc3BvbnNlIGhhbmRsaW5nXG4gKiAtIEN1c3RvbSBmZXRjaCBpbXBsZW1lbnRhdGlvbiBzdXBwb3J0XG4gKlxuICogQHRlbXBsYXRlIFRPdXRwdXQgLSBSZXNwb25zZSB0eXBlIHRoYXQgZXh0ZW5kcyB0aGUgc3RhbmRhcmQgUmVzcG9uc2UgaW50ZXJmYWNlXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGZldGNoZXIgPSBhd2FpdCBhdXRoMC5jcmVhdGVGZXRjaGVyKHJlcSwge1xuICogICBiYXNlVXJsOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLFxuICogICB1c2VEUG9QOiB0cnVlXG4gKiB9KTtcbiAqXG4gKiBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoZXIuZmV0Y2hXaXRoQXV0aCgnL3Byb3RlY3RlZC1yZXNvdXJjZScsIHtcbiAqICAgbWV0aG9kOiAnUE9TVCcsXG4gKiAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgZGF0YTogJ2V4YW1wbGUnIH0pXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgRmV0Y2hlciB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBob29rcykge1xuICAgICAgICB0aGlzLmhvb2tzID0gaG9va3M7XG4gICAgICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgZmV0Y2g6IGNvbmZpZy5mZXRjaCB8fFxuICAgICAgICAgICAgICAgIC8vIEZvciBlYXNpZXIgdGVzdGluZyBhbmQgY29uc3RydWN0b3IgY29tcGF0aWJpbGl0eSB3aXRoIFNTUi5cbiAgICAgICAgICAgICAgICAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICAgICAgICAgICA/IGZldGNoXG4gICAgICAgICAgICAgICAgICAgIDogd2luZG93LmZldGNoLmJpbmQod2luZG93KSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIGlmIGEgVVJMIGlzIGFic29sdXRlIChpbmNsdWRlcyBwcm90b2NvbCBhbmQgZG9tYWluKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB1cmwgLSBUaGUgVVJMIHN0cmluZyB0byB0ZXN0XG4gICAgICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgVVJMIGlzIGFic29sdXRlLCBmYWxzZSBvdGhlcndpc2VcbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqIGZldGNoZXIuaXNBYnNvbHV0ZVVybCgnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vZGF0YScpIC8vIHRydWVcbiAgICAgKiBmZXRjaGVyLmlzQWJzb2x1dGVVcmwoJy9hcGkvZGF0YScpIC8vIGZhbHNlXG4gICAgICogZmV0Y2hlci5pc0Fic29sdXRlVXJsKCcvL2V4YW1wbGUuY29tL2FwaScpIC8vIHRydWVcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBpc0Fic29sdXRlVXJsKHVybCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbmV3IFVSTCh1cmwpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhIGNvbXBsZXRlIFVSTCBmcm9tIGJhc2UgVVJMIGFuZCByZWxhdGl2ZSBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhc2VVcmwgLSBUaGUgYmFzZSBVUkwgdG8gcmVzb2x2ZSBhZ2FpbnN0IChvcHRpb25hbClcbiAgICAgKiBAcGFyYW0gdXJsIC0gVGhlIFVSTCBvciBwYXRoIHRvIHJlc29sdmVcbiAgICAgKiBAcmV0dXJucyBUaGUgY29tcGxldGUgcmVzb2x2ZWQgVVJMXG4gICAgICogQHRocm93cyBUeXBlRXJyb3IgaWYgdXJsIGlzIHJlbGF0aXZlIGJ1dCBiYXNlVXJsIGlzIG5vdCBwcm92aWRlZFxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogZmV0Y2hlci5idWlsZFVybCgnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLCAnL3VzZXJzJylcbiAgICAgKiAvLyBSZXR1cm5zOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vdXNlcnMnXG4gICAgICogYGBgXG4gICAgICovXG4gICAgYnVpbGRVcmwoYmFzZVVybCwgdXJsKSB7XG4gICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWJzb2x1dGVVcmwodXJsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmFzZVVybCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtiYXNlVXJsLnJlcGxhY2UoL1xcLz9cXC8kLywgXCJcIil9LyR7dXJsLnJlcGxhY2UoL15cXC8rLywgXCJcIil9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYHVybGAgbXVzdCBiZSBhYnNvbHV0ZSBvciBgYmFzZVVybGAgbm9uLWVtcHR5LlwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFuIGFjY2VzcyB0b2tlbiBmb3IgdGhlIGN1cnJlbnQgcmVxdWVzdC5cbiAgICAgKiBVc2VzIHRoZSBjb25maWd1cmVkIGFjY2VzcyB0b2tlbiBmYWN0b3J5IG9yIGZhbGxzIGJhY2sgdG8gdGhlIGhvb2tzIGltcGxlbWVudGF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGdldEFjY2Vzc1Rva2VuT3B0aW9ucyAtIE9wdGlvbnMgZm9yIHRva2VuIHJldHJpZXZhbCAoc2NvcGUsIGF1ZGllbmNlLCBldGMuKVxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgYWNjZXNzIHRva2VuIHN0cmluZ1xuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogY29uc3QgdG9rZW4gPSBhd2FpdCBmZXRjaGVyLmdldEFjY2Vzc1Rva2VuKHtcbiAgICAgKiAgIHNjb3BlOiAncmVhZDpkYXRhJyxcbiAgICAgKiAgIGF1ZGllbmNlOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nXG4gICAgICogfSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgZ2V0QWNjZXNzVG9rZW4oZ2V0QWNjZXNzVG9rZW5PcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5nZXRBY2Nlc3NUb2tlblxuICAgICAgICAgICAgPyB0aGlzLmNvbmZpZy5nZXRBY2Nlc3NUb2tlbihnZXRBY2Nlc3NUb2tlbk9wdGlvbnMgPz8ge30pXG4gICAgICAgICAgICA6IHRoaXMuaG9va3MuZ2V0QWNjZXNzVG9rZW4oZ2V0QWNjZXNzVG9rZW5PcHRpb25zID8/IHt9KTtcbiAgICB9XG4gICAgYnVpbGRCYXNlUmVxdWVzdChpbmZvLCBpbml0KSB7XG4gICAgICAgIC8vIEhhbmRsZSBVUkwgcmVzb2x1dGlvbiBiZWZvcmUgY3JlYXRpbmcgUmVxdWVzdCBvYmplY3RcbiAgICAgICAgbGV0IHJlc29sdmVkVXJsO1xuICAgICAgICBpZiAoaW5mbyBpbnN0YW5jZW9mIFJlcXVlc3QpIHtcbiAgICAgICAgICAgIC8vIElmIGluZm8gaXMgYWxyZWFkeSBhIFJlcXVlc3Qgb2JqZWN0LCB1c2UgaXRzIFVSTFxuICAgICAgICAgICAgcmVzb2x2ZWRVcmwgPSBpbmZvLnVybDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpbmZvIGluc3RhbmNlb2YgVVJMKSB7XG4gICAgICAgICAgICAvLyBJZiBpbmZvIGlzIGEgVVJMIG9iamVjdCwgY29udmVydCB0byBzdHJpbmdcbiAgICAgICAgICAgIHJlc29sdmVkVXJsID0gaW5mby50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gaW5mbyBpcyBhIHN0cmluZyAtIGNoZWNrIGlmIHdlIG5lZWQgdG8gcmVzb2x2ZSBpdCB3aXRoIGJhc2VVcmxcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5iYXNlVXJsICYmICF0aGlzLmlzQWJzb2x1dGVVcmwoaW5mbykpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHJlbGF0aXZlIFVSTCB3aXRoIGJhc2VVcmxcbiAgICAgICAgICAgICAgICByZXNvbHZlZFVybCA9IHRoaXMuYnVpbGRVcmwodGhpcy5jb25maWcuYmFzZVVybCwgaW5mbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBVc2UgYXMtaXMgKGVpdGhlciBhYnNvbHV0ZSBVUkwgb3Igbm8gYmFzZVVybCBjb25maWd1cmVkKVxuICAgICAgICAgICAgICAgIHJlc29sdmVkVXJsID0gaW5mbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhdGUgUmVxdWVzdCBvYmplY3Qgd2l0aCByZXNvbHZlZCBVUkxcbiAgICAgICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHJlc29sdmVkVXJsLCBpbml0KTtcbiAgICB9XG4gICAgZ2V0SGVhZGVyKGhlYWRlcnMsIG5hbWUpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaGVhZGVycykpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSGVhZGVycyhoZWFkZXJzKS5nZXQobmFtZSkgfHwgXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGhlYWRlcnMuZ2V0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXJzLmdldChuYW1lKSB8fCBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWFkZXJzW25hbWVdIHx8IFwiXCI7XG4gICAgfVxuICAgIGFzeW5jIGludGVybmFsRmV0Y2hXaXRoQXV0aChpbmZvLCBpbml0LCBjYWxsYmFja3MsIGdldEFjY2Vzc1Rva2VuT3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZEJhc2VSZXF1ZXN0KGluZm8sIGluaXQpO1xuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlblJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRBY2Nlc3NUb2tlbihnZXRBY2Nlc3NUb2tlbk9wdGlvbnMpO1xuICAgICAgICBsZXQgdXNlRHBvcDtcbiAgICAgICAgbGV0IGFjY2Vzc1Rva2VuO1xuICAgICAgICBpZiAodHlwZW9mIGFjY2Vzc1Rva2VuUmVzcG9uc2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHVzZURwb3AgPSB0aGlzLmNvbmZpZy5kcG9wSGFuZGxlID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlblJlc3BvbnNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdXNlRHBvcCA9IHRoaXMuY29uZmlnLmRwb3BIYW5kbGVcbiAgICAgICAgICAgICAgICA/IGFjY2Vzc1Rva2VuUmVzcG9uc2UudG9rZW5fdHlwZT8udG9Mb3dlckNhc2UoKSA9PT0gXCJkcG9wXCJcbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlblJlc3BvbnNlLmFjY2Vzc1Rva2VuO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBNYWtlIChEUG9QKS1hdXRoZW50aWNhdGVkIHJlcXVlc3QgdXNpbmcgb2F1dGg0d2ViYXBpXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHByb3RlY3RlZFJlc291cmNlUmVxdWVzdChhY2Nlc3NUb2tlbiwgcmVxdWVzdC5tZXRob2QsIG5ldyBVUkwocmVxdWVzdC51cmwpLCByZXF1ZXN0LmhlYWRlcnMsIHJlcXVlc3QuYm9keSwge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLmh0dHBPcHRpb25zKCksXG4gICAgICAgICAgICAgICAgW2N1c3RvbUZldGNoXTogKHVybCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maWcuZmV0Y2godXJsLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFthbGxvd0luc2VjdXJlUmVxdWVzdHNdOiB0aGlzLmNvbmZpZy5hbGxvd0luc2VjdXJlUmVxdWVzdHMgfHwgZmFsc2UsXG4gICAgICAgICAgICAgICAgLi4uKHVzZURwb3AgJiYgeyBEUG9QOiB0aGlzLmNvbmZpZy5kcG9wSGFuZGxlIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIFVzZSBvYXV0aDR3ZWJhcGkncyBpc0RQb1BOb25jZUVycm9yIHRvIGRldGVjdCBub25jZSBlcnJvcnNcbiAgICAgICAgICAgIGlmIChpc0RQb1BOb25jZUVycm9yKGVycm9yKSAmJiBjYWxsYmFja3Mub25Vc2VEcG9wTm9uY2VFcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIFJldHJ5IG9uY2Ugd2l0aCB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2tzLm9uVXNlRHBvcE5vbmNlRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlLXRocm93IG5vbi1EUG9QIG5vbmNlIGVycm9ycyBvciBpZiBubyBjYWxsYmFjayBhdmFpbGFibGVcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzUmVxdWVzdEluaXQob2JqKSB7XG4gICAgICAgIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIENoZWNrIGZvciBHZXRBY2Nlc3NUb2tlbk9wdGlvbnMtc3BlY2lmaWMgcHJvcGVydGllc1xuICAgICAgICAvLyBTaW5jZSBSZXF1ZXN0SW5pdCBhbmQgR2V0QWNjZXNzVG9rZW5PcHRpb25zIGhhdmUgbm8gY29tbW9uIHByb3BlcnRpZXMsXG4gICAgICAgIC8vIGlmIGFueSBHZXRBY2Nlc3NUb2tlbk9wdGlvbnMgcHJvcGVydHkgaXMgcHJlc2VudCwgaXQncyBHZXRBY2Nlc3NUb2tlbk9wdGlvbnNcbiAgICAgICAgY29uc3QgZ2V0QWNjZXNzVG9rZW5PcHRpb25zUHJvcHMgPSBbXCJyZWZyZXNoXCIsIFwic2NvcGVcIiwgXCJhdWRpZW5jZVwiXTtcbiAgICAgICAgY29uc3QgaGFzR2V0QWNjZXNzVG9rZW5PcHRpb25zUHJvcCA9IGdldEFjY2Vzc1Rva2VuT3B0aW9uc1Byb3BzLnNvbWUoKHByb3ApID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKTtcbiAgICAgICAgLy8gSWYgaXQgaGFzIEdldEFjY2Vzc1Rva2VuT3B0aW9ucyBwcm9wcywgaXQncyBOT1QgUmVxdWVzdEluaXRcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBkZWZhdWx0IHRvIFJlcXVlc3RJbml0IChiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSlcbiAgICAgICAgcmV0dXJuICFoYXNHZXRBY2Nlc3NUb2tlbk9wdGlvbnNQcm9wO1xuICAgIH1cbiAgICAvLyBJbXBsZW1lbnRhdGlvblxuICAgIGZldGNoV2l0aEF1dGgoaW5mbywgaW5pdE9yT3B0aW9ucywgZ2V0QWNjZXNzVG9rZW5PcHRpb25zKSB7XG4gICAgICAgIC8vIFBhcmFtZXRlciBkaXNhbWJpZ3VhdGlvbiBmb3IgMi1hcmd1bWVudCBjYXNlXG4gICAgICAgIGxldCBpbml0O1xuICAgICAgICBsZXQgYWNjZXNzVG9rZW5PcHRpb25zO1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiBpbml0T3JPcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIERldGVybWluZSBpZiBzZWNvbmQgYXJndW1lbnQgaXMgUmVxdWVzdEluaXQgb3IgR2V0QWNjZXNzVG9rZW5PcHRpb25zXG4gICAgICAgICAgICBpZiAodGhpcy5pc1JlcXVlc3RJbml0KGluaXRPck9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgaW5pdCA9IGluaXRPck9wdGlvbnM7XG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW5PcHRpb25zID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5pdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbk9wdGlvbnMgPSBpbml0T3JPcHRpb25zO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gMy1hcmd1bWVudCBjYXNlIG9yIDEtYXJndW1lbnQgY2FzZVxuICAgICAgICAgICAgaW5pdCA9IGluaXRPck9wdGlvbnM7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbk9wdGlvbnMgPSBnZXRBY2Nlc3NUb2tlbk9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0ge1xuICAgICAgICAgICAgb25Vc2VEcG9wTm9uY2VFcnJvcjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFVzZSBjb25maWd1cmVkIHJldHJ5IHZhbHVlcyBvciBkZWZhdWx0c1xuICAgICAgICAgICAgICAgIGNvbnN0IHJldHJ5Q29uZmlnID0gdGhpcy5jb25maWcucmV0cnlDb25maWcgPz8ge1xuICAgICAgICAgICAgICAgICAgICBkZWxheTogMTAwLFxuICAgICAgICAgICAgICAgICAgICBqaXR0ZXI6IHRydWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGxldCBkZWxheSA9IHJldHJ5Q29uZmlnLmRlbGF5ID8/IDEwMDtcbiAgICAgICAgICAgICAgICAvLyBBcHBseSBqaXR0ZXIgaWYgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmIChyZXRyeUNvbmZpZy5qaXR0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsYXkgPSBkZWxheSAqICgwLjUgKyBNYXRoLnJhbmRvbSgpICogMC41KTsgLy8gNTAtMTAwJSBvZiBvcmlnaW5hbCBkZWxheVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBkZWxheSkpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmludGVybmFsRmV0Y2hXaXRoQXV0aChpbmZvLCBpbml0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5jYWxsYmFja3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXRyeSBvbiBhIGB1c2VfZHBvcF9ub25jZWAgZXJyb3IsIGJ1dCBqdXN0IG9uY2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBvblVzZURwb3BOb25jZUVycm9yOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfSwgYWNjZXNzVG9rZW5PcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKHJldHJ5RXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJldHJ5IGFsc28gZmFpbHMsIGVuaGFuY2UgdGhlIGVycm9yIHdpdGggY29udGV4dFxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNEUG9QTm9uY2VFcnJvcihyZXRyeUVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5oYW5jZWRFcnJvciA9IG5ldyBFcnJvcihgRFBvUCBub25jZSBlcnJvciBwZXJzaXN0ZWQgYWZ0ZXIgcmV0cnk6ICR7cmV0cnlFcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5oYW5jZWRFcnJvci5jb2RlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRyeUVycm9yLmNvZGUgfHwgXCJkcG9wX25vbmNlX3JldHJ5X2ZhaWxlZFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZW5oYW5jZWRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBGb3Igbm9uLURQb1AgZXJyb3JzLCBqdXN0IHJlLXRocm93XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHJldHJ5RXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbEZldGNoV2l0aEF1dGgoaW5mbywgaW5pdCwgY2FsbGJhY2tzLCBhY2Nlc3NUb2tlbk9wdGlvbnMpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/fetcher.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/helpers/with-api-auth-required.js":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/helpers/with-api-auth-required.js ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appRouteHandlerFactory: () => (/* binding */ appRouteHandlerFactory),\n/* harmony export */   pageRouteHandlerFactory: () => (/* binding */ pageRouteHandlerFactory)\n/* harmony export */ });\n/* harmony import */ var next_server_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server.js */ \"(rsc)/../../node_modules/.pnpm/next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/api/server.js\");\n\nconst appRouteHandlerFactory = (client) => (apiRoute) => async (req, params) => {\n    const session = await client.getSession();\n    if (!session || !session.user) {\n        return next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"not_authenticated\",\n            description: \"The user does not have an active session or is not authenticated\"\n        }, { status: 401 });\n    }\n    const apiRes = await apiRoute(req, params);\n    const nextApiRes = apiRes instanceof next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse\n        ? apiRes\n        : new next_server_js__WEBPACK_IMPORTED_MODULE_0__.NextResponse(apiRes.body, apiRes);\n    return nextApiRes;\n};\nconst pageRouteHandlerFactory = (client) => (apiRoute) => async (req, res) => {\n    const session = await client.getSession(req);\n    if (!session || !session.user) {\n        // If the user is not authenticated, return\n        res.status(401).json({\n            error: \"not_authenticated\",\n            description: \"The user does not have an active session or is not authenticated\"\n        });\n        return;\n    }\n    await apiRoute(req, res);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9oZWxwZXJzL3dpdGgtYXBpLWF1dGgtcmVxdWlyZWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQThDO0FBQ3ZDO0FBQ1A7QUFDQTtBQUNBLGVBQWUsd0RBQVk7QUFDM0I7QUFDQTtBQUNBLFNBQVMsSUFBSSxhQUFhO0FBQzFCO0FBQ0E7QUFDQSx5Q0FBeUMsd0RBQVk7QUFDckQ7QUFDQSxjQUFjLHdEQUFZO0FBQzFCO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pdHN1eW9zaGkvRGVza3RvcC9hdXRoLXRlc3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9oZWxwZXJzL3dpdGgtYXBpLWF1dGgtcmVxdWlyZWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyLmpzXCI7XG5leHBvcnQgY29uc3QgYXBwUm91dGVIYW5kbGVyRmFjdG9yeSA9IChjbGllbnQpID0+IChhcGlSb3V0ZSkgPT4gYXN5bmMgKHJlcSwgcGFyYW1zKSA9PiB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGNsaWVudC5nZXRTZXNzaW9uKCk7XG4gICAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICAgIGVycm9yOiBcIm5vdF9hdXRoZW50aWNhdGVkXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJUaGUgdXNlciBkb2VzIG5vdCBoYXZlIGFuIGFjdGl2ZSBzZXNzaW9uIG9yIGlzIG5vdCBhdXRoZW50aWNhdGVkXCJcbiAgICAgICAgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG4gICAgY29uc3QgYXBpUmVzID0gYXdhaXQgYXBpUm91dGUocmVxLCBwYXJhbXMpO1xuICAgIGNvbnN0IG5leHRBcGlSZXMgPSBhcGlSZXMgaW5zdGFuY2VvZiBOZXh0UmVzcG9uc2VcbiAgICAgICAgPyBhcGlSZXNcbiAgICAgICAgOiBuZXcgTmV4dFJlc3BvbnNlKGFwaVJlcy5ib2R5LCBhcGlSZXMpO1xuICAgIHJldHVybiBuZXh0QXBpUmVzO1xufTtcbmV4cG9ydCBjb25zdCBwYWdlUm91dGVIYW5kbGVyRmFjdG9yeSA9IChjbGllbnQpID0+IChhcGlSb3V0ZSkgPT4gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGNsaWVudC5nZXRTZXNzaW9uKHJlcSk7XG4gICAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLnVzZXIpIHtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWQsIHJldHVyblxuICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7XG4gICAgICAgICAgICBlcnJvcjogXCJub3RfYXV0aGVudGljYXRlZFwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiVGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhbiBhY3RpdmUgc2Vzc2lvbiBvciBpcyBub3QgYXV0aGVudGljYXRlZFwiXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGF3YWl0IGFwaVJvdXRlKHJlcSwgcmVzKTtcbn07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/helpers/with-api-auth-required.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/helpers/with-page-auth-required.js":
/*!*****************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/helpers/with-page-auth-required.js ***!
  \*****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   appRouteHandlerFactory: () => (/* binding */ appRouteHandlerFactory),\n/* harmony export */   pageRouteHandlerFactory: () => (/* binding */ pageRouteHandlerFactory)\n/* harmony export */ });\nconst appRouteHandlerFactory = (client, config) => (handler, opts = {}) => async (params) => {\n    const session = await client.getSession();\n    if (!session?.user) {\n        const returnTo = typeof opts.returnTo === \"function\"\n            ? await opts.returnTo(params)\n            : opts.returnTo;\n        const { redirect } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0\").then(__webpack_require__.bind(__webpack_require__, /*! next/navigation.js */ \"(rsc)/../../node_modules/.pnpm/next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0__react@19.2.0/node_modules/next/dist/api/navigation.react-server.js\"));\n        redirect(`${config.loginUrl}${opts.returnTo ? `?returnTo=${returnTo}` : \"\"}`);\n    }\n    return handler(params);\n};\nconst pageRouteHandlerFactory = (client, config) => ({ getServerSideProps, returnTo } = {}) => async (ctx) => {\n    const session = await client.getSession(ctx.req);\n    if (!session?.user) {\n        return {\n            redirect: {\n                destination: `${config.loginUrl}?returnTo=${encodeURIComponent(returnTo || ctx.resolvedUrl)}`,\n                permanent: false\n            }\n        };\n    }\n    let ret = { props: {} };\n    if (getServerSideProps) {\n        ret = await getServerSideProps(ctx);\n    }\n    if (ret.props instanceof Promise) {\n        const props = await ret.props;\n        return {\n            ...ret,\n            props: {\n                user: session.user,\n                ...props\n            }\n        };\n    }\n    return { ...ret, props: { user: session.user, ...ret.props } };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9oZWxwZXJzL3dpdGgtcGFnZS1hdXRoLXJlcXVpcmVkLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sc0VBQXNFO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVyxRQUFRLGtYQUE0QjtBQUMvRCxvQkFBb0IsZ0JBQWdCLEVBQUUsNkJBQTZCLFNBQVMsT0FBTztBQUNuRjtBQUNBO0FBQ0E7QUFDTyx1REFBdUQsK0JBQStCLElBQUk7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsZ0JBQWdCLFlBQVksZ0RBQWdEO0FBQzVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxpQkFBaUI7QUFDOUIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taXRzdXlvc2hpL0Rlc2t0b3AvYXV0aC10ZXN0L25vZGVfbW9kdWxlcy8ucG5wbS9AYXV0aDArbmV4dGpzLWF1dGgwQDQuMTEuMF9uZXh0QDE2LjAuMF9AYmFiZWwrY29yZUA3LjI4LjVfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfYjg5ZmQ3NjFlMmIxMDM4NTlhMjkxYWU5YWMwNDVkNTUvbm9kZV9tb2R1bGVzL0BhdXRoMC9uZXh0anMtYXV0aDAvZGlzdC9zZXJ2ZXIvaGVscGVycy93aXRoLXBhZ2UtYXV0aC1yZXF1aXJlZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgYXBwUm91dGVIYW5kbGVyRmFjdG9yeSA9IChjbGllbnQsIGNvbmZpZykgPT4gKGhhbmRsZXIsIG9wdHMgPSB7fSkgPT4gYXN5bmMgKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBjbGllbnQuZ2V0U2Vzc2lvbigpO1xuICAgIGlmICghc2Vzc2lvbj8udXNlcikge1xuICAgICAgICBjb25zdCByZXR1cm5UbyA9IHR5cGVvZiBvcHRzLnJldHVyblRvID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gYXdhaXQgb3B0cy5yZXR1cm5UbyhwYXJhbXMpXG4gICAgICAgICAgICA6IG9wdHMucmV0dXJuVG87XG4gICAgICAgIGNvbnN0IHsgcmVkaXJlY3QgfSA9IGF3YWl0IGltcG9ydChcIm5leHQvbmF2aWdhdGlvbi5qc1wiKTtcbiAgICAgICAgcmVkaXJlY3QoYCR7Y29uZmlnLmxvZ2luVXJsfSR7b3B0cy5yZXR1cm5UbyA/IGA/cmV0dXJuVG89JHtyZXR1cm5Ub31gIDogXCJcIn1gKTtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRsZXIocGFyYW1zKTtcbn07XG5leHBvcnQgY29uc3QgcGFnZVJvdXRlSGFuZGxlckZhY3RvcnkgPSAoY2xpZW50LCBjb25maWcpID0+ICh7IGdldFNlcnZlclNpZGVQcm9wcywgcmV0dXJuVG8gfSA9IHt9KSA9PiBhc3luYyAoY3R4KSA9PiB7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGNsaWVudC5nZXRTZXNzaW9uKGN0eC5yZXEpO1xuICAgIGlmICghc2Vzc2lvbj8udXNlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVkaXJlY3Q6IHtcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogYCR7Y29uZmlnLmxvZ2luVXJsfT9yZXR1cm5Ubz0ke2VuY29kZVVSSUNvbXBvbmVudChyZXR1cm5UbyB8fCBjdHgucmVzb2x2ZWRVcmwpfWAsXG4gICAgICAgICAgICAgICAgcGVybWFuZW50OiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBsZXQgcmV0ID0geyBwcm9wczoge30gfTtcbiAgICBpZiAoZ2V0U2VydmVyU2lkZVByb3BzKSB7XG4gICAgICAgIHJldCA9IGF3YWl0IGdldFNlcnZlclNpZGVQcm9wcyhjdHgpO1xuICAgIH1cbiAgICBpZiAocmV0LnByb3BzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICBjb25zdCBwcm9wcyA9IGF3YWl0IHJldC5wcm9wcztcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnJldCxcbiAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgdXNlcjogc2Vzc2lvbi51c2VyLFxuICAgICAgICAgICAgICAgIC4uLnByb3BzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7IC4uLnJldCwgcHJvcHM6IHsgdXNlcjogc2Vzc2lvbi51c2VyLCAuLi5yZXQucHJvcHMgfSB9O1xufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/helpers/with-page-auth-required.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/index.js":
/*!***************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/index.js ***!
  \***************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbstractSessionStore: () => (/* reexport safe */ _session_abstract_session_store_js__WEBPACK_IMPORTED_MODULE_3__.AbstractSessionStore),\n/* harmony export */   Auth0Client: () => (/* reexport safe */ _client_js__WEBPACK_IMPORTED_MODULE_0__.Auth0Client),\n/* harmony export */   AuthClient: () => (/* reexport safe */ _auth_client_js__WEBPACK_IMPORTED_MODULE_1__.AuthClient),\n/* harmony export */   DEFAULT_ID_TOKEN_CLAIMS: () => (/* reexport safe */ _user_js__WEBPACK_IMPORTED_MODULE_4__.DEFAULT_ID_TOKEN_CLAIMS),\n/* harmony export */   TransactionStore: () => (/* reexport safe */ _transaction_store_js__WEBPACK_IMPORTED_MODULE_2__.TransactionStore),\n/* harmony export */   filterDefaultIdTokenClaims: () => (/* reexport safe */ _user_js__WEBPACK_IMPORTED_MODULE_4__.filterDefaultIdTokenClaims)\n/* harmony export */ });\n/* harmony import */ var _client_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./client.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/client.js\");\n/* harmony import */ var _auth_client_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./auth-client.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/auth-client.js\");\n/* harmony import */ var _transaction_store_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./transaction-store.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/transaction-store.js\");\n/* harmony import */ var _session_abstract_session_store_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./session/abstract-session-store.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/abstract-session-store.js\");\n/* harmony import */ var _user_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./user.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/user.js\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUEwQztBQUNJO0FBQ1k7QUFDaUI7QUFDSyIsInNvdXJjZXMiOlsiL1VzZXJzL21pdHN1eW9zaGkvRGVza3RvcC9hdXRoLXRlc3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBBdXRoMENsaWVudCB9IGZyb20gXCIuL2NsaWVudC5qc1wiO1xuZXhwb3J0IHsgQXV0aENsaWVudCB9IGZyb20gXCIuL2F1dGgtY2xpZW50LmpzXCI7XG5leHBvcnQgeyBUcmFuc2FjdGlvblN0b3JlIH0gZnJvbSBcIi4vdHJhbnNhY3Rpb24tc3RvcmUuanNcIjtcbmV4cG9ydCB7IEFic3RyYWN0U2Vzc2lvblN0b3JlIH0gZnJvbSBcIi4vc2Vzc2lvbi9hYnN0cmFjdC1zZXNzaW9uLXN0b3JlLmpzXCI7XG5leHBvcnQgeyBmaWx0ZXJEZWZhdWx0SWRUb2tlbkNsYWltcywgREVGQVVMVF9JRF9UT0tFTl9DTEFJTVMgfSBmcm9tIFwiLi91c2VyLmpzXCI7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/index.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/abstract-session-store.js":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/abstract-session-store.js ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbstractSessionStore: () => (/* binding */ AbstractSessionStore)\n/* harmony export */ });\nconst SESSION_COOKIE_NAME = \"__session\";\nclass AbstractSessionStore {\n    constructor({ secret, rolling = true, absoluteDuration = 60 * 60 * 24 * 3, // 3 days in seconds\n    inactivityDuration = 60 * 60 * 24 * 1, // 1 day in seconds\n    store, cookieOptions }) {\n        this.secret = secret;\n        this.rolling = rolling;\n        this.absoluteDuration = absoluteDuration;\n        this.inactivityDuration = inactivityDuration;\n        this.store = store;\n        this.sessionCookieName = cookieOptions?.name ?? SESSION_COOKIE_NAME;\n        this.cookieConfig = {\n            httpOnly: true,\n            sameSite: cookieOptions?.sameSite ?? \"lax\",\n            secure: cookieOptions?.secure ?? false,\n            path: cookieOptions?.path ?? \"/\",\n            domain: cookieOptions?.domain,\n            transient: cookieOptions?.transient\n        };\n    }\n    /**\n     * epoch returns the time since unix epoch in seconds.\n     */\n    epoch() {\n        return (Date.now() / 1000) | 0;\n    }\n    /**\n     * calculateMaxAge calculates the max age of the session based on createdAt and the rolling and absolute durations.\n     */\n    calculateMaxAge(createdAt) {\n        if (!this.rolling) {\n            return this.absoluteDuration;\n        }\n        const updatedAt = this.epoch();\n        const expiresAt = Math.min(updatedAt + this.inactivityDuration, createdAt + this.absoluteDuration);\n        const maxAge = expiresAt - this.epoch();\n        return maxAge > 0 ? maxAge : 0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9zZXNzaW9uL2Fic3RyYWN0LXNlc3Npb24tc3RvcmUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ087QUFDUCxrQkFBa0I7QUFDbEI7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taXRzdXlvc2hpL0Rlc2t0b3AvYXV0aC10ZXN0L25vZGVfbW9kdWxlcy8ucG5wbS9AYXV0aDArbmV4dGpzLWF1dGgwQDQuMTEuMF9uZXh0QDE2LjAuMF9AYmFiZWwrY29yZUA3LjI4LjVfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfYjg5ZmQ3NjFlMmIxMDM4NTlhMjkxYWU5YWMwNDVkNTUvbm9kZV9tb2R1bGVzL0BhdXRoMC9uZXh0anMtYXV0aDAvZGlzdC9zZXJ2ZXIvc2Vzc2lvbi9hYnN0cmFjdC1zZXNzaW9uLXN0b3JlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNFU1NJT05fQ09PS0lFX05BTUUgPSBcIl9fc2Vzc2lvblwiO1xuZXhwb3J0IGNsYXNzIEFic3RyYWN0U2Vzc2lvblN0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHNlY3JldCwgcm9sbGluZyA9IHRydWUsIGFic29sdXRlRHVyYXRpb24gPSA2MCAqIDYwICogMjQgKiAzLCAvLyAzIGRheXMgaW4gc2Vjb25kc1xuICAgIGluYWN0aXZpdHlEdXJhdGlvbiA9IDYwICogNjAgKiAyNCAqIDEsIC8vIDEgZGF5IGluIHNlY29uZHNcbiAgICBzdG9yZSwgY29va2llT3B0aW9ucyB9KSB7XG4gICAgICAgIHRoaXMuc2VjcmV0ID0gc2VjcmV0O1xuICAgICAgICB0aGlzLnJvbGxpbmcgPSByb2xsaW5nO1xuICAgICAgICB0aGlzLmFic29sdXRlRHVyYXRpb24gPSBhYnNvbHV0ZUR1cmF0aW9uO1xuICAgICAgICB0aGlzLmluYWN0aXZpdHlEdXJhdGlvbiA9IGluYWN0aXZpdHlEdXJhdGlvbjtcbiAgICAgICAgdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgICAgICB0aGlzLnNlc3Npb25Db29raWVOYW1lID0gY29va2llT3B0aW9ucz8ubmFtZSA/PyBTRVNTSU9OX0NPT0tJRV9OQU1FO1xuICAgICAgICB0aGlzLmNvb2tpZUNvbmZpZyA9IHtcbiAgICAgICAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgICAgICAgc2FtZVNpdGU6IGNvb2tpZU9wdGlvbnM/LnNhbWVTaXRlID8/IFwibGF4XCIsXG4gICAgICAgICAgICBzZWN1cmU6IGNvb2tpZU9wdGlvbnM/LnNlY3VyZSA/PyBmYWxzZSxcbiAgICAgICAgICAgIHBhdGg6IGNvb2tpZU9wdGlvbnM/LnBhdGggPz8gXCIvXCIsXG4gICAgICAgICAgICBkb21haW46IGNvb2tpZU9wdGlvbnM/LmRvbWFpbixcbiAgICAgICAgICAgIHRyYW5zaWVudDogY29va2llT3B0aW9ucz8udHJhbnNpZW50XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGVwb2NoIHJldHVybnMgdGhlIHRpbWUgc2luY2UgdW5peCBlcG9jaCBpbiBzZWNvbmRzLlxuICAgICAqL1xuICAgIGVwb2NoKCkge1xuICAgICAgICByZXR1cm4gKERhdGUubm93KCkgLyAxMDAwKSB8IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGNhbGN1bGF0ZU1heEFnZSBjYWxjdWxhdGVzIHRoZSBtYXggYWdlIG9mIHRoZSBzZXNzaW9uIGJhc2VkIG9uIGNyZWF0ZWRBdCBhbmQgdGhlIHJvbGxpbmcgYW5kIGFic29sdXRlIGR1cmF0aW9ucy5cbiAgICAgKi9cbiAgICBjYWxjdWxhdGVNYXhBZ2UoY3JlYXRlZEF0KSB7XG4gICAgICAgIGlmICghdGhpcy5yb2xsaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hYnNvbHV0ZUR1cmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRBdCA9IHRoaXMuZXBvY2goKTtcbiAgICAgICAgY29uc3QgZXhwaXJlc0F0ID0gTWF0aC5taW4odXBkYXRlZEF0ICsgdGhpcy5pbmFjdGl2aXR5RHVyYXRpb24sIGNyZWF0ZWRBdCArIHRoaXMuYWJzb2x1dGVEdXJhdGlvbik7XG4gICAgICAgIGNvbnN0IG1heEFnZSA9IGV4cGlyZXNBdCAtIHRoaXMuZXBvY2goKTtcbiAgICAgICAgcmV0dXJuIG1heEFnZSA+IDAgPyBtYXhBZ2UgOiAwO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/abstract-session-store.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/normalize-session.js":
/*!***********************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/normalize-session.js ***!
  \***********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LEGACY_COOKIE_NAME: () => (/* binding */ LEGACY_COOKIE_NAME),\n/* harmony export */   LegacySession: () => (/* binding */ LegacySession),\n/* harmony export */   normalizeStatefulSession: () => (/* binding */ normalizeStatefulSession),\n/* harmony export */   normalizeStatelessSession: () => (/* binding */ normalizeStatelessSession)\n/* harmony export */ });\nconst LEGACY_COOKIE_NAME = \"appSession\";\n/**\n * The user's session.\n */\nclass LegacySession {\n    constructor(user) {\n        this.user = user;\n    }\n}\nfunction normalizeStatelessSession(sessionCookie) {\n    // if the session cookie has an `iat` claim in the protected header, it's a legacy cookie\n    // otherwise, it's the new session cookie format and no transformation is needed\n    if (sessionCookie.protectedHeader.iat) {\n        const legacySession = sessionCookie;\n        return convertFromLegacy(legacySession.protectedHeader, legacySession.payload);\n    }\n    return sessionCookie.payload;\n}\nfunction normalizeStatefulSession(sessionData) {\n    if (sessionData.header?.iat) {\n        const legacySession = sessionData;\n        return convertFromLegacy(legacySession.header, legacySession.data);\n    }\n    return sessionData;\n}\nfunction convertFromLegacy(header, session) {\n    const userClaims = session.user;\n    return {\n        user: userClaims,\n        tokenSet: {\n            idToken: session.idToken ?? undefined,\n            accessToken: session.accessToken ?? undefined,\n            scope: session.accessTokenScope,\n            refreshToken: session.refreshToken,\n            expiresAt: session.accessTokenExpiresAt\n        },\n        internal: {\n            sid: userClaims.sid,\n            createdAt: header.iat\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9zZXNzaW9uL25vcm1hbGl6ZS1zZXNzaW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pdHN1eW9zaGkvRGVza3RvcC9hdXRoLXRlc3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9zZXNzaW9uL25vcm1hbGl6ZS1zZXNzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBMRUdBQ1lfQ09PS0lFX05BTUUgPSBcImFwcFNlc3Npb25cIjtcbi8qKlxuICogVGhlIHVzZXIncyBzZXNzaW9uLlxuICovXG5leHBvcnQgY2xhc3MgTGVnYWN5U2Vzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodXNlcikge1xuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVTdGF0ZWxlc3NTZXNzaW9uKHNlc3Npb25Db29raWUpIHtcbiAgICAvLyBpZiB0aGUgc2Vzc2lvbiBjb29raWUgaGFzIGFuIGBpYXRgIGNsYWltIGluIHRoZSBwcm90ZWN0ZWQgaGVhZGVyLCBpdCdzIGEgbGVnYWN5IGNvb2tpZVxuICAgIC8vIG90aGVyd2lzZSwgaXQncyB0aGUgbmV3IHNlc3Npb24gY29va2llIGZvcm1hdCBhbmQgbm8gdHJhbnNmb3JtYXRpb24gaXMgbmVlZGVkXG4gICAgaWYgKHNlc3Npb25Db29raWUucHJvdGVjdGVkSGVhZGVyLmlhdCkge1xuICAgICAgICBjb25zdCBsZWdhY3lTZXNzaW9uID0gc2Vzc2lvbkNvb2tpZTtcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRGcm9tTGVnYWN5KGxlZ2FjeVNlc3Npb24ucHJvdGVjdGVkSGVhZGVyLCBsZWdhY3lTZXNzaW9uLnBheWxvYWQpO1xuICAgIH1cbiAgICByZXR1cm4gc2Vzc2lvbkNvb2tpZS5wYXlsb2FkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVN0YXRlZnVsU2Vzc2lvbihzZXNzaW9uRGF0YSkge1xuICAgIGlmIChzZXNzaW9uRGF0YS5oZWFkZXI/LmlhdCkge1xuICAgICAgICBjb25zdCBsZWdhY3lTZXNzaW9uID0gc2Vzc2lvbkRhdGE7XG4gICAgICAgIHJldHVybiBjb252ZXJ0RnJvbUxlZ2FjeShsZWdhY3lTZXNzaW9uLmhlYWRlciwgbGVnYWN5U2Vzc2lvbi5kYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIHNlc3Npb25EYXRhO1xufVxuZnVuY3Rpb24gY29udmVydEZyb21MZWdhY3koaGVhZGVyLCBzZXNzaW9uKSB7XG4gICAgY29uc3QgdXNlckNsYWltcyA9IHNlc3Npb24udXNlcjtcbiAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB1c2VyQ2xhaW1zLFxuICAgICAgICB0b2tlblNldDoge1xuICAgICAgICAgICAgaWRUb2tlbjogc2Vzc2lvbi5pZFRva2VuID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBzZXNzaW9uLmFjY2Vzc1Rva2VuID8/IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNjb3BlOiBzZXNzaW9uLmFjY2Vzc1Rva2VuU2NvcGUsXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHNlc3Npb24ucmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgZXhwaXJlc0F0OiBzZXNzaW9uLmFjY2Vzc1Rva2VuRXhwaXJlc0F0XG4gICAgICAgIH0sXG4gICAgICAgIGludGVybmFsOiB7XG4gICAgICAgICAgICBzaWQ6IHVzZXJDbGFpbXMuc2lkLFxuICAgICAgICAgICAgY3JlYXRlZEF0OiBoZWFkZXIuaWF0XG4gICAgICAgIH1cbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/normalize-session.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/stateful-session-store.js":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/stateful-session-store.js ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StatefulSessionStore: () => (/* binding */ StatefulSessionStore)\n/* harmony export */ });\n/* harmony import */ var _cookies_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cookies.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/cookies.js\");\n/* harmony import */ var _abstract_session_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./abstract-session-store.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/abstract-session-store.js\");\n/* harmony import */ var _normalize_session_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./normalize-session.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/normalize-session.js\");\n\n\n\nconst generateId = () => {\n    const bytes = new Uint8Array(16);\n    crypto.getRandomValues(bytes);\n    return Array.from(bytes)\n        .map((b) => b.toString(16).padStart(2, \"0\"))\n        .join(\"\");\n};\nclass StatefulSessionStore extends _abstract_session_store_js__WEBPACK_IMPORTED_MODULE_1__.AbstractSessionStore {\n    constructor({ secret, store, rolling, absoluteDuration, inactivityDuration, cookieOptions }) {\n        super({\n            secret,\n            rolling,\n            absoluteDuration,\n            inactivityDuration,\n            cookieOptions\n        });\n        this.store = store;\n    }\n    async get(reqCookies) {\n        const cookie = reqCookies.get(this.sessionCookieName) ||\n            reqCookies.get(_normalize_session_js__WEBPACK_IMPORTED_MODULE_2__.LEGACY_COOKIE_NAME);\n        if (!cookie || !cookie.value) {\n            return null;\n        }\n        // we attempt to extract the session ID by decrypting the cookie value (assuming it's a JWE, v4+) first\n        // if that fails, we attempt to verify the cookie value as a signed cookie (legacy, v3-)\n        // if both fail, we return null\n        // this ensures that v3 sessions are respected and can be transparently rolled over to v4+ sessions\n        let sessionId = null;\n        try {\n            const sessionCookie = await _cookies_js__WEBPACK_IMPORTED_MODULE_0__.decrypt(cookie.value, this.secret);\n            if (sessionCookie === null) {\n                return null;\n            }\n            sessionId = sessionCookie.payload.id;\n        }\n        catch (e) {\n            // the session cookie could not be decrypted, try to verify if it's a legacy session\n            if (e.code === \"ERR_JWE_INVALID\") {\n                const legacySessionId = await _cookies_js__WEBPACK_IMPORTED_MODULE_0__.verifySigned(cookie.name, cookie.value, this.secret);\n                if (!legacySessionId) {\n                    return null;\n                }\n                sessionId = legacySessionId;\n            }\n        }\n        if (!sessionId) {\n            return null;\n        }\n        const session = await this.store.get(sessionId);\n        if (!session) {\n            return null;\n        }\n        return (0,_normalize_session_js__WEBPACK_IMPORTED_MODULE_2__.normalizeStatefulSession)(session);\n    }\n    async set(reqCookies, resCookies, session, isNew = false) {\n        // check if a session already exists. If so, maintain the existing session ID\n        let sessionId = null;\n        const cookieValue = reqCookies.get(this.sessionCookieName)?.value;\n        if (cookieValue) {\n            const sessionCookie = await _cookies_js__WEBPACK_IMPORTED_MODULE_0__.decrypt(cookieValue, this.secret);\n            if (sessionCookie) {\n                sessionId = sessionCookie.payload.id;\n            }\n        }\n        // if this is a new session created by a new login we need to remove the old session\n        // from the store and regenerate the session ID to prevent session fixation.\n        if (sessionId && isNew) {\n            await this.store.delete(sessionId);\n            sessionId = generateId();\n        }\n        if (!sessionId) {\n            sessionId = generateId();\n        }\n        const maxAge = this.calculateMaxAge(session.internal.createdAt);\n        const expiration = Date.now() / 1000 + maxAge;\n        const jwe = await _cookies_js__WEBPACK_IMPORTED_MODULE_0__.encrypt({\n            id: sessionId\n        }, this.secret, expiration);\n        resCookies.set(this.sessionCookieName, jwe.toString(), {\n            ...this.cookieConfig,\n            maxAge\n        });\n        await this.store.set(sessionId, session);\n        // to enable read-after-write in the same request for middleware\n        reqCookies.set(this.sessionCookieName, jwe.toString());\n        // Any existing v3 cookie can also be deleted once we have set a v4 cookie.\n        // In stateful sessions, we do not have to worry about chunking.\n        if (this.sessionCookieName !== _normalize_session_js__WEBPACK_IMPORTED_MODULE_2__.LEGACY_COOKIE_NAME &&\n            reqCookies.has(_normalize_session_js__WEBPACK_IMPORTED_MODULE_2__.LEGACY_COOKIE_NAME)) {\n            _cookies_js__WEBPACK_IMPORTED_MODULE_0__.deleteCookie(resCookies, _normalize_session_js__WEBPACK_IMPORTED_MODULE_2__.LEGACY_COOKIE_NAME, {\n                domain: this.cookieConfig.domain,\n                path: this.cookieConfig.path\n            });\n        }\n    }\n    async delete(reqCookies, resCookies) {\n        const cookieValue = reqCookies.get(this.sessionCookieName)?.value;\n        _cookies_js__WEBPACK_IMPORTED_MODULE_0__.deleteCookie(resCookies, this.sessionCookieName, {\n            domain: this.cookieConfig.domain,\n            path: this.cookieConfig.path\n        });\n        if (!cookieValue) {\n            return;\n        }\n        const session = await _cookies_js__WEBPACK_IMPORTED_MODULE_0__.decrypt(cookieValue, this.secret);\n        if (session) {\n            await this.store.delete(session.payload.id);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9zZXNzaW9uL3N0YXRlZnVsLXNlc3Npb24tc3RvcmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF5QztBQUMwQjtBQUNtQjtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLG1DQUFtQyw0RUFBb0I7QUFDOUQsa0JBQWtCLDZFQUE2RTtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIscUVBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxnREFBZTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLHFEQUFvQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0VBQXdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxnREFBZTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsZ0RBQWU7QUFDekM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMscUVBQWtCO0FBQ3pELDJCQUEyQixxRUFBa0I7QUFDN0MsWUFBWSxxREFBb0IsYUFBYSxxRUFBa0I7QUFDL0Q7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEscURBQW9CO0FBQzVCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGdEQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taXRzdXlvc2hpL0Rlc2t0b3AvYXV0aC10ZXN0L25vZGVfbW9kdWxlcy8ucG5wbS9AYXV0aDArbmV4dGpzLWF1dGgwQDQuMTEuMF9uZXh0QDE2LjAuMF9AYmFiZWwrY29yZUA3LjI4LjVfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfYjg5ZmQ3NjFlMmIxMDM4NTlhMjkxYWU5YWMwNDVkNTUvbm9kZV9tb2R1bGVzL0BhdXRoMC9uZXh0anMtYXV0aDAvZGlzdC9zZXJ2ZXIvc2Vzc2lvbi9zdGF0ZWZ1bC1zZXNzaW9uLXN0b3JlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGNvb2tpZXMgZnJvbSBcIi4uL2Nvb2tpZXMuanNcIjtcbmltcG9ydCB7IEFic3RyYWN0U2Vzc2lvblN0b3JlIH0gZnJvbSBcIi4vYWJzdHJhY3Qtc2Vzc2lvbi1zdG9yZS5qc1wiO1xuaW1wb3J0IHsgTEVHQUNZX0NPT0tJRV9OQU1FLCBub3JtYWxpemVTdGF0ZWZ1bFNlc3Npb24gfSBmcm9tIFwiLi9ub3JtYWxpemUtc2Vzc2lvbi5qc1wiO1xuY29uc3QgZ2VuZXJhdGVJZCA9ICgpID0+IHtcbiAgICBjb25zdCBieXRlcyA9IG5ldyBVaW50OEFycmF5KDE2KTtcbiAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGJ5dGVzKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShieXRlcylcbiAgICAgICAgLm1hcCgoYikgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpKVxuICAgICAgICAuam9pbihcIlwiKTtcbn07XG5leHBvcnQgY2xhc3MgU3RhdGVmdWxTZXNzaW9uU3RvcmUgZXh0ZW5kcyBBYnN0cmFjdFNlc3Npb25TdG9yZSB7XG4gICAgY29uc3RydWN0b3IoeyBzZWNyZXQsIHN0b3JlLCByb2xsaW5nLCBhYnNvbHV0ZUR1cmF0aW9uLCBpbmFjdGl2aXR5RHVyYXRpb24sIGNvb2tpZU9wdGlvbnMgfSkge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBzZWNyZXQsXG4gICAgICAgICAgICByb2xsaW5nLFxuICAgICAgICAgICAgYWJzb2x1dGVEdXJhdGlvbixcbiAgICAgICAgICAgIGluYWN0aXZpdHlEdXJhdGlvbixcbiAgICAgICAgICAgIGNvb2tpZU9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0KHJlcUNvb2tpZXMpIHtcbiAgICAgICAgY29uc3QgY29va2llID0gcmVxQ29va2llcy5nZXQodGhpcy5zZXNzaW9uQ29va2llTmFtZSkgfHxcbiAgICAgICAgICAgIHJlcUNvb2tpZXMuZ2V0KExFR0FDWV9DT09LSUVfTkFNRSk7XG4gICAgICAgIGlmICghY29va2llIHx8ICFjb29raWUudmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vIHdlIGF0dGVtcHQgdG8gZXh0cmFjdCB0aGUgc2Vzc2lvbiBJRCBieSBkZWNyeXB0aW5nIHRoZSBjb29raWUgdmFsdWUgKGFzc3VtaW5nIGl0J3MgYSBKV0UsIHY0KykgZmlyc3RcbiAgICAgICAgLy8gaWYgdGhhdCBmYWlscywgd2UgYXR0ZW1wdCB0byB2ZXJpZnkgdGhlIGNvb2tpZSB2YWx1ZSBhcyBhIHNpZ25lZCBjb29raWUgKGxlZ2FjeSwgdjMtKVxuICAgICAgICAvLyBpZiBib3RoIGZhaWwsIHdlIHJldHVybiBudWxsXG4gICAgICAgIC8vIHRoaXMgZW5zdXJlcyB0aGF0IHYzIHNlc3Npb25zIGFyZSByZXNwZWN0ZWQgYW5kIGNhbiBiZSB0cmFuc3BhcmVudGx5IHJvbGxlZCBvdmVyIHRvIHY0KyBzZXNzaW9uc1xuICAgICAgICBsZXQgc2Vzc2lvbklkID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25Db29raWUgPSBhd2FpdCBjb29raWVzLmRlY3J5cHQoY29va2llLnZhbHVlLCB0aGlzLnNlY3JldCk7XG4gICAgICAgICAgICBpZiAoc2Vzc2lvbkNvb2tpZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2Vzc2lvbklkID0gc2Vzc2lvbkNvb2tpZS5wYXlsb2FkLmlkO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyB0aGUgc2Vzc2lvbiBjb29raWUgY291bGQgbm90IGJlIGRlY3J5cHRlZCwgdHJ5IHRvIHZlcmlmeSBpZiBpdCdzIGEgbGVnYWN5IHNlc3Npb25cbiAgICAgICAgICAgIGlmIChlLmNvZGUgPT09IFwiRVJSX0pXRV9JTlZBTElEXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsZWdhY3lTZXNzaW9uSWQgPSBhd2FpdCBjb29raWVzLnZlcmlmeVNpZ25lZChjb29raWUubmFtZSwgY29va2llLnZhbHVlLCB0aGlzLnNlY3JldCk7XG4gICAgICAgICAgICAgICAgaWYgKCFsZWdhY3lTZXNzaW9uSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlc3Npb25JZCA9IGxlZ2FjeVNlc3Npb25JZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNlc3Npb25JZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMuc3RvcmUuZ2V0KHNlc3Npb25JZCk7XG4gICAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZVN0YXRlZnVsU2Vzc2lvbihzZXNzaW9uKTtcbiAgICB9XG4gICAgYXN5bmMgc2V0KHJlcUNvb2tpZXMsIHJlc0Nvb2tpZXMsIHNlc3Npb24sIGlzTmV3ID0gZmFsc2UpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgYSBzZXNzaW9uIGFscmVhZHkgZXhpc3RzLiBJZiBzbywgbWFpbnRhaW4gdGhlIGV4aXN0aW5nIHNlc3Npb24gSURcbiAgICAgICAgbGV0IHNlc3Npb25JZCA9IG51bGw7XG4gICAgICAgIGNvbnN0IGNvb2tpZVZhbHVlID0gcmVxQ29va2llcy5nZXQodGhpcy5zZXNzaW9uQ29va2llTmFtZSk/LnZhbHVlO1xuICAgICAgICBpZiAoY29va2llVmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb25Db29raWUgPSBhd2FpdCBjb29raWVzLmRlY3J5cHQoY29va2llVmFsdWUsIHRoaXMuc2VjcmV0KTtcbiAgICAgICAgICAgIGlmIChzZXNzaW9uQ29va2llKSB7XG4gICAgICAgICAgICAgICAgc2Vzc2lvbklkID0gc2Vzc2lvbkNvb2tpZS5wYXlsb2FkLmlkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGlmIHRoaXMgaXMgYSBuZXcgc2Vzc2lvbiBjcmVhdGVkIGJ5IGEgbmV3IGxvZ2luIHdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBvbGQgc2Vzc2lvblxuICAgICAgICAvLyBmcm9tIHRoZSBzdG9yZSBhbmQgcmVnZW5lcmF0ZSB0aGUgc2Vzc2lvbiBJRCB0byBwcmV2ZW50IHNlc3Npb24gZml4YXRpb24uXG4gICAgICAgIGlmIChzZXNzaW9uSWQgJiYgaXNOZXcpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RvcmUuZGVsZXRlKHNlc3Npb25JZCk7XG4gICAgICAgICAgICBzZXNzaW9uSWQgPSBnZW5lcmF0ZUlkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzZXNzaW9uSWQpIHtcbiAgICAgICAgICAgIHNlc3Npb25JZCA9IGdlbmVyYXRlSWQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXhBZ2UgPSB0aGlzLmNhbGN1bGF0ZU1heEFnZShzZXNzaW9uLmludGVybmFsLmNyZWF0ZWRBdCk7XG4gICAgICAgIGNvbnN0IGV4cGlyYXRpb24gPSBEYXRlLm5vdygpIC8gMTAwMCArIG1heEFnZTtcbiAgICAgICAgY29uc3QgandlID0gYXdhaXQgY29va2llcy5lbmNyeXB0KHtcbiAgICAgICAgICAgIGlkOiBzZXNzaW9uSWRcbiAgICAgICAgfSwgdGhpcy5zZWNyZXQsIGV4cGlyYXRpb24pO1xuICAgICAgICByZXNDb29raWVzLnNldCh0aGlzLnNlc3Npb25Db29raWVOYW1lLCBqd2UudG9TdHJpbmcoKSwge1xuICAgICAgICAgICAgLi4udGhpcy5jb29raWVDb25maWcsXG4gICAgICAgICAgICBtYXhBZ2VcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMuc3RvcmUuc2V0KHNlc3Npb25JZCwgc2Vzc2lvbik7XG4gICAgICAgIC8vIHRvIGVuYWJsZSByZWFkLWFmdGVyLXdyaXRlIGluIHRoZSBzYW1lIHJlcXVlc3QgZm9yIG1pZGRsZXdhcmVcbiAgICAgICAgcmVxQ29va2llcy5zZXQodGhpcy5zZXNzaW9uQ29va2llTmFtZSwgandlLnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBBbnkgZXhpc3RpbmcgdjMgY29va2llIGNhbiBhbHNvIGJlIGRlbGV0ZWQgb25jZSB3ZSBoYXZlIHNldCBhIHY0IGNvb2tpZS5cbiAgICAgICAgLy8gSW4gc3RhdGVmdWwgc2Vzc2lvbnMsIHdlIGRvIG5vdCBoYXZlIHRvIHdvcnJ5IGFib3V0IGNodW5raW5nLlxuICAgICAgICBpZiAodGhpcy5zZXNzaW9uQ29va2llTmFtZSAhPT0gTEVHQUNZX0NPT0tJRV9OQU1FICYmXG4gICAgICAgICAgICByZXFDb29raWVzLmhhcyhMRUdBQ1lfQ09PS0lFX05BTUUpKSB7XG4gICAgICAgICAgICBjb29raWVzLmRlbGV0ZUNvb2tpZShyZXNDb29raWVzLCBMRUdBQ1lfQ09PS0lFX05BTUUsIHtcbiAgICAgICAgICAgICAgICBkb21haW46IHRoaXMuY29va2llQ29uZmlnLmRvbWFpbixcbiAgICAgICAgICAgICAgICBwYXRoOiB0aGlzLmNvb2tpZUNvbmZpZy5wYXRoXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBkZWxldGUocmVxQ29va2llcywgcmVzQ29va2llcykge1xuICAgICAgICBjb25zdCBjb29raWVWYWx1ZSA9IHJlcUNvb2tpZXMuZ2V0KHRoaXMuc2Vzc2lvbkNvb2tpZU5hbWUpPy52YWx1ZTtcbiAgICAgICAgY29va2llcy5kZWxldGVDb29raWUocmVzQ29va2llcywgdGhpcy5zZXNzaW9uQ29va2llTmFtZSwge1xuICAgICAgICAgICAgZG9tYWluOiB0aGlzLmNvb2tpZUNvbmZpZy5kb21haW4sXG4gICAgICAgICAgICBwYXRoOiB0aGlzLmNvb2tpZUNvbmZpZy5wYXRoXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWNvb2tpZVZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGNvb2tpZXMuZGVjcnlwdChjb29raWVWYWx1ZSwgdGhpcy5zZWNyZXQpO1xuICAgICAgICBpZiAoc2Vzc2lvbikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zdG9yZS5kZWxldGUoc2Vzc2lvbi5wYXlsb2FkLmlkKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/stateful-session-store.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/stateless-session-store.js":
/*!*****************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/stateless-session-store.js ***!
  \*****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StatelessSessionStore: () => (/* binding */ StatelessSessionStore)\n/* harmony export */ });\n/* harmony import */ var _cookies_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../cookies.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/cookies.js\");\n/* harmony import */ var _abstract_session_store_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./abstract-session-store.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/abstract-session-store.js\");\n/* harmony import */ var _normalize_session_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./normalize-session.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/normalize-session.js\");\n\n\n\nclass StatelessSessionStore extends _abstract_session_store_js__WEBPACK_IMPORTED_MODULE_1__.AbstractSessionStore {\n    constructor({ secret, rolling, absoluteDuration, inactivityDuration, cookieOptions }) {\n        super({\n            secret,\n            rolling,\n            absoluteDuration,\n            inactivityDuration,\n            cookieOptions\n        });\n        this.connectionTokenSetsCookieName = \"__FC\";\n    }\n    async get(reqCookies) {\n        const cookieValue = _cookies_js__WEBPACK_IMPORTED_MODULE_0__.getChunkedCookie(this.sessionCookieName, reqCookies) ??\n            _cookies_js__WEBPACK_IMPORTED_MODULE_0__.getChunkedCookie(_normalize_session_js__WEBPACK_IMPORTED_MODULE_2__.LEGACY_COOKIE_NAME, reqCookies, true);\n        if (!cookieValue) {\n            return null;\n        }\n        const originalSession = await _cookies_js__WEBPACK_IMPORTED_MODULE_0__.decrypt(cookieValue, this.secret);\n        if (!originalSession) {\n            return null;\n        }\n        const normalizedStatelessSession = (0,_normalize_session_js__WEBPACK_IMPORTED_MODULE_2__.normalizeStatelessSession)(originalSession);\n        // As connection access tokens are stored in separate cookies,\n        // we need to get all cookies and only use those that are prefixed with `this.connectionTokenSetsCookieName`\n        const connectionTokenSetsCookies = this.getConnectionTokenSetsCookies(reqCookies);\n        const connectionTokenSets = [];\n        for (const cookie of connectionTokenSetsCookies) {\n            const decryptedCookie = await _cookies_js__WEBPACK_IMPORTED_MODULE_0__.decrypt(cookie.value, this.secret);\n            if (decryptedCookie) {\n                connectionTokenSets.push(decryptedCookie.payload);\n            }\n        }\n        return {\n            ...normalizedStatelessSession,\n            // Ensure that when there are no connection token sets, we omit the property.\n            ...(connectionTokenSets.length\n                ? {\n                    connectionTokenSets\n                }\n                : {})\n        };\n    }\n    /**\n     * save adds the encrypted session cookie as a `Set-Cookie` header.\n     */\n    async set(reqCookies, resCookies, session) {\n        const { connectionTokenSets, ...originalSession } = session;\n        const maxAge = this.calculateMaxAge(session.internal.createdAt);\n        const expiration = Math.floor(Date.now() / 1000) + maxAge;\n        const jwe = await _cookies_js__WEBPACK_IMPORTED_MODULE_0__.encrypt(originalSession, this.secret, expiration);\n        const cookieValue = jwe.toString();\n        const options = {\n            ...this.cookieConfig,\n            maxAge\n        };\n        _cookies_js__WEBPACK_IMPORTED_MODULE_0__.setChunkedCookie(this.sessionCookieName, cookieValue, options, reqCookies, resCookies);\n        // Store connection access tokens, each in its own cookie\n        if (connectionTokenSets?.length) {\n            await Promise.all(connectionTokenSets.map((connectionTokenSet, index) => this.storeInCookie(reqCookies, resCookies, connectionTokenSet, `${this.connectionTokenSetsCookieName}_${index}`, maxAge)));\n        }\n        // Any existing v3 cookie can be deleted as soon as we have set a v4 cookie.\n        // In stateless sessions, we do have to ensure we delete all chunks.\n        _cookies_js__WEBPACK_IMPORTED_MODULE_0__.deleteChunkedCookie(_normalize_session_js__WEBPACK_IMPORTED_MODULE_2__.LEGACY_COOKIE_NAME, reqCookies, resCookies, true, {\n            domain: this.cookieConfig.domain,\n            path: this.cookieConfig.path\n        });\n    }\n    async delete(reqCookies, resCookies) {\n        const deleteOptions = {\n            domain: this.cookieConfig.domain,\n            path: this.cookieConfig.path\n        };\n        _cookies_js__WEBPACK_IMPORTED_MODULE_0__.deleteChunkedCookie(this.sessionCookieName, reqCookies, resCookies, false, deleteOptions);\n        this.getConnectionTokenSetsCookies(reqCookies).forEach((cookie) => _cookies_js__WEBPACK_IMPORTED_MODULE_0__.deleteCookie(resCookies, cookie.name, deleteOptions));\n    }\n    async storeInCookie(reqCookies, resCookies, session, cookieName, maxAge) {\n        const expiration = Math.floor(Date.now() / 1000 + maxAge);\n        const jwe = await _cookies_js__WEBPACK_IMPORTED_MODULE_0__.encrypt(session, this.secret, expiration);\n        const cookieValue = jwe.toString();\n        resCookies.set(cookieName, jwe.toString(), {\n            ...this.cookieConfig,\n            maxAge\n        });\n        // to enable read-after-write in the same request for middleware\n        reqCookies.set(cookieName, cookieValue);\n        // check if the session cookie size exceeds 4096 bytes, and if so, log a warning\n        const cookieJarSizeTest = new _cookies_js__WEBPACK_IMPORTED_MODULE_0__.ResponseCookies(new Headers());\n        cookieJarSizeTest.set(cookieName, cookieValue, {\n            ...this.cookieConfig,\n            maxAge\n        });\n        if (new TextEncoder().encode(cookieJarSizeTest.toString()).length >= 4096) {\n            // if the cookie is the session cookie, log a warning with additional information about the claims and user profile.\n            if (cookieName === this.sessionCookieName) {\n                console.warn(`The ${cookieName} cookie size exceeds 4096 bytes, which may cause issues in some browsers. ` +\n                    \"Consider removing any unnecessary custom claims from the access token or the user profile. \" +\n                    \"Alternatively, you can use a stateful session implementation to store the session data in a data store.\");\n            }\n            else {\n                console.warn(`The ${cookieName} cookie size exceeds 4096 bytes, which may cause issues in some browsers. ` +\n                    \"You can use a stateful session implementation to store the session data in a data store.\");\n            }\n        }\n    }\n    getConnectionTokenSetsCookies(cookies) {\n        return cookies\n            .getAll()\n            .filter((cookie) => cookie.name.startsWith(this.connectionTokenSetsCookieName));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci9zZXNzaW9uL3N0YXRlbGVzcy1zZXNzaW9uLXN0b3JlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBeUM7QUFDMEI7QUFDb0I7QUFDaEYsb0NBQW9DLDRFQUFvQjtBQUMvRCxrQkFBa0Isc0VBQXNFO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseURBQXdCO0FBQ3BELFlBQVkseURBQXdCLENBQUMscUVBQWtCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxnREFBZTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsZ0ZBQXlCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsZ0RBQWU7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQTBDO0FBQzFEO0FBQ0E7QUFDQSwwQkFBMEIsZ0RBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEseURBQXdCO0FBQ2hDO0FBQ0E7QUFDQSx1SkFBdUosbUNBQW1DLEdBQUcsTUFBTTtBQUNuTTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDREQUEyQixDQUFDLHFFQUFrQjtBQUN0RDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNERBQTJCO0FBQ25DLDJFQUEyRSxxREFBb0I7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGdEQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyx3REFBdUI7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxZQUFZO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFlBQVk7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taXRzdXlvc2hpL0Rlc2t0b3AvYXV0aC10ZXN0L25vZGVfbW9kdWxlcy8ucG5wbS9AYXV0aDArbmV4dGpzLWF1dGgwQDQuMTEuMF9uZXh0QDE2LjAuMF9AYmFiZWwrY29yZUA3LjI4LjVfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfYjg5ZmQ3NjFlMmIxMDM4NTlhMjkxYWU5YWMwNDVkNTUvbm9kZV9tb2R1bGVzL0BhdXRoMC9uZXh0anMtYXV0aDAvZGlzdC9zZXJ2ZXIvc2Vzc2lvbi9zdGF0ZWxlc3Mtc2Vzc2lvbi1zdG9yZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBjb29raWVzIGZyb20gXCIuLi9jb29raWVzLmpzXCI7XG5pbXBvcnQgeyBBYnN0cmFjdFNlc3Npb25TdG9yZSB9IGZyb20gXCIuL2Fic3RyYWN0LXNlc3Npb24tc3RvcmUuanNcIjtcbmltcG9ydCB7IExFR0FDWV9DT09LSUVfTkFNRSwgbm9ybWFsaXplU3RhdGVsZXNzU2Vzc2lvbiB9IGZyb20gXCIuL25vcm1hbGl6ZS1zZXNzaW9uLmpzXCI7XG5leHBvcnQgY2xhc3MgU3RhdGVsZXNzU2Vzc2lvblN0b3JlIGV4dGVuZHMgQWJzdHJhY3RTZXNzaW9uU3RvcmUge1xuICAgIGNvbnN0cnVjdG9yKHsgc2VjcmV0LCByb2xsaW5nLCBhYnNvbHV0ZUR1cmF0aW9uLCBpbmFjdGl2aXR5RHVyYXRpb24sIGNvb2tpZU9wdGlvbnMgfSkge1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICBzZWNyZXQsXG4gICAgICAgICAgICByb2xsaW5nLFxuICAgICAgICAgICAgYWJzb2x1dGVEdXJhdGlvbixcbiAgICAgICAgICAgIGluYWN0aXZpdHlEdXJhdGlvbixcbiAgICAgICAgICAgIGNvb2tpZU9wdGlvbnNcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvblRva2VuU2V0c0Nvb2tpZU5hbWUgPSBcIl9fRkNcIjtcbiAgICB9XG4gICAgYXN5bmMgZ2V0KHJlcUNvb2tpZXMpIHtcbiAgICAgICAgY29uc3QgY29va2llVmFsdWUgPSBjb29raWVzLmdldENodW5rZWRDb29raWUodGhpcy5zZXNzaW9uQ29va2llTmFtZSwgcmVxQ29va2llcykgPz9cbiAgICAgICAgICAgIGNvb2tpZXMuZ2V0Q2h1bmtlZENvb2tpZShMRUdBQ1lfQ09PS0lFX05BTUUsIHJlcUNvb2tpZXMsIHRydWUpO1xuICAgICAgICBpZiAoIWNvb2tpZVZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvcmlnaW5hbFNlc3Npb24gPSBhd2FpdCBjb29raWVzLmRlY3J5cHQoY29va2llVmFsdWUsIHRoaXMuc2VjcmV0KTtcbiAgICAgICAgaWYgKCFvcmlnaW5hbFNlc3Npb24pIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRTdGF0ZWxlc3NTZXNzaW9uID0gbm9ybWFsaXplU3RhdGVsZXNzU2Vzc2lvbihvcmlnaW5hbFNlc3Npb24pO1xuICAgICAgICAvLyBBcyBjb25uZWN0aW9uIGFjY2VzcyB0b2tlbnMgYXJlIHN0b3JlZCBpbiBzZXBhcmF0ZSBjb29raWVzLFxuICAgICAgICAvLyB3ZSBuZWVkIHRvIGdldCBhbGwgY29va2llcyBhbmQgb25seSB1c2UgdGhvc2UgdGhhdCBhcmUgcHJlZml4ZWQgd2l0aCBgdGhpcy5jb25uZWN0aW9uVG9rZW5TZXRzQ29va2llTmFtZWBcbiAgICAgICAgY29uc3QgY29ubmVjdGlvblRva2VuU2V0c0Nvb2tpZXMgPSB0aGlzLmdldENvbm5lY3Rpb25Ub2tlblNldHNDb29raWVzKHJlcUNvb2tpZXMpO1xuICAgICAgICBjb25zdCBjb25uZWN0aW9uVG9rZW5TZXRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgY29va2llIG9mIGNvbm5lY3Rpb25Ub2tlblNldHNDb29raWVzKSB7XG4gICAgICAgICAgICBjb25zdCBkZWNyeXB0ZWRDb29raWUgPSBhd2FpdCBjb29raWVzLmRlY3J5cHQoY29va2llLnZhbHVlLCB0aGlzLnNlY3JldCk7XG4gICAgICAgICAgICBpZiAoZGVjcnlwdGVkQ29va2llKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdGlvblRva2VuU2V0cy5wdXNoKGRlY3J5cHRlZENvb2tpZS5wYXlsb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ubm9ybWFsaXplZFN0YXRlbGVzc1Nlc3Npb24sXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhhdCB3aGVuIHRoZXJlIGFyZSBubyBjb25uZWN0aW9uIHRva2VuIHNldHMsIHdlIG9taXQgdGhlIHByb3BlcnR5LlxuICAgICAgICAgICAgLi4uKGNvbm5lY3Rpb25Ub2tlblNldHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25Ub2tlblNldHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB7fSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogc2F2ZSBhZGRzIHRoZSBlbmNyeXB0ZWQgc2Vzc2lvbiBjb29raWUgYXMgYSBgU2V0LUNvb2tpZWAgaGVhZGVyLlxuICAgICAqL1xuICAgIGFzeW5jIHNldChyZXFDb29raWVzLCByZXNDb29raWVzLCBzZXNzaW9uKSB7XG4gICAgICAgIGNvbnN0IHsgY29ubmVjdGlvblRva2VuU2V0cywgLi4ub3JpZ2luYWxTZXNzaW9uIH0gPSBzZXNzaW9uO1xuICAgICAgICBjb25zdCBtYXhBZ2UgPSB0aGlzLmNhbGN1bGF0ZU1heEFnZShzZXNzaW9uLmludGVybmFsLmNyZWF0ZWRBdCk7XG4gICAgICAgIGNvbnN0IGV4cGlyYXRpb24gPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKSArIG1heEFnZTtcbiAgICAgICAgY29uc3QgandlID0gYXdhaXQgY29va2llcy5lbmNyeXB0KG9yaWdpbmFsU2Vzc2lvbiwgdGhpcy5zZWNyZXQsIGV4cGlyYXRpb24pO1xuICAgICAgICBjb25zdCBjb29raWVWYWx1ZSA9IGp3ZS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgLi4udGhpcy5jb29raWVDb25maWcsXG4gICAgICAgICAgICBtYXhBZ2VcbiAgICAgICAgfTtcbiAgICAgICAgY29va2llcy5zZXRDaHVua2VkQ29va2llKHRoaXMuc2Vzc2lvbkNvb2tpZU5hbWUsIGNvb2tpZVZhbHVlLCBvcHRpb25zLCByZXFDb29raWVzLCByZXNDb29raWVzKTtcbiAgICAgICAgLy8gU3RvcmUgY29ubmVjdGlvbiBhY2Nlc3MgdG9rZW5zLCBlYWNoIGluIGl0cyBvd24gY29va2llXG4gICAgICAgIGlmIChjb25uZWN0aW9uVG9rZW5TZXRzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNvbm5lY3Rpb25Ub2tlblNldHMubWFwKChjb25uZWN0aW9uVG9rZW5TZXQsIGluZGV4KSA9PiB0aGlzLnN0b3JlSW5Db29raWUocmVxQ29va2llcywgcmVzQ29va2llcywgY29ubmVjdGlvblRva2VuU2V0LCBgJHt0aGlzLmNvbm5lY3Rpb25Ub2tlblNldHNDb29raWVOYW1lfV8ke2luZGV4fWAsIG1heEFnZSkpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbnkgZXhpc3RpbmcgdjMgY29va2llIGNhbiBiZSBkZWxldGVkIGFzIHNvb24gYXMgd2UgaGF2ZSBzZXQgYSB2NCBjb29raWUuXG4gICAgICAgIC8vIEluIHN0YXRlbGVzcyBzZXNzaW9ucywgd2UgZG8gaGF2ZSB0byBlbnN1cmUgd2UgZGVsZXRlIGFsbCBjaHVua3MuXG4gICAgICAgIGNvb2tpZXMuZGVsZXRlQ2h1bmtlZENvb2tpZShMRUdBQ1lfQ09PS0lFX05BTUUsIHJlcUNvb2tpZXMsIHJlc0Nvb2tpZXMsIHRydWUsIHtcbiAgICAgICAgICAgIGRvbWFpbjogdGhpcy5jb29raWVDb25maWcuZG9tYWluLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5jb29raWVDb25maWcucGF0aFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgZGVsZXRlKHJlcUNvb2tpZXMsIHJlc0Nvb2tpZXMpIHtcbiAgICAgICAgY29uc3QgZGVsZXRlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGRvbWFpbjogdGhpcy5jb29raWVDb25maWcuZG9tYWluLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5jb29raWVDb25maWcucGF0aFxuICAgICAgICB9O1xuICAgICAgICBjb29raWVzLmRlbGV0ZUNodW5rZWRDb29raWUodGhpcy5zZXNzaW9uQ29va2llTmFtZSwgcmVxQ29va2llcywgcmVzQ29va2llcywgZmFsc2UsIGRlbGV0ZU9wdGlvbnMpO1xuICAgICAgICB0aGlzLmdldENvbm5lY3Rpb25Ub2tlblNldHNDb29raWVzKHJlcUNvb2tpZXMpLmZvckVhY2goKGNvb2tpZSkgPT4gY29va2llcy5kZWxldGVDb29raWUocmVzQ29va2llcywgY29va2llLm5hbWUsIGRlbGV0ZU9wdGlvbnMpKTtcbiAgICB9XG4gICAgYXN5bmMgc3RvcmVJbkNvb2tpZShyZXFDb29raWVzLCByZXNDb29raWVzLCBzZXNzaW9uLCBjb29raWVOYW1lLCBtYXhBZ2UpIHtcbiAgICAgICAgY29uc3QgZXhwaXJhdGlvbiA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDAgKyBtYXhBZ2UpO1xuICAgICAgICBjb25zdCBqd2UgPSBhd2FpdCBjb29raWVzLmVuY3J5cHQoc2Vzc2lvbiwgdGhpcy5zZWNyZXQsIGV4cGlyYXRpb24pO1xuICAgICAgICBjb25zdCBjb29raWVWYWx1ZSA9IGp3ZS50b1N0cmluZygpO1xuICAgICAgICByZXNDb29raWVzLnNldChjb29raWVOYW1lLCBqd2UudG9TdHJpbmcoKSwge1xuICAgICAgICAgICAgLi4udGhpcy5jb29raWVDb25maWcsXG4gICAgICAgICAgICBtYXhBZ2VcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHRvIGVuYWJsZSByZWFkLWFmdGVyLXdyaXRlIGluIHRoZSBzYW1lIHJlcXVlc3QgZm9yIG1pZGRsZXdhcmVcbiAgICAgICAgcmVxQ29va2llcy5zZXQoY29va2llTmFtZSwgY29va2llVmFsdWUpO1xuICAgICAgICAvLyBjaGVjayBpZiB0aGUgc2Vzc2lvbiBjb29raWUgc2l6ZSBleGNlZWRzIDQwOTYgYnl0ZXMsIGFuZCBpZiBzbywgbG9nIGEgd2FybmluZ1xuICAgICAgICBjb25zdCBjb29raWVKYXJTaXplVGVzdCA9IG5ldyBjb29raWVzLlJlc3BvbnNlQ29va2llcyhuZXcgSGVhZGVycygpKTtcbiAgICAgICAgY29va2llSmFyU2l6ZVRlc3Quc2V0KGNvb2tpZU5hbWUsIGNvb2tpZVZhbHVlLCB7XG4gICAgICAgICAgICAuLi50aGlzLmNvb2tpZUNvbmZpZyxcbiAgICAgICAgICAgIG1heEFnZVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShjb29raWVKYXJTaXplVGVzdC50b1N0cmluZygpKS5sZW5ndGggPj0gNDA5Nikge1xuICAgICAgICAgICAgLy8gaWYgdGhlIGNvb2tpZSBpcyB0aGUgc2Vzc2lvbiBjb29raWUsIGxvZyBhIHdhcm5pbmcgd2l0aCBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjbGFpbXMgYW5kIHVzZXIgcHJvZmlsZS5cbiAgICAgICAgICAgIGlmIChjb29raWVOYW1lID09PSB0aGlzLnNlc3Npb25Db29raWVOYW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUaGUgJHtjb29raWVOYW1lfSBjb29raWUgc2l6ZSBleGNlZWRzIDQwOTYgYnl0ZXMsIHdoaWNoIG1heSBjYXVzZSBpc3N1ZXMgaW4gc29tZSBicm93c2Vycy4gYCArXG4gICAgICAgICAgICAgICAgICAgIFwiQ29uc2lkZXIgcmVtb3ZpbmcgYW55IHVubmVjZXNzYXJ5IGN1c3RvbSBjbGFpbXMgZnJvbSB0aGUgYWNjZXNzIHRva2VuIG9yIHRoZSB1c2VyIHByb2ZpbGUuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJBbHRlcm5hdGl2ZWx5LCB5b3UgY2FuIHVzZSBhIHN0YXRlZnVsIHNlc3Npb24gaW1wbGVtZW50YXRpb24gdG8gc3RvcmUgdGhlIHNlc3Npb24gZGF0YSBpbiBhIGRhdGEgc3RvcmUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUaGUgJHtjb29raWVOYW1lfSBjb29raWUgc2l6ZSBleGNlZWRzIDQwOTYgYnl0ZXMsIHdoaWNoIG1heSBjYXVzZSBpc3N1ZXMgaW4gc29tZSBicm93c2Vycy4gYCArXG4gICAgICAgICAgICAgICAgICAgIFwiWW91IGNhbiB1c2UgYSBzdGF0ZWZ1bCBzZXNzaW9uIGltcGxlbWVudGF0aW9uIHRvIHN0b3JlIHRoZSBzZXNzaW9uIGRhdGEgaW4gYSBkYXRhIHN0b3JlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRDb25uZWN0aW9uVG9rZW5TZXRzQ29va2llcyhjb29raWVzKSB7XG4gICAgICAgIHJldHVybiBjb29raWVzXG4gICAgICAgICAgICAuZ2V0QWxsKClcbiAgICAgICAgICAgIC5maWx0ZXIoKGNvb2tpZSkgPT4gY29va2llLm5hbWUuc3RhcnRzV2l0aCh0aGlzLmNvbm5lY3Rpb25Ub2tlblNldHNDb29raWVOYW1lKSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/session/stateless-session-store.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/token-request-cache.js":
/*!*****************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/token-request-cache.js ***!
  \*****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GenericRequestCache: () => (/* binding */ GenericRequestCache),\n/* harmony export */   TokenRequestCache: () => (/* binding */ TokenRequestCache)\n/* harmony export */ });\n/* harmony import */ var _utils_scope_helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/scope-helpers.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/scope-helpers.js\");\nvar __classPrivateFieldGet = (undefined && undefined.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _GenericRequestCache_cache;\n\n/**\n * A generic cache to manage in-flight requests to prevent duplicate requests.\n * This ensures that multiple simultaneous requests for the same resource\n * (based on a generated cache key) will share the same promise and result.\n */\nclass GenericRequestCache {\n    constructor() {\n        _GenericRequestCache_cache.set(this, new Map());\n    }\n    /**\n     * Executes a request, caching the promise to prevent duplicate requests.\n     * @param requestHandler Function that performs the request and returns a promise.\n     * @param options Options used to generate the cache key.\n     * @returns A promise that resolves to the token response.\n     */\n    async execute(requestHandler, options) {\n        // Generate a cache key based on audience and scope\n        const cacheKey = this.getTokenCacheKey(options);\n        // See if we have an in-flight request for this key\n        const inFlightRequest = __classPrivateFieldGet(this, _GenericRequestCache_cache, \"f\").get(cacheKey);\n        // If we have an in-flight request for this key,\n        // return the existing promise to prevent duplicate requests.\n        if (inFlightRequest) {\n            return inFlightRequest;\n        }\n        // Create and cache the promise for this request\n        const requestPromise = requestHandler().finally(() => {\n            // Clean up the cache when the request completes (success or failure)\n            __classPrivateFieldGet(this, _GenericRequestCache_cache, \"f\").delete(cacheKey);\n        });\n        // Store the in-flight request in the cache\n        __classPrivateFieldGet(this, _GenericRequestCache_cache, \"f\").set(cacheKey, requestPromise);\n        return requestPromise;\n    }\n}\n_GenericRequestCache_cache = new WeakMap();\n/**\n * A cache to manage in-flight token requests to prevent race conditions.\n * This ensures that multiple simultaneous requests for the same token\n * (based on audience and scope) will share the same promise and result.\n */\nclass TokenRequestCache extends GenericRequestCache {\n    /**\n     * Generates a cache key for token requests based on audience and scope.\n     * @param options The options containing audience and scope\n     * @returns A unique cache key string\n     */\n    getTokenCacheKey({ options, authorizationParameters }) {\n        const audience = options.audience ?? authorizationParameters?.audience ?? \"\";\n        const scope = options.scope ??\n            (authorizationParameters?.scope &&\n                (0,_utils_scope_helpers_js__WEBPACK_IMPORTED_MODULE_0__.getScopeForAudience)(authorizationParameters?.scope, audience)) ??\n            \"\";\n        return `${audience}:${scope}`;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci90b2tlbi1yZXF1ZXN0LWNhY2hlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLDhCQUE4QixTQUFJLElBQUksU0FBSTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2dFO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixrQ0FBa0M7QUFDekQ7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDRFQUFtQjtBQUNuQztBQUNBLGtCQUFrQixTQUFTLEdBQUcsTUFBTTtBQUNwQztBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWl0c3V5b3NoaS9EZXNrdG9wL2F1dGgtdGVzdC9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgwK25leHRqcy1hdXRoMEA0LjExLjBfbmV4dEAxNi4wLjBfQGJhYmVsK2NvcmVANy4yOC41X3JlYWN0LWRvbUAxOS4yLjBfcmVhY3RAMTkuMi4wX2I4OWZkNzYxZTJiMTAzODU5YTI5MWFlOWFjMDQ1ZDU1L25vZGVfbW9kdWxlcy9AYXV0aDAvbmV4dGpzLWF1dGgwL2Rpc3Qvc2VydmVyL3Rva2VuLXJlcXVlc3QtY2FjaGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fY2xhc3NQcml2YXRlRmllbGRHZXQgPSAodGhpcyAmJiB0aGlzLl9fY2xhc3NQcml2YXRlRmllbGRHZXQpIHx8IGZ1bmN0aW9uIChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn07XG52YXIgX0dlbmVyaWNSZXF1ZXN0Q2FjaGVfY2FjaGU7XG5pbXBvcnQgeyBnZXRTY29wZUZvckF1ZGllbmNlIH0gZnJvbSBcIi4uL3V0aWxzL3Njb3BlLWhlbHBlcnMuanNcIjtcbi8qKlxuICogQSBnZW5lcmljIGNhY2hlIHRvIG1hbmFnZSBpbi1mbGlnaHQgcmVxdWVzdHMgdG8gcHJldmVudCBkdXBsaWNhdGUgcmVxdWVzdHMuXG4gKiBUaGlzIGVuc3VyZXMgdGhhdCBtdWx0aXBsZSBzaW11bHRhbmVvdXMgcmVxdWVzdHMgZm9yIHRoZSBzYW1lIHJlc291cmNlXG4gKiAoYmFzZWQgb24gYSBnZW5lcmF0ZWQgY2FjaGUga2V5KSB3aWxsIHNoYXJlIHRoZSBzYW1lIHByb21pc2UgYW5kIHJlc3VsdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEdlbmVyaWNSZXF1ZXN0Q2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBfR2VuZXJpY1JlcXVlc3RDYWNoZV9jYWNoZS5zZXQodGhpcywgbmV3IE1hcCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgYSByZXF1ZXN0LCBjYWNoaW5nIHRoZSBwcm9taXNlIHRvIHByZXZlbnQgZHVwbGljYXRlIHJlcXVlc3RzLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0SGFuZGxlciBGdW5jdGlvbiB0aGF0IHBlcmZvcm1zIHRoZSByZXF1ZXN0IGFuZCByZXR1cm5zIGEgcHJvbWlzZS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNhY2hlIGtleS5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgdG9rZW4gcmVzcG9uc2UuXG4gICAgICovXG4gICAgYXN5bmMgZXhlY3V0ZShyZXF1ZXN0SGFuZGxlciwgb3B0aW9ucykge1xuICAgICAgICAvLyBHZW5lcmF0ZSBhIGNhY2hlIGtleSBiYXNlZCBvbiBhdWRpZW5jZSBhbmQgc2NvcGVcbiAgICAgICAgY29uc3QgY2FjaGVLZXkgPSB0aGlzLmdldFRva2VuQ2FjaGVLZXkob3B0aW9ucyk7XG4gICAgICAgIC8vIFNlZSBpZiB3ZSBoYXZlIGFuIGluLWZsaWdodCByZXF1ZXN0IGZvciB0aGlzIGtleVxuICAgICAgICBjb25zdCBpbkZsaWdodFJlcXVlc3QgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9HZW5lcmljUmVxdWVzdENhY2hlX2NhY2hlLCBcImZcIikuZ2V0KGNhY2hlS2V5KTtcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBhbiBpbi1mbGlnaHQgcmVxdWVzdCBmb3IgdGhpcyBrZXksXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgcHJvbWlzZSB0byBwcmV2ZW50IGR1cGxpY2F0ZSByZXF1ZXN0cy5cbiAgICAgICAgaWYgKGluRmxpZ2h0UmVxdWVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIGluRmxpZ2h0UmVxdWVzdDtcbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhdGUgYW5kIGNhY2hlIHRoZSBwcm9taXNlIGZvciB0aGlzIHJlcXVlc3RcbiAgICAgICAgY29uc3QgcmVxdWVzdFByb21pc2UgPSByZXF1ZXN0SGFuZGxlcigpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGNhY2hlIHdoZW4gdGhlIHJlcXVlc3QgY29tcGxldGVzIChzdWNjZXNzIG9yIGZhaWx1cmUpXG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9HZW5lcmljUmVxdWVzdENhY2hlX2NhY2hlLCBcImZcIikuZGVsZXRlKGNhY2hlS2V5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFN0b3JlIHRoZSBpbi1mbGlnaHQgcmVxdWVzdCBpbiB0aGUgY2FjaGVcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfR2VuZXJpY1JlcXVlc3RDYWNoZV9jYWNoZSwgXCJmXCIpLnNldChjYWNoZUtleSwgcmVxdWVzdFByb21pc2UpO1xuICAgICAgICByZXR1cm4gcmVxdWVzdFByb21pc2U7XG4gICAgfVxufVxuX0dlbmVyaWNSZXF1ZXN0Q2FjaGVfY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuLyoqXG4gKiBBIGNhY2hlIHRvIG1hbmFnZSBpbi1mbGlnaHQgdG9rZW4gcmVxdWVzdHMgdG8gcHJldmVudCByYWNlIGNvbmRpdGlvbnMuXG4gKiBUaGlzIGVuc3VyZXMgdGhhdCBtdWx0aXBsZSBzaW11bHRhbmVvdXMgcmVxdWVzdHMgZm9yIHRoZSBzYW1lIHRva2VuXG4gKiAoYmFzZWQgb24gYXVkaWVuY2UgYW5kIHNjb3BlKSB3aWxsIHNoYXJlIHRoZSBzYW1lIHByb21pc2UgYW5kIHJlc3VsdC5cbiAqL1xuZXhwb3J0IGNsYXNzIFRva2VuUmVxdWVzdENhY2hlIGV4dGVuZHMgR2VuZXJpY1JlcXVlc3RDYWNoZSB7XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGEgY2FjaGUga2V5IGZvciB0b2tlbiByZXF1ZXN0cyBiYXNlZCBvbiBhdWRpZW5jZSBhbmQgc2NvcGUuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgY29udGFpbmluZyBhdWRpZW5jZSBhbmQgc2NvcGVcbiAgICAgKiBAcmV0dXJucyBBIHVuaXF1ZSBjYWNoZSBrZXkgc3RyaW5nXG4gICAgICovXG4gICAgZ2V0VG9rZW5DYWNoZUtleSh7IG9wdGlvbnMsIGF1dGhvcml6YXRpb25QYXJhbWV0ZXJzIH0pIHtcbiAgICAgICAgY29uc3QgYXVkaWVuY2UgPSBvcHRpb25zLmF1ZGllbmNlID8/IGF1dGhvcml6YXRpb25QYXJhbWV0ZXJzPy5hdWRpZW5jZSA/PyBcIlwiO1xuICAgICAgICBjb25zdCBzY29wZSA9IG9wdGlvbnMuc2NvcGUgPz9cbiAgICAgICAgICAgIChhdXRob3JpemF0aW9uUGFyYW1ldGVycz8uc2NvcGUgJiZcbiAgICAgICAgICAgICAgICBnZXRTY29wZUZvckF1ZGllbmNlKGF1dGhvcml6YXRpb25QYXJhbWV0ZXJzPy5zY29wZSwgYXVkaWVuY2UpKSA/P1xuICAgICAgICAgICAgXCJcIjtcbiAgICAgICAgcmV0dXJuIGAke2F1ZGllbmNlfToke3Njb3BlfWA7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/token-request-cache.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/transaction-store.js":
/*!***************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/transaction-store.js ***!
  \***************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TransactionStore: () => (/* binding */ TransactionStore)\n/* harmony export */ });\n/* harmony import */ var _cookies_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cookies.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/cookies.js\");\n\nconst TRANSACTION_COOKIE_PREFIX = \"__txn_\";\n/**\n * TransactionStore is responsible for storing the state required to successfully complete\n * an authentication transaction. The store relies on encrypted, stateless cookies to store\n * the transaction state.\n */\nclass TransactionStore {\n    constructor({ secret, cookieOptions, enableParallelTransactions }) {\n        this.secret = secret;\n        this.transactionCookiePrefix =\n            cookieOptions?.prefix ?? TRANSACTION_COOKIE_PREFIX;\n        this.cookieOptions = {\n            httpOnly: true,\n            sameSite: cookieOptions?.sameSite ?? \"lax\", // required to allow the cookie to be sent on the callback request\n            secure: cookieOptions?.secure ?? false,\n            path: cookieOptions?.path ?? \"/\",\n            domain: cookieOptions?.domain,\n            maxAge: cookieOptions?.maxAge || 60 * 60 // 1 hour in seconds\n        };\n        this.enableParallelTransactions = enableParallelTransactions ?? true;\n    }\n    /**\n     * Returns the name of the cookie used to store the transaction state.\n     * The cookie name is derived from the state parameter to prevent collisions\n     * between different transactions.\n     */\n    getTransactionCookieName(state) {\n        return this.enableParallelTransactions\n            ? `${this.transactionCookiePrefix}${state}`\n            : `${this.transactionCookiePrefix}`;\n    }\n    /**\n     * Returns the configured prefix for transaction cookies.\n     */\n    getCookiePrefix() {\n        return this.transactionCookiePrefix;\n    }\n    /**\n     * Saves the transaction state to an encrypted cookie.\n     *\n     * @param resCookies - The response cookies object to set the transaction cookie on\n     * @param transactionState - The transaction state to save\n     * @param reqCookies - Optional request cookies to check for existing transactions.\n     *                     When provided and `enableParallelTransactions` is false,\n     *                     will check for existing transaction cookies. When omitted,\n     *                     the existence check is skipped for performance optimization.\n     * @throws {Error} When transaction state is missing required state parameter\n     */\n    async save(resCookies, transactionState, reqCookies) {\n        if (!transactionState.state) {\n            throw new Error(\"Transaction state is required\");\n        }\n        // When parallel transactions are disabled, check if a transaction already exists\n        if (reqCookies && !this.enableParallelTransactions) {\n            const cookieName = this.getTransactionCookieName(transactionState.state);\n            const existingCookie = reqCookies.get(cookieName);\n            if (existingCookie) {\n                console.warn(\"A transaction is already in progress. Only one transaction is allowed when parallel transactions are disabled.\");\n                return;\n            }\n        }\n        const expirationSeconds = this.cookieOptions.maxAge;\n        const expiration = Math.floor(Date.now() / 1000 + expirationSeconds);\n        const jwe = await _cookies_js__WEBPACK_IMPORTED_MODULE_0__.encrypt(transactionState, this.secret, expiration);\n        resCookies.set(this.getTransactionCookieName(transactionState.state), jwe.toString(), this.cookieOptions);\n    }\n    async get(reqCookies, state) {\n        const cookieName = this.getTransactionCookieName(state);\n        const cookieValue = reqCookies.get(cookieName)?.value;\n        if (!cookieValue) {\n            return null;\n        }\n        return _cookies_js__WEBPACK_IMPORTED_MODULE_0__.decrypt(cookieValue, this.secret);\n    }\n    async delete(resCookies, state) {\n        _cookies_js__WEBPACK_IMPORTED_MODULE_0__.deleteCookie(resCookies, this.getTransactionCookieName(state), {\n            domain: this.cookieOptions.domain,\n            path: this.cookieOptions.path\n        });\n    }\n    /**\n     * Deletes all transaction cookies based on the configured prefix.\n     */\n    async deleteAll(reqCookies, resCookies) {\n        const txnPrefix = this.getCookiePrefix();\n        const deleteOptions = {\n            domain: this.cookieOptions.domain,\n            path: this.cookieOptions.path\n        };\n        reqCookies.getAll().forEach((cookie) => {\n            if (cookie.name.startsWith(txnPrefix)) {\n                _cookies_js__WEBPACK_IMPORTED_MODULE_0__.deleteCookie(resCookies, cookie.name, deleteOptions);\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci90cmFuc2FjdGlvbi1zdG9yZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGtCQUFrQixtREFBbUQ7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiw2QkFBNkIsRUFBRSxNQUFNO0FBQ3RELGlCQUFpQiw2QkFBNkI7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixnREFBZTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBZTtBQUM5QjtBQUNBO0FBQ0EsUUFBUSxxREFBb0I7QUFDNUI7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IscURBQW9CO0FBQ3BDO0FBQ0EsU0FBUztBQUNUO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taXRzdXlvc2hpL0Rlc2t0b3AvYXV0aC10ZXN0L25vZGVfbW9kdWxlcy8ucG5wbS9AYXV0aDArbmV4dGpzLWF1dGgwQDQuMTEuMF9uZXh0QDE2LjAuMF9AYmFiZWwrY29yZUA3LjI4LjVfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfYjg5ZmQ3NjFlMmIxMDM4NTlhMjkxYWU5YWMwNDVkNTUvbm9kZV9tb2R1bGVzL0BhdXRoMC9uZXh0anMtYXV0aDAvZGlzdC9zZXJ2ZXIvdHJhbnNhY3Rpb24tc3RvcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY29va2llcyBmcm9tIFwiLi9jb29raWVzLmpzXCI7XG5jb25zdCBUUkFOU0FDVElPTl9DT09LSUVfUFJFRklYID0gXCJfX3R4bl9cIjtcbi8qKlxuICogVHJhbnNhY3Rpb25TdG9yZSBpcyByZXNwb25zaWJsZSBmb3Igc3RvcmluZyB0aGUgc3RhdGUgcmVxdWlyZWQgdG8gc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlXG4gKiBhbiBhdXRoZW50aWNhdGlvbiB0cmFuc2FjdGlvbi4gVGhlIHN0b3JlIHJlbGllcyBvbiBlbmNyeXB0ZWQsIHN0YXRlbGVzcyBjb29raWVzIHRvIHN0b3JlXG4gKiB0aGUgdHJhbnNhY3Rpb24gc3RhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBUcmFuc2FjdGlvblN0b3JlIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHNlY3JldCwgY29va2llT3B0aW9ucywgZW5hYmxlUGFyYWxsZWxUcmFuc2FjdGlvbnMgfSkge1xuICAgICAgICB0aGlzLnNlY3JldCA9IHNlY3JldDtcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkNvb2tpZVByZWZpeCA9XG4gICAgICAgICAgICBjb29raWVPcHRpb25zPy5wcmVmaXggPz8gVFJBTlNBQ1RJT05fQ09PS0lFX1BSRUZJWDtcbiAgICAgICAgdGhpcy5jb29raWVPcHRpb25zID0ge1xuICAgICAgICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAgICAgICBzYW1lU2l0ZTogY29va2llT3B0aW9ucz8uc2FtZVNpdGUgPz8gXCJsYXhcIiwgLy8gcmVxdWlyZWQgdG8gYWxsb3cgdGhlIGNvb2tpZSB0byBiZSBzZW50IG9uIHRoZSBjYWxsYmFjayByZXF1ZXN0XG4gICAgICAgICAgICBzZWN1cmU6IGNvb2tpZU9wdGlvbnM/LnNlY3VyZSA/PyBmYWxzZSxcbiAgICAgICAgICAgIHBhdGg6IGNvb2tpZU9wdGlvbnM/LnBhdGggPz8gXCIvXCIsXG4gICAgICAgICAgICBkb21haW46IGNvb2tpZU9wdGlvbnM/LmRvbWFpbixcbiAgICAgICAgICAgIG1heEFnZTogY29va2llT3B0aW9ucz8ubWF4QWdlIHx8IDYwICogNjAgLy8gMSBob3VyIGluIHNlY29uZHNcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5lbmFibGVQYXJhbGxlbFRyYW5zYWN0aW9ucyA9IGVuYWJsZVBhcmFsbGVsVHJhbnNhY3Rpb25zID8/IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG5hbWUgb2YgdGhlIGNvb2tpZSB1c2VkIHRvIHN0b3JlIHRoZSB0cmFuc2FjdGlvbiBzdGF0ZS5cbiAgICAgKiBUaGUgY29va2llIG5hbWUgaXMgZGVyaXZlZCBmcm9tIHRoZSBzdGF0ZSBwYXJhbWV0ZXIgdG8gcHJldmVudCBjb2xsaXNpb25zXG4gICAgICogYmV0d2VlbiBkaWZmZXJlbnQgdHJhbnNhY3Rpb25zLlxuICAgICAqL1xuICAgIGdldFRyYW5zYWN0aW9uQ29va2llTmFtZShzdGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmFibGVQYXJhbGxlbFRyYW5zYWN0aW9uc1xuICAgICAgICAgICAgPyBgJHt0aGlzLnRyYW5zYWN0aW9uQ29va2llUHJlZml4fSR7c3RhdGV9YFxuICAgICAgICAgICAgOiBgJHt0aGlzLnRyYW5zYWN0aW9uQ29va2llUHJlZml4fWA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvbmZpZ3VyZWQgcHJlZml4IGZvciB0cmFuc2FjdGlvbiBjb29raWVzLlxuICAgICAqL1xuICAgIGdldENvb2tpZVByZWZpeCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNhY3Rpb25Db29raWVQcmVmaXg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNhdmVzIHRoZSB0cmFuc2FjdGlvbiBzdGF0ZSB0byBhbiBlbmNyeXB0ZWQgY29va2llLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlc0Nvb2tpZXMgLSBUaGUgcmVzcG9uc2UgY29va2llcyBvYmplY3QgdG8gc2V0IHRoZSB0cmFuc2FjdGlvbiBjb29raWUgb25cbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25TdGF0ZSAtIFRoZSB0cmFuc2FjdGlvbiBzdGF0ZSB0byBzYXZlXG4gICAgICogQHBhcmFtIHJlcUNvb2tpZXMgLSBPcHRpb25hbCByZXF1ZXN0IGNvb2tpZXMgdG8gY2hlY2sgZm9yIGV4aXN0aW5nIHRyYW5zYWN0aW9ucy5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIFdoZW4gcHJvdmlkZWQgYW5kIGBlbmFibGVQYXJhbGxlbFRyYW5zYWN0aW9uc2AgaXMgZmFsc2UsXG4gICAgICogICAgICAgICAgICAgICAgICAgICB3aWxsIGNoZWNrIGZvciBleGlzdGluZyB0cmFuc2FjdGlvbiBjb29raWVzLiBXaGVuIG9taXR0ZWQsXG4gICAgICogICAgICAgICAgICAgICAgICAgICB0aGUgZXhpc3RlbmNlIGNoZWNrIGlzIHNraXBwZWQgZm9yIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbi5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn0gV2hlbiB0cmFuc2FjdGlvbiBzdGF0ZSBpcyBtaXNzaW5nIHJlcXVpcmVkIHN0YXRlIHBhcmFtZXRlclxuICAgICAqL1xuICAgIGFzeW5jIHNhdmUocmVzQ29va2llcywgdHJhbnNhY3Rpb25TdGF0ZSwgcmVxQ29va2llcykge1xuICAgICAgICBpZiAoIXRyYW5zYWN0aW9uU3RhdGUuc3RhdGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyYW5zYWN0aW9uIHN0YXRlIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdoZW4gcGFyYWxsZWwgdHJhbnNhY3Rpb25zIGFyZSBkaXNhYmxlZCwgY2hlY2sgaWYgYSB0cmFuc2FjdGlvbiBhbHJlYWR5IGV4aXN0c1xuICAgICAgICBpZiAocmVxQ29va2llcyAmJiAhdGhpcy5lbmFibGVQYXJhbGxlbFRyYW5zYWN0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgY29va2llTmFtZSA9IHRoaXMuZ2V0VHJhbnNhY3Rpb25Db29raWVOYW1lKHRyYW5zYWN0aW9uU3RhdGUuc3RhdGUpO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDb29raWUgPSByZXFDb29raWVzLmdldChjb29raWVOYW1lKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0Nvb2tpZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkEgdHJhbnNhY3Rpb24gaXMgYWxyZWFkeSBpbiBwcm9ncmVzcy4gT25seSBvbmUgdHJhbnNhY3Rpb24gaXMgYWxsb3dlZCB3aGVuIHBhcmFsbGVsIHRyYW5zYWN0aW9ucyBhcmUgZGlzYWJsZWQuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBleHBpcmF0aW9uU2Vjb25kcyA9IHRoaXMuY29va2llT3B0aW9ucy5tYXhBZ2U7XG4gICAgICAgIGNvbnN0IGV4cGlyYXRpb24gPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwICsgZXhwaXJhdGlvblNlY29uZHMpO1xuICAgICAgICBjb25zdCBqd2UgPSBhd2FpdCBjb29raWVzLmVuY3J5cHQodHJhbnNhY3Rpb25TdGF0ZSwgdGhpcy5zZWNyZXQsIGV4cGlyYXRpb24pO1xuICAgICAgICByZXNDb29raWVzLnNldCh0aGlzLmdldFRyYW5zYWN0aW9uQ29va2llTmFtZSh0cmFuc2FjdGlvblN0YXRlLnN0YXRlKSwgandlLnRvU3RyaW5nKCksIHRoaXMuY29va2llT3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jIGdldChyZXFDb29raWVzLCBzdGF0ZSkge1xuICAgICAgICBjb25zdCBjb29raWVOYW1lID0gdGhpcy5nZXRUcmFuc2FjdGlvbkNvb2tpZU5hbWUoc3RhdGUpO1xuICAgICAgICBjb25zdCBjb29raWVWYWx1ZSA9IHJlcUNvb2tpZXMuZ2V0KGNvb2tpZU5hbWUpPy52YWx1ZTtcbiAgICAgICAgaWYgKCFjb29raWVWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvb2tpZXMuZGVjcnlwdChjb29raWVWYWx1ZSwgdGhpcy5zZWNyZXQpO1xuICAgIH1cbiAgICBhc3luYyBkZWxldGUocmVzQ29va2llcywgc3RhdGUpIHtcbiAgICAgICAgY29va2llcy5kZWxldGVDb29raWUocmVzQ29va2llcywgdGhpcy5nZXRUcmFuc2FjdGlvbkNvb2tpZU5hbWUoc3RhdGUpLCB7XG4gICAgICAgICAgICBkb21haW46IHRoaXMuY29va2llT3B0aW9ucy5kb21haW4sXG4gICAgICAgICAgICBwYXRoOiB0aGlzLmNvb2tpZU9wdGlvbnMucGF0aFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyBhbGwgdHJhbnNhY3Rpb24gY29va2llcyBiYXNlZCBvbiB0aGUgY29uZmlndXJlZCBwcmVmaXguXG4gICAgICovXG4gICAgYXN5bmMgZGVsZXRlQWxsKHJlcUNvb2tpZXMsIHJlc0Nvb2tpZXMpIHtcbiAgICAgICAgY29uc3QgdHhuUHJlZml4ID0gdGhpcy5nZXRDb29raWVQcmVmaXgoKTtcbiAgICAgICAgY29uc3QgZGVsZXRlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGRvbWFpbjogdGhpcy5jb29raWVPcHRpb25zLmRvbWFpbixcbiAgICAgICAgICAgIHBhdGg6IHRoaXMuY29va2llT3B0aW9ucy5wYXRoXG4gICAgICAgIH07XG4gICAgICAgIHJlcUNvb2tpZXMuZ2V0QWxsKCkuZm9yRWFjaCgoY29va2llKSA9PiB7XG4gICAgICAgICAgICBpZiAoY29va2llLm5hbWUuc3RhcnRzV2l0aCh0eG5QcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgY29va2llcy5kZWxldGVDb29raWUocmVzQ29va2llcywgY29va2llLm5hbWUsIGRlbGV0ZU9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/transaction-store.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/user.js":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/user.js ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_ID_TOKEN_CLAIMS: () => (/* binding */ DEFAULT_ID_TOKEN_CLAIMS),\n/* harmony export */   filterDefaultIdTokenClaims: () => (/* binding */ filterDefaultIdTokenClaims)\n/* harmony export */ });\n/**\n * Default claims for the ID token.\n */\nconst DEFAULT_ID_TOKEN_CLAIMS = [\n    \"sub\",\n    \"name\",\n    \"nickname\",\n    \"given_name\",\n    \"family_name\",\n    \"picture\",\n    \"email\",\n    \"email_verified\",\n    \"org_id\"\n];\n/**\n * Filters the claims to only include those that are considered default.\n * @param claims The claims to filter.\n * @returns The filtered claims containing only default ID token claims.\n */\nfunction filterDefaultIdTokenClaims(claims) {\n    return Object.keys(claims).reduce((acc, key) => {\n        if (DEFAULT_ID_TOKEN_CLAIMS.includes(key)) {\n            acc[key] = claims[key];\n        }\n        return acc;\n    }, {});\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci91c2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVCIsInNvdXJjZXMiOlsiL1VzZXJzL21pdHN1eW9zaGkvRGVza3RvcC9hdXRoLXRlc3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3NlcnZlci91c2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGVmYXVsdCBjbGFpbXMgZm9yIHRoZSBJRCB0b2tlbi5cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfSURfVE9LRU5fQ0xBSU1TID0gW1xuICAgIFwic3ViXCIsXG4gICAgXCJuYW1lXCIsXG4gICAgXCJuaWNrbmFtZVwiLFxuICAgIFwiZ2l2ZW5fbmFtZVwiLFxuICAgIFwiZmFtaWx5X25hbWVcIixcbiAgICBcInBpY3R1cmVcIixcbiAgICBcImVtYWlsXCIsXG4gICAgXCJlbWFpbF92ZXJpZmllZFwiLFxuICAgIFwib3JnX2lkXCJcbl07XG4vKipcbiAqIEZpbHRlcnMgdGhlIGNsYWltcyB0byBvbmx5IGluY2x1ZGUgdGhvc2UgdGhhdCBhcmUgY29uc2lkZXJlZCBkZWZhdWx0LlxuICogQHBhcmFtIGNsYWltcyBUaGUgY2xhaW1zIHRvIGZpbHRlci5cbiAqIEByZXR1cm5zIFRoZSBmaWx0ZXJlZCBjbGFpbXMgY29udGFpbmluZyBvbmx5IGRlZmF1bHQgSUQgdG9rZW4gY2xhaW1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyRGVmYXVsdElkVG9rZW5DbGFpbXMoY2xhaW1zKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKGNsYWltcykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgICBpZiAoREVGQVVMVF9JRF9UT0tFTl9DTEFJTVMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgYWNjW2tleV0gPSBjbGFpbXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIHt9KTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/server/user.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/connected-accounts.js":
/*!***************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/connected-accounts.js ***!
  \***************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RESPONSE_TYPES: () => (/* binding */ RESPONSE_TYPES)\n/* harmony export */ });\nvar RESPONSE_TYPES;\n(function (RESPONSE_TYPES) {\n    /**\n     * Authorization Code flow.\n     */\n    RESPONSE_TYPES[\"CODE\"] = \"code\";\n    /**\n     * Connect Account flow.\n     */\n    RESPONSE_TYPES[\"CONNECT_CODE\"] = \"connect_code\";\n})(RESPONSE_TYPES || (RESPONSE_TYPES = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3R5cGVzL2Nvbm5lY3RlZC1hY2NvdW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdDQUF3QyIsInNvdXJjZXMiOlsiL1VzZXJzL21pdHN1eW9zaGkvRGVza3RvcC9hdXRoLXRlc3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3R5cGVzL2Nvbm5lY3RlZC1hY2NvdW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgdmFyIFJFU1BPTlNFX1RZUEVTO1xuKGZ1bmN0aW9uIChSRVNQT05TRV9UWVBFUykge1xuICAgIC8qKlxuICAgICAqIEF1dGhvcml6YXRpb24gQ29kZSBmbG93LlxuICAgICAqL1xuICAgIFJFU1BPTlNFX1RZUEVTW1wiQ09ERVwiXSA9IFwiY29kZVwiO1xuICAgIC8qKlxuICAgICAqIENvbm5lY3QgQWNjb3VudCBmbG93LlxuICAgICAqL1xuICAgIFJFU1BPTlNFX1RZUEVTW1wiQ09OTkVDVF9DT0RFXCJdID0gXCJjb25uZWN0X2NvZGVcIjtcbn0pKFJFU1BPTlNFX1RZUEVTIHx8IChSRVNQT05TRV9UWVBFUyA9IHt9KSk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/connected-accounts.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/index.js":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/index.js ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RESPONSE_TYPES: () => (/* reexport safe */ _connected_accounts_js__WEBPACK_IMPORTED_MODULE_1__.RESPONSE_TYPES),\n/* harmony export */   SUBJECT_TOKEN_TYPES: () => (/* reexport safe */ _token_vault_js__WEBPACK_IMPORTED_MODULE_0__.SUBJECT_TOKEN_TYPES)\n/* harmony export */ });\n/* harmony import */ var _token_vault_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./token-vault.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/token-vault.js\");\n/* harmony import */ var _connected_accounts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./connected-accounts.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/connected-accounts.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3R5cGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUQ7QUFDRSIsInNvdXJjZXMiOlsiL1VzZXJzL21pdHN1eW9zaGkvRGVza3RvcC9hdXRoLXRlc3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3R5cGVzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IFNVQkpFQ1RfVE9LRU5fVFlQRVMgfSBmcm9tIFwiLi90b2tlbi12YXVsdC5qc1wiO1xuZXhwb3J0IHsgUkVTUE9OU0VfVFlQRVMgfSBmcm9tIFwiLi9jb25uZWN0ZWQtYWNjb3VudHMuanNcIjtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/index.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/token-vault.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/token-vault.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SUBJECT_TOKEN_TYPES: () => (/* binding */ SUBJECT_TOKEN_TYPES)\n/* harmony export */ });\nvar SUBJECT_TOKEN_TYPES;\n(function (SUBJECT_TOKEN_TYPES) {\n    /**\n     * Indicates that the token is an OAuth 2.0 refresh token issued by the given authorization server.\n     *\n     * @see {@link https://datatracker.ietf.org/doc/html/rfc8693#section-3-3.4 RFC 8693 Section 3-3.4}\n     */\n    SUBJECT_TOKEN_TYPES[\"SUBJECT_TYPE_REFRESH_TOKEN\"] = \"urn:ietf:params:oauth:token-type:refresh_token\";\n    /**\n     * Indicates that the token is an OAuth 2.0 access token issued by the given authorization server.\n     *\n     * @see {@link https://datatracker.ietf.org/doc/html/rfc8693#section-3-3.2 RFC 8693 Section 3-3.2}\n     */\n    SUBJECT_TOKEN_TYPES[\"SUBJECT_TYPE_ACCESS_TOKEN\"] = \"urn:ietf:params:oauth:token-type:access_token\";\n})(SUBJECT_TOKEN_TYPES || (SUBJECT_TOKEN_TYPES = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3R5cGVzL3Rva2VuLXZhdWx0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLENBQUMsa0RBQWtEIiwic291cmNlcyI6WyIvVXNlcnMvbWl0c3V5b3NoaS9EZXNrdG9wL2F1dGgtdGVzdC9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgwK25leHRqcy1hdXRoMEA0LjExLjBfbmV4dEAxNi4wLjBfQGJhYmVsK2NvcmVANy4yOC41X3JlYWN0LWRvbUAxOS4yLjBfcmVhY3RAMTkuMi4wX2I4OWZkNzYxZTJiMTAzODU5YTI5MWFlOWFjMDQ1ZDU1L25vZGVfbW9kdWxlcy9AYXV0aDAvbmV4dGpzLWF1dGgwL2Rpc3QvdHlwZXMvdG9rZW4tdmF1bHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBTVUJKRUNUX1RPS0VOX1RZUEVTO1xuKGZ1bmN0aW9uIChTVUJKRUNUX1RPS0VOX1RZUEVTKSB7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHRva2VuIGlzIGFuIE9BdXRoIDIuMCByZWZyZXNoIHRva2VuIGlzc3VlZCBieSB0aGUgZ2l2ZW4gYXV0aG9yaXphdGlvbiBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzg2OTMjc2VjdGlvbi0zLTMuNCBSRkMgODY5MyBTZWN0aW9uIDMtMy40fVxuICAgICAqL1xuICAgIFNVQkpFQ1RfVE9LRU5fVFlQRVNbXCJTVUJKRUNUX1RZUEVfUkVGUkVTSF9UT0tFTlwiXSA9IFwidXJuOmlldGY6cGFyYW1zOm9hdXRoOnRva2VuLXR5cGU6cmVmcmVzaF90b2tlblwiO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSB0b2tlbiBpcyBhbiBPQXV0aCAyLjAgYWNjZXNzIHRva2VuIGlzc3VlZCBieSB0aGUgZ2l2ZW4gYXV0aG9yaXphdGlvbiBzZXJ2ZXIuXG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzg2OTMjc2VjdGlvbi0zLTMuMiBSRkMgODY5MyBTZWN0aW9uIDMtMy4yfVxuICAgICAqL1xuICAgIFNVQkpFQ1RfVE9LRU5fVFlQRVNbXCJTVUJKRUNUX1RZUEVfQUNDRVNTX1RPS0VOXCJdID0gXCJ1cm46aWV0ZjpwYXJhbXM6b2F1dGg6dG9rZW4tdHlwZTphY2Nlc3NfdG9rZW5cIjtcbn0pKFNVQkpFQ1RfVE9LRU5fVFlQRVMgfHwgKFNVQkpFQ1RfVE9LRU5fVFlQRVMgPSB7fSkpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/types/token-vault.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/authorization-params-helpers.js":
/*!*************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/authorization-params-helpers.js ***!
  \*************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   mergeAuthorizationParamsIntoSearchParams: () => (/* binding */ mergeAuthorizationParamsIntoSearchParams)\n/* harmony export */ });\n/* harmony import */ var _scope_helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scope-helpers.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/scope-helpers.js\");\n\n/**\n * Merges two instances of authorization parameters into a URLSearchParams object,\n * excluding any parameters specified in the excludedParams array.\n * If the scope is provided as a map of audience to scopes, it selects the appropriate scope\n * based on the audience parameter.\n * @param leftParams The base authorization parameters\n * @param rightParams The authorization parameters to merge, overriding leftParams\n * @param excludedParams Array of parameter names to exclude from the resulting URLSearchParams\n * @returns URLSearchParams containing the merged authorization parameters\n *\n * @remarks The scope properties override each other, no merging is done.\n * @throws {InvalidConfigurationError} If scope is defined as a map but no audience is provided.\n */\nfunction mergeAuthorizationParamsIntoSearchParams(leftParams, rightParams, excludedParams = []) {\n    const authorizationParams = new URLSearchParams();\n    // First we merge the two sets of authorization parameters,\n    // with the rightParams taking precedence over leftParams.\n    // We then iterate over the merged object and add each key/value pair to the URLSearchParams,\n    // excluding any keys specified in excludedParams.\n    // We also skip any keys with null or undefined values.\n    // Additionally, when the scope is provided as a map of audience to scopes, we need to pick the correct\n    // scope for the current audience.\n    const mergedAuthorizationParams = {\n        ...leftParams,\n        ...rightParams\n    };\n    Object.entries(mergedAuthorizationParams).forEach(([key, val]) => {\n        if (!excludedParams || (!excludedParams.includes(key) && val != null)) {\n            // When the scope is provided as a map of audience to scopes, we need to pick the correct\n            // scope for the current audience.\n            if (key === \"scope\" && typeof val === \"object\") {\n                val = (0,_scope_helpers_js__WEBPACK_IMPORTED_MODULE_0__.getScopeForAudience)(val, mergedAuthorizationParams.audience);\n            }\n            // Only when there is a defined value, we set it.\n            if (val) {\n                authorizationParams.set(key, String(val));\n            }\n        }\n    });\n    return authorizationParams;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL2F1dGhvcml6YXRpb24tcGFyYW1zLWhlbHBlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBeUQ7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksMkJBQTJCO0FBQ3ZDO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNFQUFtQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pdHN1eW9zaGkvRGVza3RvcC9hdXRoLXRlc3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL2F1dGhvcml6YXRpb24tcGFyYW1zLWhlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0U2NvcGVGb3JBdWRpZW5jZSB9IGZyb20gXCIuL3Njb3BlLWhlbHBlcnMuanNcIjtcbi8qKlxuICogTWVyZ2VzIHR3byBpbnN0YW5jZXMgb2YgYXV0aG9yaXphdGlvbiBwYXJhbWV0ZXJzIGludG8gYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0LFxuICogZXhjbHVkaW5nIGFueSBwYXJhbWV0ZXJzIHNwZWNpZmllZCBpbiB0aGUgZXhjbHVkZWRQYXJhbXMgYXJyYXkuXG4gKiBJZiB0aGUgc2NvcGUgaXMgcHJvdmlkZWQgYXMgYSBtYXAgb2YgYXVkaWVuY2UgdG8gc2NvcGVzLCBpdCBzZWxlY3RzIHRoZSBhcHByb3ByaWF0ZSBzY29wZVxuICogYmFzZWQgb24gdGhlIGF1ZGllbmNlIHBhcmFtZXRlci5cbiAqIEBwYXJhbSBsZWZ0UGFyYW1zIFRoZSBiYXNlIGF1dGhvcml6YXRpb24gcGFyYW1ldGVyc1xuICogQHBhcmFtIHJpZ2h0UGFyYW1zIFRoZSBhdXRob3JpemF0aW9uIHBhcmFtZXRlcnMgdG8gbWVyZ2UsIG92ZXJyaWRpbmcgbGVmdFBhcmFtc1xuICogQHBhcmFtIGV4Y2x1ZGVkUGFyYW1zIEFycmF5IG9mIHBhcmFtZXRlciBuYW1lcyB0byBleGNsdWRlIGZyb20gdGhlIHJlc3VsdGluZyBVUkxTZWFyY2hQYXJhbXNcbiAqIEByZXR1cm5zIFVSTFNlYXJjaFBhcmFtcyBjb250YWluaW5nIHRoZSBtZXJnZWQgYXV0aG9yaXphdGlvbiBwYXJhbWV0ZXJzXG4gKlxuICogQHJlbWFya3MgVGhlIHNjb3BlIHByb3BlcnRpZXMgb3ZlcnJpZGUgZWFjaCBvdGhlciwgbm8gbWVyZ2luZyBpcyBkb25lLlxuICogQHRocm93cyB7SW52YWxpZENvbmZpZ3VyYXRpb25FcnJvcn0gSWYgc2NvcGUgaXMgZGVmaW5lZCBhcyBhIG1hcCBidXQgbm8gYXVkaWVuY2UgaXMgcHJvdmlkZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUF1dGhvcml6YXRpb25QYXJhbXNJbnRvU2VhcmNoUGFyYW1zKGxlZnRQYXJhbXMsIHJpZ2h0UGFyYW1zLCBleGNsdWRlZFBhcmFtcyA9IFtdKSB7XG4gICAgY29uc3QgYXV0aG9yaXphdGlvblBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgICAvLyBGaXJzdCB3ZSBtZXJnZSB0aGUgdHdvIHNldHMgb2YgYXV0aG9yaXphdGlvbiBwYXJhbWV0ZXJzLFxuICAgIC8vIHdpdGggdGhlIHJpZ2h0UGFyYW1zIHRha2luZyBwcmVjZWRlbmNlIG92ZXIgbGVmdFBhcmFtcy5cbiAgICAvLyBXZSB0aGVuIGl0ZXJhdGUgb3ZlciB0aGUgbWVyZ2VkIG9iamVjdCBhbmQgYWRkIGVhY2gga2V5L3ZhbHVlIHBhaXIgdG8gdGhlIFVSTFNlYXJjaFBhcmFtcyxcbiAgICAvLyBleGNsdWRpbmcgYW55IGtleXMgc3BlY2lmaWVkIGluIGV4Y2x1ZGVkUGFyYW1zLlxuICAgIC8vIFdlIGFsc28gc2tpcCBhbnkga2V5cyB3aXRoIG51bGwgb3IgdW5kZWZpbmVkIHZhbHVlcy5cbiAgICAvLyBBZGRpdGlvbmFsbHksIHdoZW4gdGhlIHNjb3BlIGlzIHByb3ZpZGVkIGFzIGEgbWFwIG9mIGF1ZGllbmNlIHRvIHNjb3Blcywgd2UgbmVlZCB0byBwaWNrIHRoZSBjb3JyZWN0XG4gICAgLy8gc2NvcGUgZm9yIHRoZSBjdXJyZW50IGF1ZGllbmNlLlxuICAgIGNvbnN0IG1lcmdlZEF1dGhvcml6YXRpb25QYXJhbXMgPSB7XG4gICAgICAgIC4uLmxlZnRQYXJhbXMsXG4gICAgICAgIC4uLnJpZ2h0UGFyYW1zXG4gICAgfTtcbiAgICBPYmplY3QuZW50cmllcyhtZXJnZWRBdXRob3JpemF0aW9uUGFyYW1zKS5mb3JFYWNoKChba2V5LCB2YWxdKSA9PiB7XG4gICAgICAgIGlmICghZXhjbHVkZWRQYXJhbXMgfHwgKCFleGNsdWRlZFBhcmFtcy5pbmNsdWRlcyhrZXkpICYmIHZhbCAhPSBudWxsKSkge1xuICAgICAgICAgICAgLy8gV2hlbiB0aGUgc2NvcGUgaXMgcHJvdmlkZWQgYXMgYSBtYXAgb2YgYXVkaWVuY2UgdG8gc2NvcGVzLCB3ZSBuZWVkIHRvIHBpY2sgdGhlIGNvcnJlY3RcbiAgICAgICAgICAgIC8vIHNjb3BlIGZvciB0aGUgY3VycmVudCBhdWRpZW5jZS5cbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwic2NvcGVcIiAmJiB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgdmFsID0gZ2V0U2NvcGVGb3JBdWRpZW5jZSh2YWwsIG1lcmdlZEF1dGhvcml6YXRpb25QYXJhbXMuYXVkaWVuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gT25seSB3aGVuIHRoZXJlIGlzIGEgZGVmaW5lZCB2YWx1ZSwgd2Ugc2V0IGl0LlxuICAgICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb25QYXJhbXMuc2V0KGtleSwgU3RyaW5nKHZhbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGF1dGhvcml6YXRpb25QYXJhbXM7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/authorization-params-helpers.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/constants.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/constants.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_DPOP_CLOCK_SKEW: () => (/* binding */ DEFAULT_DPOP_CLOCK_SKEW),\n/* harmony export */   DEFAULT_DPOP_CLOCK_TOLERANCE: () => (/* binding */ DEFAULT_DPOP_CLOCK_TOLERANCE),\n/* harmony export */   DEFAULT_RETRY_DELAY: () => (/* binding */ DEFAULT_RETRY_DELAY),\n/* harmony export */   DEFAULT_RETRY_JITTER: () => (/* binding */ DEFAULT_RETRY_JITTER),\n/* harmony export */   DEFAULT_SCOPES: () => (/* binding */ DEFAULT_SCOPES),\n/* harmony export */   MAX_RECOMMENDED_DPOP_CLOCK_TOLERANCE: () => (/* binding */ MAX_RECOMMENDED_DPOP_CLOCK_TOLERANCE)\n/* harmony export */ });\n/**\n * The default scopes to request when none are provided.\n * These scopes provide basic user information and authentication capabilities.\n */\nconst DEFAULT_SCOPES = [\n    \"openid\",\n    \"profile\",\n    \"email\",\n    \"offline_access\"\n].join(\" \");\n/**\n * Default clock skew in seconds for DPoP proof validation.\n *\n * Clock skew adjusts the assumed current time when validating DPoP proofs.\n * Use positive values when the local clock is behind the server,\n * negative values when the local clock is ahead.\n *\n * @default 0 - No clock adjustment needed\n */\nconst DEFAULT_DPOP_CLOCK_SKEW = 0;\n/**\n * Default clock tolerance in seconds for DPoP proof validation.\n *\n * Allows for reasonable clock differences between client and server during\n * DPoP proof validation. Higher values are more permissive but may weaken\n * security by allowing replay attacks within a wider time window.\n *\n * @default 30 - Allows 30 seconds clock difference\n */\nconst DEFAULT_DPOP_CLOCK_TOLERANCE = 30;\n/**\n * Maximum recommended clock tolerance in seconds for DPoP proof validation.\n *\n * Values exceeding this threshold may significantly weaken DPoP security\n * by allowing replay attacks within a wider time window. Production\n * applications should use NTP for clock synchronization instead of\n * increasing tolerance beyond this limit.\n *\n * @default 300 - 5 minutes maximum recommended tolerance\n */\nconst MAX_RECOMMENDED_DPOP_CLOCK_TOLERANCE = 300;\n/**\n * Default retry delay in milliseconds for DPoP nonce errors.\n *\n * When a DPoP nonce error occurs, the SDK waits this duration before\n * retrying the request with the new nonce provided by the server.\n * This helps prevent overwhelming the server with rapid retry attempts.\n *\n * @default 100 - 100 milliseconds delay\n */\nconst DEFAULT_RETRY_DELAY = 100;\n/**\n * Default jitter setting for retry delay.\n *\n * When enabled, adds randomness to the retry delay (50-100% of configured delay)\n * to prevent thundering herd effects when multiple clients encounter\n * nonce errors simultaneously.\n *\n * @default true - Jitter enabled for better load distribution\n */\nconst DEFAULT_RETRY_JITTER = true;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL2NvbnN0YW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyIsInNvdXJjZXMiOlsiL1VzZXJzL21pdHN1eW9zaGkvRGVza3RvcC9hdXRoLXRlc3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoZSBkZWZhdWx0IHNjb3BlcyB0byByZXF1ZXN0IHdoZW4gbm9uZSBhcmUgcHJvdmlkZWQuXG4gKiBUaGVzZSBzY29wZXMgcHJvdmlkZSBiYXNpYyB1c2VyIGluZm9ybWF0aW9uIGFuZCBhdXRoZW50aWNhdGlvbiBjYXBhYmlsaXRpZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NDT1BFUyA9IFtcbiAgICBcIm9wZW5pZFwiLFxuICAgIFwicHJvZmlsZVwiLFxuICAgIFwiZW1haWxcIixcbiAgICBcIm9mZmxpbmVfYWNjZXNzXCJcbl0uam9pbihcIiBcIik7XG4vKipcbiAqIERlZmF1bHQgY2xvY2sgc2tldyBpbiBzZWNvbmRzIGZvciBEUG9QIHByb29mIHZhbGlkYXRpb24uXG4gKlxuICogQ2xvY2sgc2tldyBhZGp1c3RzIHRoZSBhc3N1bWVkIGN1cnJlbnQgdGltZSB3aGVuIHZhbGlkYXRpbmcgRFBvUCBwcm9vZnMuXG4gKiBVc2UgcG9zaXRpdmUgdmFsdWVzIHdoZW4gdGhlIGxvY2FsIGNsb2NrIGlzIGJlaGluZCB0aGUgc2VydmVyLFxuICogbmVnYXRpdmUgdmFsdWVzIHdoZW4gdGhlIGxvY2FsIGNsb2NrIGlzIGFoZWFkLlxuICpcbiAqIEBkZWZhdWx0IDAgLSBObyBjbG9jayBhZGp1c3RtZW50IG5lZWRlZFxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9EUE9QX0NMT0NLX1NLRVcgPSAwO1xuLyoqXG4gKiBEZWZhdWx0IGNsb2NrIHRvbGVyYW5jZSBpbiBzZWNvbmRzIGZvciBEUG9QIHByb29mIHZhbGlkYXRpb24uXG4gKlxuICogQWxsb3dzIGZvciByZWFzb25hYmxlIGNsb2NrIGRpZmZlcmVuY2VzIGJldHdlZW4gY2xpZW50IGFuZCBzZXJ2ZXIgZHVyaW5nXG4gKiBEUG9QIHByb29mIHZhbGlkYXRpb24uIEhpZ2hlciB2YWx1ZXMgYXJlIG1vcmUgcGVybWlzc2l2ZSBidXQgbWF5IHdlYWtlblxuICogc2VjdXJpdHkgYnkgYWxsb3dpbmcgcmVwbGF5IGF0dGFja3Mgd2l0aGluIGEgd2lkZXIgdGltZSB3aW5kb3cuXG4gKlxuICogQGRlZmF1bHQgMzAgLSBBbGxvd3MgMzAgc2Vjb25kcyBjbG9jayBkaWZmZXJlbmNlXG4gKi9cbmV4cG9ydCBjb25zdCBERUZBVUxUX0RQT1BfQ0xPQ0tfVE9MRVJBTkNFID0gMzA7XG4vKipcbiAqIE1heGltdW0gcmVjb21tZW5kZWQgY2xvY2sgdG9sZXJhbmNlIGluIHNlY29uZHMgZm9yIERQb1AgcHJvb2YgdmFsaWRhdGlvbi5cbiAqXG4gKiBWYWx1ZXMgZXhjZWVkaW5nIHRoaXMgdGhyZXNob2xkIG1heSBzaWduaWZpY2FudGx5IHdlYWtlbiBEUG9QIHNlY3VyaXR5XG4gKiBieSBhbGxvd2luZyByZXBsYXkgYXR0YWNrcyB3aXRoaW4gYSB3aWRlciB0aW1lIHdpbmRvdy4gUHJvZHVjdGlvblxuICogYXBwbGljYXRpb25zIHNob3VsZCB1c2UgTlRQIGZvciBjbG9jayBzeW5jaHJvbml6YXRpb24gaW5zdGVhZCBvZlxuICogaW5jcmVhc2luZyB0b2xlcmFuY2UgYmV5b25kIHRoaXMgbGltaXQuXG4gKlxuICogQGRlZmF1bHQgMzAwIC0gNSBtaW51dGVzIG1heGltdW0gcmVjb21tZW5kZWQgdG9sZXJhbmNlXG4gKi9cbmV4cG9ydCBjb25zdCBNQVhfUkVDT01NRU5ERURfRFBPUF9DTE9DS19UT0xFUkFOQ0UgPSAzMDA7XG4vKipcbiAqIERlZmF1bHQgcmV0cnkgZGVsYXkgaW4gbWlsbGlzZWNvbmRzIGZvciBEUG9QIG5vbmNlIGVycm9ycy5cbiAqXG4gKiBXaGVuIGEgRFBvUCBub25jZSBlcnJvciBvY2N1cnMsIHRoZSBTREsgd2FpdHMgdGhpcyBkdXJhdGlvbiBiZWZvcmVcbiAqIHJldHJ5aW5nIHRoZSByZXF1ZXN0IHdpdGggdGhlIG5ldyBub25jZSBwcm92aWRlZCBieSB0aGUgc2VydmVyLlxuICogVGhpcyBoZWxwcyBwcmV2ZW50IG92ZXJ3aGVsbWluZyB0aGUgc2VydmVyIHdpdGggcmFwaWQgcmV0cnkgYXR0ZW1wdHMuXG4gKlxuICogQGRlZmF1bHQgMTAwIC0gMTAwIG1pbGxpc2Vjb25kcyBkZWxheVxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9SRVRSWV9ERUxBWSA9IDEwMDtcbi8qKlxuICogRGVmYXVsdCBqaXR0ZXIgc2V0dGluZyBmb3IgcmV0cnkgZGVsYXkuXG4gKlxuICogV2hlbiBlbmFibGVkLCBhZGRzIHJhbmRvbW5lc3MgdG8gdGhlIHJldHJ5IGRlbGF5ICg1MC0xMDAlIG9mIGNvbmZpZ3VyZWQgZGVsYXkpXG4gKiB0byBwcmV2ZW50IHRodW5kZXJpbmcgaGVyZCBlZmZlY3RzIHdoZW4gbXVsdGlwbGUgY2xpZW50cyBlbmNvdW50ZXJcbiAqIG5vbmNlIGVycm9ycyBzaW11bHRhbmVvdXNseS5cbiAqXG4gKiBAZGVmYXVsdCB0cnVlIC0gSml0dGVyIGVuYWJsZWQgZm9yIGJldHRlciBsb2FkIGRpc3RyaWJ1dGlvblxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9SRVRSWV9KSVRURVIgPSB0cnVlO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/constants.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/dpopUtils.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/dpopUtils.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateDpopKeyPair: () => (/* binding */ generateDpopKeyPair),\n/* harmony export */   validateDpopConfiguration: () => (/* binding */ validateDpopConfiguration),\n/* harmony export */   validateKeyPairCompatibility: () => (/* binding */ validateKeyPairCompatibility),\n/* harmony export */   withDPoPNonceRetry: () => (/* binding */ withDPoPNonceRetry)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var oauth4webapi__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! oauth4webapi */ \"(rsc)/../../node_modules/.pnpm/oauth4webapi@3.8.2/node_modules/oauth4webapi/build/index.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/constants.js\");\n\n\n\n/**\n * Detects if the current environment is Edge Runtime.\n * Edge Runtime environments have limited Node.js API support.\n */\nfunction isEdgeRuntime() {\n    return typeof globalThis.EdgeRuntime === \"string\";\n}\n/**\n * Generates a new ES256 key pair for DPoP (Demonstrating Proof-of-Possession) operations.\n *\n * This function creates a cryptographically secure ES256 key pair suitable for DPoP proof\n * generation. The generated keys use the P-256 elliptic curve with SHA-256 hashing,\n * which is the required algorithm for DPoP as specified in RFC 9449.\n *\n * @returns Promise that resolves to a DpopKeyPair containing the private and public keys\n *\n * @example\n * ```typescript\n * import { generateDpopKeyPair } from \"@auth0/nextjs-auth0/server\";\n *\n * const keyPair = await generateDpopKeyPair();\n *\n * const auth0 = new Auth0Client({\n *   useDPoP: true,\n *   dpopKeyPair: keyPair\n * });\n * ```\n *\n * @see {@link https://datatracker.ietf.org/doc/html/rfc9449 | RFC 9449: OAuth 2.0 Demonstrating Proof-of-Possession at the Application Layer (DPoP)}\n */\nasync function generateDpopKeyPair() {\n    return await (0,oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.generateKeyPair)(\"ES256\");\n}\n/**\n * Executes a function with retry logic for DPoP nonce errors.\n *\n * DPoP nonce errors occur when the authorization server requires a fresh nonce\n * for replay attack prevention. This function implements a single retry pattern\n * with configurable delay and jitter to handle these errors gracefully.\n *\n * The retry mechanism:\n * 1. Executes the provided function\n * 2. If a DPoP nonce error occurs, waits for the configured delay\n * 3. Retries the function once with the cached nonce from the error response\n * 4. If the retry fails or any other error occurs, re-throws the error\n *\n * @template T - The return type of the function being executed\n * @param fn - The async function to execute with retry logic\n * @param retryConfig - Configuration for retry behavior (delay and jitter)\n * @returns The result of the function execution\n * @throws The original error if it's not a DPoP nonce error or if retry fails\n *\n * @example\n * ```typescript\n * import { withDPoPNonceRetry } from \"@auth0/nextjs-auth0/server\";\n *\n * const result = await withDPoPNonceRetry(async () => {\n *   return await protectedResourceRequest(\n *     accessToken,\n *     \"GET\",\n *     new URL(\"https://api.example.com/data\"),\n *     headers,\n *     null,\n *     { DPoP: dpopHandle }\n *   );\n * });\n * ```\n *\n * @see {@link https://datatracker.ietf.org/doc/html/rfc9449#section-7.1 | RFC 9449 Section 7.1: DPoP Nonce}\n */\nasync function withDPoPNonceRetry(fn, retryConfig) {\n    try {\n        return await fn();\n    }\n    catch (error) {\n        if ((0,oauth4webapi__WEBPACK_IMPORTED_MODULE_2__.isDPoPNonceError)(error)) {\n            // Use provided config or defaults\n            const delay = retryConfig?.delay ?? 100;\n            const jitter = retryConfig?.jitter ?? true;\n            let actualDelay = delay;\n            // Apply jitter if enabled (50-100% of original delay to prevent thundering herd)\n            if (jitter) {\n                actualDelay = delay * (0.5 + Math.random() * 0.5);\n            }\n            // Delay before retry to avoid rapid successive requests\n            await new Promise((resolve) => setTimeout(resolve, actualDelay));\n            // The RS-signalled nonce is now cached, retrying\n            return await fn();\n        }\n        throw error;\n    }\n}\n/**\n * Validates that a private and public key form a compatible key pair\n * by attempting to sign and verify a test message.\n *\n * This function ensures that the provided private and public keys are mathematically\n * compatible by performing a sign-and-verify operation with test data. This validation\n * helps catch mismatched key pairs, corrupted keys, or incorrect key formats early.\n *\n * @param privateKey - The private key as a Node.js KeyObject\n * @param publicKey - The public key as a Node.js KeyObject\n * @returns true if keys are compatible, false otherwise\n *\n * @example\n * ```typescript\n * import { createPrivateKey, createPublicKey } from \"crypto\";\n * import { validateKeyPairCompatibility } from \"@auth0/nextjs-auth0/server\";\n *\n * const privateKey = createPrivateKey(privateKeyPem);\n * const publicKey = createPublicKey(publicKeyPem);\n *\n * if (validateKeyPairCompatibility(privateKey, publicKey)) {\n *   console.log(\"Keys are compatible\");\n * } else {\n *   console.log(\"Keys are not compatible\");\n * }\n * ```\n */\nfunction validateKeyPairCompatibility(privateKey, publicKey) {\n    // Skip key pair validation in Edge Runtime environments\n    // Edge Runtime doesn't have access to Node.js crypto APIs needed for validation\n    if (isEdgeRuntime()) {\n        return true;\n    }\n    try {\n        // Create test data\n        const testData = \"test-data-for-key-pair-validation\";\n        // Sign with private key\n        const sign = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createSign)(\"sha256\");\n        sign.update(testData);\n        const signature = sign.sign(privateKey);\n        // Verify with public key\n        const verify = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createVerify)(\"sha256\");\n        verify.update(testData);\n        const isValid = verify.verify(publicKey, signature);\n        if (!isValid) {\n            console.warn(\"WARNING: Private and public keys do not form a valid key pair - signature verification failed. \" +\n                \"Please ensure the keys are properly paired and in the correct format. \" +\n                \"DPoP will be disabled and bearer authentication will be used instead.\");\n            return false;\n        }\n        return true;\n    }\n    catch (error) {\n        console.warn(\"WARNING: Failed to validate key pair compatibility. \" +\n            \"This may indicate invalid key format, mismatched algorithms, or corrupted key data. \" +\n            \"DPoP will be disabled and bearer authentication will be used instead. \" +\n            `Error: ${error instanceof Error ? error.message : String(error)}`);\n        return false;\n    }\n}\n/**\n * Validates DPoP configuration and returns keypair and options if available.\n * Attempts to load from environment variables if not provided in options.\n *\n * **Validation Behavior:**\n * - **Success**: Returns both `dpopKeyPair` and `dpopOptions`\n * - **Validation Failure**: Returns `{ dpopKeyPair: undefined, dpopOptions: undefined }`\n *\n * When DPoP cannot be properly configured, the system falls back to bearer authentication.\n *\n * **Performance Characteristics - Synchronous Key Loading:**\n *\n * Key loading and validation are performed synchronously during Auth0Client constructor execution.\n *\n * **Optimization Strategies:**\n * - **Recommended**: Pre-generate keys and pass via `dpopKeyPair` option to avoid env var parsing\n * - **Module-Level**: Instantiate Auth0Client at module level (lib/auth0.ts) for one-time cost\n * - **High-Throughput**: Consider pre-loading keys outside constructor for serverless environments\n *\n * @example Performance-optimized initialization\n * ```typescript\n * // Optimal: Pre-generated keys (no env var parsing)\n * import { generateKeyPair } from \"oauth4webapi\";\n * const dpopKeyPair = await generateKeyPair(\"ES256\");\n * export const auth0 = new Auth0Client({ useDPoP: true, dpopKeyPair });\n * ```\n *\n * **Security-sensitive configuration:**\n * - `clockSkew`: Difference between client and server clocks (default: {@link DEFAULT_DPOP_CLOCK_SKEW})\n * - `clockTolerance`: Acceptable time drift for DPoP proof validation (default: {@link DEFAULT_DPOP_CLOCK_TOLERANCE}, max recommended: {@link MAX_RECOMMENDED_DPOP_CLOCK_TOLERANCE})\n *\n * Values exceeding {@link MAX_RECOMMENDED_DPOP_CLOCK_TOLERANCE} will trigger a warning but are not enforced.\n * Excessively large clock tolerance values may weaken DPoP security by allowing replay attacks within a\n * wider time window. Prefer synchronizing server clocks using NTP instead of increasing tolerance.\n *\n * @param options The configuration options containing DPoP settings\n * @returns Object containing DpopKeyPair and DpopOptions if validation succeeds, or both undefined if validation fails\n */\nfunction validateDpopConfiguration(options) {\n    const useDPoP = options.useDPoP || false;\n    // If DPoP is not enabled, return early with undefined values\n    if (!useDPoP) {\n        return { dpopKeyPair: undefined, dpopOptions: undefined };\n    }\n    // Build DPoP options with defaults from environment variables or provided options\n    const clockTolerance = options.dpopOptions?.clockTolerance ??\n        (process.env.AUTH0_DPOP_CLOCK_TOLERANCE\n            ? parseInt(process.env.AUTH0_DPOP_CLOCK_TOLERANCE, 10)\n            : _constants_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_DPOP_CLOCK_TOLERANCE);\n    // Warn if clock tolerance exceeds recommended maximum (but don't enforce)\n    if (clockTolerance > _constants_js__WEBPACK_IMPORTED_MODULE_1__.MAX_RECOMMENDED_DPOP_CLOCK_TOLERANCE) {\n        const productionMaxTolerance = process.env\n            .AUTH0_DPOP_CLOCK_TOLERANCE_MAX_PROD\n            ? parseInt(process.env.AUTH0_DPOP_CLOCK_TOLERANCE_MAX_PROD, 10)\n            : _constants_js__WEBPACK_IMPORTED_MODULE_1__.MAX_RECOMMENDED_DPOP_CLOCK_TOLERANCE;\n        if (false) {}\n        console.warn(`WARNING: clockTolerance of ${clockTolerance}s exceeds recommended maximum of ${_constants_js__WEBPACK_IMPORTED_MODULE_1__.MAX_RECOMMENDED_DPOP_CLOCK_TOLERANCE}s. ` +\n            \"This may weaken DPoP security by allowing replay attacks within a wider time window. \" +\n            \"Consider synchronizing server clocks using NTP instead of increasing tolerance.\");\n    }\n    const dpopOptions = {\n        clockSkew: options.dpopOptions?.clockSkew ??\n            (process.env.AUTH0_DPOP_CLOCK_SKEW\n                ? parseInt(process.env.AUTH0_DPOP_CLOCK_SKEW, 10)\n                : _constants_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_DPOP_CLOCK_SKEW),\n        clockTolerance,\n        retry: {\n            delay: options.dpopOptions?.retry?.delay ??\n                (process.env.AUTH0_RETRY_DELAY\n                    ? parseInt(process.env.AUTH0_RETRY_DELAY, 10)\n                    : _constants_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_RETRY_DELAY),\n            jitter: options.dpopOptions?.retry?.jitter ??\n                (process.env.AUTH0_RETRY_JITTER\n                    ? process.env.AUTH0_RETRY_JITTER === \"true\"\n                    : _constants_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_RETRY_JITTER)\n        }\n    };\n    // Validate retry configuration\n    if (dpopOptions.retry &&\n        typeof dpopOptions.retry.delay === \"number\" &&\n        dpopOptions.retry.delay < 0) {\n        throw new Error(\"Retry delay must be non-negative\");\n    }\n    // If we already have a keypair, return it with options\n    if (options.dpopKeyPair) {\n        return {\n            dpopKeyPair: options.dpopKeyPair,\n            dpopOptions\n        };\n    }\n    // If DPoP is enabled but no keypair provided, check if environment variables exist\n    if (useDPoP) {\n        const privateKeyPem = process.env.AUTH0_DPOP_PRIVATE_KEY;\n        const publicKeyPem = process.env.AUTH0_DPOP_PUBLIC_KEY;\n        // In Edge Runtime, we can't use Node.js crypto APIs to load keys from environment variables\n        if (isEdgeRuntime() && (privateKeyPem || publicKeyPem)) {\n            console.warn(\"WARNING: Running in Edge Runtime environment. DPoP keypair loading from environment variables \" +\n                \"is not supported due to limited Node.js crypto API access. DPoP has been disabled. \" +\n                \"To use DPoP in Edge Runtime, provide a pre-generated keypair via the dpopKeyPair option.\");\n            return { dpopKeyPair: undefined, dpopOptions: undefined };\n        }\n        if (privateKeyPem && publicKeyPem) {\n            try {\n                // Note: Key loading is performed synchronously during initialization.\n                // Ensure keys are pre-loaded or cached to avoid blocking the event loop.\n                const privateKeyNodeJS = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createPrivateKey)(privateKeyPem);\n                const publicKeyNodeJS = (0,crypto__WEBPACK_IMPORTED_MODULE_0__.createPublicKey)(publicKeyPem);\n                // Validate algorithm - DPoP requires ES256 (ECDSA using P-256 and SHA-256)\n                if (privateKeyNodeJS.asymmetricKeyType !== \"ec\") {\n                    throw new Error(`DPoP private key must be an Elliptic Curve key for ES256 algorithm, got: ${privateKeyNodeJS.asymmetricKeyType}`);\n                }\n                if (publicKeyNodeJS.asymmetricKeyType !== \"ec\") {\n                    throw new Error(`DPoP public key must be an Elliptic Curve key for ES256 algorithm, got: ${publicKeyNodeJS.asymmetricKeyType}`);\n                }\n                const privateKeyDetails = privateKeyNodeJS.asymmetricKeyDetails;\n                const publicKeyDetails = publicKeyNodeJS.asymmetricKeyDetails;\n                // Validate P-256 curve requirement for ES256 algorithm\n                if (privateKeyDetails?.namedCurve !== \"prime256v1\") {\n                    throw new Error(`DPoP private key must use P-256 curve (prime256v1) for ES256 algorithm, got: ${privateKeyDetails?.namedCurve}`);\n                }\n                if (publicKeyDetails?.namedCurve !== \"prime256v1\") {\n                    throw new Error(`DPoP public key must use P-256 curve (prime256v1) for ES256 algorithm, got: ${publicKeyDetails?.namedCurve}`);\n                }\n                // Validate key pair compatibility\n                const isKeyPairValid = validateKeyPairCompatibility(privateKeyNodeJS, publicKeyNodeJS);\n                if (!isKeyPairValid) {\n                    // Key pair validation failed, completely disable DPoP to ensure consistent state\n                    // When validation fails, we should not use DPoP at all and fallback to bearer auth\n                    console.warn(\"WARNING: DPoP key pair validation failed. DPoP has been completely disabled. \" +\n                        \"Falling back to bearer authentication. Please verify your key pair configuration.\");\n                    return { dpopKeyPair: undefined, dpopOptions: undefined };\n                }\n                // Convert NodeJS KeyObjects to CryptoKeys synchronously\n                const privateKey = privateKeyNodeJS.toCryptoKey(\"ES256\", false, [\n                    \"sign\"\n                ]);\n                const publicKey = publicKeyNodeJS.toCryptoKey(\"ES256\", false, [\n                    \"verify\"\n                ]);\n                return {\n                    dpopKeyPair: { privateKey, publicKey },\n                    dpopOptions\n                };\n            }\n            catch (error) {\n                console.warn(\"WARNING: Failed to load DPoP keypair from environment variables. \" +\n                    \"Please ensure AUTH0_DPOP_PUBLIC_KEY and AUTH0_DPOP_PRIVATE_KEY contain valid ES256 keys in PEM format. \" +\n                    `Error: ${error instanceof Error ? error.message : String(error)}`);\n            }\n        }\n        if (!privateKeyPem || !publicKeyPem) {\n            // Issue warning if no keypair is available\n            console.warn(\"WARNING: useDPoP is set to true but dpopKeyPair is not provided. \" +\n                \"DPoP will not be used and protected requests will use bearer authentication instead. \" +\n                \"To enable DPoP, provide a dpopKeyPair in the Auth0Client options or set \" +\n                \"AUTH0_DPOP_PUBLIC_KEY and AUTH0_DPOP_PRIVATE_KEY environment variables.\");\n        }\n    }\n    // No DPoP keypair available, but DPoP is enabled, return options without keypair\n    return { dpopKeyPair: undefined, dpopOptions };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL2Rwb3BVdGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXFGO0FBQ3BCO0FBQ3VHO0FBQ3hLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0JBQXNCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ087QUFDUCxpQkFBaUIsNkRBQWU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBZ0I7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvQ0FBb0M7QUFDaEQsWUFBWSwrQkFBK0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0RBQVU7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9EQUFZO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsdURBQXVEO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxnREFBZ0Q7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUI7QUFDQSwwQ0FBMEMsNEJBQTRCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RSw4QkFBOEI7QUFDdkcsa0ZBQWtGLG1DQUFtQyxvQkFBb0IsMkNBQTJDO0FBQ3BMO0FBQ0EscUJBQXFCLDRDQUE0QztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx1RUFBNEI7QUFDMUM7QUFDQSx5QkFBeUIsK0VBQW9DO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLGNBQWMsK0VBQW9DO0FBQ2xELFlBQVksS0FDdUMsRUFBRSxFQUk1QztBQUNULG1EQUFtRCxlQUFlLG1DQUFtQywrRUFBb0MsQ0FBQztBQUMxSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrRUFBdUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiw4REFBbUI7QUFDekM7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLCtEQUFvQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx3REFBZ0I7QUFDekQsd0NBQXdDLHVEQUFlO0FBQ3ZEO0FBQ0E7QUFDQSxnSEFBZ0gsbUNBQW1DO0FBQ25KO0FBQ0E7QUFDQSwrR0FBK0csa0NBQWtDO0FBQ2pKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvSEFBb0gsOEJBQThCO0FBQ2xKO0FBQ0E7QUFDQSxtSEFBbUgsNkJBQTZCO0FBQ2hKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLHVCQUF1QjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsdURBQXVEO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taXRzdXlvc2hpL0Rlc2t0b3AvYXV0aC10ZXN0L25vZGVfbW9kdWxlcy8ucG5wbS9AYXV0aDArbmV4dGpzLWF1dGgwQDQuMTEuMF9uZXh0QDE2LjAuMF9AYmFiZWwrY29yZUA3LjI4LjVfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfYjg5ZmQ3NjFlMmIxMDM4NTlhMjkxYWU5YWMwNDVkNTUvbm9kZV9tb2R1bGVzL0BhdXRoMC9uZXh0anMtYXV0aDAvZGlzdC91dGlscy9kcG9wVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlUHJpdmF0ZUtleSwgY3JlYXRlUHVibGljS2V5LCBjcmVhdGVTaWduLCBjcmVhdGVWZXJpZnkgfSBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZUtleVBhaXIsIGlzRFBvUE5vbmNlRXJyb3IgfSBmcm9tIFwib2F1dGg0d2ViYXBpXCI7XG5pbXBvcnQgeyBERUZBVUxUX0RQT1BfQ0xPQ0tfU0tFVywgREVGQVVMVF9EUE9QX0NMT0NLX1RPTEVSQU5DRSwgREVGQVVMVF9SRVRSWV9ERUxBWSwgREVGQVVMVF9SRVRSWV9KSVRURVIsIE1BWF9SRUNPTU1FTkRFRF9EUE9QX0NMT0NLX1RPTEVSQU5DRSB9IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuLyoqXG4gKiBEZXRlY3RzIGlmIHRoZSBjdXJyZW50IGVudmlyb25tZW50IGlzIEVkZ2UgUnVudGltZS5cbiAqIEVkZ2UgUnVudGltZSBlbnZpcm9ubWVudHMgaGF2ZSBsaW1pdGVkIE5vZGUuanMgQVBJIHN1cHBvcnQuXG4gKi9cbmZ1bmN0aW9uIGlzRWRnZVJ1bnRpbWUoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBnbG9iYWxUaGlzLkVkZ2VSdW50aW1lID09PSBcInN0cmluZ1wiO1xufVxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBuZXcgRVMyNTYga2V5IHBhaXIgZm9yIERQb1AgKERlbW9uc3RyYXRpbmcgUHJvb2Ytb2YtUG9zc2Vzc2lvbikgb3BlcmF0aW9ucy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgYSBjcnlwdG9ncmFwaGljYWxseSBzZWN1cmUgRVMyNTYga2V5IHBhaXIgc3VpdGFibGUgZm9yIERQb1AgcHJvb2ZcbiAqIGdlbmVyYXRpb24uIFRoZSBnZW5lcmF0ZWQga2V5cyB1c2UgdGhlIFAtMjU2IGVsbGlwdGljIGN1cnZlIHdpdGggU0hBLTI1NiBoYXNoaW5nLFxuICogd2hpY2ggaXMgdGhlIHJlcXVpcmVkIGFsZ29yaXRobSBmb3IgRFBvUCBhcyBzcGVjaWZpZWQgaW4gUkZDIDk0NDkuXG4gKlxuICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgRHBvcEtleVBhaXIgY29udGFpbmluZyB0aGUgcHJpdmF0ZSBhbmQgcHVibGljIGtleXNcbiAqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogaW1wb3J0IHsgZ2VuZXJhdGVEcG9wS2V5UGFpciB9IGZyb20gXCJAYXV0aDAvbmV4dGpzLWF1dGgwL3NlcnZlclwiO1xuICpcbiAqIGNvbnN0IGtleVBhaXIgPSBhd2FpdCBnZW5lcmF0ZURwb3BLZXlQYWlyKCk7XG4gKlxuICogY29uc3QgYXV0aDAgPSBuZXcgQXV0aDBDbGllbnQoe1xuICogICB1c2VEUG9QOiB0cnVlLFxuICogICBkcG9wS2V5UGFpcjoga2V5UGFpclxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAc2VlIHtAbGluayBodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzk0NDkgfCBSRkMgOTQ0OTogT0F1dGggMi4wIERlbW9uc3RyYXRpbmcgUHJvb2Ytb2YtUG9zc2Vzc2lvbiBhdCB0aGUgQXBwbGljYXRpb24gTGF5ZXIgKERQb1ApfVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVEcG9wS2V5UGFpcigpIHtcbiAgICByZXR1cm4gYXdhaXQgZ2VuZXJhdGVLZXlQYWlyKFwiRVMyNTZcIik7XG59XG4vKipcbiAqIEV4ZWN1dGVzIGEgZnVuY3Rpb24gd2l0aCByZXRyeSBsb2dpYyBmb3IgRFBvUCBub25jZSBlcnJvcnMuXG4gKlxuICogRFBvUCBub25jZSBlcnJvcnMgb2NjdXIgd2hlbiB0aGUgYXV0aG9yaXphdGlvbiBzZXJ2ZXIgcmVxdWlyZXMgYSBmcmVzaCBub25jZVxuICogZm9yIHJlcGxheSBhdHRhY2sgcHJldmVudGlvbi4gVGhpcyBmdW5jdGlvbiBpbXBsZW1lbnRzIGEgc2luZ2xlIHJldHJ5IHBhdHRlcm5cbiAqIHdpdGggY29uZmlndXJhYmxlIGRlbGF5IGFuZCBqaXR0ZXIgdG8gaGFuZGxlIHRoZXNlIGVycm9ycyBncmFjZWZ1bGx5LlxuICpcbiAqIFRoZSByZXRyeSBtZWNoYW5pc206XG4gKiAxLiBFeGVjdXRlcyB0aGUgcHJvdmlkZWQgZnVuY3Rpb25cbiAqIDIuIElmIGEgRFBvUCBub25jZSBlcnJvciBvY2N1cnMsIHdhaXRzIGZvciB0aGUgY29uZmlndXJlZCBkZWxheVxuICogMy4gUmV0cmllcyB0aGUgZnVuY3Rpb24gb25jZSB3aXRoIHRoZSBjYWNoZWQgbm9uY2UgZnJvbSB0aGUgZXJyb3IgcmVzcG9uc2VcbiAqIDQuIElmIHRoZSByZXRyeSBmYWlscyBvciBhbnkgb3RoZXIgZXJyb3Igb2NjdXJzLCByZS10aHJvd3MgdGhlIGVycm9yXG4gKlxuICogQHRlbXBsYXRlIFQgLSBUaGUgcmV0dXJuIHR5cGUgb2YgdGhlIGZ1bmN0aW9uIGJlaW5nIGV4ZWN1dGVkXG4gKiBAcGFyYW0gZm4gLSBUaGUgYXN5bmMgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aXRoIHJldHJ5IGxvZ2ljXG4gKiBAcGFyYW0gcmV0cnlDb25maWcgLSBDb25maWd1cmF0aW9uIGZvciByZXRyeSBiZWhhdmlvciAoZGVsYXkgYW5kIGppdHRlcilcbiAqIEByZXR1cm5zIFRoZSByZXN1bHQgb2YgdGhlIGZ1bmN0aW9uIGV4ZWN1dGlvblxuICogQHRocm93cyBUaGUgb3JpZ2luYWwgZXJyb3IgaWYgaXQncyBub3QgYSBEUG9QIG5vbmNlIGVycm9yIG9yIGlmIHJldHJ5IGZhaWxzXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IHdpdGhEUG9QTm9uY2VSZXRyeSB9IGZyb20gXCJAYXV0aDAvbmV4dGpzLWF1dGgwL3NlcnZlclwiO1xuICpcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdpdGhEUG9QTm9uY2VSZXRyeShhc3luYyAoKSA9PiB7XG4gKiAgIHJldHVybiBhd2FpdCBwcm90ZWN0ZWRSZXNvdXJjZVJlcXVlc3QoXG4gKiAgICAgYWNjZXNzVG9rZW4sXG4gKiAgICAgXCJHRVRcIixcbiAqICAgICBuZXcgVVJMKFwiaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vZGF0YVwiKSxcbiAqICAgICBoZWFkZXJzLFxuICogICAgIG51bGwsXG4gKiAgICAgeyBEUG9QOiBkcG9wSGFuZGxlIH1cbiAqICAgKTtcbiAqIH0pO1xuICogYGBgXG4gKlxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9kYXRhdHJhY2tlci5pZXRmLm9yZy9kb2MvaHRtbC9yZmM5NDQ5I3NlY3Rpb24tNy4xIHwgUkZDIDk0NDkgU2VjdGlvbiA3LjE6IERQb1AgTm9uY2V9XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoRFBvUE5vbmNlUmV0cnkoZm4sIHJldHJ5Q29uZmlnKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGZuKCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoaXNEUG9QTm9uY2VFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgIC8vIFVzZSBwcm92aWRlZCBjb25maWcgb3IgZGVmYXVsdHNcbiAgICAgICAgICAgIGNvbnN0IGRlbGF5ID0gcmV0cnlDb25maWc/LmRlbGF5ID8/IDEwMDtcbiAgICAgICAgICAgIGNvbnN0IGppdHRlciA9IHJldHJ5Q29uZmlnPy5qaXR0ZXIgPz8gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBhY3R1YWxEZWxheSA9IGRlbGF5O1xuICAgICAgICAgICAgLy8gQXBwbHkgaml0dGVyIGlmIGVuYWJsZWQgKDUwLTEwMCUgb2Ygb3JpZ2luYWwgZGVsYXkgdG8gcHJldmVudCB0aHVuZGVyaW5nIGhlcmQpXG4gICAgICAgICAgICBpZiAoaml0dGVyKSB7XG4gICAgICAgICAgICAgICAgYWN0dWFsRGVsYXkgPSBkZWxheSAqICgwLjUgKyBNYXRoLnJhbmRvbSgpICogMC41KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERlbGF5IGJlZm9yZSByZXRyeSB0byBhdm9pZCByYXBpZCBzdWNjZXNzaXZlIHJlcXVlc3RzXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBhY3R1YWxEZWxheSkpO1xuICAgICAgICAgICAgLy8gVGhlIFJTLXNpZ25hbGxlZCBub25jZSBpcyBub3cgY2FjaGVkLCByZXRyeWluZ1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZuKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBhIHByaXZhdGUgYW5kIHB1YmxpYyBrZXkgZm9ybSBhIGNvbXBhdGlibGUga2V5IHBhaXJcbiAqIGJ5IGF0dGVtcHRpbmcgdG8gc2lnbiBhbmQgdmVyaWZ5IGEgdGVzdCBtZXNzYWdlLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZW5zdXJlcyB0aGF0IHRoZSBwcm92aWRlZCBwcml2YXRlIGFuZCBwdWJsaWMga2V5cyBhcmUgbWF0aGVtYXRpY2FsbHlcbiAqIGNvbXBhdGlibGUgYnkgcGVyZm9ybWluZyBhIHNpZ24tYW5kLXZlcmlmeSBvcGVyYXRpb24gd2l0aCB0ZXN0IGRhdGEuIFRoaXMgdmFsaWRhdGlvblxuICogaGVscHMgY2F0Y2ggbWlzbWF0Y2hlZCBrZXkgcGFpcnMsIGNvcnJ1cHRlZCBrZXlzLCBvciBpbmNvcnJlY3Qga2V5IGZvcm1hdHMgZWFybHkuXG4gKlxuICogQHBhcmFtIHByaXZhdGVLZXkgLSBUaGUgcHJpdmF0ZSBrZXkgYXMgYSBOb2RlLmpzIEtleU9iamVjdFxuICogQHBhcmFtIHB1YmxpY0tleSAtIFRoZSBwdWJsaWMga2V5IGFzIGEgTm9kZS5qcyBLZXlPYmplY3RcbiAqIEByZXR1cm5zIHRydWUgaWYga2V5cyBhcmUgY29tcGF0aWJsZSwgZmFsc2Ugb3RoZXJ3aXNlXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGltcG9ydCB7IGNyZWF0ZVByaXZhdGVLZXksIGNyZWF0ZVB1YmxpY0tleSB9IGZyb20gXCJjcnlwdG9cIjtcbiAqIGltcG9ydCB7IHZhbGlkYXRlS2V5UGFpckNvbXBhdGliaWxpdHkgfSBmcm9tIFwiQGF1dGgwL25leHRqcy1hdXRoMC9zZXJ2ZXJcIjtcbiAqXG4gKiBjb25zdCBwcml2YXRlS2V5ID0gY3JlYXRlUHJpdmF0ZUtleShwcml2YXRlS2V5UGVtKTtcbiAqIGNvbnN0IHB1YmxpY0tleSA9IGNyZWF0ZVB1YmxpY0tleShwdWJsaWNLZXlQZW0pO1xuICpcbiAqIGlmICh2YWxpZGF0ZUtleVBhaXJDb21wYXRpYmlsaXR5KHByaXZhdGVLZXksIHB1YmxpY0tleSkpIHtcbiAqICAgY29uc29sZS5sb2coXCJLZXlzIGFyZSBjb21wYXRpYmxlXCIpO1xuICogfSBlbHNlIHtcbiAqICAgY29uc29sZS5sb2coXCJLZXlzIGFyZSBub3QgY29tcGF0aWJsZVwiKTtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVLZXlQYWlyQ29tcGF0aWJpbGl0eShwcml2YXRlS2V5LCBwdWJsaWNLZXkpIHtcbiAgICAvLyBTa2lwIGtleSBwYWlyIHZhbGlkYXRpb24gaW4gRWRnZSBSdW50aW1lIGVudmlyb25tZW50c1xuICAgIC8vIEVkZ2UgUnVudGltZSBkb2Vzbid0IGhhdmUgYWNjZXNzIHRvIE5vZGUuanMgY3J5cHRvIEFQSXMgbmVlZGVkIGZvciB2YWxpZGF0aW9uXG4gICAgaWYgKGlzRWRnZVJ1bnRpbWUoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gQ3JlYXRlIHRlc3QgZGF0YVxuICAgICAgICBjb25zdCB0ZXN0RGF0YSA9IFwidGVzdC1kYXRhLWZvci1rZXktcGFpci12YWxpZGF0aW9uXCI7XG4gICAgICAgIC8vIFNpZ24gd2l0aCBwcml2YXRlIGtleVxuICAgICAgICBjb25zdCBzaWduID0gY3JlYXRlU2lnbihcInNoYTI1NlwiKTtcbiAgICAgICAgc2lnbi51cGRhdGUodGVzdERhdGEpO1xuICAgICAgICBjb25zdCBzaWduYXR1cmUgPSBzaWduLnNpZ24ocHJpdmF0ZUtleSk7XG4gICAgICAgIC8vIFZlcmlmeSB3aXRoIHB1YmxpYyBrZXlcbiAgICAgICAgY29uc3QgdmVyaWZ5ID0gY3JlYXRlVmVyaWZ5KFwic2hhMjU2XCIpO1xuICAgICAgICB2ZXJpZnkudXBkYXRlKHRlc3REYXRhKTtcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IHZlcmlmeS52ZXJpZnkocHVibGljS2V5LCBzaWduYXR1cmUpO1xuICAgICAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIldBUk5JTkc6IFByaXZhdGUgYW5kIHB1YmxpYyBrZXlzIGRvIG5vdCBmb3JtIGEgdmFsaWQga2V5IHBhaXIgLSBzaWduYXR1cmUgdmVyaWZpY2F0aW9uIGZhaWxlZC4gXCIgK1xuICAgICAgICAgICAgICAgIFwiUGxlYXNlIGVuc3VyZSB0aGUga2V5cyBhcmUgcHJvcGVybHkgcGFpcmVkIGFuZCBpbiB0aGUgY29ycmVjdCBmb3JtYXQuIFwiICtcbiAgICAgICAgICAgICAgICBcIkRQb1Agd2lsbCBiZSBkaXNhYmxlZCBhbmQgYmVhcmVyIGF1dGhlbnRpY2F0aW9uIHdpbGwgYmUgdXNlZCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIldBUk5JTkc6IEZhaWxlZCB0byB2YWxpZGF0ZSBrZXkgcGFpciBjb21wYXRpYmlsaXR5LiBcIiArXG4gICAgICAgICAgICBcIlRoaXMgbWF5IGluZGljYXRlIGludmFsaWQga2V5IGZvcm1hdCwgbWlzbWF0Y2hlZCBhbGdvcml0aG1zLCBvciBjb3JydXB0ZWQga2V5IGRhdGEuIFwiICtcbiAgICAgICAgICAgIFwiRFBvUCB3aWxsIGJlIGRpc2FibGVkIGFuZCBiZWFyZXIgYXV0aGVudGljYXRpb24gd2lsbCBiZSB1c2VkIGluc3RlYWQuIFwiICtcbiAgICAgICAgICAgIGBFcnJvcjogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcil9YCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyBEUG9QIGNvbmZpZ3VyYXRpb24gYW5kIHJldHVybnMga2V5cGFpciBhbmQgb3B0aW9ucyBpZiBhdmFpbGFibGUuXG4gKiBBdHRlbXB0cyB0byBsb2FkIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzIGlmIG5vdCBwcm92aWRlZCBpbiBvcHRpb25zLlxuICpcbiAqICoqVmFsaWRhdGlvbiBCZWhhdmlvcjoqKlxuICogLSAqKlN1Y2Nlc3MqKjogUmV0dXJucyBib3RoIGBkcG9wS2V5UGFpcmAgYW5kIGBkcG9wT3B0aW9uc2BcbiAqIC0gKipWYWxpZGF0aW9uIEZhaWx1cmUqKjogUmV0dXJucyBgeyBkcG9wS2V5UGFpcjogdW5kZWZpbmVkLCBkcG9wT3B0aW9uczogdW5kZWZpbmVkIH1gXG4gKlxuICogV2hlbiBEUG9QIGNhbm5vdCBiZSBwcm9wZXJseSBjb25maWd1cmVkLCB0aGUgc3lzdGVtIGZhbGxzIGJhY2sgdG8gYmVhcmVyIGF1dGhlbnRpY2F0aW9uLlxuICpcbiAqICoqUGVyZm9ybWFuY2UgQ2hhcmFjdGVyaXN0aWNzIC0gU3luY2hyb25vdXMgS2V5IExvYWRpbmc6KipcbiAqXG4gKiBLZXkgbG9hZGluZyBhbmQgdmFsaWRhdGlvbiBhcmUgcGVyZm9ybWVkIHN5bmNocm9ub3VzbHkgZHVyaW5nIEF1dGgwQ2xpZW50IGNvbnN0cnVjdG9yIGV4ZWN1dGlvbi5cbiAqXG4gKiAqKk9wdGltaXphdGlvbiBTdHJhdGVnaWVzOioqXG4gKiAtICoqUmVjb21tZW5kZWQqKjogUHJlLWdlbmVyYXRlIGtleXMgYW5kIHBhc3MgdmlhIGBkcG9wS2V5UGFpcmAgb3B0aW9uIHRvIGF2b2lkIGVudiB2YXIgcGFyc2luZ1xuICogLSAqKk1vZHVsZS1MZXZlbCoqOiBJbnN0YW50aWF0ZSBBdXRoMENsaWVudCBhdCBtb2R1bGUgbGV2ZWwgKGxpYi9hdXRoMC50cykgZm9yIG9uZS10aW1lIGNvc3RcbiAqIC0gKipIaWdoLVRocm91Z2hwdXQqKjogQ29uc2lkZXIgcHJlLWxvYWRpbmcga2V5cyBvdXRzaWRlIGNvbnN0cnVjdG9yIGZvciBzZXJ2ZXJsZXNzIGVudmlyb25tZW50c1xuICpcbiAqIEBleGFtcGxlIFBlcmZvcm1hbmNlLW9wdGltaXplZCBpbml0aWFsaXphdGlvblxuICogYGBgdHlwZXNjcmlwdFxuICogLy8gT3B0aW1hbDogUHJlLWdlbmVyYXRlZCBrZXlzIChubyBlbnYgdmFyIHBhcnNpbmcpXG4gKiBpbXBvcnQgeyBnZW5lcmF0ZUtleVBhaXIgfSBmcm9tIFwib2F1dGg0d2ViYXBpXCI7XG4gKiBjb25zdCBkcG9wS2V5UGFpciA9IGF3YWl0IGdlbmVyYXRlS2V5UGFpcihcIkVTMjU2XCIpO1xuICogZXhwb3J0IGNvbnN0IGF1dGgwID0gbmV3IEF1dGgwQ2xpZW50KHsgdXNlRFBvUDogdHJ1ZSwgZHBvcEtleVBhaXIgfSk7XG4gKiBgYGBcbiAqXG4gKiAqKlNlY3VyaXR5LXNlbnNpdGl2ZSBjb25maWd1cmF0aW9uOioqXG4gKiAtIGBjbG9ja1NrZXdgOiBEaWZmZXJlbmNlIGJldHdlZW4gY2xpZW50IGFuZCBzZXJ2ZXIgY2xvY2tzIChkZWZhdWx0OiB7QGxpbmsgREVGQVVMVF9EUE9QX0NMT0NLX1NLRVd9KVxuICogLSBgY2xvY2tUb2xlcmFuY2VgOiBBY2NlcHRhYmxlIHRpbWUgZHJpZnQgZm9yIERQb1AgcHJvb2YgdmFsaWRhdGlvbiAoZGVmYXVsdDoge0BsaW5rIERFRkFVTFRfRFBPUF9DTE9DS19UT0xFUkFOQ0V9LCBtYXggcmVjb21tZW5kZWQ6IHtAbGluayBNQVhfUkVDT01NRU5ERURfRFBPUF9DTE9DS19UT0xFUkFOQ0V9KVxuICpcbiAqIFZhbHVlcyBleGNlZWRpbmcge0BsaW5rIE1BWF9SRUNPTU1FTkRFRF9EUE9QX0NMT0NLX1RPTEVSQU5DRX0gd2lsbCB0cmlnZ2VyIGEgd2FybmluZyBidXQgYXJlIG5vdCBlbmZvcmNlZC5cbiAqIEV4Y2Vzc2l2ZWx5IGxhcmdlIGNsb2NrIHRvbGVyYW5jZSB2YWx1ZXMgbWF5IHdlYWtlbiBEUG9QIHNlY3VyaXR5IGJ5IGFsbG93aW5nIHJlcGxheSBhdHRhY2tzIHdpdGhpbiBhXG4gKiB3aWRlciB0aW1lIHdpbmRvdy4gUHJlZmVyIHN5bmNocm9uaXppbmcgc2VydmVyIGNsb2NrcyB1c2luZyBOVFAgaW5zdGVhZCBvZiBpbmNyZWFzaW5nIHRvbGVyYW5jZS5cbiAqXG4gKiBAcGFyYW0gb3B0aW9ucyBUaGUgY29uZmlndXJhdGlvbiBvcHRpb25zIGNvbnRhaW5pbmcgRFBvUCBzZXR0aW5nc1xuICogQHJldHVybnMgT2JqZWN0IGNvbnRhaW5pbmcgRHBvcEtleVBhaXIgYW5kIERwb3BPcHRpb25zIGlmIHZhbGlkYXRpb24gc3VjY2VlZHMsIG9yIGJvdGggdW5kZWZpbmVkIGlmIHZhbGlkYXRpb24gZmFpbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRHBvcENvbmZpZ3VyYXRpb24ob3B0aW9ucykge1xuICAgIGNvbnN0IHVzZURQb1AgPSBvcHRpb25zLnVzZURQb1AgfHwgZmFsc2U7XG4gICAgLy8gSWYgRFBvUCBpcyBub3QgZW5hYmxlZCwgcmV0dXJuIGVhcmx5IHdpdGggdW5kZWZpbmVkIHZhbHVlc1xuICAgIGlmICghdXNlRFBvUCkge1xuICAgICAgICByZXR1cm4geyBkcG9wS2V5UGFpcjogdW5kZWZpbmVkLCBkcG9wT3B0aW9uczogdW5kZWZpbmVkIH07XG4gICAgfVxuICAgIC8vIEJ1aWxkIERQb1Agb3B0aW9ucyB3aXRoIGRlZmF1bHRzIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzIG9yIHByb3ZpZGVkIG9wdGlvbnNcbiAgICBjb25zdCBjbG9ja1RvbGVyYW5jZSA9IG9wdGlvbnMuZHBvcE9wdGlvbnM/LmNsb2NrVG9sZXJhbmNlID8/XG4gICAgICAgIChwcm9jZXNzLmVudi5BVVRIMF9EUE9QX0NMT0NLX1RPTEVSQU5DRVxuICAgICAgICAgICAgPyBwYXJzZUludChwcm9jZXNzLmVudi5BVVRIMF9EUE9QX0NMT0NLX1RPTEVSQU5DRSwgMTApXG4gICAgICAgICAgICA6IERFRkFVTFRfRFBPUF9DTE9DS19UT0xFUkFOQ0UpO1xuICAgIC8vIFdhcm4gaWYgY2xvY2sgdG9sZXJhbmNlIGV4Y2VlZHMgcmVjb21tZW5kZWQgbWF4aW11bSAoYnV0IGRvbid0IGVuZm9yY2UpXG4gICAgaWYgKGNsb2NrVG9sZXJhbmNlID4gTUFYX1JFQ09NTUVOREVEX0RQT1BfQ0xPQ0tfVE9MRVJBTkNFKSB7XG4gICAgICAgIGNvbnN0IHByb2R1Y3Rpb25NYXhUb2xlcmFuY2UgPSBwcm9jZXNzLmVudlxuICAgICAgICAgICAgLkFVVEgwX0RQT1BfQ0xPQ0tfVE9MRVJBTkNFX01BWF9QUk9EXG4gICAgICAgICAgICA/IHBhcnNlSW50KHByb2Nlc3MuZW52LkFVVEgwX0RQT1BfQ0xPQ0tfVE9MRVJBTkNFX01BWF9QUk9ELCAxMClcbiAgICAgICAgICAgIDogTUFYX1JFQ09NTUVOREVEX0RQT1BfQ0xPQ0tfVE9MRVJBTkNFO1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiICYmXG4gICAgICAgICAgICBjbG9ja1RvbGVyYW5jZSA+IHByb2R1Y3Rpb25NYXhUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgY2xvY2tUb2xlcmFuY2Ugb2YgJHtjbG9ja1RvbGVyYW5jZX1zIGV4Y2VlZHMgbWF4aW11bSBhbGxvd2VkICR7cHJvZHVjdGlvbk1heFRvbGVyYW5jZX1zIGluIHByb2R1Y3Rpb24uIGAgK1xuICAgICAgICAgICAgICAgIFwiVGhpcyBjb3VsZCBzaWduaWZpY2FudGx5IHdlYWtlbiBEUG9QIHJlcGxheSBhdHRhY2sgcHJvdGVjdGlvbi4gXCIgK1xuICAgICAgICAgICAgICAgIFwiU2V0IEFVVEgwX0RQT1BfQ0xPQ0tfVE9MRVJBTkNFX01BWF9QUk9EIGVudmlyb25tZW50IHZhcmlhYmxlIHRvIG92ZXJyaWRlIHRoaXMgbGltaXQgaW4gcHJvZHVjdGlvbi5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS53YXJuKGBXQVJOSU5HOiBjbG9ja1RvbGVyYW5jZSBvZiAke2Nsb2NrVG9sZXJhbmNlfXMgZXhjZWVkcyByZWNvbW1lbmRlZCBtYXhpbXVtIG9mICR7TUFYX1JFQ09NTUVOREVEX0RQT1BfQ0xPQ0tfVE9MRVJBTkNFfXMuIGAgK1xuICAgICAgICAgICAgXCJUaGlzIG1heSB3ZWFrZW4gRFBvUCBzZWN1cml0eSBieSBhbGxvd2luZyByZXBsYXkgYXR0YWNrcyB3aXRoaW4gYSB3aWRlciB0aW1lIHdpbmRvdy4gXCIgK1xuICAgICAgICAgICAgXCJDb25zaWRlciBzeW5jaHJvbml6aW5nIHNlcnZlciBjbG9ja3MgdXNpbmcgTlRQIGluc3RlYWQgb2YgaW5jcmVhc2luZyB0b2xlcmFuY2UuXCIpO1xuICAgIH1cbiAgICBjb25zdCBkcG9wT3B0aW9ucyA9IHtcbiAgICAgICAgY2xvY2tTa2V3OiBvcHRpb25zLmRwb3BPcHRpb25zPy5jbG9ja1NrZXcgPz9cbiAgICAgICAgICAgIChwcm9jZXNzLmVudi5BVVRIMF9EUE9QX0NMT0NLX1NLRVdcbiAgICAgICAgICAgICAgICA/IHBhcnNlSW50KHByb2Nlc3MuZW52LkFVVEgwX0RQT1BfQ0xPQ0tfU0tFVywgMTApXG4gICAgICAgICAgICAgICAgOiBERUZBVUxUX0RQT1BfQ0xPQ0tfU0tFVyksXG4gICAgICAgIGNsb2NrVG9sZXJhbmNlLFxuICAgICAgICByZXRyeToge1xuICAgICAgICAgICAgZGVsYXk6IG9wdGlvbnMuZHBvcE9wdGlvbnM/LnJldHJ5Py5kZWxheSA/P1xuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5BVVRIMF9SRVRSWV9ERUxBWVxuICAgICAgICAgICAgICAgICAgICA/IHBhcnNlSW50KHByb2Nlc3MuZW52LkFVVEgwX1JFVFJZX0RFTEFZLCAxMClcbiAgICAgICAgICAgICAgICAgICAgOiBERUZBVUxUX1JFVFJZX0RFTEFZKSxcbiAgICAgICAgICAgIGppdHRlcjogb3B0aW9ucy5kcG9wT3B0aW9ucz8ucmV0cnk/LmppdHRlciA/P1xuICAgICAgICAgICAgICAgIChwcm9jZXNzLmVudi5BVVRIMF9SRVRSWV9KSVRURVJcbiAgICAgICAgICAgICAgICAgICAgPyBwcm9jZXNzLmVudi5BVVRIMF9SRVRSWV9KSVRURVIgPT09IFwidHJ1ZVwiXG4gICAgICAgICAgICAgICAgICAgIDogREVGQVVMVF9SRVRSWV9KSVRURVIpXG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIFZhbGlkYXRlIHJldHJ5IGNvbmZpZ3VyYXRpb25cbiAgICBpZiAoZHBvcE9wdGlvbnMucmV0cnkgJiZcbiAgICAgICAgdHlwZW9mIGRwb3BPcHRpb25zLnJldHJ5LmRlbGF5ID09PSBcIm51bWJlclwiICYmXG4gICAgICAgIGRwb3BPcHRpb25zLnJldHJ5LmRlbGF5IDwgMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZXRyeSBkZWxheSBtdXN0IGJlIG5vbi1uZWdhdGl2ZVwiKTtcbiAgICB9XG4gICAgLy8gSWYgd2UgYWxyZWFkeSBoYXZlIGEga2V5cGFpciwgcmV0dXJuIGl0IHdpdGggb3B0aW9uc1xuICAgIGlmIChvcHRpb25zLmRwb3BLZXlQYWlyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkcG9wS2V5UGFpcjogb3B0aW9ucy5kcG9wS2V5UGFpcixcbiAgICAgICAgICAgIGRwb3BPcHRpb25zXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIElmIERQb1AgaXMgZW5hYmxlZCBidXQgbm8ga2V5cGFpciBwcm92aWRlZCwgY2hlY2sgaWYgZW52aXJvbm1lbnQgdmFyaWFibGVzIGV4aXN0XG4gICAgaWYgKHVzZURQb1ApIHtcbiAgICAgICAgY29uc3QgcHJpdmF0ZUtleVBlbSA9IHByb2Nlc3MuZW52LkFVVEgwX0RQT1BfUFJJVkFURV9LRVk7XG4gICAgICAgIGNvbnN0IHB1YmxpY0tleVBlbSA9IHByb2Nlc3MuZW52LkFVVEgwX0RQT1BfUFVCTElDX0tFWTtcbiAgICAgICAgLy8gSW4gRWRnZSBSdW50aW1lLCB3ZSBjYW4ndCB1c2UgTm9kZS5qcyBjcnlwdG8gQVBJcyB0byBsb2FkIGtleXMgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICAgICAgaWYgKGlzRWRnZVJ1bnRpbWUoKSAmJiAocHJpdmF0ZUtleVBlbSB8fCBwdWJsaWNLZXlQZW0pKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJXQVJOSU5HOiBSdW5uaW5nIGluIEVkZ2UgUnVudGltZSBlbnZpcm9ubWVudC4gRFBvUCBrZXlwYWlyIGxvYWRpbmcgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgXCIgK1xuICAgICAgICAgICAgICAgIFwiaXMgbm90IHN1cHBvcnRlZCBkdWUgdG8gbGltaXRlZCBOb2RlLmpzIGNyeXB0byBBUEkgYWNjZXNzLiBEUG9QIGhhcyBiZWVuIGRpc2FibGVkLiBcIiArXG4gICAgICAgICAgICAgICAgXCJUbyB1c2UgRFBvUCBpbiBFZGdlIFJ1bnRpbWUsIHByb3ZpZGUgYSBwcmUtZ2VuZXJhdGVkIGtleXBhaXIgdmlhIHRoZSBkcG9wS2V5UGFpciBvcHRpb24uXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHsgZHBvcEtleVBhaXI6IHVuZGVmaW5lZCwgZHBvcE9wdGlvbnM6IHVuZGVmaW5lZCB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwcml2YXRlS2V5UGVtICYmIHB1YmxpY0tleVBlbSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBLZXkgbG9hZGluZyBpcyBwZXJmb3JtZWQgc3luY2hyb25vdXNseSBkdXJpbmcgaW5pdGlhbGl6YXRpb24uXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIGtleXMgYXJlIHByZS1sb2FkZWQgb3IgY2FjaGVkIHRvIGF2b2lkIGJsb2NraW5nIHRoZSBldmVudCBsb29wLlxuICAgICAgICAgICAgICAgIGNvbnN0IHByaXZhdGVLZXlOb2RlSlMgPSBjcmVhdGVQcml2YXRlS2V5KHByaXZhdGVLZXlQZW0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleU5vZGVKUyA9IGNyZWF0ZVB1YmxpY0tleShwdWJsaWNLZXlQZW0pO1xuICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIGFsZ29yaXRobSAtIERQb1AgcmVxdWlyZXMgRVMyNTYgKEVDRFNBIHVzaW5nIFAtMjU2IGFuZCBTSEEtMjU2KVxuICAgICAgICAgICAgICAgIGlmIChwcml2YXRlS2V5Tm9kZUpTLmFzeW1tZXRyaWNLZXlUeXBlICE9PSBcImVjXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEUG9QIHByaXZhdGUga2V5IG11c3QgYmUgYW4gRWxsaXB0aWMgQ3VydmUga2V5IGZvciBFUzI1NiBhbGdvcml0aG0sIGdvdDogJHtwcml2YXRlS2V5Tm9kZUpTLmFzeW1tZXRyaWNLZXlUeXBlfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHVibGljS2V5Tm9kZUpTLmFzeW1tZXRyaWNLZXlUeXBlICE9PSBcImVjXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEUG9QIHB1YmxpYyBrZXkgbXVzdCBiZSBhbiBFbGxpcHRpYyBDdXJ2ZSBrZXkgZm9yIEVTMjU2IGFsZ29yaXRobSwgZ290OiAke3B1YmxpY0tleU5vZGVKUy5hc3ltbWV0cmljS2V5VHlwZX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcHJpdmF0ZUtleURldGFpbHMgPSBwcml2YXRlS2V5Tm9kZUpTLmFzeW1tZXRyaWNLZXlEZXRhaWxzO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleURldGFpbHMgPSBwdWJsaWNLZXlOb2RlSlMuYXN5bW1ldHJpY0tleURldGFpbHM7XG4gICAgICAgICAgICAgICAgLy8gVmFsaWRhdGUgUC0yNTYgY3VydmUgcmVxdWlyZW1lbnQgZm9yIEVTMjU2IGFsZ29yaXRobVxuICAgICAgICAgICAgICAgIGlmIChwcml2YXRlS2V5RGV0YWlscz8ubmFtZWRDdXJ2ZSAhPT0gXCJwcmltZTI1NnYxXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEUG9QIHByaXZhdGUga2V5IG11c3QgdXNlIFAtMjU2IGN1cnZlIChwcmltZTI1NnYxKSBmb3IgRVMyNTYgYWxnb3JpdGhtLCBnb3Q6ICR7cHJpdmF0ZUtleURldGFpbHM/Lm5hbWVkQ3VydmV9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwdWJsaWNLZXlEZXRhaWxzPy5uYW1lZEN1cnZlICE9PSBcInByaW1lMjU2djFcIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERQb1AgcHVibGljIGtleSBtdXN0IHVzZSBQLTI1NiBjdXJ2ZSAocHJpbWUyNTZ2MSkgZm9yIEVTMjU2IGFsZ29yaXRobSwgZ290OiAke3B1YmxpY0tleURldGFpbHM/Lm5hbWVkQ3VydmV9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFZhbGlkYXRlIGtleSBwYWlyIGNvbXBhdGliaWxpdHlcbiAgICAgICAgICAgICAgICBjb25zdCBpc0tleVBhaXJWYWxpZCA9IHZhbGlkYXRlS2V5UGFpckNvbXBhdGliaWxpdHkocHJpdmF0ZUtleU5vZGVKUywgcHVibGljS2V5Tm9kZUpTKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzS2V5UGFpclZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEtleSBwYWlyIHZhbGlkYXRpb24gZmFpbGVkLCBjb21wbGV0ZWx5IGRpc2FibGUgRFBvUCB0byBlbnN1cmUgY29uc2lzdGVudCBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHZhbGlkYXRpb24gZmFpbHMsIHdlIHNob3VsZCBub3QgdXNlIERQb1AgYXQgYWxsIGFuZCBmYWxsYmFjayB0byBiZWFyZXIgYXV0aFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJXQVJOSU5HOiBEUG9QIGtleSBwYWlyIHZhbGlkYXRpb24gZmFpbGVkLiBEUG9QIGhhcyBiZWVuIGNvbXBsZXRlbHkgZGlzYWJsZWQuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiRmFsbGluZyBiYWNrIHRvIGJlYXJlciBhdXRoZW50aWNhdGlvbi4gUGxlYXNlIHZlcmlmeSB5b3VyIGtleSBwYWlyIGNvbmZpZ3VyYXRpb24uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBkcG9wS2V5UGFpcjogdW5kZWZpbmVkLCBkcG9wT3B0aW9uczogdW5kZWZpbmVkIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgTm9kZUpTIEtleU9iamVjdHMgdG8gQ3J5cHRvS2V5cyBzeW5jaHJvbm91c2x5XG4gICAgICAgICAgICAgICAgY29uc3QgcHJpdmF0ZUtleSA9IHByaXZhdGVLZXlOb2RlSlMudG9DcnlwdG9LZXkoXCJFUzI1NlwiLCBmYWxzZSwgW1xuICAgICAgICAgICAgICAgICAgICBcInNpZ25cIlxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleSA9IHB1YmxpY0tleU5vZGVKUy50b0NyeXB0b0tleShcIkVTMjU2XCIsIGZhbHNlLCBbXG4gICAgICAgICAgICAgICAgICAgIFwidmVyaWZ5XCJcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkcG9wS2V5UGFpcjogeyBwcml2YXRlS2V5LCBwdWJsaWNLZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgZHBvcE9wdGlvbnNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiV0FSTklORzogRmFpbGVkIHRvIGxvYWQgRFBvUCBrZXlwYWlyIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGVzLiBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwiUGxlYXNlIGVuc3VyZSBBVVRIMF9EUE9QX1BVQkxJQ19LRVkgYW5kIEFVVEgwX0RQT1BfUFJJVkFURV9LRVkgY29udGFpbiB2YWxpZCBFUzI1NiBrZXlzIGluIFBFTSBmb3JtYXQuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgYEVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByaXZhdGVLZXlQZW0gfHwgIXB1YmxpY0tleVBlbSkge1xuICAgICAgICAgICAgLy8gSXNzdWUgd2FybmluZyBpZiBubyBrZXlwYWlyIGlzIGF2YWlsYWJsZVxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiV0FSTklORzogdXNlRFBvUCBpcyBzZXQgdG8gdHJ1ZSBidXQgZHBvcEtleVBhaXIgaXMgbm90IHByb3ZpZGVkLiBcIiArXG4gICAgICAgICAgICAgICAgXCJEUG9QIHdpbGwgbm90IGJlIHVzZWQgYW5kIHByb3RlY3RlZCByZXF1ZXN0cyB3aWxsIHVzZSBiZWFyZXIgYXV0aGVudGljYXRpb24gaW5zdGVhZC4gXCIgK1xuICAgICAgICAgICAgICAgIFwiVG8gZW5hYmxlIERQb1AsIHByb3ZpZGUgYSBkcG9wS2V5UGFpciBpbiB0aGUgQXV0aDBDbGllbnQgb3B0aW9ucyBvciBzZXQgXCIgK1xuICAgICAgICAgICAgICAgIFwiQVVUSDBfRFBPUF9QVUJMSUNfS0VZIGFuZCBBVVRIMF9EUE9QX1BSSVZBVEVfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlcy5cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTm8gRFBvUCBrZXlwYWlyIGF2YWlsYWJsZSwgYnV0IERQb1AgaXMgZW5hYmxlZCwgcmV0dXJuIG9wdGlvbnMgd2l0aG91dCBrZXlwYWlyXG4gICAgcmV0dXJuIHsgZHBvcEtleVBhaXI6IHVuZGVmaW5lZCwgZHBvcE9wdGlvbnMgfTtcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/dpopUtils.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/pathUtils.js":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/pathUtils.js ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureLeadingSlash: () => (/* binding */ ensureLeadingSlash),\n/* harmony export */   ensureNoLeadingSlash: () => (/* binding */ ensureNoLeadingSlash),\n/* harmony export */   ensureTrailingSlash: () => (/* binding */ ensureTrailingSlash),\n/* harmony export */   normalizeWithBasePath: () => (/* binding */ normalizeWithBasePath),\n/* harmony export */   removeTrailingSlash: () => (/* binding */ removeTrailingSlash)\n/* harmony export */ });\nfunction ensureLeadingSlash(value) {\n    return value && !value.startsWith(\"/\") ? `/${value}` : value;\n}\nfunction ensureTrailingSlash(value) {\n    return value && !value.endsWith(\"/\") ? `${value}/` : value;\n}\nfunction ensureNoLeadingSlash(value) {\n    return value && value.startsWith(\"/\")\n        ? value.substring(1, value.length)\n        : value;\n}\nconst removeTrailingSlash = (path) => path.endsWith(\"/\") ? path.slice(0, -1) : path;\nconst normalizeWithBasePath = (path) => {\n    const basePath = process.env.NEXT_PUBLIC_BASE_PATH;\n    if (!basePath) {\n        return path;\n    }\n    // basePath can be `docs` or `/docs`\n    const sanitizedBasePath = ensureLeadingSlash(basePath);\n    return ensureTrailingSlash(sanitizedBasePath) + ensureNoLeadingSlash(path);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL3BhdGhVdGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFPO0FBQ1AsaURBQWlELE1BQU07QUFDdkQ7QUFDTztBQUNQLDhDQUE4QyxNQUFNO0FBQ3BEO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWl0c3V5b3NoaS9EZXNrdG9wL2F1dGgtdGVzdC9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgwK25leHRqcy1hdXRoMEA0LjExLjBfbmV4dEAxNi4wLjBfQGJhYmVsK2NvcmVANy4yOC41X3JlYWN0LWRvbUAxOS4yLjBfcmVhY3RAMTkuMi4wX2I4OWZkNzYxZTJiMTAzODU5YTI5MWFlOWFjMDQ1ZDU1L25vZGVfbW9kdWxlcy9AYXV0aDAvbmV4dGpzLWF1dGgwL2Rpc3QvdXRpbHMvcGF0aFV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBlbnN1cmVMZWFkaW5nU2xhc2godmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgIXZhbHVlLnN0YXJ0c1dpdGgoXCIvXCIpID8gYC8ke3ZhbHVlfWAgOiB2YWx1ZTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVUcmFpbGluZ1NsYXNoKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmICF2YWx1ZS5lbmRzV2l0aChcIi9cIikgPyBgJHt2YWx1ZX0vYCA6IHZhbHVlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZU5vTGVhZGluZ1NsYXNoKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICYmIHZhbHVlLnN0YXJ0c1dpdGgoXCIvXCIpXG4gICAgICAgID8gdmFsdWUuc3Vic3RyaW5nKDEsIHZhbHVlLmxlbmd0aClcbiAgICAgICAgOiB2YWx1ZTtcbn1cbmV4cG9ydCBjb25zdCByZW1vdmVUcmFpbGluZ1NsYXNoID0gKHBhdGgpID0+IHBhdGguZW5kc1dpdGgoXCIvXCIpID8gcGF0aC5zbGljZSgwLCAtMSkgOiBwYXRoO1xuZXhwb3J0IGNvbnN0IG5vcm1hbGl6ZVdpdGhCYXNlUGF0aCA9IChwYXRoKSA9PiB7XG4gICAgY29uc3QgYmFzZVBhdGggPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQVNFX1BBVEg7XG4gICAgaWYgKCFiYXNlUGF0aCkge1xuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICB9XG4gICAgLy8gYmFzZVBhdGggY2FuIGJlIGBkb2NzYCBvciBgL2RvY3NgXG4gICAgY29uc3Qgc2FuaXRpemVkQmFzZVBhdGggPSBlbnN1cmVMZWFkaW5nU2xhc2goYmFzZVBhdGgpO1xuICAgIHJldHVybiBlbnN1cmVUcmFpbGluZ1NsYXNoKHNhbml0aXplZEJhc2VQYXRoKSArIGVuc3VyZU5vTGVhZGluZ1NsYXNoKHBhdGgpO1xufTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/pathUtils.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/request.js":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/request.js ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isRequest: () => (/* binding */ isRequest)\n/* harmony export */ });\nconst isRequest = (req) => {\n    return (req instanceof Request ||\n        req.headers instanceof Headers ||\n        typeof req.bodyUsed === \"boolean\");\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL3JlcXVlc3QuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taXRzdXlvc2hpL0Rlc2t0b3AvYXV0aC10ZXN0L25vZGVfbW9kdWxlcy8ucG5wbS9AYXV0aDArbmV4dGpzLWF1dGgwQDQuMTEuMF9uZXh0QDE2LjAuMF9AYmFiZWwrY29yZUA3LjI4LjVfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfYjg5ZmQ3NjFlMmIxMDM4NTlhMjkxYWU5YWMwNDVkNTUvbm9kZV9tb2R1bGVzL0BhdXRoMC9uZXh0anMtYXV0aDAvZGlzdC91dGlscy9yZXF1ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpc1JlcXVlc3QgPSAocmVxKSA9PiB7XG4gICAgcmV0dXJuIChyZXEgaW5zdGFuY2VvZiBSZXF1ZXN0IHx8XG4gICAgICAgIHJlcS5oZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycyB8fFxuICAgICAgICB0eXBlb2YgcmVxLmJvZHlVc2VkID09PSBcImJvb2xlYW5cIik7XG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/request.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/scope-helpers.js":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/scope-helpers.js ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ensureDefaultScope: () => (/* binding */ ensureDefaultScope),\n/* harmony export */   getScopeForAudience: () => (/* binding */ getScopeForAudience)\n/* harmony export */ });\n/* harmony import */ var _errors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../errors/index.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/errors/index.js\");\n/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./constants.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/constants.js\");\n\n\n/**\n * Determines the default scope based on the provided authorization parameters.\n * If no scope is defined, it defaults to a predefined set of scopes.\n * If the scope is defined as an object (map) and does not include a scope for the default audience,\n * it adds the default scopes for that audience.\n * @param authorizationParameters The authorization parameters to evaluate.\n * @returns The determined scope, either as a string or an updated map of scopes.\n */\nfunction ensureDefaultScope(authorizationParameters) {\n    // When no scope is defined in the constructor, we default to a string set to DEFAULT_SCOPES.\n    // We do not introduce a Map here as that would be a breaking change.\n    if (!authorizationParameters.scope) {\n        return _constants_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCOPES;\n    }\n    // When the user defined scope as a Map, but did not define a scope for the default audience,\n    // we need to default it to the DEFAULT_SCOPES\n    if (typeof authorizationParameters.scope === \"object\" &&\n        !getScopeForAudience(authorizationParameters.scope, authorizationParameters.audience)) {\n        const audience = authorizationParameters.audience;\n        return {\n            ...authorizationParameters.scope,\n            [audience]: _constants_js__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_SCOPES\n        };\n    }\n    return authorizationParameters.scope;\n}\n/**\n * Retrieves the appropriate scope for a given audience from a scope map.\n * Only considers the audience when the scope is of type Map<string, string>.\n * If the scope is a string, it is returned as-is.\n * If the scope is null or undefined, undefined is returned.\n * @param scope The scope, either as a string, null/undefined, or a Map of audience to scope.\n * @param audience The audience to look up in the scope map\n * @returns The scope string for the given audience, or undefined if not found or if scope is null/undefined.\n * @throws {InvalidConfigurationError} If scope is defined as a map but no audience is provided.\n */\nfunction getScopeForAudience(scope, audience) {\n    // When the scope is null or undefined, we return undefined\n    if (!scope) {\n        return undefined;\n    }\n    // When the scope is a string, we return it as-is\n    if (typeof scope === \"string\") {\n        return scope;\n    }\n    // When no audience is provided, we cannot look up the scope in the Map\n    // We throw an error to inform the user that an audience is required\n    // Which is required to use MRRT altogether.\n    if (!audience) {\n        throw new _errors_index_js__WEBPACK_IMPORTED_MODULE_0__.InvalidConfigurationError(\"When defining scope as a Map, an audience is required to look up the correct scope.\");\n    }\n    // When the scope is a Map, we return the scope for the provided audience\n    // When no audience is provided, we default to the 'default' audience.\n    return scope[audience];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL3Njb3BlLWhlbHBlcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErRDtBQUNmO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLGVBQWUseURBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5REFBYztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDJCQUEyQjtBQUN2QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHVFQUF5QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWl0c3V5b3NoaS9EZXNrdG9wL2F1dGgtdGVzdC9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgwK25leHRqcy1hdXRoMEA0LjExLjBfbmV4dEAxNi4wLjBfQGJhYmVsK2NvcmVANy4yOC41X3JlYWN0LWRvbUAxOS4yLjBfcmVhY3RAMTkuMi4wX2I4OWZkNzYxZTJiMTAzODU5YTI5MWFlOWFjMDQ1ZDU1L25vZGVfbW9kdWxlcy9AYXV0aDAvbmV4dGpzLWF1dGgwL2Rpc3QvdXRpbHMvc2NvcGUtaGVscGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnZhbGlkQ29uZmlndXJhdGlvbkVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9TQ09QRVMgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbi8qKlxuICogRGV0ZXJtaW5lcyB0aGUgZGVmYXVsdCBzY29wZSBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXV0aG9yaXphdGlvbiBwYXJhbWV0ZXJzLlxuICogSWYgbm8gc2NvcGUgaXMgZGVmaW5lZCwgaXQgZGVmYXVsdHMgdG8gYSBwcmVkZWZpbmVkIHNldCBvZiBzY29wZXMuXG4gKiBJZiB0aGUgc2NvcGUgaXMgZGVmaW5lZCBhcyBhbiBvYmplY3QgKG1hcCkgYW5kIGRvZXMgbm90IGluY2x1ZGUgYSBzY29wZSBmb3IgdGhlIGRlZmF1bHQgYXVkaWVuY2UsXG4gKiBpdCBhZGRzIHRoZSBkZWZhdWx0IHNjb3BlcyBmb3IgdGhhdCBhdWRpZW5jZS5cbiAqIEBwYXJhbSBhdXRob3JpemF0aW9uUGFyYW1ldGVycyBUaGUgYXV0aG9yaXphdGlvbiBwYXJhbWV0ZXJzIHRvIGV2YWx1YXRlLlxuICogQHJldHVybnMgVGhlIGRldGVybWluZWQgc2NvcGUsIGVpdGhlciBhcyBhIHN0cmluZyBvciBhbiB1cGRhdGVkIG1hcCBvZiBzY29wZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlbnN1cmVEZWZhdWx0U2NvcGUoYXV0aG9yaXphdGlvblBhcmFtZXRlcnMpIHtcbiAgICAvLyBXaGVuIG5vIHNjb3BlIGlzIGRlZmluZWQgaW4gdGhlIGNvbnN0cnVjdG9yLCB3ZSBkZWZhdWx0IHRvIGEgc3RyaW5nIHNldCB0byBERUZBVUxUX1NDT1BFUy5cbiAgICAvLyBXZSBkbyBub3QgaW50cm9kdWNlIGEgTWFwIGhlcmUgYXMgdGhhdCB3b3VsZCBiZSBhIGJyZWFraW5nIGNoYW5nZS5cbiAgICBpZiAoIWF1dGhvcml6YXRpb25QYXJhbWV0ZXJzLnNjb3BlKSB7XG4gICAgICAgIHJldHVybiBERUZBVUxUX1NDT1BFUztcbiAgICB9XG4gICAgLy8gV2hlbiB0aGUgdXNlciBkZWZpbmVkIHNjb3BlIGFzIGEgTWFwLCBidXQgZGlkIG5vdCBkZWZpbmUgYSBzY29wZSBmb3IgdGhlIGRlZmF1bHQgYXVkaWVuY2UsXG4gICAgLy8gd2UgbmVlZCB0byBkZWZhdWx0IGl0IHRvIHRoZSBERUZBVUxUX1NDT1BFU1xuICAgIGlmICh0eXBlb2YgYXV0aG9yaXphdGlvblBhcmFtZXRlcnMuc2NvcGUgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgIWdldFNjb3BlRm9yQXVkaWVuY2UoYXV0aG9yaXphdGlvblBhcmFtZXRlcnMuc2NvcGUsIGF1dGhvcml6YXRpb25QYXJhbWV0ZXJzLmF1ZGllbmNlKSkge1xuICAgICAgICBjb25zdCBhdWRpZW5jZSA9IGF1dGhvcml6YXRpb25QYXJhbWV0ZXJzLmF1ZGllbmNlO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uYXV0aG9yaXphdGlvblBhcmFtZXRlcnMuc2NvcGUsXG4gICAgICAgICAgICBbYXVkaWVuY2VdOiBERUZBVUxUX1NDT1BFU1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gYXV0aG9yaXphdGlvblBhcmFtZXRlcnMuc2NvcGU7XG59XG4vKipcbiAqIFJldHJpZXZlcyB0aGUgYXBwcm9wcmlhdGUgc2NvcGUgZm9yIGEgZ2l2ZW4gYXVkaWVuY2UgZnJvbSBhIHNjb3BlIG1hcC5cbiAqIE9ubHkgY29uc2lkZXJzIHRoZSBhdWRpZW5jZSB3aGVuIHRoZSBzY29wZSBpcyBvZiB0eXBlIE1hcDxzdHJpbmcsIHN0cmluZz4uXG4gKiBJZiB0aGUgc2NvcGUgaXMgYSBzdHJpbmcsIGl0IGlzIHJldHVybmVkIGFzLWlzLlxuICogSWYgdGhlIHNjb3BlIGlzIG51bGwgb3IgdW5kZWZpbmVkLCB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0gc2NvcGUgVGhlIHNjb3BlLCBlaXRoZXIgYXMgYSBzdHJpbmcsIG51bGwvdW5kZWZpbmVkLCBvciBhIE1hcCBvZiBhdWRpZW5jZSB0byBzY29wZS5cbiAqIEBwYXJhbSBhdWRpZW5jZSBUaGUgYXVkaWVuY2UgdG8gbG9vayB1cCBpbiB0aGUgc2NvcGUgbWFwXG4gKiBAcmV0dXJucyBUaGUgc2NvcGUgc3RyaW5nIGZvciB0aGUgZ2l2ZW4gYXVkaWVuY2UsIG9yIHVuZGVmaW5lZCBpZiBub3QgZm91bmQgb3IgaWYgc2NvcGUgaXMgbnVsbC91bmRlZmluZWQuXG4gKiBAdGhyb3dzIHtJbnZhbGlkQ29uZmlndXJhdGlvbkVycm9yfSBJZiBzY29wZSBpcyBkZWZpbmVkIGFzIGEgbWFwIGJ1dCBubyBhdWRpZW5jZSBpcyBwcm92aWRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNjb3BlRm9yQXVkaWVuY2Uoc2NvcGUsIGF1ZGllbmNlKSB7XG4gICAgLy8gV2hlbiB0aGUgc2NvcGUgaXMgbnVsbCBvciB1bmRlZmluZWQsIHdlIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXNjb3BlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8vIFdoZW4gdGhlIHNjb3BlIGlzIGEgc3RyaW5nLCB3ZSByZXR1cm4gaXQgYXMtaXNcbiAgICBpZiAodHlwZW9mIHNjb3BlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiBzY29wZTtcbiAgICB9XG4gICAgLy8gV2hlbiBubyBhdWRpZW5jZSBpcyBwcm92aWRlZCwgd2UgY2Fubm90IGxvb2sgdXAgdGhlIHNjb3BlIGluIHRoZSBNYXBcbiAgICAvLyBXZSB0aHJvdyBhbiBlcnJvciB0byBpbmZvcm0gdGhlIHVzZXIgdGhhdCBhbiBhdWRpZW5jZSBpcyByZXF1aXJlZFxuICAgIC8vIFdoaWNoIGlzIHJlcXVpcmVkIHRvIHVzZSBNUlJUIGFsdG9nZXRoZXIuXG4gICAgaWYgKCFhdWRpZW5jZSkge1xuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZENvbmZpZ3VyYXRpb25FcnJvcihcIldoZW4gZGVmaW5pbmcgc2NvcGUgYXMgYSBNYXAsIGFuIGF1ZGllbmNlIGlzIHJlcXVpcmVkIHRvIGxvb2sgdXAgdGhlIGNvcnJlY3Qgc2NvcGUuXCIpO1xuICAgIH1cbiAgICAvLyBXaGVuIHRoZSBzY29wZSBpcyBhIE1hcCwgd2UgcmV0dXJuIHRoZSBzY29wZSBmb3IgdGhlIHByb3ZpZGVkIGF1ZGllbmNlXG4gICAgLy8gV2hlbiBubyBhdWRpZW5jZSBpcyBwcm92aWRlZCwgd2UgZGVmYXVsdCB0byB0aGUgJ2RlZmF1bHQnIGF1ZGllbmNlLlxuICAgIHJldHVybiBzY29wZVthdWRpZW5jZV07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/scope-helpers.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/session-changes-helpers.js":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/session-changes-helpers.js ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSessionChangesAfterGetAccessToken: () => (/* binding */ getSessionChangesAfterGetAccessToken)\n/* harmony export */ });\n/* harmony import */ var _scope_helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scope-helpers.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/scope-helpers.js\");\n/* harmony import */ var _token_set_helpers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./token-set-helpers.js */ \"(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/token-set-helpers.js\");\n\n\n/**\n * Checks if a tokenSet represents global audience and scope configuration.\n * @param tokenSet The token set to check\n * @param session The current session data\n * @param globalScope The global scope configuration\n * @param globalOptions The global options containing audience configuration\n * @returns True if the tokenSet uses global audience and scope, false otherwise\n */\nfunction isGlobalAudienceAndScope(tokenSet, session, globalScope, globalOptions) {\n    const isAudienceTheGlobalAudience = !tokenSet.audience ||\n        tokenSet.audience === (session.tokenSet.audience ?? globalOptions.audience);\n    const isScopeTheGlobalScope = !tokenSet.requestedScope ||\n        // Compare against either the initially requested scope, or the global scope if no requested scope is set.\n        // Typically, the requestedScope should always be set, but in case of legacy sessions it might not be so we need to fall-back\n        // to the global scope if that is the case.\n        (0,_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_1__.compareScopes)(session.tokenSet.requestedScope ?? globalScope, tokenSet.requestedScope);\n    return isAudienceTheGlobalAudience && isScopeTheGlobalScope;\n}\n/**\n * Handles updates to the global tokenSet when the new token uses global audience and scope.\n * @param tokenSet The new token set to potentially update with\n * @param session The current session data\n * @returns Partial session data with updated tokenSet, or undefined if no changes needed\n */\nfunction handleGlobalTokenSetUpdate(tokenSet, session) {\n    if (tokenSet.accessToken !== session.tokenSet.accessToken ||\n        tokenSet.expiresAt !== session.tokenSet.expiresAt ||\n        tokenSet.refreshToken !== session.tokenSet.refreshToken) {\n        return {\n            tokenSet\n        };\n    }\n    // When we use the global audience and scope, and nothing changed, we can exit early.\n    return undefined;\n}\n/**\n * Updates an existing access token set with merged requested scopes.\n *\n * IMPORTANT: This function merges the requestedScope fields from both the existing\n * and new token sets. The actual granted scopes (tokenSet.scope) come from the\n * authorization server and represent what was actually granted for this specific request.\n * We track both values to:\n * 1. Know what scopes were originally requested (requestedScope)\n * 2. Know what scopes were actually granted (scope)\n *\n * The merged requestedScope should never grant more permissions than what the\n * authorization server would allow - it only tracks what has been requested across\n * multiple token requests for the same audience. The actual permissions are always\n * determined by the authorization server's response (tokenSet.scope).\n *\n * @param session The current session data\n * @param tokenSet The new token set with updated scopes from the authorization server\n * @param existingAccessTokenSet The existing access token set to update\n * @param audience The audience for the access token\n * @returns Updated session data with merged requested scopes but actual granted scopes from tokenSet\n */\nfunction updateExistingAccessTokenWithMergedRequestedScopes(session, tokenSet, existingAccessTokenSet, audience) {\n    return {\n        accessTokens: session.accessTokens?.map((accessToken) => accessToken === existingAccessTokenSet\n            ? (0,_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_1__.accessTokenSetFromTokenSet)({\n                ...tokenSet,\n                // Use the merged requested scopes (of both existing and new entry) for lookup purposes\n                requestedScope: (0,_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_1__.mergeScopes)(accessToken.requestedScope, tokenSet.requestedScope),\n                // Use the actual granted scope from the authorization server\n                scope: tokenSet.scope\n            }, { audience })\n            : accessToken)\n    };\n}\n/**\n * Adds a new access token set to the session's accessTokens array.\n * @param session The current session data\n * @param tokenSet The token set to add as a new access token\n * @param audience The audience for the new access token\n * @returns Updated session data with the new access token added\n */\nfunction addNewAccessTokenSet(session, tokenSet, audience) {\n    return {\n        accessTokens: [\n            ...(session.accessTokens || []),\n            (0,_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_1__.accessTokenSetFromTokenSet)(tokenSet, { audience })\n        ]\n    };\n}\n/**\n * Updates an existing access token set if the access token has changed.\n * @param session The current session data\n * @param tokenSet The new token set with potentially updated access token\n * @param existingAccessTokenSet The existing access token set to compare against\n * @param audience The audience for the access token\n * @returns Updated session data if access token changed, undefined otherwise\n */\nfunction updateExistingAccessTokenSet(session, tokenSet, existingAccessTokenSet, audience) {\n    if (tokenSet.accessToken !== existingAccessTokenSet.accessToken) {\n        return {\n            accessTokens: session.accessTokens?.map((accessToken) => accessToken === existingAccessTokenSet\n                ? (0,_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_1__.accessTokenSetFromTokenSet)(tokenSet, { audience })\n                : accessToken)\n        };\n    }\n    return undefined;\n}\n/**\n * Handles updates to specific access tokens for non-global audience/scope combinations.\n * @param session The current session data\n * @param tokenSet The new token set to process\n * @param audience The specific audience for the access token\n * @param scope The specific scope for the access token\n * @returns Partial session data with access token updates, or undefined if no changes needed\n */\nfunction handleSpecificAccessTokenUpdate(session, tokenSet, audience, scope) {\n    // First, try to find an entry based on the requestedScope\n    let existingAccessTokenSet = (0,_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_1__.findAccessTokenSet)(session, {\n        scope,\n        audience,\n        matchMode: \"requestedScope\"\n    });\n    if (!existingAccessTokenSet) {\n        // If there is no specific match based on the requestedScope, we may want to see if there is a match based on the actual scope retrieved.\n        // If that is the case, we need to store them together:\n        // - When the cache has an entry with scope \"a\" and requestedScope \"a b\"\n        // - and we request a new token with requestedScope \"a c\" for the same audience, resulting in scope \"a\"\n        // - we want to update the existing entry to have a requested scope of \"a b c\".\n        //\n        // This avoids having multiple entries for the same provided scope, which would lead to unnecessary token requests.\n        // This also ensure, next time around when we request a token of scope \"a b\" or \"a c\", we will find the same existing entry in the cache, with provided scope set to \"a\".\n        existingAccessTokenSet = (0,_token_set_helpers_js__WEBPACK_IMPORTED_MODULE_1__.findAccessTokenSet)(session, {\n            scope: tokenSet.scope,\n            audience,\n            matchMode: \"scope\"\n        });\n        if (existingAccessTokenSet) {\n            // We need to update the requestedScope to be a combination of both matches\n            const accessTokenChanges = updateExistingAccessTokenWithMergedRequestedScopes(session, tokenSet, existingAccessTokenSet, audience);\n            return buildSessionChanges(session, tokenSet, accessTokenChanges);\n        }\n        else {\n            // There is no access token found that matches the provided `audience` and `scope`.\n            // We need to add a new entry to the array.\n            const accessTokenChanges = addNewAccessTokenSet(session, tokenSet, audience);\n            return buildSessionChanges(session, tokenSet, accessTokenChanges);\n        }\n    }\n    else {\n        // There is an existing access token for the provided `audience` and `scope`.\n        // We need to check if the access token changed, and if so, update it in the array.\n        const accessTokenChanges = updateExistingAccessTokenSet(session, tokenSet, existingAccessTokenSet, audience);\n        return buildSessionChanges(session, tokenSet, accessTokenChanges);\n    }\n}\n/**\n * Builds the final session changes object with both accessTokens and tokenSet updates.\n * @param session The current session data\n * @param tokenSet The new token set containing idToken and refreshToken updates\n * @param accessTokenChanges The access token changes to merge into the final result\n * @returns Complete session changes with both access tokens and token set updates, or undefined if no changes\n */\nfunction buildSessionChanges(session, tokenSet, accessTokenChanges) {\n    if (accessTokenChanges) {\n        return {\n            accessTokens: accessTokenChanges.accessTokens,\n            tokenSet: {\n                ...session.tokenSet,\n                idToken: tokenSet.idToken,\n                refreshToken: tokenSet.refreshToken\n            }\n        };\n    }\n    return undefined;\n}\n/**\n * Determines the necessary changes to the session after obtaining a new access token.\n *\n * This function checks if the provided tokenSet corresponds to the global audience and scope\n * or a specific one. It then determines if any updates are needed in the session's tokenSet\n * or accessTokens array and returns the required changes.\n *\n * If no changes are needed, it returns undefined.\n * @param session The original session data\n * @param tokenSet The, potentially, new TokenSet obtained\n * @param globalOptions The global audience and scope configured for the Auth0Client\n * @returns Partial session changes or undefined if no changes are needed\n */\nfunction getSessionChangesAfterGetAccessToken(session, tokenSet, globalOptions) {\n    // Since globalOptions.scope can be a map of audience to scopes, we need to get the correct scope for the current audience.\n    const globalScope = (0,_scope_helpers_js__WEBPACK_IMPORTED_MODULE_0__.getScopeForAudience)(globalOptions.scope, tokenSet.audience ?? globalOptions.audience);\n    // If we are using the global audience and scope, we need to check if the access token or refresh token changed in `SessionData.tokenSet`.\n    // We do not have to change anything to the `accessTokens` array inside `SessionData` in this case, so we can just return.\n    if (isGlobalAudienceAndScope(tokenSet, session, globalScope, globalOptions)) {\n        return handleGlobalTokenSetUpdate(tokenSet, session);\n    }\n    // If we aren't using the global audience and scope,\n    // we need to check if the corresponding access token changed in `SessionData.accessTokens`.\n    // We will also have to update the refreshToken and idToken as needed\n    const audience = tokenSet.audience ?? globalOptions.audience;\n    const scope = tokenSet.requestedScope ?? globalScope ?? undefined;\n    // If there is no audience, we cannot find the correct access token in the array\n    if (!audience) {\n        return undefined;\n    }\n    return handleSpecificAccessTokenUpdate(session, tokenSet, audience, scope);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL3Nlc3Npb24tY2hhbmdlcy1oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5RDtBQUMyRDtBQUNwSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLG9FQUFhO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpRkFBMEI7QUFDeEM7QUFDQTtBQUNBLGdDQUFnQyxrRUFBVztBQUMzQztBQUNBO0FBQ0EsYUFBYSxJQUFJLFVBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUZBQTBCLGFBQWEsVUFBVTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsaUZBQTBCLGFBQWEsVUFBVTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMseUVBQWtCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMseUVBQWtCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSx3QkFBd0Isc0VBQW1CO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWl0c3V5b3NoaS9EZXNrdG9wL2F1dGgtdGVzdC9ub2RlX21vZHVsZXMvLnBucG0vQGF1dGgwK25leHRqcy1hdXRoMEA0LjExLjBfbmV4dEAxNi4wLjBfQGJhYmVsK2NvcmVANy4yOC41X3JlYWN0LWRvbUAxOS4yLjBfcmVhY3RAMTkuMi4wX2I4OWZkNzYxZTJiMTAzODU5YTI5MWFlOWFjMDQ1ZDU1L25vZGVfbW9kdWxlcy9AYXV0aDAvbmV4dGpzLWF1dGgwL2Rpc3QvdXRpbHMvc2Vzc2lvbi1jaGFuZ2VzLWhlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0U2NvcGVGb3JBdWRpZW5jZSB9IGZyb20gXCIuL3Njb3BlLWhlbHBlcnMuanNcIjtcbmltcG9ydCB7IGFjY2Vzc1Rva2VuU2V0RnJvbVRva2VuU2V0LCBjb21wYXJlU2NvcGVzLCBmaW5kQWNjZXNzVG9rZW5TZXQsIG1lcmdlU2NvcGVzIH0gZnJvbSBcIi4vdG9rZW4tc2V0LWhlbHBlcnMuanNcIjtcbi8qKlxuICogQ2hlY2tzIGlmIGEgdG9rZW5TZXQgcmVwcmVzZW50cyBnbG9iYWwgYXVkaWVuY2UgYW5kIHNjb3BlIGNvbmZpZ3VyYXRpb24uXG4gKiBAcGFyYW0gdG9rZW5TZXQgVGhlIHRva2VuIHNldCB0byBjaGVja1xuICogQHBhcmFtIHNlc3Npb24gVGhlIGN1cnJlbnQgc2Vzc2lvbiBkYXRhXG4gKiBAcGFyYW0gZ2xvYmFsU2NvcGUgVGhlIGdsb2JhbCBzY29wZSBjb25maWd1cmF0aW9uXG4gKiBAcGFyYW0gZ2xvYmFsT3B0aW9ucyBUaGUgZ2xvYmFsIG9wdGlvbnMgY29udGFpbmluZyBhdWRpZW5jZSBjb25maWd1cmF0aW9uXG4gKiBAcmV0dXJucyBUcnVlIGlmIHRoZSB0b2tlblNldCB1c2VzIGdsb2JhbCBhdWRpZW5jZSBhbmQgc2NvcGUsIGZhbHNlIG90aGVyd2lzZVxuICovXG5mdW5jdGlvbiBpc0dsb2JhbEF1ZGllbmNlQW5kU2NvcGUodG9rZW5TZXQsIHNlc3Npb24sIGdsb2JhbFNjb3BlLCBnbG9iYWxPcHRpb25zKSB7XG4gICAgY29uc3QgaXNBdWRpZW5jZVRoZUdsb2JhbEF1ZGllbmNlID0gIXRva2VuU2V0LmF1ZGllbmNlIHx8XG4gICAgICAgIHRva2VuU2V0LmF1ZGllbmNlID09PSAoc2Vzc2lvbi50b2tlblNldC5hdWRpZW5jZSA/PyBnbG9iYWxPcHRpb25zLmF1ZGllbmNlKTtcbiAgICBjb25zdCBpc1Njb3BlVGhlR2xvYmFsU2NvcGUgPSAhdG9rZW5TZXQucmVxdWVzdGVkU2NvcGUgfHxcbiAgICAgICAgLy8gQ29tcGFyZSBhZ2FpbnN0IGVpdGhlciB0aGUgaW5pdGlhbGx5IHJlcXVlc3RlZCBzY29wZSwgb3IgdGhlIGdsb2JhbCBzY29wZSBpZiBubyByZXF1ZXN0ZWQgc2NvcGUgaXMgc2V0LlxuICAgICAgICAvLyBUeXBpY2FsbHksIHRoZSByZXF1ZXN0ZWRTY29wZSBzaG91bGQgYWx3YXlzIGJlIHNldCwgYnV0IGluIGNhc2Ugb2YgbGVnYWN5IHNlc3Npb25zIGl0IG1pZ2h0IG5vdCBiZSBzbyB3ZSBuZWVkIHRvIGZhbGwtYmFja1xuICAgICAgICAvLyB0byB0aGUgZ2xvYmFsIHNjb3BlIGlmIHRoYXQgaXMgdGhlIGNhc2UuXG4gICAgICAgIGNvbXBhcmVTY29wZXMoc2Vzc2lvbi50b2tlblNldC5yZXF1ZXN0ZWRTY29wZSA/PyBnbG9iYWxTY29wZSwgdG9rZW5TZXQucmVxdWVzdGVkU2NvcGUpO1xuICAgIHJldHVybiBpc0F1ZGllbmNlVGhlR2xvYmFsQXVkaWVuY2UgJiYgaXNTY29wZVRoZUdsb2JhbFNjb3BlO1xufVxuLyoqXG4gKiBIYW5kbGVzIHVwZGF0ZXMgdG8gdGhlIGdsb2JhbCB0b2tlblNldCB3aGVuIHRoZSBuZXcgdG9rZW4gdXNlcyBnbG9iYWwgYXVkaWVuY2UgYW5kIHNjb3BlLlxuICogQHBhcmFtIHRva2VuU2V0IFRoZSBuZXcgdG9rZW4gc2V0IHRvIHBvdGVudGlhbGx5IHVwZGF0ZSB3aXRoXG4gKiBAcGFyYW0gc2Vzc2lvbiBUaGUgY3VycmVudCBzZXNzaW9uIGRhdGFcbiAqIEByZXR1cm5zIFBhcnRpYWwgc2Vzc2lvbiBkYXRhIHdpdGggdXBkYXRlZCB0b2tlblNldCwgb3IgdW5kZWZpbmVkIGlmIG5vIGNoYW5nZXMgbmVlZGVkXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUdsb2JhbFRva2VuU2V0VXBkYXRlKHRva2VuU2V0LCBzZXNzaW9uKSB7XG4gICAgaWYgKHRva2VuU2V0LmFjY2Vzc1Rva2VuICE9PSBzZXNzaW9uLnRva2VuU2V0LmFjY2Vzc1Rva2VuIHx8XG4gICAgICAgIHRva2VuU2V0LmV4cGlyZXNBdCAhPT0gc2Vzc2lvbi50b2tlblNldC5leHBpcmVzQXQgfHxcbiAgICAgICAgdG9rZW5TZXQucmVmcmVzaFRva2VuICE9PSBzZXNzaW9uLnRva2VuU2V0LnJlZnJlc2hUb2tlbikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9rZW5TZXRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gV2hlbiB3ZSB1c2UgdGhlIGdsb2JhbCBhdWRpZW5jZSBhbmQgc2NvcGUsIGFuZCBub3RoaW5nIGNoYW5nZWQsIHdlIGNhbiBleGl0IGVhcmx5LlxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIFVwZGF0ZXMgYW4gZXhpc3RpbmcgYWNjZXNzIHRva2VuIHNldCB3aXRoIG1lcmdlZCByZXF1ZXN0ZWQgc2NvcGVzLlxuICpcbiAqIElNUE9SVEFOVDogVGhpcyBmdW5jdGlvbiBtZXJnZXMgdGhlIHJlcXVlc3RlZFNjb3BlIGZpZWxkcyBmcm9tIGJvdGggdGhlIGV4aXN0aW5nXG4gKiBhbmQgbmV3IHRva2VuIHNldHMuIFRoZSBhY3R1YWwgZ3JhbnRlZCBzY29wZXMgKHRva2VuU2V0LnNjb3BlKSBjb21lIGZyb20gdGhlXG4gKiBhdXRob3JpemF0aW9uIHNlcnZlciBhbmQgcmVwcmVzZW50IHdoYXQgd2FzIGFjdHVhbGx5IGdyYW50ZWQgZm9yIHRoaXMgc3BlY2lmaWMgcmVxdWVzdC5cbiAqIFdlIHRyYWNrIGJvdGggdmFsdWVzIHRvOlxuICogMS4gS25vdyB3aGF0IHNjb3BlcyB3ZXJlIG9yaWdpbmFsbHkgcmVxdWVzdGVkIChyZXF1ZXN0ZWRTY29wZSlcbiAqIDIuIEtub3cgd2hhdCBzY29wZXMgd2VyZSBhY3R1YWxseSBncmFudGVkIChzY29wZSlcbiAqXG4gKiBUaGUgbWVyZ2VkIHJlcXVlc3RlZFNjb3BlIHNob3VsZCBuZXZlciBncmFudCBtb3JlIHBlcm1pc3Npb25zIHRoYW4gd2hhdCB0aGVcbiAqIGF1dGhvcml6YXRpb24gc2VydmVyIHdvdWxkIGFsbG93IC0gaXQgb25seSB0cmFja3Mgd2hhdCBoYXMgYmVlbiByZXF1ZXN0ZWQgYWNyb3NzXG4gKiBtdWx0aXBsZSB0b2tlbiByZXF1ZXN0cyBmb3IgdGhlIHNhbWUgYXVkaWVuY2UuIFRoZSBhY3R1YWwgcGVybWlzc2lvbnMgYXJlIGFsd2F5c1xuICogZGV0ZXJtaW5lZCBieSB0aGUgYXV0aG9yaXphdGlvbiBzZXJ2ZXIncyByZXNwb25zZSAodG9rZW5TZXQuc2NvcGUpLlxuICpcbiAqIEBwYXJhbSBzZXNzaW9uIFRoZSBjdXJyZW50IHNlc3Npb24gZGF0YVxuICogQHBhcmFtIHRva2VuU2V0IFRoZSBuZXcgdG9rZW4gc2V0IHdpdGggdXBkYXRlZCBzY29wZXMgZnJvbSB0aGUgYXV0aG9yaXphdGlvbiBzZXJ2ZXJcbiAqIEBwYXJhbSBleGlzdGluZ0FjY2Vzc1Rva2VuU2V0IFRoZSBleGlzdGluZyBhY2Nlc3MgdG9rZW4gc2V0IHRvIHVwZGF0ZVxuICogQHBhcmFtIGF1ZGllbmNlIFRoZSBhdWRpZW5jZSBmb3IgdGhlIGFjY2VzcyB0b2tlblxuICogQHJldHVybnMgVXBkYXRlZCBzZXNzaW9uIGRhdGEgd2l0aCBtZXJnZWQgcmVxdWVzdGVkIHNjb3BlcyBidXQgYWN0dWFsIGdyYW50ZWQgc2NvcGVzIGZyb20gdG9rZW5TZXRcbiAqL1xuZnVuY3Rpb24gdXBkYXRlRXhpc3RpbmdBY2Nlc3NUb2tlbldpdGhNZXJnZWRSZXF1ZXN0ZWRTY29wZXMoc2Vzc2lvbiwgdG9rZW5TZXQsIGV4aXN0aW5nQWNjZXNzVG9rZW5TZXQsIGF1ZGllbmNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWNjZXNzVG9rZW5zOiBzZXNzaW9uLmFjY2Vzc1Rva2Vucz8ubWFwKChhY2Nlc3NUb2tlbikgPT4gYWNjZXNzVG9rZW4gPT09IGV4aXN0aW5nQWNjZXNzVG9rZW5TZXRcbiAgICAgICAgICAgID8gYWNjZXNzVG9rZW5TZXRGcm9tVG9rZW5TZXQoe1xuICAgICAgICAgICAgICAgIC4uLnRva2VuU2V0LFxuICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgbWVyZ2VkIHJlcXVlc3RlZCBzY29wZXMgKG9mIGJvdGggZXhpc3RpbmcgYW5kIG5ldyBlbnRyeSkgZm9yIGxvb2t1cCBwdXJwb3Nlc1xuICAgICAgICAgICAgICAgIHJlcXVlc3RlZFNjb3BlOiBtZXJnZVNjb3BlcyhhY2Nlc3NUb2tlbi5yZXF1ZXN0ZWRTY29wZSwgdG9rZW5TZXQucmVxdWVzdGVkU2NvcGUpLFxuICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgYWN0dWFsIGdyYW50ZWQgc2NvcGUgZnJvbSB0aGUgYXV0aG9yaXphdGlvbiBzZXJ2ZXJcbiAgICAgICAgICAgICAgICBzY29wZTogdG9rZW5TZXQuc2NvcGVcbiAgICAgICAgICAgIH0sIHsgYXVkaWVuY2UgfSlcbiAgICAgICAgICAgIDogYWNjZXNzVG9rZW4pXG4gICAgfTtcbn1cbi8qKlxuICogQWRkcyBhIG5ldyBhY2Nlc3MgdG9rZW4gc2V0IHRvIHRoZSBzZXNzaW9uJ3MgYWNjZXNzVG9rZW5zIGFycmF5LlxuICogQHBhcmFtIHNlc3Npb24gVGhlIGN1cnJlbnQgc2Vzc2lvbiBkYXRhXG4gKiBAcGFyYW0gdG9rZW5TZXQgVGhlIHRva2VuIHNldCB0byBhZGQgYXMgYSBuZXcgYWNjZXNzIHRva2VuXG4gKiBAcGFyYW0gYXVkaWVuY2UgVGhlIGF1ZGllbmNlIGZvciB0aGUgbmV3IGFjY2VzcyB0b2tlblxuICogQHJldHVybnMgVXBkYXRlZCBzZXNzaW9uIGRhdGEgd2l0aCB0aGUgbmV3IGFjY2VzcyB0b2tlbiBhZGRlZFxuICovXG5mdW5jdGlvbiBhZGROZXdBY2Nlc3NUb2tlblNldChzZXNzaW9uLCB0b2tlblNldCwgYXVkaWVuY2UpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBhY2Nlc3NUb2tlbnM6IFtcbiAgICAgICAgICAgIC4uLihzZXNzaW9uLmFjY2Vzc1Rva2VucyB8fCBbXSksXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblNldEZyb21Ub2tlblNldCh0b2tlblNldCwgeyBhdWRpZW5jZSB9KVxuICAgICAgICBdXG4gICAgfTtcbn1cbi8qKlxuICogVXBkYXRlcyBhbiBleGlzdGluZyBhY2Nlc3MgdG9rZW4gc2V0IGlmIHRoZSBhY2Nlc3MgdG9rZW4gaGFzIGNoYW5nZWQuXG4gKiBAcGFyYW0gc2Vzc2lvbiBUaGUgY3VycmVudCBzZXNzaW9uIGRhdGFcbiAqIEBwYXJhbSB0b2tlblNldCBUaGUgbmV3IHRva2VuIHNldCB3aXRoIHBvdGVudGlhbGx5IHVwZGF0ZWQgYWNjZXNzIHRva2VuXG4gKiBAcGFyYW0gZXhpc3RpbmdBY2Nlc3NUb2tlblNldCBUaGUgZXhpc3RpbmcgYWNjZXNzIHRva2VuIHNldCB0byBjb21wYXJlIGFnYWluc3RcbiAqIEBwYXJhbSBhdWRpZW5jZSBUaGUgYXVkaWVuY2UgZm9yIHRoZSBhY2Nlc3MgdG9rZW5cbiAqIEByZXR1cm5zIFVwZGF0ZWQgc2Vzc2lvbiBkYXRhIGlmIGFjY2VzcyB0b2tlbiBjaGFuZ2VkLCB1bmRlZmluZWQgb3RoZXJ3aXNlXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZUV4aXN0aW5nQWNjZXNzVG9rZW5TZXQoc2Vzc2lvbiwgdG9rZW5TZXQsIGV4aXN0aW5nQWNjZXNzVG9rZW5TZXQsIGF1ZGllbmNlKSB7XG4gICAgaWYgKHRva2VuU2V0LmFjY2Vzc1Rva2VuICE9PSBleGlzdGluZ0FjY2Vzc1Rva2VuU2V0LmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY2Nlc3NUb2tlbnM6IHNlc3Npb24uYWNjZXNzVG9rZW5zPy5tYXAoKGFjY2Vzc1Rva2VuKSA9PiBhY2Nlc3NUb2tlbiA9PT0gZXhpc3RpbmdBY2Nlc3NUb2tlblNldFxuICAgICAgICAgICAgICAgID8gYWNjZXNzVG9rZW5TZXRGcm9tVG9rZW5TZXQodG9rZW5TZXQsIHsgYXVkaWVuY2UgfSlcbiAgICAgICAgICAgICAgICA6IGFjY2Vzc1Rva2VuKVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBIYW5kbGVzIHVwZGF0ZXMgdG8gc3BlY2lmaWMgYWNjZXNzIHRva2VucyBmb3Igbm9uLWdsb2JhbCBhdWRpZW5jZS9zY29wZSBjb21iaW5hdGlvbnMuXG4gKiBAcGFyYW0gc2Vzc2lvbiBUaGUgY3VycmVudCBzZXNzaW9uIGRhdGFcbiAqIEBwYXJhbSB0b2tlblNldCBUaGUgbmV3IHRva2VuIHNldCB0byBwcm9jZXNzXG4gKiBAcGFyYW0gYXVkaWVuY2UgVGhlIHNwZWNpZmljIGF1ZGllbmNlIGZvciB0aGUgYWNjZXNzIHRva2VuXG4gKiBAcGFyYW0gc2NvcGUgVGhlIHNwZWNpZmljIHNjb3BlIGZvciB0aGUgYWNjZXNzIHRva2VuXG4gKiBAcmV0dXJucyBQYXJ0aWFsIHNlc3Npb24gZGF0YSB3aXRoIGFjY2VzcyB0b2tlbiB1cGRhdGVzLCBvciB1bmRlZmluZWQgaWYgbm8gY2hhbmdlcyBuZWVkZWRcbiAqL1xuZnVuY3Rpb24gaGFuZGxlU3BlY2lmaWNBY2Nlc3NUb2tlblVwZGF0ZShzZXNzaW9uLCB0b2tlblNldCwgYXVkaWVuY2UsIHNjb3BlKSB7XG4gICAgLy8gRmlyc3QsIHRyeSB0byBmaW5kIGFuIGVudHJ5IGJhc2VkIG9uIHRoZSByZXF1ZXN0ZWRTY29wZVxuICAgIGxldCBleGlzdGluZ0FjY2Vzc1Rva2VuU2V0ID0gZmluZEFjY2Vzc1Rva2VuU2V0KHNlc3Npb24sIHtcbiAgICAgICAgc2NvcGUsXG4gICAgICAgIGF1ZGllbmNlLFxuICAgICAgICBtYXRjaE1vZGU6IFwicmVxdWVzdGVkU2NvcGVcIlxuICAgIH0pO1xuICAgIGlmICghZXhpc3RpbmdBY2Nlc3NUb2tlblNldCkge1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBzcGVjaWZpYyBtYXRjaCBiYXNlZCBvbiB0aGUgcmVxdWVzdGVkU2NvcGUsIHdlIG1heSB3YW50IHRvIHNlZSBpZiB0aGVyZSBpcyBhIG1hdGNoIGJhc2VkIG9uIHRoZSBhY3R1YWwgc2NvcGUgcmV0cmlldmVkLlxuICAgICAgICAvLyBJZiB0aGF0IGlzIHRoZSBjYXNlLCB3ZSBuZWVkIHRvIHN0b3JlIHRoZW0gdG9nZXRoZXI6XG4gICAgICAgIC8vIC0gV2hlbiB0aGUgY2FjaGUgaGFzIGFuIGVudHJ5IHdpdGggc2NvcGUgXCJhXCIgYW5kIHJlcXVlc3RlZFNjb3BlIFwiYSBiXCJcbiAgICAgICAgLy8gLSBhbmQgd2UgcmVxdWVzdCBhIG5ldyB0b2tlbiB3aXRoIHJlcXVlc3RlZFNjb3BlIFwiYSBjXCIgZm9yIHRoZSBzYW1lIGF1ZGllbmNlLCByZXN1bHRpbmcgaW4gc2NvcGUgXCJhXCJcbiAgICAgICAgLy8gLSB3ZSB3YW50IHRvIHVwZGF0ZSB0aGUgZXhpc3RpbmcgZW50cnkgdG8gaGF2ZSBhIHJlcXVlc3RlZCBzY29wZSBvZiBcImEgYiBjXCIuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFRoaXMgYXZvaWRzIGhhdmluZyBtdWx0aXBsZSBlbnRyaWVzIGZvciB0aGUgc2FtZSBwcm92aWRlZCBzY29wZSwgd2hpY2ggd291bGQgbGVhZCB0byB1bm5lY2Vzc2FyeSB0b2tlbiByZXF1ZXN0cy5cbiAgICAgICAgLy8gVGhpcyBhbHNvIGVuc3VyZSwgbmV4dCB0aW1lIGFyb3VuZCB3aGVuIHdlIHJlcXVlc3QgYSB0b2tlbiBvZiBzY29wZSBcImEgYlwiIG9yIFwiYSBjXCIsIHdlIHdpbGwgZmluZCB0aGUgc2FtZSBleGlzdGluZyBlbnRyeSBpbiB0aGUgY2FjaGUsIHdpdGggcHJvdmlkZWQgc2NvcGUgc2V0IHRvIFwiYVwiLlxuICAgICAgICBleGlzdGluZ0FjY2Vzc1Rva2VuU2V0ID0gZmluZEFjY2Vzc1Rva2VuU2V0KHNlc3Npb24sIHtcbiAgICAgICAgICAgIHNjb3BlOiB0b2tlblNldC5zY29wZSxcbiAgICAgICAgICAgIGF1ZGllbmNlLFxuICAgICAgICAgICAgbWF0Y2hNb2RlOiBcInNjb3BlXCJcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChleGlzdGluZ0FjY2Vzc1Rva2VuU2V0KSB7XG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHVwZGF0ZSB0aGUgcmVxdWVzdGVkU2NvcGUgdG8gYmUgYSBjb21iaW5hdGlvbiBvZiBib3RoIG1hdGNoZXNcbiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuQ2hhbmdlcyA9IHVwZGF0ZUV4aXN0aW5nQWNjZXNzVG9rZW5XaXRoTWVyZ2VkUmVxdWVzdGVkU2NvcGVzKHNlc3Npb24sIHRva2VuU2V0LCBleGlzdGluZ0FjY2Vzc1Rva2VuU2V0LCBhdWRpZW5jZSk7XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRTZXNzaW9uQ2hhbmdlcyhzZXNzaW9uLCB0b2tlblNldCwgYWNjZXNzVG9rZW5DaGFuZ2VzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIG5vIGFjY2VzcyB0b2tlbiBmb3VuZCB0aGF0IG1hdGNoZXMgdGhlIHByb3ZpZGVkIGBhdWRpZW5jZWAgYW5kIGBzY29wZWAuXG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGFkZCBhIG5ldyBlbnRyeSB0byB0aGUgYXJyYXkuXG4gICAgICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbkNoYW5nZXMgPSBhZGROZXdBY2Nlc3NUb2tlblNldChzZXNzaW9uLCB0b2tlblNldCwgYXVkaWVuY2UpO1xuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkU2Vzc2lvbkNoYW5nZXMoc2Vzc2lvbiwgdG9rZW5TZXQsIGFjY2Vzc1Rva2VuQ2hhbmdlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFRoZXJlIGlzIGFuIGV4aXN0aW5nIGFjY2VzcyB0b2tlbiBmb3IgdGhlIHByb3ZpZGVkIGBhdWRpZW5jZWAgYW5kIGBzY29wZWAuXG4gICAgICAgIC8vIFdlIG5lZWQgdG8gY2hlY2sgaWYgdGhlIGFjY2VzcyB0b2tlbiBjaGFuZ2VkLCBhbmQgaWYgc28sIHVwZGF0ZSBpdCBpbiB0aGUgYXJyYXkuXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuQ2hhbmdlcyA9IHVwZGF0ZUV4aXN0aW5nQWNjZXNzVG9rZW5TZXQoc2Vzc2lvbiwgdG9rZW5TZXQsIGV4aXN0aW5nQWNjZXNzVG9rZW5TZXQsIGF1ZGllbmNlKTtcbiAgICAgICAgcmV0dXJuIGJ1aWxkU2Vzc2lvbkNoYW5nZXMoc2Vzc2lvbiwgdG9rZW5TZXQsIGFjY2Vzc1Rva2VuQ2hhbmdlcyk7XG4gICAgfVxufVxuLyoqXG4gKiBCdWlsZHMgdGhlIGZpbmFsIHNlc3Npb24gY2hhbmdlcyBvYmplY3Qgd2l0aCBib3RoIGFjY2Vzc1Rva2VucyBhbmQgdG9rZW5TZXQgdXBkYXRlcy5cbiAqIEBwYXJhbSBzZXNzaW9uIFRoZSBjdXJyZW50IHNlc3Npb24gZGF0YVxuICogQHBhcmFtIHRva2VuU2V0IFRoZSBuZXcgdG9rZW4gc2V0IGNvbnRhaW5pbmcgaWRUb2tlbiBhbmQgcmVmcmVzaFRva2VuIHVwZGF0ZXNcbiAqIEBwYXJhbSBhY2Nlc3NUb2tlbkNoYW5nZXMgVGhlIGFjY2VzcyB0b2tlbiBjaGFuZ2VzIHRvIG1lcmdlIGludG8gdGhlIGZpbmFsIHJlc3VsdFxuICogQHJldHVybnMgQ29tcGxldGUgc2Vzc2lvbiBjaGFuZ2VzIHdpdGggYm90aCBhY2Nlc3MgdG9rZW5zIGFuZCB0b2tlbiBzZXQgdXBkYXRlcywgb3IgdW5kZWZpbmVkIGlmIG5vIGNoYW5nZXNcbiAqL1xuZnVuY3Rpb24gYnVpbGRTZXNzaW9uQ2hhbmdlcyhzZXNzaW9uLCB0b2tlblNldCwgYWNjZXNzVG9rZW5DaGFuZ2VzKSB7XG4gICAgaWYgKGFjY2Vzc1Rva2VuQ2hhbmdlcykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWNjZXNzVG9rZW5zOiBhY2Nlc3NUb2tlbkNoYW5nZXMuYWNjZXNzVG9rZW5zLFxuICAgICAgICAgICAgdG9rZW5TZXQ6IHtcbiAgICAgICAgICAgICAgICAuLi5zZXNzaW9uLnRva2VuU2V0LFxuICAgICAgICAgICAgICAgIGlkVG9rZW46IHRva2VuU2V0LmlkVG9rZW4sXG4gICAgICAgICAgICAgICAgcmVmcmVzaFRva2VuOiB0b2tlblNldC5yZWZyZXNoVG9rZW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyB0aGUgbmVjZXNzYXJ5IGNoYW5nZXMgdG8gdGhlIHNlc3Npb24gYWZ0ZXIgb2J0YWluaW5nIGEgbmV3IGFjY2VzcyB0b2tlbi5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGNoZWNrcyBpZiB0aGUgcHJvdmlkZWQgdG9rZW5TZXQgY29ycmVzcG9uZHMgdG8gdGhlIGdsb2JhbCBhdWRpZW5jZSBhbmQgc2NvcGVcbiAqIG9yIGEgc3BlY2lmaWMgb25lLiBJdCB0aGVuIGRldGVybWluZXMgaWYgYW55IHVwZGF0ZXMgYXJlIG5lZWRlZCBpbiB0aGUgc2Vzc2lvbidzIHRva2VuU2V0XG4gKiBvciBhY2Nlc3NUb2tlbnMgYXJyYXkgYW5kIHJldHVybnMgdGhlIHJlcXVpcmVkIGNoYW5nZXMuXG4gKlxuICogSWYgbm8gY2hhbmdlcyBhcmUgbmVlZGVkLCBpdCByZXR1cm5zIHVuZGVmaW5lZC5cbiAqIEBwYXJhbSBzZXNzaW9uIFRoZSBvcmlnaW5hbCBzZXNzaW9uIGRhdGFcbiAqIEBwYXJhbSB0b2tlblNldCBUaGUsIHBvdGVudGlhbGx5LCBuZXcgVG9rZW5TZXQgb2J0YWluZWRcbiAqIEBwYXJhbSBnbG9iYWxPcHRpb25zIFRoZSBnbG9iYWwgYXVkaWVuY2UgYW5kIHNjb3BlIGNvbmZpZ3VyZWQgZm9yIHRoZSBBdXRoMENsaWVudFxuICogQHJldHVybnMgUGFydGlhbCBzZXNzaW9uIGNoYW5nZXMgb3IgdW5kZWZpbmVkIGlmIG5vIGNoYW5nZXMgYXJlIG5lZWRlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Vzc2lvbkNoYW5nZXNBZnRlckdldEFjY2Vzc1Rva2VuKHNlc3Npb24sIHRva2VuU2V0LCBnbG9iYWxPcHRpb25zKSB7XG4gICAgLy8gU2luY2UgZ2xvYmFsT3B0aW9ucy5zY29wZSBjYW4gYmUgYSBtYXAgb2YgYXVkaWVuY2UgdG8gc2NvcGVzLCB3ZSBuZWVkIHRvIGdldCB0aGUgY29ycmVjdCBzY29wZSBmb3IgdGhlIGN1cnJlbnQgYXVkaWVuY2UuXG4gICAgY29uc3QgZ2xvYmFsU2NvcGUgPSBnZXRTY29wZUZvckF1ZGllbmNlKGdsb2JhbE9wdGlvbnMuc2NvcGUsIHRva2VuU2V0LmF1ZGllbmNlID8/IGdsb2JhbE9wdGlvbnMuYXVkaWVuY2UpO1xuICAgIC8vIElmIHdlIGFyZSB1c2luZyB0aGUgZ2xvYmFsIGF1ZGllbmNlIGFuZCBzY29wZSwgd2UgbmVlZCB0byBjaGVjayBpZiB0aGUgYWNjZXNzIHRva2VuIG9yIHJlZnJlc2ggdG9rZW4gY2hhbmdlZCBpbiBgU2Vzc2lvbkRhdGEudG9rZW5TZXRgLlxuICAgIC8vIFdlIGRvIG5vdCBoYXZlIHRvIGNoYW5nZSBhbnl0aGluZyB0byB0aGUgYGFjY2Vzc1Rva2Vuc2AgYXJyYXkgaW5zaWRlIGBTZXNzaW9uRGF0YWAgaW4gdGhpcyBjYXNlLCBzbyB3ZSBjYW4ganVzdCByZXR1cm4uXG4gICAgaWYgKGlzR2xvYmFsQXVkaWVuY2VBbmRTY29wZSh0b2tlblNldCwgc2Vzc2lvbiwgZ2xvYmFsU2NvcGUsIGdsb2JhbE9wdGlvbnMpKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVHbG9iYWxUb2tlblNldFVwZGF0ZSh0b2tlblNldCwgc2Vzc2lvbik7XG4gICAgfVxuICAgIC8vIElmIHdlIGFyZW4ndCB1c2luZyB0aGUgZ2xvYmFsIGF1ZGllbmNlIGFuZCBzY29wZSxcbiAgICAvLyB3ZSBuZWVkIHRvIGNoZWNrIGlmIHRoZSBjb3JyZXNwb25kaW5nIGFjY2VzcyB0b2tlbiBjaGFuZ2VkIGluIGBTZXNzaW9uRGF0YS5hY2Nlc3NUb2tlbnNgLlxuICAgIC8vIFdlIHdpbGwgYWxzbyBoYXZlIHRvIHVwZGF0ZSB0aGUgcmVmcmVzaFRva2VuIGFuZCBpZFRva2VuIGFzIG5lZWRlZFxuICAgIGNvbnN0IGF1ZGllbmNlID0gdG9rZW5TZXQuYXVkaWVuY2UgPz8gZ2xvYmFsT3B0aW9ucy5hdWRpZW5jZTtcbiAgICBjb25zdCBzY29wZSA9IHRva2VuU2V0LnJlcXVlc3RlZFNjb3BlID8/IGdsb2JhbFNjb3BlID8/IHVuZGVmaW5lZDtcbiAgICAvLyBJZiB0aGVyZSBpcyBubyBhdWRpZW5jZSwgd2UgY2Fubm90IGZpbmQgdGhlIGNvcnJlY3QgYWNjZXNzIHRva2VuIGluIHRoZSBhcnJheVxuICAgIGlmICghYXVkaWVuY2UpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGhhbmRsZVNwZWNpZmljQWNjZXNzVG9rZW5VcGRhdGUoc2Vzc2lvbiwgdG9rZW5TZXQsIGF1ZGllbmNlLCBzY29wZSk7XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/session-changes-helpers.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/token-set-helpers.js":
/*!**************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/token-set-helpers.js ***!
  \**************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accessTokenSetFromTokenSet: () => (/* binding */ accessTokenSetFromTokenSet),\n/* harmony export */   compareScopes: () => (/* binding */ compareScopes),\n/* harmony export */   findAccessTokenSet: () => (/* binding */ findAccessTokenSet),\n/* harmony export */   mergeScopes: () => (/* binding */ mergeScopes),\n/* harmony export */   tokenSetFromAccessTokenSet: () => (/* binding */ tokenSetFromAccessTokenSet)\n/* harmony export */ });\n/**\n * Converts a TokenSet to an AccessTokenSet, including optional audience and scope.\n * @param tokenSet the TokenSet to convert\n * @param options object containing optional audience\n * @returns AccessTokenSet\n */\nfunction accessTokenSetFromTokenSet(tokenSet, options) {\n    return {\n        accessToken: tokenSet.accessToken,\n        expiresAt: tokenSet.expiresAt,\n        audience: options.audience,\n        scope: tokenSet.scope,\n        requestedScope: tokenSet.requestedScope,\n        ...(tokenSet.token_type && { token_type: tokenSet.token_type })\n    };\n}\n/**\n * Converts an AccessTokenSet and a partial TokenSet into a partial TokenSet.\n * This is useful for merging an AccessTokenSet back into a TokenSet structure,\n * while preserving other properties of the TokenSet.\n * @param accessTokenSet the AccessTokenSet to convert\n * @param tokenSet the partial TokenSet to merge with\n * @returns The merged partial TokenSet\n */\nfunction tokenSetFromAccessTokenSet(accessTokenSet, tokenSet) {\n    return {\n        ...tokenSet,\n        accessToken: accessTokenSet?.accessToken,\n        expiresAt: accessTokenSet?.expiresAt,\n        scope: accessTokenSet?.scope,\n        requestedScope: accessTokenSet?.requestedScope,\n        audience: accessTokenSet?.audience,\n        ...(accessTokenSet?.token_type && { token_type: accessTokenSet.token_type })\n    };\n}\n/**\n * Parses a scope string into an array of individual scopes, filtering out empty strings.\n * @param scopes Space-separated scope string\n * @returns Array of scope strings\n */\nfunction parseScopesToArray(scopes) {\n    if (!scopes)\n        return [];\n    return scopes.trim().split(\" \").filter(Boolean);\n}\n/**\n * Compares two sets of scopes to determine if all required scopes are present in the provided scopes.\n * @param scopes Scopes to compare (space-separated string)\n * @param requiredScopes Scopes required to be present in the scopes (space-separated string)\n * @param options Optional settings for comparison\n * @param options.strict If true, requires an exact match of scopes (no extra scopes allowed)\n * @returns True if all required scopes are present in the scopes, false otherwise\n */\nconst compareScopes = (scopes, requiredScopes, options = {}) => {\n    // When the scopes and requiredScopes are exactly the same, return true\n    if (scopes === requiredScopes) {\n        return true;\n    }\n    if (!scopes || !requiredScopes) {\n        return false;\n    }\n    const scopesSet = new Set(parseScopesToArray(scopes));\n    const requiredScopesSet = new Set(parseScopesToArray(requiredScopes));\n    const requiredScopesArray = Array.from(requiredScopesSet);\n    const hasAllRequiredScopes = requiredScopesArray.every((scope) => scopesSet.has(scope));\n    if (options.strict) {\n        return hasAllRequiredScopes && scopesSet.size === requiredScopesSet.size;\n    }\n    return hasAllRequiredScopes;\n};\n/**\n * Merges two space-separated scope strings into one, removing duplicates.\n * Properly handles whitespace by trimming and normalizing scope values.\n * @param scopes1 The first scope string\n * @param scopes2 The second scope string\n * @returns Merged scope string with unique scopes, sorted alphabetically for consistency\n */\nfunction mergeScopes(scopes1, scopes2) {\n    const scopes1Array = scopes1 ? parseScopesToArray(scopes1) : [];\n    const scopes2Array = scopes2 ? parseScopesToArray(scopes2) : [];\n    // Use a Set to remove duplicates\n    const uniqueScopes = new Set([...scopes1Array, ...scopes2Array]);\n    // Convert back to array and join as a space-separated string\n    return Array.from(uniqueScopes).join(\" \");\n}\n/**\n * Finds the best matching AccessTokenSet in the session by audience and scope.\n *\n * The function determines a \"match\" if an AccessTokenSet's scope property contains all the items\n * from the `options.scope`. From the potential matches, it selects the best one\n * based on the following criteria, in order of priority:\n *\n * 1. An \"exact match\" is preferred above all. This is where the AccessTokenSet's scope\n *    has the exact same items as the `options.scope` (length and content are identical,\n *    order does not matter).\n * 2. If no exact match is found, the \"best partial match\" is chosen. This is the\n *    matching AccessTokenSet whose scope has the fewest additional items.\n * 3. If multiple matches with the exact same scopes are found, we take the first one.\n *    However, this should not happen in practice as the session should not contain\n *    duplicate AccessTokenSet's.\n *\n * @param sessionData The session data containing accessTokens array.\n * @param {Object} options\n * @param {number} options.scope - The scope to match against (space-separated string).\n * @param {string} options.audience - The audience to match against.\n * @param {\"requestedScope\" | \"scope\"} [options.matchMode=\"requestedScope\"] - The mode to use for matching scopes.\n * @returns The best matching AccessTokenSet, or undefined if no match is found.\n */\nfunction findAccessTokenSet(sessionData, options) {\n    const matchMode = options.matchMode ?? \"requestedScope\";\n    const accessTokenSets = sessionData?.accessTokens;\n    // 1. When there are no access tokens, we can exit early.\n    if (!accessTokenSets || accessTokenSets.length === 0) {\n        return;\n    }\n    // 2. Filter the list to find all AccessTokenSet's that are valid matches.\n    // A valid match's audience must match the provided `options.audience`,\n    // and its scope must contain all items from `options.scope`.\n    const allMatches = accessTokenSets.filter((accessTokenSet) => {\n        return (accessTokenSet.audience === options.audience &&\n            compareScopes(matchMode === \"scope\"\n                ? accessTokenSet.scope\n                : (accessTokenSet.requestedScope ?? accessTokenSet.scope), options.scope, { strict: matchMode === \"scope\" }));\n    });\n    // If no potential matches were found, we can exit early.\n    if (allMatches.length === 0) {\n        return;\n    }\n    // 3. Sort the valid matches to find the best one.\n    // The best match is the one with the smallest scope array, as it has the fewest\n    // extra permissions. An exact match will naturally be sorted first.\n    // This also works for null/undefined scopes, as they would have been matched\n    // against a null/undefined `options.scope` and will all be equally valid.\n    // Note: This sorting algorithm also takes care of duplicate scopes, as they will\n    // be converted to a Set and thus have the same size as a non-duplicate scope array.\n    allMatches.sort((a, b) => {\n        const aScopesUnique = new Set(parseScopesToArray(a.scope));\n        const bScopesUnique = new Set(parseScopesToArray(b.scope));\n        return aScopesUnique.size - bScopesUnique.size;\n    });\n    // The first item in the sorted list is the best possible match.\n    return allMatches[0];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL3Rva2VuLXNldC1oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsaUNBQWlDO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyx1Q0FBdUM7QUFDbkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLDJEQUEyRDtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLFdBQVcsUUFBUTtBQUNuQixXQUFXLDRCQUE0QjtBQUN2QztBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRGQUE0RiwrQkFBK0I7QUFDM0gsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taXRzdXlvc2hpL0Rlc2t0b3AvYXV0aC10ZXN0L25vZGVfbW9kdWxlcy8ucG5wbS9AYXV0aDArbmV4dGpzLWF1dGgwQDQuMTEuMF9uZXh0QDE2LjAuMF9AYmFiZWwrY29yZUA3LjI4LjVfcmVhY3QtZG9tQDE5LjIuMF9yZWFjdEAxOS4yLjBfYjg5ZmQ3NjFlMmIxMDM4NTlhMjkxYWU5YWMwNDVkNTUvbm9kZV9tb2R1bGVzL0BhdXRoMC9uZXh0anMtYXV0aDAvZGlzdC91dGlscy90b2tlbi1zZXQtaGVscGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnZlcnRzIGEgVG9rZW5TZXQgdG8gYW4gQWNjZXNzVG9rZW5TZXQsIGluY2x1ZGluZyBvcHRpb25hbCBhdWRpZW5jZSBhbmQgc2NvcGUuXG4gKiBAcGFyYW0gdG9rZW5TZXQgdGhlIFRva2VuU2V0IHRvIGNvbnZlcnRcbiAqIEBwYXJhbSBvcHRpb25zIG9iamVjdCBjb250YWluaW5nIG9wdGlvbmFsIGF1ZGllbmNlXG4gKiBAcmV0dXJucyBBY2Nlc3NUb2tlblNldFxuICovXG5leHBvcnQgZnVuY3Rpb24gYWNjZXNzVG9rZW5TZXRGcm9tVG9rZW5TZXQodG9rZW5TZXQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBhY2Nlc3NUb2tlbjogdG9rZW5TZXQuYWNjZXNzVG9rZW4sXG4gICAgICAgIGV4cGlyZXNBdDogdG9rZW5TZXQuZXhwaXJlc0F0LFxuICAgICAgICBhdWRpZW5jZTogb3B0aW9ucy5hdWRpZW5jZSxcbiAgICAgICAgc2NvcGU6IHRva2VuU2V0LnNjb3BlLFxuICAgICAgICByZXF1ZXN0ZWRTY29wZTogdG9rZW5TZXQucmVxdWVzdGVkU2NvcGUsXG4gICAgICAgIC4uLih0b2tlblNldC50b2tlbl90eXBlICYmIHsgdG9rZW5fdHlwZTogdG9rZW5TZXQudG9rZW5fdHlwZSB9KVxuICAgIH07XG59XG4vKipcbiAqIENvbnZlcnRzIGFuIEFjY2Vzc1Rva2VuU2V0IGFuZCBhIHBhcnRpYWwgVG9rZW5TZXQgaW50byBhIHBhcnRpYWwgVG9rZW5TZXQuXG4gKiBUaGlzIGlzIHVzZWZ1bCBmb3IgbWVyZ2luZyBhbiBBY2Nlc3NUb2tlblNldCBiYWNrIGludG8gYSBUb2tlblNldCBzdHJ1Y3R1cmUsXG4gKiB3aGlsZSBwcmVzZXJ2aW5nIG90aGVyIHByb3BlcnRpZXMgb2YgdGhlIFRva2VuU2V0LlxuICogQHBhcmFtIGFjY2Vzc1Rva2VuU2V0IHRoZSBBY2Nlc3NUb2tlblNldCB0byBjb252ZXJ0XG4gKiBAcGFyYW0gdG9rZW5TZXQgdGhlIHBhcnRpYWwgVG9rZW5TZXQgdG8gbWVyZ2Ugd2l0aFxuICogQHJldHVybnMgVGhlIG1lcmdlZCBwYXJ0aWFsIFRva2VuU2V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b2tlblNldEZyb21BY2Nlc3NUb2tlblNldChhY2Nlc3NUb2tlblNldCwgdG9rZW5TZXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICAuLi50b2tlblNldCxcbiAgICAgICAgYWNjZXNzVG9rZW46IGFjY2Vzc1Rva2VuU2V0Py5hY2Nlc3NUb2tlbixcbiAgICAgICAgZXhwaXJlc0F0OiBhY2Nlc3NUb2tlblNldD8uZXhwaXJlc0F0LFxuICAgICAgICBzY29wZTogYWNjZXNzVG9rZW5TZXQ/LnNjb3BlLFxuICAgICAgICByZXF1ZXN0ZWRTY29wZTogYWNjZXNzVG9rZW5TZXQ/LnJlcXVlc3RlZFNjb3BlLFxuICAgICAgICBhdWRpZW5jZTogYWNjZXNzVG9rZW5TZXQ/LmF1ZGllbmNlLFxuICAgICAgICAuLi4oYWNjZXNzVG9rZW5TZXQ/LnRva2VuX3R5cGUgJiYgeyB0b2tlbl90eXBlOiBhY2Nlc3NUb2tlblNldC50b2tlbl90eXBlIH0pXG4gICAgfTtcbn1cbi8qKlxuICogUGFyc2VzIGEgc2NvcGUgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgaW5kaXZpZHVhbCBzY29wZXMsIGZpbHRlcmluZyBvdXQgZW1wdHkgc3RyaW5ncy5cbiAqIEBwYXJhbSBzY29wZXMgU3BhY2Utc2VwYXJhdGVkIHNjb3BlIHN0cmluZ1xuICogQHJldHVybnMgQXJyYXkgb2Ygc2NvcGUgc3RyaW5nc1xuICovXG5mdW5jdGlvbiBwYXJzZVNjb3Blc1RvQXJyYXkoc2NvcGVzKSB7XG4gICAgaWYgKCFzY29wZXMpXG4gICAgICAgIHJldHVybiBbXTtcbiAgICByZXR1cm4gc2NvcGVzLnRyaW0oKS5zcGxpdChcIiBcIikuZmlsdGVyKEJvb2xlYW4pO1xufVxuLyoqXG4gKiBDb21wYXJlcyB0d28gc2V0cyBvZiBzY29wZXMgdG8gZGV0ZXJtaW5lIGlmIGFsbCByZXF1aXJlZCBzY29wZXMgYXJlIHByZXNlbnQgaW4gdGhlIHByb3ZpZGVkIHNjb3Blcy5cbiAqIEBwYXJhbSBzY29wZXMgU2NvcGVzIHRvIGNvbXBhcmUgKHNwYWNlLXNlcGFyYXRlZCBzdHJpbmcpXG4gKiBAcGFyYW0gcmVxdWlyZWRTY29wZXMgU2NvcGVzIHJlcXVpcmVkIHRvIGJlIHByZXNlbnQgaW4gdGhlIHNjb3BlcyAoc3BhY2Utc2VwYXJhdGVkIHN0cmluZylcbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbmFsIHNldHRpbmdzIGZvciBjb21wYXJpc29uXG4gKiBAcGFyYW0gb3B0aW9ucy5zdHJpY3QgSWYgdHJ1ZSwgcmVxdWlyZXMgYW4gZXhhY3QgbWF0Y2ggb2Ygc2NvcGVzIChubyBleHRyYSBzY29wZXMgYWxsb3dlZClcbiAqIEByZXR1cm5zIFRydWUgaWYgYWxsIHJlcXVpcmVkIHNjb3BlcyBhcmUgcHJlc2VudCBpbiB0aGUgc2NvcGVzLCBmYWxzZSBvdGhlcndpc2VcbiAqL1xuZXhwb3J0IGNvbnN0IGNvbXBhcmVTY29wZXMgPSAoc2NvcGVzLCByZXF1aXJlZFNjb3Blcywgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgLy8gV2hlbiB0aGUgc2NvcGVzIGFuZCByZXF1aXJlZFNjb3BlcyBhcmUgZXhhY3RseSB0aGUgc2FtZSwgcmV0dXJuIHRydWVcbiAgICBpZiAoc2NvcGVzID09PSByZXF1aXJlZFNjb3Blcykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCFzY29wZXMgfHwgIXJlcXVpcmVkU2NvcGVzKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3Qgc2NvcGVzU2V0ID0gbmV3IFNldChwYXJzZVNjb3Blc1RvQXJyYXkoc2NvcGVzKSk7XG4gICAgY29uc3QgcmVxdWlyZWRTY29wZXNTZXQgPSBuZXcgU2V0KHBhcnNlU2NvcGVzVG9BcnJheShyZXF1aXJlZFNjb3BlcykpO1xuICAgIGNvbnN0IHJlcXVpcmVkU2NvcGVzQXJyYXkgPSBBcnJheS5mcm9tKHJlcXVpcmVkU2NvcGVzU2V0KTtcbiAgICBjb25zdCBoYXNBbGxSZXF1aXJlZFNjb3BlcyA9IHJlcXVpcmVkU2NvcGVzQXJyYXkuZXZlcnkoKHNjb3BlKSA9PiBzY29wZXNTZXQuaGFzKHNjb3BlKSk7XG4gICAgaWYgKG9wdGlvbnMuc3RyaWN0KSB7XG4gICAgICAgIHJldHVybiBoYXNBbGxSZXF1aXJlZFNjb3BlcyAmJiBzY29wZXNTZXQuc2l6ZSA9PT0gcmVxdWlyZWRTY29wZXNTZXQuc2l6ZTtcbiAgICB9XG4gICAgcmV0dXJuIGhhc0FsbFJlcXVpcmVkU2NvcGVzO1xufTtcbi8qKlxuICogTWVyZ2VzIHR3byBzcGFjZS1zZXBhcmF0ZWQgc2NvcGUgc3RyaW5ncyBpbnRvIG9uZSwgcmVtb3ZpbmcgZHVwbGljYXRlcy5cbiAqIFByb3Blcmx5IGhhbmRsZXMgd2hpdGVzcGFjZSBieSB0cmltbWluZyBhbmQgbm9ybWFsaXppbmcgc2NvcGUgdmFsdWVzLlxuICogQHBhcmFtIHNjb3BlczEgVGhlIGZpcnN0IHNjb3BlIHN0cmluZ1xuICogQHBhcmFtIHNjb3BlczIgVGhlIHNlY29uZCBzY29wZSBzdHJpbmdcbiAqIEByZXR1cm5zIE1lcmdlZCBzY29wZSBzdHJpbmcgd2l0aCB1bmlxdWUgc2NvcGVzLCBzb3J0ZWQgYWxwaGFiZXRpY2FsbHkgZm9yIGNvbnNpc3RlbmN5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVNjb3BlcyhzY29wZXMxLCBzY29wZXMyKSB7XG4gICAgY29uc3Qgc2NvcGVzMUFycmF5ID0gc2NvcGVzMSA/IHBhcnNlU2NvcGVzVG9BcnJheShzY29wZXMxKSA6IFtdO1xuICAgIGNvbnN0IHNjb3BlczJBcnJheSA9IHNjb3BlczIgPyBwYXJzZVNjb3Blc1RvQXJyYXkoc2NvcGVzMikgOiBbXTtcbiAgICAvLyBVc2UgYSBTZXQgdG8gcmVtb3ZlIGR1cGxpY2F0ZXNcbiAgICBjb25zdCB1bmlxdWVTY29wZXMgPSBuZXcgU2V0KFsuLi5zY29wZXMxQXJyYXksIC4uLnNjb3BlczJBcnJheV0pO1xuICAgIC8vIENvbnZlcnQgYmFjayB0byBhcnJheSBhbmQgam9pbiBhcyBhIHNwYWNlLXNlcGFyYXRlZCBzdHJpbmdcbiAgICByZXR1cm4gQXJyYXkuZnJvbSh1bmlxdWVTY29wZXMpLmpvaW4oXCIgXCIpO1xufVxuLyoqXG4gKiBGaW5kcyB0aGUgYmVzdCBtYXRjaGluZyBBY2Nlc3NUb2tlblNldCBpbiB0aGUgc2Vzc2lvbiBieSBhdWRpZW5jZSBhbmQgc2NvcGUuXG4gKlxuICogVGhlIGZ1bmN0aW9uIGRldGVybWluZXMgYSBcIm1hdGNoXCIgaWYgYW4gQWNjZXNzVG9rZW5TZXQncyBzY29wZSBwcm9wZXJ0eSBjb250YWlucyBhbGwgdGhlIGl0ZW1zXG4gKiBmcm9tIHRoZSBgb3B0aW9ucy5zY29wZWAuIEZyb20gdGhlIHBvdGVudGlhbCBtYXRjaGVzLCBpdCBzZWxlY3RzIHRoZSBiZXN0IG9uZVxuICogYmFzZWQgb24gdGhlIGZvbGxvd2luZyBjcml0ZXJpYSwgaW4gb3JkZXIgb2YgcHJpb3JpdHk6XG4gKlxuICogMS4gQW4gXCJleGFjdCBtYXRjaFwiIGlzIHByZWZlcnJlZCBhYm92ZSBhbGwuIFRoaXMgaXMgd2hlcmUgdGhlIEFjY2Vzc1Rva2VuU2V0J3Mgc2NvcGVcbiAqICAgIGhhcyB0aGUgZXhhY3Qgc2FtZSBpdGVtcyBhcyB0aGUgYG9wdGlvbnMuc2NvcGVgIChsZW5ndGggYW5kIGNvbnRlbnQgYXJlIGlkZW50aWNhbCxcbiAqICAgIG9yZGVyIGRvZXMgbm90IG1hdHRlcikuXG4gKiAyLiBJZiBubyBleGFjdCBtYXRjaCBpcyBmb3VuZCwgdGhlIFwiYmVzdCBwYXJ0aWFsIG1hdGNoXCIgaXMgY2hvc2VuLiBUaGlzIGlzIHRoZVxuICogICAgbWF0Y2hpbmcgQWNjZXNzVG9rZW5TZXQgd2hvc2Ugc2NvcGUgaGFzIHRoZSBmZXdlc3QgYWRkaXRpb25hbCBpdGVtcy5cbiAqIDMuIElmIG11bHRpcGxlIG1hdGNoZXMgd2l0aCB0aGUgZXhhY3Qgc2FtZSBzY29wZXMgYXJlIGZvdW5kLCB3ZSB0YWtlIHRoZSBmaXJzdCBvbmUuXG4gKiAgICBIb3dldmVyLCB0aGlzIHNob3VsZCBub3QgaGFwcGVuIGluIHByYWN0aWNlIGFzIHRoZSBzZXNzaW9uIHNob3VsZCBub3QgY29udGFpblxuICogICAgZHVwbGljYXRlIEFjY2Vzc1Rva2VuU2V0J3MuXG4gKlxuICogQHBhcmFtIHNlc3Npb25EYXRhIFRoZSBzZXNzaW9uIGRhdGEgY29udGFpbmluZyBhY2Nlc3NUb2tlbnMgYXJyYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtudW1iZXJ9IG9wdGlvbnMuc2NvcGUgLSBUaGUgc2NvcGUgdG8gbWF0Y2ggYWdhaW5zdCAoc3BhY2Utc2VwYXJhdGVkIHN0cmluZykuXG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5hdWRpZW5jZSAtIFRoZSBhdWRpZW5jZSB0byBtYXRjaCBhZ2FpbnN0LlxuICogQHBhcmFtIHtcInJlcXVlc3RlZFNjb3BlXCIgfCBcInNjb3BlXCJ9IFtvcHRpb25zLm1hdGNoTW9kZT1cInJlcXVlc3RlZFNjb3BlXCJdIC0gVGhlIG1vZGUgdG8gdXNlIGZvciBtYXRjaGluZyBzY29wZXMuXG4gKiBAcmV0dXJucyBUaGUgYmVzdCBtYXRjaGluZyBBY2Nlc3NUb2tlblNldCwgb3IgdW5kZWZpbmVkIGlmIG5vIG1hdGNoIGlzIGZvdW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZEFjY2Vzc1Rva2VuU2V0KHNlc3Npb25EYXRhLCBvcHRpb25zKSB7XG4gICAgY29uc3QgbWF0Y2hNb2RlID0gb3B0aW9ucy5tYXRjaE1vZGUgPz8gXCJyZXF1ZXN0ZWRTY29wZVwiO1xuICAgIGNvbnN0IGFjY2Vzc1Rva2VuU2V0cyA9IHNlc3Npb25EYXRhPy5hY2Nlc3NUb2tlbnM7XG4gICAgLy8gMS4gV2hlbiB0aGVyZSBhcmUgbm8gYWNjZXNzIHRva2Vucywgd2UgY2FuIGV4aXQgZWFybHkuXG4gICAgaWYgKCFhY2Nlc3NUb2tlblNldHMgfHwgYWNjZXNzVG9rZW5TZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIDIuIEZpbHRlciB0aGUgbGlzdCB0byBmaW5kIGFsbCBBY2Nlc3NUb2tlblNldCdzIHRoYXQgYXJlIHZhbGlkIG1hdGNoZXMuXG4gICAgLy8gQSB2YWxpZCBtYXRjaCdzIGF1ZGllbmNlIG11c3QgbWF0Y2ggdGhlIHByb3ZpZGVkIGBvcHRpb25zLmF1ZGllbmNlYCxcbiAgICAvLyBhbmQgaXRzIHNjb3BlIG11c3QgY29udGFpbiBhbGwgaXRlbXMgZnJvbSBgb3B0aW9ucy5zY29wZWAuXG4gICAgY29uc3QgYWxsTWF0Y2hlcyA9IGFjY2Vzc1Rva2VuU2V0cy5maWx0ZXIoKGFjY2Vzc1Rva2VuU2V0KSA9PiB7XG4gICAgICAgIHJldHVybiAoYWNjZXNzVG9rZW5TZXQuYXVkaWVuY2UgPT09IG9wdGlvbnMuYXVkaWVuY2UgJiZcbiAgICAgICAgICAgIGNvbXBhcmVTY29wZXMobWF0Y2hNb2RlID09PSBcInNjb3BlXCJcbiAgICAgICAgICAgICAgICA/IGFjY2Vzc1Rva2VuU2V0LnNjb3BlXG4gICAgICAgICAgICAgICAgOiAoYWNjZXNzVG9rZW5TZXQucmVxdWVzdGVkU2NvcGUgPz8gYWNjZXNzVG9rZW5TZXQuc2NvcGUpLCBvcHRpb25zLnNjb3BlLCB7IHN0cmljdDogbWF0Y2hNb2RlID09PSBcInNjb3BlXCIgfSkpO1xuICAgIH0pO1xuICAgIC8vIElmIG5vIHBvdGVudGlhbCBtYXRjaGVzIHdlcmUgZm91bmQsIHdlIGNhbiBleGl0IGVhcmx5LlxuICAgIGlmIChhbGxNYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIDMuIFNvcnQgdGhlIHZhbGlkIG1hdGNoZXMgdG8gZmluZCB0aGUgYmVzdCBvbmUuXG4gICAgLy8gVGhlIGJlc3QgbWF0Y2ggaXMgdGhlIG9uZSB3aXRoIHRoZSBzbWFsbGVzdCBzY29wZSBhcnJheSwgYXMgaXQgaGFzIHRoZSBmZXdlc3RcbiAgICAvLyBleHRyYSBwZXJtaXNzaW9ucy4gQW4gZXhhY3QgbWF0Y2ggd2lsbCBuYXR1cmFsbHkgYmUgc29ydGVkIGZpcnN0LlxuICAgIC8vIFRoaXMgYWxzbyB3b3JrcyBmb3IgbnVsbC91bmRlZmluZWQgc2NvcGVzLCBhcyB0aGV5IHdvdWxkIGhhdmUgYmVlbiBtYXRjaGVkXG4gICAgLy8gYWdhaW5zdCBhIG51bGwvdW5kZWZpbmVkIGBvcHRpb25zLnNjb3BlYCBhbmQgd2lsbCBhbGwgYmUgZXF1YWxseSB2YWxpZC5cbiAgICAvLyBOb3RlOiBUaGlzIHNvcnRpbmcgYWxnb3JpdGhtIGFsc28gdGFrZXMgY2FyZSBvZiBkdXBsaWNhdGUgc2NvcGVzLCBhcyB0aGV5IHdpbGxcbiAgICAvLyBiZSBjb252ZXJ0ZWQgdG8gYSBTZXQgYW5kIHRodXMgaGF2ZSB0aGUgc2FtZSBzaXplIGFzIGEgbm9uLWR1cGxpY2F0ZSBzY29wZSBhcnJheS5cbiAgICBhbGxNYXRjaGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3QgYVNjb3Blc1VuaXF1ZSA9IG5ldyBTZXQocGFyc2VTY29wZXNUb0FycmF5KGEuc2NvcGUpKTtcbiAgICAgICAgY29uc3QgYlNjb3Blc1VuaXF1ZSA9IG5ldyBTZXQocGFyc2VTY29wZXNUb0FycmF5KGIuc2NvcGUpKTtcbiAgICAgICAgcmV0dXJuIGFTY29wZXNVbmlxdWUuc2l6ZSAtIGJTY29wZXNVbmlxdWUuc2l6ZTtcbiAgICB9KTtcbiAgICAvLyBUaGUgZmlyc3QgaXRlbSBpbiB0aGUgc29ydGVkIGxpc3QgaXMgdGhlIGJlc3QgcG9zc2libGUgbWF0Y2guXG4gICAgcmV0dXJuIGFsbE1hdGNoZXNbMF07XG59XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/token-set-helpers.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/url-helpers.js":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/url-helpers.js ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   toSafeRedirect: () => (/* binding */ toSafeRedirect)\n/* harmony export */ });\nfunction toSafeRedirect(dangerousRedirect, safeBaseUrl) {\n    let url;\n    try {\n        url = new URL(dangerousRedirect, safeBaseUrl);\n    }\n    catch (e) {\n        return undefined;\n    }\n    if (url.origin === safeBaseUrl.origin) {\n        return url;\n    }\n    return undefined;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL3VybC1oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pdHN1eW9zaGkvRGVza3RvcC9hdXRoLXRlc3Qvbm9kZV9tb2R1bGVzLy5wbnBtL0BhdXRoMCtuZXh0anMtYXV0aDBANC4xMS4wX25leHRAMTYuMC4wX0BiYWJlbCtjb3JlQDcuMjguNV9yZWFjdC1kb21AMTkuMi4wX3JlYWN0QDE5LjIuMF9iODlmZDc2MWUyYjEwMzg1OWEyOTFhZTlhYzA0NWQ1NS9ub2RlX21vZHVsZXMvQGF1dGgwL25leHRqcy1hdXRoMC9kaXN0L3V0aWxzL3VybC1oZWxwZXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiB0b1NhZmVSZWRpcmVjdChkYW5nZXJvdXNSZWRpcmVjdCwgc2FmZUJhc2VVcmwpIHtcbiAgICBsZXQgdXJsO1xuICAgIHRyeSB7XG4gICAgICAgIHVybCA9IG5ldyBVUkwoZGFuZ2Vyb3VzUmVkaXJlY3QsIHNhZmVCYXNlVXJsKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKHVybC5vcmlnaW4gPT09IHNhZmVCYXNlVXJsLm9yaWdpbikge1xuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/dist/utils/url-helpers.js\n");

/***/ }),

/***/ "(rsc)/../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/package.json":
/*!*******************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/@auth0+nextjs-auth0@4.11.0_next@16.0.0_@babel+core@7.28.5_react-dom@19.2.0_react@19.2.0_b89fd761e2b103859a291ae9ac045d55/node_modules/@auth0/nextjs-auth0/package.json ***!
  \*******************************************************************************************************************************************************************************************************/
/***/ ((module) => {

module.exports = /*#__PURE__*/JSON.parse('{"name":"@auth0/nextjs-auth0","version":"4.11.0","description":"Auth0 Next.js SDK","type":"module","repository":{"type":"git","url":"git+https://github.com/auth0/nextjs-auth0.git"},"keywords":["auth0","next.js","react","oidc","authentication","vercel"],"author":"Auth0 (https://auth0.com)","license":"MIT","bugs":{"url":"https://github.com/auth0/nextjs-auth0/issues"},"homepage":"https://github.com/auth0/nextjs-auth0#readme","devDependencies":{"@eslint/js":"^9.20.0","@ianvs/prettier-plugin-sort-imports":"^4.3.1","@playwright/test":"^1.48.2","@stylistic/eslint-plugin-ts":"^3.1.0","@testing-library/react":"^16.3.0","@types/node":"^22.8.6","@types/react":"*","@types/react-dom":"*","@vitest/coverage-v8":"2.1.9","eslint":"^9.20.0","eslint-config-prettier":"10.1.8","eslint-plugin-prettier":"5.5.4","eslint-plugin-react":"^7.37.4","globals":"^15.14.0","jsdom":"^26.1.0","msw":"^2.7.5","next":"15.2.3","prettier":"^3.3.3","typedoc":"^0.28.4","typescript":"^5.6.3","typescript-eslint":"^8.23.0","vite":"^5.4.11","vitest":"^2.1.4"},"peerDependencies":{"next":"^14.2.25 || ^15.2.3","react":"^18.0.0 || ^19.0.0 || ^19.0.0-0","react-dom":"^18.0.0 || ^19.0.0 || ^19.0.0-0"},"exports":{".":{"default":"./dist/client/index.js"},"./client":{"default":"./dist/client/index.js"},"./server":{"default":"./dist/server/index.js"},"./errors":{"default":"./dist/errors/index.js"},"./types":{"default":"./dist/types/index.d.ts"},"./testing":{"default":"./dist/testing/index.js"}},"dependencies":{"@edge-runtime/cookies":"^5.0.1","@panva/hkdf":"^1.2.1","jose":"^6.0.11","oauth4webapi":"^3.8.2","openid-client":"^6.8.0","swr":"^2.2.5"},"publishConfig":{"access":"public"},"typesVersions":{"*":{"testing":["./dist/testing/index.d.ts"],"types":["./dist/types/index.d.ts"],"server":["./dist/server/index.d.ts"],"errors":["./dist/errors/index.d.ts"],"*":["./dist/client/*","./dist/client/index.d.ts"]}},"files":["dist"],"scripts":{"build":"tsc","build:watch":"tsc -w","test:unit":"vitest --run","test:coverage":"vitest run --run --coverage","test:e2e":"playwright test","install:examples":"pnpm install --filter ./examples/with-next-intl --shamefully-hoist && pnpm install --filter ./examples/with-shadcn --shamefully-hoist","docs":"typedoc","lint":"tsc --noEmit && eslint ./src","lint:fix":"tsc --noEmit && eslint --fix ./src"}}');

/***/ })

};
;